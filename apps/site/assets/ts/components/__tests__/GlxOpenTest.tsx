import { render, screen } from "@testing-library/react";
import React from "react";
import * as renderSvg from "../../helpers/render-svg";
import * as useIsGlxOpen from "../../hooks/useIsGlxOpen";
import GlxOpen from "../GlxOpen";

describe("GlxOpen", () => {
  it("should display now open if it is open", () => {
    jest
      .spyOn(renderSvg, "default")
      .mockImplementation(() => <div>Test SVG</div>);
    jest.spyOn(useIsGlxOpen, "default").mockImplementation(() => [true] as any);
    render(<GlxOpen pageType="station-page" stopId="1" />);
    expect(screen.queryByText("STATION NOW OPEN")).not.toBeNull();
  });

  it("should not display the svg on the schedule finder page ", () => {
    jest
      .spyOn(renderSvg, "default")
      .mockImplementation(() => <div>Test SVG</div>);
    jest.spyOn(useIsGlxOpen, "default").mockImplementation(() => [true] as any);
    render(<GlxOpen pageType="schedule-finder" stopId="1" />);
    expect(screen.queryByText("NOW OPEN")).not.toBeNull();
    expect(screen.queryByText("Test SVG")).toBeNull();
  });
});
