{"version":3,"file":"./schedule-872acf9ecf5727e867cd899de4d9bc9f.js","mappings":"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","sources":["webpack://site-dotcom/webpack/runtime/chunk loaded","webpack://site-dotcom/webpack/runtime/create fake namespace object","webpack://site-dotcom/./ts/app/channels.ts","webpack://site-dotcom/./ts/components/Alerts.tsx","webpack://site-dotcom/./ts/components/ExpandableBlock.tsx","webpack://site-dotcom/./ts/components/GlxOpen.tsx","webpack://site-dotcom/./ts/components/Loading.tsx","webpack://site-dotcom/./ts/components/MatchHighlight.tsx","webpack://site-dotcom/./ts/components/Modal.tsx","webpack://site-dotcom/./ts/components/SearchBox.tsx","webpack://site-dotcom/./ts/helpers/aria-props.ts","webpack://site-dotcom/./ts/helpers/css.ts","webpack://site-dotcom/./ts/helpers/date.ts","webpack://site-dotcom/./ts/helpers/fetch-json.ts","webpack://site-dotcom/./ts/helpers/fetch.ts","webpack://site-dotcom/./ts/helpers/icon.tsx","webpack://site-dotcom/./ts/helpers/keyboard-events-react.ts","webpack://site-dotcom/./ts/helpers/keyboard-events.ts","webpack://site-dotcom/./ts/helpers/prediction-helpers.tsx","webpack://site-dotcom/./ts/helpers/render-fa.tsx","webpack://site-dotcom/./ts/helpers/render-svg.tsx","webpack://site-dotcom/./ts/helpers/routes.ts","webpack://site-dotcom/./ts/helpers/service.ts","webpack://site-dotcom/./ts/helpers/stop-tree.ts","webpack://site-dotcom/./ts/helpers/text.ts","webpack://site-dotcom/./ts/helpers/use-await-interval.ts","webpack://site-dotcom/./ts/helpers/use-fetch.ts","webpack://site-dotcom/./ts/helpers/use-provider.ts","webpack://site-dotcom/./ts/hooks/useChannel.ts","webpack://site-dotcom/./ts/hooks/useDirectionChangeEvent.ts","webpack://site-dotcom/./ts/hooks/useHoursOfOperation.ts","webpack://site-dotcom/./ts/hooks/useIsGlxOpen.ts","webpack://site-dotcom/./ts/hooks/useRealtime.ts","webpack://site-dotcom/./ts/leaflet/bounds.ts","webpack://site-dotcom/./ts/leaflet/components/Map.tsx","webpack://site-dotcom/./ts/leaflet/icon.ts","webpack://site-dotcom/./ts/models/alert.ts","webpack://site-dotcom/./ts/models/prediction.ts","webpack://site-dotcom/./ts/models/route.ts","webpack://site-dotcom/./ts/models/vehicle.ts","webpack://site-dotcom/./ts/projects/components/RouteIcon.tsx","webpack://site-dotcom/./ts/schedule-entry.ts","webpack://site-dotcom/./ts/schedule/components/AdditionalLineInfo.tsx","webpack://site-dotcom/./ts/schedule/components/Connections.tsx","webpack://site-dotcom/./ts/schedule/components/ContentTeasers.tsx","webpack://site-dotcom/./ts/schedule/components/DefaultHoursOfOperation.tsx","webpack://site-dotcom/./ts/schedule/components/Fares.tsx","webpack://site-dotcom/./ts/schedule/components/GreenLineScheduleLinks.tsx","webpack://site-dotcom/./ts/schedule/components/HoursOfOperation.tsx","webpack://site-dotcom/./ts/schedule/components/Map.tsx","webpack://site-dotcom/./ts/schedule/components/PDFSchedules.tsx","webpack://site-dotcom/./ts/schedule/components/RapidTransitHoursOfOperation.tsx","webpack://site-dotcom/./ts/schedule/components/ScheduleDirection.tsx","webpack://site-dotcom/./ts/schedule/components/ScheduleFinder.tsx","webpack://site-dotcom/./ts/schedule/components/ScheduleLoader.tsx","webpack://site-dotcom/./ts/schedule/components/UpcomingHolidays.tsx","webpack://site-dotcom/./ts/schedule/components/direction/BusMenu.tsx","webpack://site-dotcom/./ts/schedule/components/direction/GreenLineMenu.tsx","webpack://site-dotcom/./ts/schedule/components/direction/ScheduleDirectionButton.tsx","webpack://site-dotcom/./ts/schedule/components/direction/ScheduleDirectionMenu.tsx","webpack://site-dotcom/./ts/schedule/components/direction/menu-helpers.ts","webpack://site-dotcom/./ts/schedule/components/direction/reducer.ts","webpack://site-dotcom/./ts/schedule/components/line-diagram/CrowdingPill.tsx","webpack://site-dotcom/./ts/schedule/components/line-diagram/ExpandableBranch.tsx","webpack://site-dotcom/./ts/schedule/components/line-diagram/LineDiagram.tsx","webpack://site-dotcom/./ts/schedule/components/line-diagram/LineDiagramWithStops.tsx","webpack://site-dotcom/./ts/schedule/components/line-diagram/LiveCrowdingIcon.tsx","webpack://site-dotcom/./ts/schedule/components/line-diagram/StopCard.tsx","webpack://site-dotcom/./ts/schedule/components/line-diagram/StopConnections.tsx","webpack://site-dotcom/./ts/schedule/components/line-diagram/StopFeatures.tsx","webpack://site-dotcom/./ts/schedule/components/line-diagram/StopPredictions.tsx","webpack://site-dotcom/./ts/schedule/components/line-diagram/VehicleIcons.tsx","webpack://site-dotcom/./ts/schedule/components/line-diagram/graphics/Diagram.tsx","webpack://site-dotcom/./ts/schedule/components/line-diagram/graphics/Line.tsx","webpack://site-dotcom/./ts/schedule/components/line-diagram/graphics/Merges.tsx","webpack://site-dotcom/./ts/schedule/components/line-diagram/graphics/Stop.tsx","webpack://site-dotcom/./ts/schedule/components/line-diagram/graphics/graphic-helpers.tsx","webpack://site-dotcom/./ts/schedule/components/line-diagram/graphics/useTreeStopPositions.ts","webpack://site-dotcom/./ts/schedule/components/line-diagram/line-diagram-helpers.ts","webpack://site-dotcom/./ts/schedule/components/schedule-finder/OriginListItem.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/OriginModalContent.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/ScheduleFinderForm.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/ScheduleFinderModal.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/ScheduleModalContent.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/SelectContainer.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/daily-schedule/AccordionRow.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/daily-schedule/DailySchedule.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/daily-schedule/DailyScheduleSubway.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/daily-schedule/ScheduleTable.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/daily-schedule/ServiceOptGroup.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/daily-schedule/TableRow.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/daily-schedule/TripDetails.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/daily-schedule/TripStop.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/upcoming-departures/TripDetails.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/upcoming-departures/TripStop.tsx","webpack://site-dotcom/./ts/schedule/components/schedule-finder/upcoming-departures/UpcomingDepartures.tsx","webpack://site-dotcom/./ts/schedule/helpers/hoursOfOperationHelpers.tsx","webpack://site-dotcom/./ts/schedule/schedule-loader.tsx","webpack://site-dotcom/./ts/schedule/store/ScheduleStore.tsx","webpack://site-dotcom/./ts/stop/components/PillLink.tsx","webpack://site-dotcom/./ts/stop/components/RoutePillList.tsx","webpack://site-dotcom/./static/images/glx-logo.svg","webpack://site-dotcom/./static/images/icon-accessible-small.svg","webpack://site-dotcom/./static/images/icon-alerts-triangle.svg","webpack://site-dotcom/./static/images/icon-bike.svg","webpack://site-dotcom/./static/images/icon-blue-line-default.svg","webpack://site-dotcom/./static/images/icon-cancelled-default.svg","webpack://site-dotcom/./static/images/icon-change-direction.svg","webpack://site-dotcom/./static/images/icon-checkmark.svg","webpack://site-dotcom/./static/images/icon-crowding.svg","webpack://site-dotcom/./static/images/icon-down-arrow.svg","webpack://site-dotcom/./static/images/icon-elevator.svg","webpack://site-dotcom/./static/images/icon-escalator.svg","webpack://site-dotcom/./static/images/icon-fares.svg","webpack://site-dotcom/./static/images/icon-green-line-b-small.svg","webpack://site-dotcom/./static/images/icon-green-line-c-small.svg","webpack://site-dotcom/./static/images/icon-green-line-d-small.svg","webpack://site-dotcom/./static/images/icon-green-line-e-small.svg","webpack://site-dotcom/./static/images/icon-green-line-small.svg","webpack://site-dotcom/./static/images/icon-live-clock.svg","webpack://site-dotcom/./static/images/icon-mattapan-line-small.svg","webpack://site-dotcom/./static/images/icon-mode-bus-small.svg","webpack://site-dotcom/./static/images/icon-mode-commuter-rail-small.svg","webpack://site-dotcom/./static/images/icon-mode-ferry-small.svg","webpack://site-dotcom/./static/images/icon-mode-subway-default.svg","webpack://site-dotcom/./static/images/icon-orange-line-small.svg","webpack://site-dotcom/./static/images/icon-pdf-default.svg","webpack://site-dotcom/./static/images/icon-red-line-small.svg","webpack://site-dotcom/./static/images/icon-schedule-finder.svg","webpack://site-dotcom/./static/images/icon-search-reverse-default.svg","webpack://site-dotcom/./static/images/icon-shuttle-default.svg","webpack://site-dotcom/./static/images/icon-silver-line-small.svg","webpack://site-dotcom/./static/images/icon-snow-default.svg","webpack://site-dotcom/./static/images/icon-vehicle-bordered-expanded.svg","webpack://site-dotcom/webpack/bootstrap","webpack://site-dotcom/webpack/runtime/amd define","webpack://site-dotcom/webpack/runtime/compat get default export","webpack://site-dotcom/webpack/runtime/define property getters","webpack://site-dotcom/webpack/runtime/global","webpack://site-dotcom/webpack/runtime/harmony module decorator","webpack://site-dotcom/webpack/runtime/hasOwnProperty shorthand","webpack://site-dotcom/webpack/runtime/make namespace object","webpack://site-dotcom/webpack/runtime/node module decorator","webpack://site-dotcom/webpack/runtime/runtimeId","webpack://site-dotcom/webpack/runtime/jsonp chunk loading","webpack://site-dotcom/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","import { Socket, Channel } from \"phoenix\";\n\ndeclare global {\n  interface Window {\n    channels: { [id: string]: Channel };\n    socket: Socket;\n  }\n}\n\ntype UpdateEventName = \"reset\" | \"add\" | \"update\";\n\ninterface UpdateEvent<DataType> {\n  event: UpdateEventName;\n  data: DataType;\n}\n\ninterface RemoveEvent {\n  event: \"remove\";\n  data: string[];\n}\n\nexport type SocketEvent<DataType> = UpdateEvent<DataType> | RemoveEvent;\n\nexport const isVehicleChannel = (channelId: string): boolean =>\n  (channelId.includes(\"vehicles:\") || channelId.includes(\"vehicles-v2:\")) &&\n  !channelId.includes(\":remove\");\n\nconst joinChannel = <T>(\n  channelId: string,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  handleJoin?: (event: any) => void\n): void => {\n  if (!window.socket) return;\n\n  if (!window.channels[channelId]) {\n    window.channels[channelId] = window.socket.channel(channelId, {});\n  }\n\n  const channel = window.channels[channelId];\n\n  if (![\"joined\", \"joining\"].includes(channel.state)) {\n    channel\n      .join()\n      .receive(\"error\", ({ reason }) => {\n        /* eslint-disable no-console */\n        console.error(`failed to join ${channelId}`, reason);\n        const errorEvent = new CustomEvent<{ error: string }>(channelId, {\n          detail: { error: reason }\n        });\n        document.dispatchEvent(errorEvent);\n      })\n      .receive(\"ok\", event => {\n        console.log(`success joining ${channelId}`);\n        if (handleJoin && event) {\n          handleJoin(event);\n        }\n        if (isVehicleChannel(channelId)) {\n          const [, route_id, direction_id] = channelId.split(\":\");\n          channel.push(\"init\", { route_id, direction_id });\n        }\n      });\n  }\n\n  channel.on(\"data\", (data: T) => {\n    const event = new CustomEvent<T>(channelId, { detail: data });\n    document.dispatchEvent(event);\n  });\n\n  channel.onError((reason: string) => {\n    console.error(`error on channel ${channelId} : ${reason}`);\n    /* eslint-enable no-console */\n    const errorEvent = new CustomEvent<{ error: string }>(channelId, {\n      detail: { error: reason }\n    });\n    document.dispatchEvent(errorEvent);\n  });\n\n  if (isVehicleChannel(channelId)) {\n    const [baseChannel] = channelId.split(\":\");\n    joinChannel(`${baseChannel}:remove`);\n  }\n};\n\nconst leaveChannel = (id: string): void => {\n  if (window.channels && window.channels[id]) {\n    window.channels[id].off(\"data\");\n    window.channels[id].leave();\n    delete window.channels[id];\n  }\n\n  if (isVehicleChannel(id)) {\n    const [baseChannel] = id.split(\":\");\n    leaveChannel(`${baseChannel}:remove`);\n  }\n};\n\nconst setupChannels = (): void => {\n  window.socket = new Socket(\"/socket\", {});\n  window.socket.onClose(event => {\n    if (event.type === \"close\" && !event.wasClean) {\n      // eslint-disable-next-line no-console\n      console.log(\n        \"Socket was forced closed by the browser -- reloading to establish WebSocket connection.\"\n      );\n      window.location.reload();\n    }\n  });\n  window.socket.connect();\n  window.channels = {};\n\n  const joinAllChannels = (): void => {\n    document.querySelectorAll(\"[data-channel]\").forEach(el => {\n      const channelId = el.getAttribute(\"data-channel\");\n      if (channelId) joinChannel(channelId);\n    });\n  };\n\n  document.addEventListener(\"turbolinks:load\", joinAllChannels);\n\n  // leave subscribed channels when navigating away from a page.\n  const leaveAllChannels = (): void => {\n    Object.keys(window.channels).forEach(id => leaveChannel(id));\n  };\n  document.addEventListener(\"turbolinks:before-render\", leaveAllChannels);\n};\n\nexport { joinChannel, leaveChannel };\nexport default setupChannels;\n","import React, { ReactElement, useState } from \"react\";\nimport { Alert as AlertType, Lifecycle } from \"../__v3api\";\nimport { handleReactEnterKeyPress } from \"../helpers/keyboard-events-react\";\nimport { caret } from \"../helpers/icon\";\nimport renderSVG from \"../helpers/render-svg\";\nimport shuttleIcon from \"../../static/images/icon-shuttle-default.svg\";\nimport cancelIcon from \"../../static/images/icon-cancelled-default.svg\";\nimport snowIcon from \"../../static/images/icon-snow-default.svg\";\nimport alertIcon from \"../../static/images/icon-alerts-triangle.svg\";\n\ninterface Props {\n  alerts: AlertType[];\n}\n\nconst alertClassNames = (\n  { priority, description }: AlertType,\n  expanded: boolean\n): string => {\n  const classNames = `c-alert-item c-alert-item--${priority}`;\n  if (description) {\n    if (expanded) {\n      return `${classNames} c-alert-item--expandable c-alert-item--open`;\n    }\n    return `${classNames} c-alert-item--expandable c-alert-item--closed`;\n  }\n  return classNames;\n};\n\nexport const iconForAlert = ({\n  priority,\n  effect\n}: AlertType): ReactElement<HTMLElement> | null => {\n  if (priority === \"low\") return null;\n  if (priority === \"system\")\n    return renderSVG(\"c-svg__icon-alerts-triangle\", alertIcon);\n  switch (effect) {\n    case \"suspension\":\n    case \"cancellation\":\n      return renderSVG(\"c-svg__icon-cancelled-default\", cancelIcon);\n    case \"snow_route\":\n      return renderSVG(\"c-svg__icon-snow-default\", snowIcon);\n    case \"shuttle\":\n      return renderSVG(\"c-svg__icon-shuttle-default\", shuttleIcon);\n    default:\n      return renderSVG(\"c-svg__icon-alerts-triangle\", alertIcon);\n  }\n};\n\nconst humanLifecycle = (lifecycle: Lifecycle): string | null => {\n  switch (lifecycle) {\n    case \"new\":\n    case \"unknown\":\n      return null;\n    case \"upcoming\":\n    case \"ongoing_upcoming\":\n      return \"Upcoming\";\n    case \"ongoing\":\n      return \"Ongoing\";\n    default:\n      return null;\n  }\n};\n\nexport const humanLabelForAlert = ({\n  effect,\n  severity,\n  lifecycle\n}: AlertType): string | null => {\n  if (effect === \"delay\") {\n    switch (severity) {\n      case 0:\n      case 1:\n      case 2:\n        return null;\n      case 3:\n        return \"up to 10 minutes\";\n      case 4:\n        return \"up to 15 minutes\";\n      case 5:\n        return \"up to 20 minutes\";\n      case 6:\n        return \"up to 25 minutes\";\n      case 7:\n        return \"up to 30 minutes\";\n      case 8:\n        return \"30+ minutes\";\n      case 9:\n        return \"more than an hour\";\n      default:\n        return humanLifecycle(lifecycle);\n    }\n  }\n  return humanLifecycle(lifecycle);\n};\n\nexport const alertLabel = (alert: AlertType): ReactElement<HTMLElement> => {\n  const alertClasses = [\"u-small-caps\", \"c-alert-item__badge\"];\n  if (alert.priority === \"system\") {\n    alertClasses.push(\"c-alert-item__badge--system\");\n  }\n  if (\n    alert.lifecycle === \"upcoming\" ||\n    alert.lifecycle === \"ongoing_upcoming\"\n  ) {\n    alertClasses.push(\"c-alert-item__badge--upcoming\");\n  }\n  return (\n    <span className={alertClasses.join(\" \")}>{humanLabelForAlert(alert)}</span>\n  );\n};\n\nexport const effectNameForAlert = (alert: AlertType): string =>\n  alert.effect\n    .split(\"_\")\n    .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(\" \");\n\nconst caretIcon = (\n  noDescription: boolean,\n  expanded: boolean\n): ReactElement<HTMLElement> | null => {\n  if (noDescription) return null;\n  return caret(\"c-expandable-block__header-caret--black\", expanded);\n};\n\nconst alertDescription = (alert: AlertType): ReactElement<HTMLElement> => (\n  <div\n    className={`c-alert-item__bottom c-alert-item__buttom--${alert.priority}`}\n    // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n    tabIndex={0}\n    role=\"region\"\n    aria-labelledby={`alert-${alert.id}`}\n    ref={panel => panel && panel.focus()}\n  >\n    <div className=\"c-alert-item__description\">\n      <div\n        // eslint-disable-next-line react/no-danger\n        dangerouslySetInnerHTML={{\n          __html: alert.description\n        }}\n      />\n      <div className=\"c-alert-item__updated\">{alert.updated_at}</div>\n    </div>\n  </div>\n);\n\nexport const Alert = ({\n  alert\n}: {\n  alert: AlertType;\n}): ReactElement<HTMLElement> => {\n  const [expanded, toggleExpanded] = useState(false);\n  const onClick = (): void => toggleExpanded(!expanded);\n\n  const alertUrl = alert.url ? alert.url : \"\";\n\n  // remove [http:// | https:// | www.] from alert URL:\n  let strippedAlertUrl = alertUrl.replace(/(https?:\\/\\/)?(www\\.)?/i, \"\");\n\n  // capitalize 'mbta' (special case):\n  strippedAlertUrl = strippedAlertUrl.replace(/mbta/gi, \"MBTA\");\n\n  const headerContent = alert.url\n    ? `${alert.header}<span>&nbsp;</span><a href=\"${alert.url}\" target=\"_blank\">${strippedAlertUrl}</a>`\n    : alert.header;\n\n  return (\n    <li\n      id={`alert-${alert.id}`}\n      tabIndex={0}\n      className={alertClassNames(alert, expanded)}\n      onClick={onClick}\n      onKeyPress={e => handleReactEnterKeyPress(e, onClick)}\n      aria-expanded={expanded}\n      // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n      role=\"button\"\n    >\n      <div className=\"c-alert-item__icon\">{iconForAlert(alert)}</div>\n      <div className=\"c-alert-item__top\">\n        <div className=\"c-alert-item__top-text-container\">\n          <div className=\"c-alert-item__effect\">\n            {`${effectNameForAlert(alert)} `}\n            {humanLabelForAlert(alert) ? alertLabel(alert) : null}\n          </div>\n          {/* eslint-disable-next-line react/no-danger */}\n          <div dangerouslySetInnerHTML={{ __html: headerContent }} />\n        </div>\n        {alert.description && (\n          <div className=\"c-alert-item__top-caret-container\">\n            {caretIcon(alert.description === \"\", expanded)}\n          </div>\n        )}\n      </div>\n      {expanded && alert.description ? alertDescription(alert) : null}\n      {/* No javascript support */}\n      {alert.description ? (\n        <noscript>{alertDescription(alert)}</noscript>\n      ) : null}\n    </li>\n  );\n};\n\nconst Alerts = ({ alerts }: Props): ReactElement<HTMLElement> => (\n  <div className=\"container\">\n    <div className=\"page-section\">\n      <ul className=\"c-alert-group\">\n        {alerts.map((alert: AlertType) => (\n          <Alert key={alert.id} alert={alert} />\n        ))}\n      </ul>\n    </div>\n  </div>\n);\n\nexport default Alerts;\n","import React, { ReactElement, useState } from \"react\";\nimport { isString } from \"lodash\";\nimport { handleReactEnterKeyPress } from \"../helpers/keyboard-events-react\";\nimport renderSvg from \"../helpers/render-svg\";\nimport renderFa from \"../helpers/render-fa\";\nimport { caret } from \"../helpers/icon\";\n\nexport interface ExpandableBlockHeader {\n  text: string | ReactElement<HTMLElement>;\n  iconSvgText: string | null;\n  classOverride?: string;\n}\n\n// If dispatch is provided in Props, the block will not\n// track its own state -- the parent is fully responsible\n// for tracking the expanded/collapsed state.\n// If dispatch is not provided, the block will\n// track its own state.\ninterface Props {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  dispatch?: React.Dispatch<any>;\n  notifyExpanded?: (isExpanded: boolean) => void;\n  initiallyExpanded: boolean;\n  initiallyFocused?: boolean;\n  header: ExpandableBlockHeader;\n  children: ReactElement<HTMLElement>;\n  id: string;\n  panelClassName?: string;\n  preventScroll?: boolean;\n}\n\ninterface State {\n  expanded: boolean;\n  focused?: boolean;\n}\n\nexport interface ClickExpandableBlockAction {\n  type: \"CLICK_EXPANDABLE_BLOCK\";\n  payload: {\n    expanded: boolean;\n    focused: boolean;\n    id: string;\n  };\n}\n\nconst ExpandableBlock = (props: Props): ReactElement<HTMLElement> => {\n  const {\n    header: { text, iconSvgText, classOverride },\n    dispatch,\n    notifyExpanded,\n    initiallyExpanded,\n    initiallyFocused,\n    children,\n    id,\n    panelClassName,\n    preventScroll\n  } = props;\n\n  const initialState = {\n    expanded: initiallyExpanded,\n    focused: initiallyFocused\n  };\n\n  const action: ClickExpandableBlockAction = {\n    type: \"CLICK_EXPANDABLE_BLOCK\",\n    payload: {\n      expanded: initiallyExpanded === true,\n      focused: initiallyFocused === true,\n      id\n    }\n  };\n\n  const [hookedState, toggleExpanded] = useState(initialState);\n  const { state, onClick } = dispatch\n    ? {\n        state: initialState,\n        onClick: () => dispatch(action)\n      }\n    : {\n        state: hookedState,\n        onClick: () => {\n          const expanded = !hookedState.expanded;\n          toggleExpanded({ expanded, focused: true });\n          if (notifyExpanded) notifyExpanded(expanded);\n        }\n      };\n  const { expanded, focused }: State = state;\n  const headerId = `header-${id}`;\n  const panelId = `panel-${id}`;\n  const iconHelper = iconSvgText?.slice(0, 3) !== \"fa-\" ? renderSvg : renderFa;\n  const classOverrideString = isString(classOverride) ? classOverride : \"\";\n\n  return (\n    <>\n      <h3\n        className={`c-expandable-block__header ${classOverrideString}`}\n        tabIndex={0}\n        id={headerId}\n        aria-expanded={expanded}\n        aria-controls={panelId}\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n        role=\"button\"\n        onClick={onClick}\n        onKeyPress={e => handleReactEnterKeyPress(e, onClick)}\n      >\n        {iconSvgText\n          ? iconHelper(\"c-expandable-block__header-icon\", iconSvgText)\n          : null}\n        <div className=\"c-expandable-block__header-text\">\n          {text}\n          {caret(\"c-expandable-block__header-caret\", expanded)}\n        </div>\n      </h3>\n      {expanded ? (\n        <div\n          className={`c-expandable-block__panel ${panelClassName || \"\"}`}\n          // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n          tabIndex={0}\n          role=\"region\"\n          id={panelId}\n          aria-labelledby={headerId}\n          ref={panel =>\n            panel &&\n            focused &&\n            panel.focus({\n              preventScroll: !!preventScroll\n            })\n          }\n        >\n          {children}\n        </div>\n      ) : null}\n      {/* No javascript support */}\n      <noscript>\n        <style>{`#${headerId} { display: none; }`}</style>\n        <h3 className=\"c-expandable-block__header\">\n          {iconSvgText\n            ? renderSvg(\"c-expandable-block__header-icon\", iconSvgText)\n            : null}\n          {text}\n          {caret(\"c-expandable-block__header-caret\", true)}\n        </h3>\n        <div className=\"c-expandable-block__panel\" role=\"region\">\n          {children}\n        </div>\n      </noscript>\n    </>\n  );\n};\n\nexport default ExpandableBlock;\n","import React, { ReactElement } from \"react\";\nimport useIsGlxOpen from \"../hooks/useIsGlxOpen\";\nimport renderSvg from \"../helpers/render-svg\";\nimport glxLogo from \"../../static/images/glx-logo.svg\";\n\nconst glxLogoElement = (pageType: string): JSX.Element | null => {\n  if (pageType === \"schedule-finder\") return null;\n\n  return renderSvg(\"glx-logo\", glxLogo);\n};\n\nconst GlxOpen = ({\n  pageType,\n  stopId\n}: {\n  pageType: \"station-page\" | \"schedule-finder\" | \"line-diagram\";\n  stopId: string;\n}): ReactElement<HTMLElement> | null => {\n  const isGlxOpen = useIsGlxOpen(stopId)[0];\n  let textContent;\n\n  if (pageType === \"station-page\") {\n    textContent = \"STATION NOW OPEN\";\n  } else {\n    textContent = \"NOW OPEN\";\n  }\n\n  /* istanbul ignore else */\n  if (isGlxOpen) {\n    return (\n      <div className=\"glx-open-container\">\n        {glxLogoElement(pageType)}\n        <span className=\"glx-open-message\">{textContent}</span>\n      </div>\n    );\n  }\n\n  return null;\n};\n\nexport default GlxOpen;\n","import React, { ReactElement } from \"react\";\n\nconst Loading = (): ReactElement<HTMLElement> => (\n  <div className=\"c-spinner__container\">\n    <div className=\"c-spinner\">Loading...</div>\n  </div>\n);\n\nexport default Loading;\n","import React, { DetailedReactHTMLElement, useEffect, useState } from \"react\";\n\n// React.createElement is used as opposed to the dangerouslySetInnerHTML prop to\n// make the component contents easier to parse in testing\n\ninterface Props {\n  text: string;\n  matchQuery?: string;\n}\n\n// React component for highlighting matching text will wrap the first substring\n// matching the matchQuery in a <b></b> and return the HTML result\nconst MatchHighlight = ({\n  text,\n  matchQuery\n}: Props): DetailedReactHTMLElement<{}, HTMLElement> => {\n  const [childNodes, setChildNodes] = useState<\n    (DetailedReactHTMLElement<{}, HTMLElement> | string)[]\n  >([text]);\n\n  useEffect(() => {\n    if (matchQuery && matchQuery !== \"\") {\n      const matched = text.match(new RegExp(matchQuery, \"i\"));\n      if (matched && matched[0]) {\n        // split text on first instance of match only\n        const [precedingText, ...moreTexts] = text.split(matched[0]);\n        const subsequentText = moreTexts.join(matched[0]);\n        setChildNodes([\n          precedingText,\n          React.createElement(\"b\", { className: \"u-highlight\" }, matched[0]),\n          subsequentText\n        ]);\n      }\n    } else {\n      setChildNodes([text]);\n    }\n  }, [text, matchQuery, setChildNodes]);\n\n  return React.createElement(\"span\", {}, ...childNodes);\n};\n\nexport default MatchHighlight;\n","import React, {\n  MouseEvent,\n  ReactElement,\n  ReactNode,\n  useEffect,\n  useLayoutEffect,\n  useRef\n} from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { createFocusTrap } from \"focus-trap\";\nimport { handleReactExitKeyPress } from \"../helpers/keyboard-events-react\";\nimport {\n  AriaLabel,\n  AriaLabelledBy,\n  labelOrDescribedBy\n} from \"../helpers/aria-props\";\n\ninterface Props {\n  children: ReactNode;\n  closeText?: string | ReactElement<HTMLElement>;\n  role?: \"dialog\" | \"alertdialog\";\n  ariaLabel: AriaLabel | AriaLabelledBy;\n  focusElementId?: string; // a selector string to the DOM node that will receive focus when the model is first opened\n  className?: string;\n  closeModal: () => void;\n}\n\ninterface ModalContentProps {\n  children: ReactNode;\n  closeText: string | ReactElement<HTMLElement>;\n  role: string;\n  ariaLabel: AriaLabel | AriaLabelledBy;\n  closeModal: () => void;\n  focusElementId: string;\n  bodyPadding: string;\n  scrollBarPadding: number;\n  className?: string;\n}\n\nconst ModalContent = ({\n  children,\n  closeText,\n  closeModal,\n  role,\n  ariaLabel,\n  focusElementId,\n  bodyPadding,\n  scrollBarPadding,\n  className = \"\"\n}: ModalContentProps): ReactElement<HTMLElement> => {\n  const asideRef = useRef<HTMLElement>(null);\n  const onClickAway = (e: MouseEvent): void => {\n    if (e.target === asideRef.current) closeModal();\n  };\n\n  // In Chrome (and others?), swapping out the modal content doesn't reset the\n  // scroll position. Here we reset it manually whenever the content changes.\n  const scrollRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    if (scrollRef.current && scrollRef.current.scrollTo) {\n      scrollRef.current.scrollTo({ top: 0 });\n    }\n  }, [children]);\n\n  useEffect(() => {\n    document.addEventListener(\"turbolinks:before-visit\", closeModal, {\n      passive: true\n    });\n\n    return () =>\n      document.removeEventListener(\"turbolinks:before-visit\", closeModal);\n  }, [closeModal]);\n\n  useLayoutEffect(() => {\n    // Activate trap and disable scroll on background body\n    const trap = createFocusTrap(\"#modal-cover\", {\n      initialFocus: `#${focusElementId}`,\n      clickOutsideDeactivates: true,\n      preventScroll: true\n    });\n    trap.activate();\n\n    const bodyWrapper = document.getElementById(\"body-wrapper\");\n    if (bodyWrapper) {\n      // aria-hidden for mobile devices where we want to emulate \"focus\" behavior\n      bodyWrapper.setAttribute(\"aria-hidden\", \"true\");\n      document.body.classList.add(\"modal-open\");\n      bodyWrapper.style.paddingRight = `${scrollBarPadding}px`;\n    }\n\n    // Deactivate\n    return () => {\n      if (bodyWrapper) {\n        bodyWrapper.setAttribute(\"aria-hidden\", \"false\");\n        document.body.classList.remove(\"modal-open\");\n        bodyWrapper.style.paddingRight = bodyPadding;\n      }\n      trap.deactivate();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return createPortal(\n    // This does have a role\n    // eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions\n    <aside\n      ref={asideRef}\n      aria-modal\n      {...labelOrDescribedBy(ariaLabel)}\n      role={role}\n      id=\"modal-cover\"\n      className=\"c-modal__cover\"\n      tabIndex={-1}\n      onKeyDown={e => handleReactExitKeyPress(e, closeModal)}\n      onClick={e => onClickAway(e)}\n    >\n      <div ref={scrollRef} className={`c-modal ${className}`}>\n        <button\n          id=\"modal-close\"\n          className=\"btn btn-secondary c-modal__close\"\n          onClick={() => closeModal()}\n          type=\"button\"\n        >\n          {closeText}\n        </button>\n        <div className=\"c-modal__content\">{children}</div>\n      </div>\n    </aside>,\n    document.body\n  );\n};\n\ninterface ModalWithNoScrollProps extends Props {\n  priorPadding: string;\n  paddingRight: number;\n}\n\nconst Modal = ({\n  children,\n  closeText = \"Close\",\n  role = \"dialog\",\n  ariaLabel,\n  focusElementId = \"modal-close\",\n  priorPadding,\n  paddingRight,\n  className,\n  closeModal\n}: ModalWithNoScrollProps): ReactElement<HTMLElement> | null => (\n  <ModalContent\n    bodyPadding={priorPadding}\n    scrollBarPadding={paddingRight}\n    closeText={closeText}\n    role={role}\n    ariaLabel={ariaLabel}\n    focusElementId={focusElementId}\n    className={className}\n    closeModal={closeModal}\n  >\n    {children}\n  </ModalContent>\n);\n\n// Wrap modal to account for disabling scroll bar on background body\nconst WrappedModal = (props: Props): ReactElement<HTMLElement> | null => {\n  if (typeof document !== \"undefined\") {\n    const bodyWrapper = document.getElementById(\"body-wrapper\");\n    const priorPadding =\n      (bodyWrapper && bodyWrapper.style.paddingRight) || \"0px\";\n    const paddingRight = bodyWrapper\n      ? window.innerWidth - bodyWrapper.clientWidth\n      : 0;\n    return (\n      <Modal\n        {...props}\n        priorPadding={priorPadding}\n        paddingRight={paddingRight}\n      />\n    );\n  }\n  /* istanbul ignore next */\n  return null;\n};\n\nexport default WrappedModal;\n","import React, { ReactElement, useState, useEffect } from \"react\";\nimport { searchIcon } from \"../helpers/icon\";\n\ninterface Props {\n  id: string;\n  labelText: string;\n  onChange: (q: string) => void;\n  placeholder?: string;\n  className?: string;\n}\n\nconst SearchBox = ({\n  id,\n  labelText,\n  onChange,\n  placeholder,\n  className\n}: Props): ReactElement<HTMLElement> | null => {\n  const [query, setQuery] = useState(\"\");\n\n  useEffect(() => {\n    onChange(query);\n  }, [query, onChange]);\n\n  return (\n    <div className={`${className} c-form__input-container`}>\n      <label htmlFor={id} className=\"sr-only\">\n        {labelText}\n      </label>\n      <input\n        className=\"c-form__input\"\n        id={id}\n        type=\"text\"\n        onChange={event => {\n          setQuery(event.target.value);\n        }}\n        value={query}\n        placeholder={placeholder || labelText}\n      />\n      {query !== \"\" && (\n        <button\n          className=\"c-form__reset-btn btn-link\"\n          aria-label=\"reset\"\n          type=\"button\"\n          onClick={() => {\n            setQuery(\"\");\n          }}\n        >\n          <i\n            aria-hidden=\"true\"\n            className=\"c-form__reset-icon fa fa-times-circle\"\n          />\n        </button>\n      )}\n      <button\n        className=\"c-form__submit-btn\"\n        aria-label=\"search\"\n        type=\"button\"\n        onClick={() => {\n          setQuery(query);\n        }}\n      >\n        {searchIcon(\"c-svg__icon-search-reverse-default\")}\n      </button>\n    </div>\n  );\n};\n\nexport default SearchBox;\n","export type AriaLabelling = AriaLabel | AriaLabelledBy;\n\nexport interface AriaLabel {\n  label: string;\n}\n\nexport interface AriaLabelledBy {\n  elementId: string;\n}\n\ninterface AriaLabelProp {\n  \"aria-label\": string;\n}\n\ninterface AriaLabelledByProp {\n  \"aria-labelledby\": string;\n}\n\nconst isLabel = (label: AriaLabelling): label is AriaLabel =>\n  (label as AriaLabel).label !== undefined;\n\nexport const labelOrDescribedBy = (\n  label: AriaLabel | AriaLabelledBy\n): AriaLabelProp | AriaLabelledByProp => {\n  if (isLabel(label)) {\n    return { \"aria-label\": label.label };\n  }\n  return { \"aria-labelledby\": label.elementId };\n};\n","import {\n  isABusRoute,\n  isACommuterRailRoute,\n  isAGreenLineRoute,\n  isASilverLineRoute\n} from \"../models/route\";\nimport { Route } from \"../__v3api\";\n\nexport const routeToCSSClass = (route: string): string =>\n  route.toLowerCase().replace(/[ _]/g, \"-\");\n\nexport const busClass = (route: Route): string =>\n  isABusRoute(route) && !isASilverLineRoute(route) ? \"bus-route-sign\" : \"\";\n\nexport const routeToModeName = (route: Route): string => {\n  if (isACommuterRailRoute(route)) return \"commuter-rail\";\n  if (route.type === 4) return \"ferry\";\n  if (route.id === \"Red\" || route.id === \"Mattapan\") return \"red-line\";\n  if (route.id === \"Orange\") return \"orange-line\";\n  if (route.id === \"Blue\") return \"blue-line\";\n  if (isAGreenLineRoute(route)) return \"green-line\";\n  if (isASilverLineRoute(route)) return \"silver-line\";\n  if (isABusRoute(route)) return \"bus\";\n  return \"unknown\";\n};\n\nexport const routeBgClass = (route: Route): string =>\n  `u-bg--${routeToModeName(route)}`;\n","import {\n  differenceInSeconds,\n  getMinutes,\n  parseISO,\n  secondsInHour,\n  secondsInMinute\n} from \"date-fns\";\nimport { formatInTimeZone } from \"date-fns-tz\";\n\nconst BOSTON_TIMEZONE = \"America/New_York\";\n\n// this returns a Date() in the browser time zone, unlike new Date(unformatted)\nexport const stringToDateObject = (unformatted: string): Date => {\n  const [year, month, day] = unformatted\n    .split(/-/)\n    .map(part => Number.parseInt(part, 10));\n\n  // Remember that months in JS are 0-indexed for some reason, hence \"month - 1\".\n  const parsedDate = new Date(year, month - 1, day);\n  return parsedDate;\n};\n\n// Returns a date in the form of \"2019-08-07\"\nexport const dateObjectToString = (date: Date): string =>\n  [\n    date.getFullYear(),\n    `0${date.getMonth() + 1}`.slice(-2),\n    `0${date.getDate()}`.slice(-2)\n  ].join(\"-\");\n\n// Returns a date in the form of \"August 7, 2019\"\nexport const formattedDate = (unformatted: string): string => {\n  const parsedDate = stringToDateObject(unformatted);\n  return parsedDate.toLocaleDateString(\"en-US\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n    timeZone: \"UTC\"\n  });\n};\n\n// Returns a date in the form of \"Aug 7\"\nexport const shortDate = (date: Date): string =>\n  date.toLocaleDateString(\"en-US\", {\n    month: \"short\",\n    day: \"numeric\",\n    timeZone: \"UTC\"\n  });\n\nexport const compareStringTimes = (\n  timeStr1: string[],\n  timeStr2: string[]\n): string => {\n  const today = new Date();\n  const dateFormatted = new Intl.DateTimeFormat(\"en-US\").format(today);\n\n  const fullDate1 = `${dateFormatted} ${timeStr1.join(\"\")}`; // \"11/24/2013 2:10 PM\"\n  const fullDate2 = `${dateFormatted} ${timeStr2.join(\"\")}`;\n\n  const timeInMs1 = new Date(fullDate1).getTime();\n  const timeInMs2 = new Date(fullDate2).getTime();\n\n  let comparison = \"eq\";\n  if (timeInMs1 < timeInMs2) {\n    comparison = \"lt\";\n  } else if (timeInMs1 > timeInMs2) {\n    comparison = \"gt\";\n  }\n  return comparison;\n};\n\nexport const formatToBostonTime = (\n  dateTimeString: string | Date,\n  overrideFormat?: string\n): string => {\n  const dateTime =\n    typeof dateTimeString === \"string\"\n      ? parseISO(dateTimeString)\n      : dateTimeString;\n  let formatString = \"h:mm aa\"; // 5:00 AM\n  if (getMinutes(dateTime) === 0) {\n    formatString = \"h aa\"; // 5 AM\n  }\n  formatString = overrideFormat !== undefined ? overrideFormat : formatString;\n  return formatInTimeZone(dateTime, BOSTON_TIMEZONE, formatString);\n};\n\nexport const formatRelativeTime = (\n  time: Date,\n  targetDate: Date = new Date()\n): string => {\n  const seconds = differenceInSeconds(time, targetDate);\n  if (seconds <= 60) {\n    return \"<1 minute away\";\n  }\n  if (seconds < secondsInHour) {\n    return `${Math.floor(seconds / secondsInMinute)} min`;\n  }\n\n  return formatToBostonTime(time, \"h:mm aa\");\n};\n\nexport const isSameDayInBoston = (\n  dateTime1: Date | undefined,\n  dateTime2: Date | undefined\n): boolean => {\n  // if there is no day to compare then the it should be the same day\n  if (!dateTime1 || !dateTime2) {\n    return true;\n  }\n  // returns strings in mm/dd/yyyy format\n  const date1InBoston = dateTime1.toLocaleDateString(\"en-US\", {\n    timeZone: BOSTON_TIMEZONE\n  });\n  const date2InBoston = dateTime2.toLocaleDateString(\"en-US\", {\n    timeZone: BOSTON_TIMEZONE\n  });\n\n  return date1InBoston === date2InBoston;\n};\n\nexport default formattedDate;\n","export const isFetchFailed = <T>(r: FetchResult<T>): r is FetchFailed =>\n  r && typeof r === \"object\" && \"statusText\" in r;\n\nexport const throwIfFetchFailed = <T>(result: FetchResult<T>): T => {\n  if (isFetchFailed(result)) {\n    throw new Error(`Fetch failed: ${result}`);\n  }\n\n  return result;\n};\n\nexport type FetchFailed = Response;\nexport type FetchResult<T> = T | FetchFailed;\nexport const fetchJson = async <T>(\n  ...args: Parameters<typeof fetch>\n): Promise<FetchResult<T>> => {\n  const resp = await fetch(...args);\n  if (!resp.ok) {\n    return resp;\n  }\n\n  return resp.json();\n};\n\nexport const fetchJsonOrThrow = async <T>(\n  ...args: Parameters<typeof fetch>\n): Promise<T> => fetchJson<T>(...args).then(throwIfFetchFailed);\n","export type fetchAction =\n  // @ts-ignore should add a generic here\n  | { type: \"FETCH_COMPLETE\"; payload: any } // eslint-disable-line\n  | { type: \"FETCH_ERROR\" }\n  | { type: \"FETCH_STARTED\" };\n\nexport interface State {\n  // @ts-ignore should add a generic\n  data: any | null; // eslint-disable-line\n  isLoading: boolean;\n  error: boolean;\n}\n\nexport const reducer = (state: State, action: fetchAction): State => {\n  switch (action.type) {\n    case \"FETCH_STARTED\":\n      return { ...state, isLoading: true, error: false, data: null };\n    case \"FETCH_COMPLETE\":\n      return { ...state, data: action.payload, isLoading: false, error: false };\n    case \"FETCH_ERROR\":\n      return { ...state, error: true, isLoading: false };\n    default:\n      return state;\n  }\n};\n","import React, { ReactElement } from \"react\";\nimport renderSvg from \"./render-svg\";\nimport { isASilverLineRoute } from \"../models/route\";\nimport accessibleIconSvg from \"../../static/images/icon-accessible-small.svg\";\nimport alertIconSvg from \"../../static/images/icon-alerts-triangle.svg\";\nimport blueLineIconSvg from \"../../static/images/icon-blue-line-default.svg\";\nimport busIconSvg from \"../../static/images/icon-mode-bus-small.svg\";\nimport commuterRailIconSvg from \"../../static/images/icon-mode-commuter-rail-small.svg\";\nimport ferryIconSvg from \"../../static/images/icon-mode-ferry-small.svg\";\nimport genericSubwayIconSvg from \"../../static/images/icon-mode-subway-default.svg\";\nimport greenLineIconSvg from \"../../static/images/icon-green-line-small.svg\";\nimport greenBLineIconSvg from \"../../static/images/icon-green-line-b-small.svg\";\nimport greenCLineIconSvg from \"../../static/images/icon-green-line-c-small.svg\";\nimport greenDLineIconSvg from \"../../static/images/icon-green-line-d-small.svg\";\nimport greenELineIconSvg from \"../../static/images/icon-green-line-e-small.svg\";\nimport mattapanLineIconSvg from \"../../static/images/icon-mattapan-line-small.svg\";\nimport orangeLineIconSvg from \"../../static/images/icon-orange-line-small.svg\";\nimport redLineIconSvg from \"../../static/images/icon-red-line-small.svg\";\nimport silverLineIconSvg from \"../../static/images/icon-silver-line-small.svg\";\nimport vehicleArrowSvg from \"../../static/images/icon-vehicle-bordered-expanded.svg\";\nimport searchIconSvg from \"../../static/images/icon-search-reverse-default.svg\";\nimport crowdingIconSvg from \"../../static/images/icon-crowding.svg\";\nimport bikeIconSvg from \"../../static/images/icon-bike.svg\";\nimport escalatorIconSvg from \"../../static/images/icon-escalator.svg\";\nimport elevatorIconSvg from \"../../static/images/icon-elevator.svg\";\nimport faresIconSvg from \"../../static/images/icon-fares.svg\";\n\nimport renderFa from \"./render-fa\";\n\nexport const accessibleIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, accessibleIconSvg, false);\n\nexport const alertIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, alertIconSvg, false);\n\nexport const blueLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, blueLineIconSvg, false);\n\nexport const busIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, busIconSvg, false);\n\nexport const commuterRailIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, commuterRailIconSvg, false);\n\nexport const ferryIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, ferryIconSvg, false);\n\nexport const genericSubwayIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, genericSubwayIconSvg, false);\n\nexport const greenLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, greenLineIconSvg, false);\n\nexport const greenBLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, greenBLineIconSvg, false);\n\nexport const greenCLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, greenCLineIconSvg, false);\n\nexport const greenDLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, greenDLineIconSvg, false);\n\nexport const greenELineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, greenELineIconSvg, false);\n\nexport const mattapanLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, mattapanLineIconSvg, false);\n\nexport const orangeLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, orangeLineIconSvg, false);\n\nexport const parkingIcon = (className: string = \"\"): JSX.Element =>\n  renderFa(className, \"fa-square-parking\", false);\n\nexport const redLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, redLineIconSvg, false);\n\nexport const silverLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, silverLineIconSvg, false);\n\nexport const vehicleArrowIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, vehicleArrowSvg, false);\n\nexport const searchIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, searchIconSvg, false);\n\nexport const bikeIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, bikeIconSvg, false);\nexport const escalatorIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, escalatorIconSvg, false);\nexport const elevatorIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, elevatorIconSvg, false);\nexport const faresIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, faresIconSvg, false);\n\nexport const modeIcon = (routeId: string): JSX.Element | undefined => {\n  if (routeId.startsWith(\"CR-\")) return commuterRailIcon(\"c-svg__icon\");\n  if (routeId.startsWith(\"Boat-\")) return ferryIcon(\"c-svg__icon\");\n  if (routeId === \"Blue\") return blueLineIcon(\"c-svg__icon\");\n  if (routeId === \"Green\") return greenLineIcon(\"c-svg__icon\");\n  if (routeId === \"Green-B\") return greenBLineIcon(\"c-svg__icon\");\n  if (routeId === \"Green-C\") return greenCLineIcon(\"c-svg__icon\");\n  if (routeId === \"Green-D\") return greenDLineIcon(\"c-svg__icon\");\n  if (routeId === \"Green-E\") return greenELineIcon(\"c-svg__icon\");\n  if (routeId === \"Mattapan\") return mattapanLineIcon(\"c-svg__icon\");\n  if (routeId === \"Orange\") return orangeLineIcon(\"c-svg__icon\");\n  if (routeId === \"Red\") return redLineIcon(\"c-svg__icon\");\n  if (isASilverLineRoute(routeId)) return silverLineIcon(\"c-svg__icon\");\n\n  return busIcon(\"c-svg__icon-bus-small\");\n};\n\nexport const caret = (\n  className: string,\n  expanded: boolean\n): ReactElement<HTMLElement> => {\n  const unicodeCharacter = expanded ? \"&#xF106;\" : \"&#xF107;\";\n  return (\n    <span\n      className={`fa ${className}`}\n      // eslint-disable-next-line react/no-danger\n      dangerouslySetInnerHTML={{ __html: unicodeCharacter }}\n    />\n  );\n};\n\n/*\nA minimal component that gives its child component\na basic tooltip containing the specified text. Has no\nvisual appearance itself.\n\nNote: data-selector=\"true\" and data-original-title are\nspecified here in order to preserve `title` text post-trigger\n*/\n\n// Corresponds to Bootstrap's tooltip options\ninterface TooltipOptions {\n  animation?: boolean;\n  container?: string | HTMLElement | false;\n  delay?: number | object;\n  html?: boolean;\n  placement?: string | Function;\n  selector?: string;\n  template?: string;\n  title?: string | HTMLElement | Function;\n  trigger?: string;\n  constraints?: [];\n  offset?: string;\n}\n\nconst defaultTooltipOptions: TooltipOptions = {\n  animation: true,\n  html: false,\n  placement: \"top\",\n  trigger: \"hover focus\"\n};\n\nexport const TooltipWrapper: React.FC<{\n  children: JSX.Element;\n  tooltipText: string;\n  tooltipOptions?: TooltipOptions;\n  href?: string;\n}> = ({ children, tooltipText, tooltipOptions, href }): JSX.Element => {\n  const options = Object.assign({}, defaultTooltipOptions, tooltipOptions);\n\n  const Tag = href ? \"a\" : \"span\";\n\n  return (\n    <Tag\n      href={href}\n      data-toggle=\"tooltip\"\n      data-trigger={options.trigger}\n      data-placement={options.placement}\n      data-animation={options.animation}\n      data-html={options.html}\n      data-selector=\"true\"\n      data-original-title={tooltipText}\n    >\n      {children}\n    </Tag>\n  );\n};\n\nexport const crowdingIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(`c-svg__icon c-icon__crowding ${className}`, crowdingIconSvg, true);\n","import { KeyboardEvent as ReactKeyboardEvent } from \"react\";\n\n// for React\nexport const handleReactEnterKeyPress = (\n  e: ReactKeyboardEvent,\n  onClick: Function\n): void => {\n  if (e.key === \"Enter\") {\n    onClick();\n  }\n};\n\nexport const handleReactExitKeyPress = (\n  e: ReactKeyboardEvent,\n  onClick: Function\n): void => {\n  if (e.key === \"Escape\") {\n    onClick();\n  }\n};\n","export const isEnter = (key: number | string): boolean =>\n  key === \"Enter\" || key === 13;\n\nexport const isEscape = (key: number | string): boolean =>\n  key === \"Escape\" || key === 27;\n\n// for vanilla JS\nexport const handleNativeEnterKeyPress = (\n  e: KeyboardEvent,\n  cb: Function\n): void => (isEnter(e.key || e.keyCode) ? cb(e) : () => {});\n\nexport const handleNativeEscapeKeyPress = (\n  e: KeyboardEvent,\n  cb: Function\n): void => (isEscape(e.key || e.keyCode) ? cb(e) : () => {});\n","import React, { ReactElement } from \"react\";\nimport { differenceInSeconds } from \"date-fns\";\nimport { PredictedOrScheduledTime } from \"../__v3api\";\nimport { isSkippedOrCancelled } from \"../models/prediction\";\nimport { TripPrediction } from \"../schedule/components/__trips\";\nimport { compareStringTimes } from \"./date\";\nimport { PredictionWithTimestamp } from \"../models/predictions\";\nimport { ScheduleWithTimestamp } from \"../models/schedules\";\n\nconst delayForCommuterRail = (\n  data: PredictedOrScheduledTime,\n  className = \"\"\n): ReactElement<HTMLElement> => (\n  <>\n    <div className={`${className ? `${className}--delayed` : \"\"}`}>\n      {data.scheduled_time!.join(\"\")}\n    </div>\n    <div className={className}>\n      {data.prediction && data.prediction.time.join(\"\")}\n    </div>\n  </>\n);\n\nexport const timeForCommuterRail = (\n  data: PredictedOrScheduledTime,\n  className = \"\"\n): ReactElement<HTMLElement> => {\n  const { delay, prediction, scheduled_time: scheduledTime } = data;\n\n  if (delay >= 5 && prediction) {\n    return delayForCommuterRail(data, className);\n  }\n\n  let time = prediction ? prediction.time : scheduledTime;\n\n  // when 'On time', show the scheduled time only if it's later than the predicted time:\n  if (\n    scheduledTime &&\n    prediction &&\n    prediction.time[2] !== \"min\" &&\n    compareStringTimes(prediction.time, scheduledTime) === \"lt\"\n  ) {\n    // \"On time\"\n    time = scheduledTime;\n  }\n\n  return <div className={className}>{time!.join(\"\")}</div>;\n};\n\nexport const statusForCommuterRail = ({\n  delay,\n  scheduled_time: scheduledTime,\n  prediction\n}: PredictedOrScheduledTime): string | null => {\n  // If there is a human-entered status string, prioritize that\n  if (prediction && prediction.status) return prediction.status;\n\n  if (isSkippedOrCancelled((prediction as unknown) as TripPrediction))\n    return \"Canceled\";\n\n  // Indicate \"Delayed\" if train is delayed 5+ minutes\n  if (delay >= 5) return `Delayed ${delay} min`;\n\n  // Indicate \"On time\" if train otherwise has a prediction\n  // Indicate \"Scheduled\" if train is not \"Delayed\" and we have a scheduled time\n  // (even if there is no real-time prediction)\n  if (scheduledTime && prediction) return \"On time\";\n  if (scheduledTime) return \"Scheduled\";\n\n  // We have just a prediction with no scheduled time, so we can't say whether\n  // the train is on time, delayed, etc.\n  return null;\n};\n\nexport const trackForCommuterRail = ({\n  prediction\n}: PredictedOrScheduledTime): string =>\n  prediction && prediction.track ? ` track ${prediction.track}` : \"\";\n\nexport const isCancelled = (\n  prediction: PredictionWithTimestamp | undefined\n): boolean => {\n  return !!prediction && prediction.schedule_relationship === \"cancelled\";\n};\n\nexport const isSkipped = (\n  prediction: PredictionWithTimestamp | undefined\n): boolean => {\n  return !!prediction && prediction.schedule_relationship === \"skipped\";\n};\n\n// Finds the corresponding schedule to the prediction and compares the times\n// If the prediction and schedule are more than 60 seconds apart it is delayed\nexport const isDelayed = (\n  prediction: PredictionWithTimestamp | undefined,\n  schedule: ScheduleWithTimestamp | undefined,\n  maxDifferenceInSeconds: number = 60\n): boolean => {\n  return (\n    !!schedule &&\n    !!prediction &&\n    !!prediction.time &&\n    // Is the prediction meaningfully after the schedule\n    differenceInSeconds(prediction.time, schedule.time) > maxDifferenceInSeconds\n  );\n};\n","import React from \"react\";\n\nconst FontAwesomeIcon = (\n  className: string,\n  svgName: string,\n  ariaHide: boolean = true\n): JSX.Element => (\n  <i\n    className={\n      className\n        ? `fa ${svgName} notranslate ${className}`\n        : `fa ${svgName} notranslate`\n    }\n    aria-hidden={ariaHide ? \"true\" : \"false\"}\n  />\n);\n\nexport default FontAwesomeIcon;\n","import React from \"react\";\n\nconst SVGIcon = (\n  className: string,\n  svgText: string,\n  ariaHide: boolean = true\n): JSX.Element => (\n  <span\n    className={className ? `notranslate ${className}` : \"notranslate\"}\n    aria-hidden={ariaHide ? \"true\" : \"false\"}\n    // eslint-disable-next-line react/no-danger\n    dangerouslySetInnerHTML={{ __html: svgText }}\n  />\n);\n\nexport default SVGIcon;\n","import { RouteStop } from \"../schedule/components/__schedule\";\nimport { RouteWithDirection, TypedRoutes } from \"../stop/components/__stop\";\nimport { isABusRoute } from \"../models/route\";\nimport { Route } from \"../__v3api\";\n\nexport function isBusRouteStop(stop: RouteStop): boolean {\n  return !!stop.route && isABusRoute(stop.route);\n}\n\nexport function routesWithDirectionsAreAllBusStops(\n  routes: RouteWithDirection[]\n): boolean {\n  return (\n    routes.length > 0 &&\n    routes.reduce((acc: boolean, r) => isABusRoute(r.route) && acc, true)\n  );\n}\n\nexport function typedRoutesHasBusRoute(routes: TypedRoutes[]): boolean {\n  return !!routes.find(r => r.group_name === \"bus\");\n}\n\nexport function routesHasBusRoute(routes: Route[]): boolean {\n  return !!routes.find(r => isABusRoute(r));\n}\n","import _, { Dictionary } from \"lodash\";\nimport {\n  Service,\n  DayInteger,\n  ServiceType,\n  ServiceTypicality\n} from \"../__v3api\";\nimport { shortDate, stringToDateObject, dateObjectToString } from \"./date\";\n\nexport enum ServiceGroupNames {\n  HOLIDAY = \"Holiday Schedules\",\n  CURRENT = \"Current Schedules\",\n  FUTURE = \"Future Schedules\",\n  OTHER = \"Other Schedules\"\n}\n\nexport const serviceStartDateComparator = (\n  service1: Service,\n  service2: Service\n): number =>\n  stringToDateObject(service1.start_date).getTime() -\n  stringToDateObject(service2.start_date).getTime();\n\nconst isInRemovedDates = (service: Service, currentDate: Date): boolean =>\n  service.removed_dates.includes(dateObjectToString(currentDate));\n\nconst isInAddedDates = (service: Service, currentDate: Date): boolean =>\n  service.added_dates.includes(dateObjectToString(currentDate));\n\nconst isOnValidDay = (service: Service, currentDate: Date): boolean => {\n  let currentDay = currentDate.getDay();\n  // different numbering from valid_days for sunday\n  currentDay = currentDay === 0 ? 7 : currentDay;\n  return service.valid_days.includes(currentDay as DayInteger);\n};\n\nexport const isInCurrentService = (\n  service: Service,\n  currentDate: Date\n): boolean => {\n  const serviceStartDate = stringToDateObject(service.start_date);\n  const serviceEndDate = stringToDateObject(service.end_date);\n  return (\n    isInAddedDates(service, currentDate) ||\n    (currentDate >= serviceStartDate && currentDate <= serviceEndDate)\n  );\n};\n\nexport const isInCurrentRating = (\n  service: Service,\n  currentDate: Date\n): boolean => {\n  if (!service.rating_start_date) {\n    return false;\n  }\n  const ratingStartDate = stringToDateObject(service.rating_start_date!);\n  if (!service.rating_end_date) {\n    // this might be a commuter rail or ferry. treat null rating end as infinite?\n    return currentDate >= ratingStartDate;\n  }\n  const ratingEndDate = stringToDateObject(service.rating_end_date!);\n  return currentDate >= ratingStartDate && currentDate <= ratingEndDate;\n};\n\nexport const isCurrentValidService = (\n  service: Service,\n  currentDate: Date\n): boolean => {\n  // check against added dates\n  if (isInAddedDates(service, currentDate)) {\n    return true;\n  }\n\n  // check against removed dates\n  if (isInRemovedDates(service, currentDate)) {\n    return false;\n  }\n\n  // check on valid_days\n  if (!isOnValidDay(service, currentDate)) {\n    return false;\n  }\n\n  // check within rating dates\n  return isInCurrentRating(service, currentDate);\n};\n\nexport const startToEnd = (\n  startDateObject: Date,\n  endDateObject: Date\n): string => `${shortDate(startDateObject)} to ${shortDate(endDateObject)}`;\n\nexport const isInFutureService = (\n  service: Service,\n  currentDate: Date\n): boolean => {\n  const serviceStartDate = stringToDateObject(service.start_date);\n  const serviceEndDate = stringToDateObject(service.end_date);\n  return currentDate < serviceStartDate && currentDate < serviceEndDate;\n};\n\nexport const isInFutureRating = (\n  service: Service,\n  currentDate: Date\n): boolean => {\n  if (!service.rating_end_date) {\n    if (service.rating_start_date) {\n      return currentDate < stringToDateObject(service.rating_start_date!);\n    }\n    return false;\n  }\n\n  const ratingStartDate = stringToDateObject(service.rating_start_date!);\n  const ratingEndDate = stringToDateObject(service.rating_end_date!);\n  return currentDate < ratingStartDate && currentDate < ratingEndDate;\n};\n\nconst areSimilarServices = (service1: Service, service2: Service): boolean => {\n  const properties = [\n    \"valid_days\",\n    \"typicality\",\n    \"type\",\n    \"rating_start_date\",\n    \"rating_end_date\",\n    \"name\",\n    \"description\"\n  ];\n  return _.every(properties, (p: keyof Service) =>\n    _.isEqual(service2[p], service1[p])\n  );\n};\n\n// If two similar services are present, show only one. Choose the first\n// sequentially (this depends on the input list already being sorted by\n// start_date).\nexport const dedupeServices = (services: Service[]): Service[] =>\n  _.uniqWith(services, areSimilarServices);\n\nexport const groupServicesByDateRating = (\n  services: Service[],\n  currentDate: Date\n): Dictionary<Service[]> =>\n  _.groupBy(services, (service: Service) => {\n    if (service.typicality === \"holiday_service\") {\n      return ServiceGroupNames.HOLIDAY;\n    }\n\n    if (service.type === \"other\") {\n      return ServiceGroupNames.OTHER;\n    }\n\n    // if there's no rating end date, this is probably a CR or Ferry\n    // don't use the rating dates in the returned text in that case.\n    // additionally, prioritize current service/rating in grouping\n    if (!service.rating_end_date) {\n      if (\n        isInCurrentService(service, currentDate) ||\n        isInCurrentRating(service, currentDate)\n      ) {\n        return ServiceGroupNames.CURRENT;\n      }\n      if (isInFutureRating(service, currentDate)) {\n        return ServiceGroupNames.FUTURE;\n      }\n    }\n\n    const ratingStartDate = stringToDateObject(service.rating_start_date!);\n    const ratingEndDate = stringToDateObject(service.rating_end_date!);\n\n    if (isInCurrentRating(service, currentDate)) {\n      return `${ServiceGroupNames.CURRENT} (${\n        service.rating_description\n      }, ends ${shortDate(ratingEndDate)})`;\n    }\n\n    if (isInFutureRating(service, currentDate)) {\n      return `${ServiceGroupNames.FUTURE} (${\n        service.rating_description\n      }, starts ${shortDate(ratingStartDate)})`;\n    }\n\n    return ServiceGroupNames.OTHER;\n  });\n\n// sort the option groups\nconst optGroupOrder: { [key: string]: number } = {\n  [ServiceGroupNames.CURRENT]: 4,\n  [ServiceGroupNames.HOLIDAY]: 3,\n  [ServiceGroupNames.FUTURE]: 2,\n  [ServiceGroupNames.OTHER]: 1\n};\n\n// sort the service types\nconst serviceTypeOrder: { [key in ServiceType]: number } = {\n  weekday: 4,\n  saturday: 3,\n  sunday: 2,\n  other: 1\n};\n\n/* eslint-disable camelcase */\n// sort the service typicalities\nconst serviceTypicalityOrder: { [key in ServiceTypicality]: number } = {\n  canonical: 6,\n  unplanned_disruption: 4,\n  planned_disruption: 3,\n  holiday_service: 2,\n  extra_service: 1,\n  typical_service: 0,\n  unknown: 0\n};\n/* eslint-enable camelcase */\n\n// enable sorting of services by rating dates,\n// service type, service typicality, and service dates\nexport const serviceComparator = (\n  {\n    type: type1,\n    valid_days: validDays1,\n    typicality: typicality1,\n    start_date: date1\n  }: Service,\n  {\n    type: type2,\n    valid_days: validDays2,\n    typicality: typicality2,\n    start_date: date2\n  }: Service\n): number =>\n  serviceTypeOrder[type2] - serviceTypeOrder[type1] ||\n  validDays1[0] - validDays2[0] ||\n  serviceTypicalityOrder[typicality2] - serviceTypicalityOrder[typicality1] ||\n  stringToDateObject(date1).getTime() - stringToDateObject(date2).getTime();\n\n// group names may have extra verbiage\nexport const optGroupComparator = (groupA: string, groupB: string): number => {\n  const optGroupNames = Object.values(ServiceGroupNames);\n  const a = optGroupNames.find(name => groupA.includes(name));\n  const b = optGroupNames.find(name => groupB.includes(name));\n  return optGroupOrder[b!] - optGroupOrder[a!];\n};\n\nexport const hasMultipleWeekdaySchedules = (services: Service[]): boolean =>\n  services.filter(\n    service =>\n      service.type === \"weekday\" && service.typicality !== \"holiday_service\"\n  ).length > 1;\n\nconst dayIntegerToString = (day: DayInteger): string =>\n  [\n    \"Monday\",\n    \"Tuesday\",\n    \"Wednesday\",\n    \"Thursday\",\n    \"Friday\",\n    \"Saturday\",\n    \"Sunday\"\n  ][day - 1];\n\nconst daysAreConsecutive = (days: DayInteger[]): boolean => {\n  const [day, nextDay, ...rest] = days;\n  if (rest.length === 0) return day + 1 === nextDay;\n  if (day + 1 !== nextDay) return false;\n  return daysAreConsecutive([nextDay, ...rest]);\n};\n\nexport const serviceDays = ({\n  type,\n  valid_days: validDays\n}: Service): string => {\n  if (type === \"saturday\" || type === \"sunday\") return \"\";\n\n  if (validDays.length === 1) return `${dayIntegerToString(validDays[0])}`;\n\n  if (daysAreConsecutive(validDays)) {\n    return validDays[0] === 1 && validDays[validDays.length - 1] === 5\n      ? \"Weekday\"\n      : `${dayIntegerToString(validDays[0])} - ${dayIntegerToString(\n          validDays[validDays.length - 1]\n        )}`;\n  }\n\n  return `${validDays.map(dayIntegerToString).join(\", \")}`;\n};\n","import { isEmpty } from \"lodash\";\nimport {\n  RouteStop,\n  StopId,\n  StopTree,\n  StopTreeEdges,\n  StopTreeNode,\n  StopTreePath,\n  StopTreeSlice\n} from \"../schedule/components/__schedule\";\n\nexport const nodeForId = (stopTree: StopTree, id: StopId): StopTreeNode =>\n  stopTree.byId[id];\nexport const edgesForId = (stopTree: StopTree, id: StopId): StopTreeEdges =>\n  stopTree.edges[id];\nexport const startingNodes = (stopTree: StopTree): StopId[] =>\n  stopTree.startingNodes;\n\nexport const stopIds = (stopTree: StopTree): StopId[] =>\n  Object.keys(stopTree.byId);\n\nexport const nodeId = (node: StopTreeNode): StopId => node.id;\nexport const nodeValue = (node: StopTreeNode): RouteStop => node.value;\n\nexport const nextEdges = (edges: StopTreeEdges): StopId[] => edges.next;\nexport const previousEdges = (edges: StopTreeEdges): StopId[] => edges.previous;\n\nexport const stopForId = (stopTree: StopTree, id: StopId): RouteStop =>\n  nodeValue(nodeForId(stopTree, id));\n\nexport const nextStopIds = (stopTree: StopTree, id: StopId): StopId[] =>\n  nextEdges(edgesForId(stopTree, id));\nexport const previousStopIds = (stopTree: StopTree, id: StopId): StopId[] =>\n  previousEdges(edgesForId(stopTree, id));\n\nexport const isStartNode = (stopTree: StopTree, id: StopId): boolean =>\n  startingNodes(stopTree).includes(id);\nexport const isEndNode = (stopTree: StopTree, id: StopId): boolean =>\n  nextStopIds(stopTree, id).length === 0;\n\nexport const isMergeNode = (stopTree: StopTree, id: StopId): boolean =>\n  previousStopIds(stopTree, id).length > 1;\nexport const isBranchingNode = (stopTree: StopTree, id: StopId): boolean =>\n  nextStopIds(stopTree, id).length > 1;\n\nconst prependStopId = (ids: StopTreePath, id: StopId): StopTreePath => [\n  id,\n  ...ids\n];\n\nconst pathsFrom = (stopTree: StopTree, id: StopId): StopTreePath[] => {\n  if (isEndNode(stopTree, id)) return [[id]];\n\n  return nextStopIds(stopTree, id).flatMap((nextId: StopId) =>\n    pathsFrom(stopTree, nextId).map(ids => prependStopId(ids, id))\n  );\n};\n\nexport const paths = (stopTree: StopTree): StopTreePath[] =>\n  startingNodes(stopTree).flatMap(id => pathsFrom(stopTree, id));\n\nconst pathLength = (stops: StopTreePath): number => stops.length;\n\nexport const longestPathLength = (stopTree: StopTree): number =>\n  Math.max(...paths(stopTree).map(pathLength));\n\nexport const longestPath = (stopTree: StopTree): StopTreePath => {\n  const longestLength = longestPathLength(stopTree);\n  return paths(stopTree).find(path => pathLength(path) === longestLength) || [];\n};\nexport const longestPathStartingId = (stopTree: StopTree): StopId =>\n  longestPath(stopTree)[0];\n\n/**\n * Calculate an array of cross-sections through the tree, where each\n * cross-sectional slice is an array of StopIds.\n *\n * These slices are useful for determining other branches running in parallel\n * with a given stop.\n *\n * @param stopTree A StopTree data structure\n * @returns An array of StopTreeSlices where each slice is an array of StopIds.\n */\nexport const slices = (stopTree: StopTree): StopTreeSlice[] => {\n  const len = longestPathLength(stopTree);\n  if (len < 1) return [[]];\n\n  const sliceSets: Set<StopId>[] = [...Array(len)].map(() => new Set());\n\n  const recordIdPositionsMovingForward = (id: StopId, index: number): void => {\n    sliceSets[index].add(id);\n    nextStopIds(stopTree, id).forEach(nextId =>\n      recordIdPositionsMovingForward(nextId, index + 1)\n    );\n  };\n  const recordIdPositionsMovingBackward = (id: StopId, index: number): void => {\n    sliceSets[index].add(id);\n    previousStopIds(stopTree, id).forEach(previousId =>\n      recordIdPositionsMovingBackward(previousId, index - 1)\n    );\n  };\n  const recordIdPositions = (id: StopId, index: number): void => {\n    recordIdPositionsMovingForward(id, index);\n    recordIdPositionsMovingBackward(id, index);\n  };\n\n  longestPath(stopTree).forEach(recordIdPositions);\n\n  return sliceSets.map(set => Array.from(set));\n};\n\nconst sliceSize = (slice: StopTreeSlice): number => slice.length;\n\nexport const largestSliceSize = (stopTree: StopTree): number =>\n  Math.max(...slices(stopTree).map(sliceSize));\n\nexport const sliceForId = (\n  stopTree: StopTree,\n  id: StopId\n): StopTreeSlice | undefined =>\n  slices(stopTree).find(slice => slice.includes(id));\n\nexport const sliceSizeForId = (\n  stopTree: StopTree,\n  id: StopId\n): number | undefined => {\n  const slice = sliceForId(stopTree, id);\n  return slice && sliceSize(slice);\n};\n\nexport const hasBranches = (stopTree: StopTree): boolean =>\n  slices(stopTree).some(slice => sliceSize(slice) > 1);\n\nexport const newBranchesStartingInSlice = (\n  stopTree: StopTree,\n  stopId: StopId\n): StopId[] =>\n  (sliceForId(stopTree, stopId) || []).filter(\n    id => id !== stopId && isStartNode(stopTree, id)\n  );\n\nexport const isEmptyTree = (stopTree: StopTree): boolean =>\n  Object.values(stopTree).some(isEmpty);\n","/**\n * Replaces slashes in a given string with a slash + ZERO_WIDTH_SPACE.\n * It's visually the same, but allows browsers to break the text into multiple lines.\n */\n// eslint-disable-next-line import/prefer-default-export\nexport const breakTextAtSlash = (str: string): string =>\n  str.replace(/\\//g, \"/​\");\n\nexport interface HighlightedSpan {\n  offset: number;\n  length: number;\n}\nexport function highlightText(\n  text: string,\n  spans: HighlightedSpan[] = []\n): string {\n  const parts = [];\n  let cursor = 0;\n  spans.forEach(span => {\n    const { offset, length } = span;\n\n    parts.push(text.slice(cursor, offset));\n    parts.push(`<em>${text.slice(offset, offset + length)}</em>`);\n    cursor = length + offset;\n  });\n  parts.push(text.slice(cursor));\n\n  return parts.join(\"\");\n}\n","/* eslint-disable import/prefer-default-export */\n\nimport { useCallback, useEffect, useRef } from \"react\";\n\n/**\n * This is similar to `useInterval`, with the main difference being that\n * the Promise returned by `fn` is `await`ed before another timeout is\n * queued. For example, with a slow network request, this will wait until\n * the network request finishes to re-queue the follow up, as opposed to\n * starting the delay timer immediately after the network request is sent.\n *\n * Note that the cancel function returned by this hook does not cancel the\n * currently-running promise, it just prevents it from being queued up\n * again.\n */\n\nexport const useAwaitInterval = <Fn extends () => PromiseLike<unknown>>(\n  fn: Fn,\n  delay: number\n): (() => () => void) => {\n  type LatestTimeout = ReturnType<typeof setTimeout> | \"cancelled\" | undefined;\n  const latestTimeout = useRef<LatestTimeout>(undefined);\n\n  const enqueue = useCallback(\n    (fn_: () => unknown): void => {\n      if (latestTimeout.current !== \"cancelled\") {\n        latestTimeout.current = setTimeout(fn_, delay);\n      }\n    },\n    [delay]\n  );\n\n  const cancel = (): void => {\n    if (latestTimeout.current && latestTimeout.current !== \"cancelled\") {\n      clearTimeout(latestTimeout.current);\n      latestTimeout.current = \"cancelled\";\n    }\n  };\n\n  const go = useCallback(async () => {\n    await fn();\n\n    enqueue(go);\n  }, [fn, enqueue]);\n\n  useEffect(() => {\n    go();\n\n    return cancel;\n  }, [go]);\n\n  return useCallback(() => {\n    cancel();\n\n    return () => {\n      latestTimeout.current = undefined;\n\n      go();\n    };\n  }, [go]);\n};\n","import { useReducer } from \"react\";\n\n/**\n * Fetching comprises a simple state machine flow:\n *\n * NotStarted → Loading → Data\n *                      ↳ Error\n */\n// Exported just for testing\nexport enum FetchStatus {\n  NotStarted = 1,\n  Loading,\n  Data,\n  Error\n}\n\ninterface StartFetchAction {\n  type: \"FETCH_STARTED\";\n}\n\nconst startFetch = (): StartFetchAction => ({ type: \"FETCH_STARTED\" });\n\ninterface CompleteFetchAction<T> {\n  type: \"FETCH_COMPLETE\";\n  payload: T;\n}\n\nconst completeFetch = <T>(payload: T): CompleteFetchAction<T> => ({\n  type: \"FETCH_COMPLETE\",\n  payload\n});\n\ninterface ErrorFetchAction {\n  type: \"FETCH_ERROR\";\n}\n\nconst errorFetch = (): ErrorFetchAction => ({ type: \"FETCH_ERROR\" });\n\nexport type FetchAction<T> =\n  | StartFetchAction\n  | CompleteFetchAction<T>\n  | ErrorFetchAction;\n\nexport interface FetchState<T> {\n  status: FetchStatus;\n  data?: T;\n}\n\nconst createInitialState = <T>(): FetchState<T> => ({\n  status: FetchStatus.NotStarted,\n  data: undefined\n});\n\nexport const isNotStarted = <T>({ status }: FetchState<T>): boolean =>\n  status === FetchStatus.NotStarted;\n\nexport const isLoading = <T>({ status }: FetchState<T>): boolean =>\n  status === FetchStatus.Loading;\n\nexport const hasData = <T>({ status }: FetchState<T>): boolean =>\n  status === FetchStatus.Data;\n\nexport const gotError = <T>({ status }: FetchState<T>): boolean =>\n  status === FetchStatus.Error;\n\ntype Reducer<T> = (\n  state: FetchState<T>,\n  action: FetchAction<T>\n) => FetchState<T>;\n\nconst createFetchReducer = <T>(): Reducer<T> => (state, action) => {\n  switch (action.type) {\n    case \"FETCH_STARTED\":\n      return { ...state, status: FetchStatus.Loading, data: undefined };\n    case \"FETCH_COMPLETE\":\n      return { ...state, status: FetchStatus.Data, data: action.payload };\n    case \"FETCH_ERROR\":\n      return { ...state, status: FetchStatus.Error };\n    default:\n      return state;\n  }\n};\n\nexport type Fetcher = () => Promise<Response>;\n\nexport type Parser<T> = (json: JSON) => T;\n\ninterface FetchProps<T> {\n  fetcher: Fetcher;\n  parser: Parser<T>;\n}\n\nexport type Fetch<T> = ({ fetcher, parser }: FetchProps<T>) => Promise<void>;\n\nconst parseJsonResponse = (response: Response): Promise<JSON> => {\n  if (response.ok) return response.json();\n  throw new Error(response.statusText);\n};\n\nexport const fetch = <T>(\n  dispatch: (action: FetchAction<T>) => void\n): Fetch<T> => ({ fetcher, parser }) => {\n  dispatch(startFetch());\n\n  return fetcher()\n    .then(parseJsonResponse)\n    .then((json: JSON) => dispatch(completeFetch<T>(parser(json))))\n    .catch(() => dispatch(errorFetch()));\n};\n\nconst useFetch = <T>(): [FetchState<T>, Fetch<T>] => {\n  const [state, dispatch] = useReducer(\n    createFetchReducer<T>(),\n    createInitialState<T>()\n  );\n\n  return [state, fetch<T>(dispatch)];\n};\n\nexport default useFetch;\n","import { useCallback, useEffect, useRef, useState } from \"react\";\n\n/**\n * A hook which wraps an async data provider, allowing it to be used as\n * part of a functional component.\n *\n * The provider is initially called at component mount, and the data can\n * be manually refreshed using the second element of the value returned\n * by the hook.\n *\n * Internally, the state diagram looks something like this:\n * <Component Mount> → Loading → ↱           Loaded ↴\n *                               ↑          <Calls update>\n *                               ⬑ LoadingWithStale ↵\n */\n\nexport type InitialLoading = { loading: true };\nexport type Loaded<T> = { loading: false; data: T };\nexport type LoadingWithStale<T> = { loading: true; data: T };\nexport type UseProviderState<T> =\n  | InitialLoading\n  | Loaded<T>\n  | LoadingWithStale<T>;\nexport type UseProviderStateWithoutInitialLoading<T> = Exclude<\n  UseProviderState<T>,\n  InitialLoading\n>;\n\n// any used here for type inference\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const useProvider = <Fn extends (...args: any[]) => PromiseLike<any>>(\n  provider: Fn,\n  deps: Parameters<Fn>\n): [\n  UseProviderState<Awaited<ReturnType<Fn>>>,\n  () => Promise<Awaited<ReturnType<Fn>>>\n] => {\n  const [state, setState] = useState<UseProviderState<Awaited<ReturnType<Fn>>>>(\n    { loading: true }\n  );\n\n  const updateData = useCallback(\n    async () => {\n      const setStateIfSame = (\n        fn: (currentState: typeof state) => typeof state\n      ): void =>\n        setState(currentState => {\n          // eslint-disable-next-line @typescript-eslint/no-use-before-define\n          if (newestUpdateData.current !== updateData) {\n            return currentState;\n          }\n\n          return fn(currentState);\n        });\n\n      setStateIfSame(state_ => ({ ...state_, loading: true }));\n      const data = await provider(...deps);\n      setStateIfSame(() => ({ loading: false, data }));\n\n      return data;\n    },\n    // we spread deps here to rebind this closure if any of them change,\n    // but eslint isn't smart enough to know that\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [provider, ...deps]\n  );\n  const newestUpdateData = useRef(updateData);\n  newestUpdateData.current = updateData;\n\n  useEffect(() => {\n    updateData();\n  }, [updateData]);\n\n  return [state, updateData];\n};\n\nexport const isInitialLoading = <T>(\n  state: UseProviderState<T>\n): state is InitialLoading => state.loading && !(\"data\" in state);\n","import { useReducer, useEffect, Reducer } from \"react\";\nimport { joinChannel, leaveChannel } from \"../app/channels\";\n\n// extract the state and action types from the given reducer\n// is there a way to do this without using \"any\"?\n/* eslint-disable @typescript-eslint/no-explicit-any */\ntype State<T> = T extends Reducer<infer S, any> ? S : never;\ntype Action<T> = T extends Reducer<any, infer A> ? A : never;\n/* eslint-enable @typescript-eslint/no-explicit-any */\n\n/**\n * useChannel is intended to be generic enough to work with any Websocket-based\n * channel we might set up. Thus it requires many arguments.\n\n * @template OnDataEventType - Describes the data recieved through the\n * channel's \"data\" event.\n * @template OnDataReducerType - A type extending React's Reducer<State, Action>\n * @param {string} channelId - The name of the channel to subscribe to.\n * @param {OnDataReducerType} reducer - A function that will be used to process\n * channel data.\n * @param {State<OnDataReducerType>} initialData - The initial state value for\n * the reducer.\n * @return {State<OnDataReducerType>} - the data output from the channel after\n * going through the reducer.\n */\nfunction useChannel<\n  OnDataEventType,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  OnDataReducerType extends Reducer<any, any>\n>(\n  channelId: string | null,\n  reducer: OnDataReducerType,\n  initialData: State<OnDataReducerType>\n): State<OnDataReducerType> {\n  const [state, dispatch] = useReducer<OnDataReducerType>(reducer, initialData);\n\n  useEffect(() => {\n    if (channelId !== null) {\n      joinChannel<OnDataEventType[]>(channelId, dispatch);\n    }\n    return () => {\n      if (channelId !== null) {\n        leaveChannel(channelId);\n      }\n    };\n  }, [channelId]);\n\n  useEffect(() => {\n    // Set up an event listener to listen to the channel's custom event\n    // update state when new data is emitted\n    const onChannelData = (\n      event: CustomEvent<Action<OnDataReducerType>>\n    ): void => dispatch(event.detail);\n    if (channelId) {\n      document.addEventListener(channelId, onChannelData as EventListener);\n    }\n    return () => {\n      if (channelId) {\n        document.removeEventListener(channelId, onChannelData as EventListener);\n      }\n    };\n  }, [channelId, dispatch]);\n\n  return state;\n}\n\nexport default useChannel;\n","import { useEffect, useState } from \"react\";\nimport { DirectionId } from \"../__v3api\";\n\nconst EVENT_NAME = \"changeddirection\";\n\n// for valid typing, extend DocumentEventMap interface to include custom event\ndeclare global {\n  interface DocumentEventMap {\n    [EVENT_NAME]: CustomEvent<{ direction: DirectionId }>;\n  }\n}\n\nexport function dispatchChangedDirection(direction: DirectionId): void {\n  document.dispatchEvent(\n    new CustomEvent(EVENT_NAME, {\n      detail: { direction }\n    })\n  );\n}\n\n// outputs the direction from a \"changeddirection\" event\nfunction useDirectionChangeEvent(initialDirection: DirectionId): DirectionId {\n  const [currentDirection, setCurrentDirection] = useState<DirectionId>(\n    initialDirection\n  );\n\n  useEffect(() => {\n    function listener(e: CustomEvent<{ direction: DirectionId }>): void {\n      setCurrentDirection(e.detail.direction);\n    }\n\n    document.addEventListener(EVENT_NAME, listener);\n\n    return () => {\n      document.removeEventListener(EVENT_NAME, listener);\n    };\n  }, []);\n\n  return currentDirection;\n}\n\nexport default useDirectionChangeEvent;\n","import { useEffect, useState } from \"react\";\nimport { fetchJsonOrThrow } from \"../helpers/fetch-json\";\nimport { RapidTransitHours, TransitHours } from \"../__v3api\";\n\nconst fetchData = async (\n  routeIdString: string\n): Promise<RapidTransitHours | TransitHours> =>\n  fetchJsonOrThrow(\n    `/schedules/${routeIdString}/line/hours?${window.location.search.substring(\n      1\n    )}`\n  );\n\nconst useHoursOfOperation = (\n  routeId: string\n): RapidTransitHours | TransitHours | null => {\n  const [hoursOfOperation, setHoursOfOperation] = useState<\n    RapidTransitHours | TransitHours | null\n  >(null);\n\n  useEffect(() => {\n    fetchData(routeId).then(result => setHoursOfOperation(result));\n  }, [routeId]);\n\n  return hoursOfOperation;\n};\n\nexport default useHoursOfOperation;\n","import { useState, useEffect } from \"react\";\n\ntype GlxOpenStatus = [boolean, string | null]; // [status, Date string if true status]\n\nconst getIsGlxOpen = (stationId: string): GlxOpenStatus => {\n  const glxStationsOpen: HTMLElement | null = document.querySelector(\n    \".glx-stations-open\"\n  );\n  if (!glxStationsOpen || !glxStationsOpen.dataset) return [false, null];\n  const { stations, opening } = glxStationsOpen.dataset;\n  const isStationOpen = stations ? stations.includes(stationId) : false;\n  const stationOpenDate = isStationOpen && opening ? opening : null;\n  return [isStationOpen, stationOpenDate];\n};\n\nconst useIsGlxOpen = (stopId: string): GlxOpenStatus => {\n  const [[isGlxOpen, glxOpenDate], setIsGlxOpen] = useState<GlxOpenStatus>([\n    false,\n    null\n  ]);\n  useEffect(() => {\n    setIsGlxOpen(getIsGlxOpen(stopId));\n  }, [stopId]);\n\n  return [isGlxOpen, glxOpenDate];\n};\n\nexport default useIsGlxOpen;\n","import useSWR, { Fetcher } from \"swr\";\nimport { LiveDataByStop } from \"../schedule/components/line-diagram/__line-diagram\";\nimport { DirectionId, Route } from \"../__v3api\";\n\n/**\n * Live data, including realtime vehicle locations and predictions\n * Available on all modes except ferry (route.type 4)\n */\nconst fetcher: Fetcher<LiveDataByStop, string> = (url: string) =>\n  fetch(url).then(response => response.json());\n\nconst useRealtime = (\n  route: Route,\n  directionId: DirectionId,\n  enabled: boolean = true\n): LiveDataByStop | undefined => {\n  const liveUrl = `/schedules/line_api/realtime?id=${route.id}&direction_id=${directionId}`;\n  const { data } = useSWR<LiveDataByStop>(\n    enabled && route.type !== 4 ? liveUrl : null,\n    fetcher,\n    {\n      refreshInterval: 15000\n    }\n  );\n  return data;\n};\n\nexport default useRealtime;\n","import { LatLng, latLng, LatLngBounds, latLngBounds } from \"leaflet\";\nimport { MapMarker as Marker } from \"./components/__mapdata\";\n\nconst getBounds = (markers: Marker[]): LatLngBounds | undefined => {\n  if (!markers.length) return undefined;\n  const points: LatLng[] = markers.map(m => latLng(m.latitude, m.longitude));\n  return latLngBounds(points);\n};\n\nexport default getBounds;\n","import React, { ReactElement, useLayoutEffect } from \"react\";\nimport { uniqBy } from \"lodash\";\nimport deepEqual from \"fast-deep-equal/react\";\nimport {\n  Icon,\n  LatLngBounds,\n  Marker as LeafletMarker,\n  MarkerOptions\n} from \"leaflet\";\nimport Leaflet from \"react-leaflet\";\nimport { MapData, MapMarker, IconOpts } from \"./__mapdata\";\n\nexport interface ZoomOpts {\n  maxZoom: number;\n  minZoom: number;\n  scrollWheelZoom: boolean;\n  style: object;\n}\n\nexport const defaultZoomOpts: ZoomOpts = {\n  maxZoom: 18,\n  minZoom: 9,\n  scrollWheelZoom: false,\n  style: { touchAction: \"none\" } // fix for chrome-android to prevent zooming page\n};\n\ninterface Props {\n  bounds?: LatLngBounds;\n  boundsByMarkers?: boolean;\n  mapData: MapData;\n}\n\nconst mapCenter = (\n  markers: MapMarker[],\n  { latitude, longitude }: { latitude: number; longitude: number }\n): [number, number] | undefined => {\n  if (markers.length === 1) return [markers[0].latitude, markers[0].longitude];\n  return [latitude, longitude];\n};\n\nconst rotateMarker = (\n  markerEl: LeafletMarker<MarkerOptions>,\n  { rotation_angle: angle }: MapMarker\n): void => {\n  // TS does not recognize setRotationAngle, which\n  // is added by the leaflet-rotatedmarker plugin\n  // @ts-ignore\n  markerEl.setRotationAngle(angle);\n};\n\nconst Component = ({\n  bounds,\n  boundsByMarkers,\n  mapData: {\n    default_center: defaultCenter,\n    markers,\n    polylines,\n    tile_server_url: tileServerUrl,\n    zoom\n  }\n}: Props): ReactElement<HTMLElement> | null => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const mapRef = React.createRef<any>();\n  useLayoutEffect(() => {\n    if (mapRef.current && mapRef.current.leafletElement) {\n      // tells Leaflet to redraw the map\n      mapRef.current.leafletElement.invalidateSize();\n    }\n  }, [mapRef]);\n\n  if (typeof window !== \"undefined\" && tileServerUrl !== \"\") {\n    /* eslint-disable */\n    const leaflet: typeof Leaflet = require(\"react-leaflet\");\n    const buildIcon: (\n      icon: string | null,\n      opts?: IconOpts\n    ) => Icon | undefined = require(\"../icon\").default;\n    require(\"leaflet-rotatedmarker\");\n    const getBounds = require(\"../bounds\").default;\n    /* eslint-enable */\n    const { Map, Marker, Polyline, Popup, TileLayer } = leaflet;\n    /* istanbul ignore next */\n    const boundsOrByMarkers = bounds || (boundsByMarkers && getBounds(markers));\n    const position = mapCenter(markers, defaultCenter);\n    const nonNullZoom = zoom === null ? undefined : zoom;\n\n    const onTilesLoaded = (): void => {\n      mapRef.current.container.parentElement.classList += \" map--loaded\";\n    };\n\n    return (\n      <Map\n        ref={mapRef}\n        bounds={boundsOrByMarkers}\n        center={position}\n        zoom={nonNullZoom}\n        {...defaultZoomOpts}\n      >\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url={`${tileServerUrl}/osm_tiles/{z}/{x}/{y}.png`}\n          onload={onTilesLoaded}\n        />\n        {polylines.map(\n          /* istanbul ignore next */\n          polyline => (\n            <Polyline\n              className={polyline.className}\n              key={\n                polyline.id || `polyline-${Math.floor(Math.random() * 1000)}`\n              }\n              positions={polyline.positions}\n              color={polyline.color}\n              weight={polyline.weight}\n              dashArray={polyline[\"dotted?\"] ? \"4px 8px\" : \"none\"}\n              lineCap={polyline[\"dotted?\"] ? \"butt\" : \"round\"}\n              lineJoin={polyline[\"dotted?\"] ? \"miter\" : \"round\"}\n            />\n          )\n        )}\n        {uniqBy(markers, \"id\").map(marker => (\n          <Marker\n            icon={buildIcon(marker.icon, marker.icon_opts)}\n            key={\n              marker.id ||\n              /* istanbul ignore next */ `marker-${Math.floor(\n                Math.random() * 1000\n              )}`\n            }\n            alt={marker.alt || \"Marker\"}\n            position={[marker.latitude, marker.longitude]}\n            ref={ref => ref && rotateMarker(ref.leafletElement, marker)}\n            zIndexOffset={marker.z_index}\n            keyboard={false}\n            onclick={marker.onClick}\n          >\n            {marker.tooltip && <Popup maxHeight={175}>{marker.tooltip}</Popup>}\n          </Marker>\n        ))}\n      </Map>\n    );\n  }\n  return null;\n};\n\nexport default React.memo(Component, deepEqual);\n","import { Icon } from \"leaflet\";\nimport { IconOpts } from \"../leaflet/components/__mapdata\";\n\nexport type IconType = (\n  icon: string | null,\n  opts: IconOpts | undefined\n) => Icon | undefined;\n\ninterface LeafletOpts {\n  iconSize: [number, number];\n  iconAnchor: [number, number];\n  popupAnchor: [number, number];\n}\n\nexport const defaultIconOpts: LeafletOpts = {\n  iconAnchor: [22, 55],\n  iconSize: [45, 75],\n  popupAnchor: [0, -37]\n};\n\nexport default (\n  icon: string | null,\n  opts?: IconOpts | null\n): Icon | undefined => {\n  const iconOpts =\n    opts !== null && opts\n      ? {\n          iconAnchor: opts.icon_anchor || defaultIconOpts.iconAnchor,\n          iconSize: opts.icon_size || defaultIconOpts.iconSize,\n          popupAnchor: opts.popup_anchor || defaultIconOpts.popupAnchor\n        }\n      : defaultIconOpts;\n  return icon === null\n    ? undefined\n    : new Icon({\n        ...iconOpts,\n        iconUrl: `/images/icon-${icon}.svg`,\n        iconRetinaUrl: `/images/icon-${icon}.svg`\n      });\n};\n","import { isValid, parseISO, add } from \"date-fns\";\nimport { concat, isArray, mergeWith, reduce, some } from \"lodash\";\nimport { StopId } from \"../schedule/components/__schedule\";\nimport { Activity, Alert, Facility, TimePeriodPairs } from \"../__v3api\";\n\nexport const isHighSeverityOrHighPriority = ({\n  priority,\n  severity\n}: Alert): boolean => priority === \"high\" || severity >= 7;\n\nexport const isDiversion = ({ effect }: Alert): boolean =>\n  effect === \"shuttle\" ||\n  effect === \"stop_closure\" ||\n  effect === \"station_closure\" ||\n  effect === \"detour\";\n\nexport const isHighPriorityAlert = ({ effect }: Alert): boolean =>\n  effect === \"detour\" || effect === \"suspension\" || effect === \"shuttle\";\n\nexport const alertsForEffects = (alerts: Alert[], effects: string[]): Alert[] =>\n  alerts.filter(a => effects.includes(a.effect));\n\nexport const alertsForEffect = (alerts: Alert[], effect: string): Alert[] =>\n  alertsForEffects(alerts, [effect]);\n\nexport const filterParkingAlerts = (alerts: Alert[]): Alert[] =>\n  alertsForEffects(alerts, [\"parking_closure\", \"parking_issue\"]);\n\nexport const isAmenityAlert = ({ effect }: Alert): boolean =>\n  [\n    \"elevator_closure\",\n    \"escalator_closure\",\n    \"parking_closure\",\n    \"parking_issue\",\n    \"bike_issue\"\n  ].includes(effect);\n\nexport const alertsForRoute = (alerts: Alert[], routeId: string): Alert[] => {\n  return alerts.filter(\n    ({ informed_entity: entities }: Alert): boolean =>\n      !!(entities.route && entities.route.some((id: string) => id === routeId))\n  );\n};\n\nexport const alertsByStop = (alerts: Alert[], stopId: StopId): Alert[] =>\n  alerts.filter(\n    ({ informed_entity: entities }: Alert): boolean =>\n      !!(entities.stop && entities.stop.some((id: StopId) => id === stopId))\n  );\n\nexport const alertsForStopAndRoute = (\n  alerts: Alert[],\n  stopId: StopId,\n  routeId: string\n): Alert[] => {\n  const stopAlerts = alertsByStop(alerts, stopId);\n  return alertsForRoute(stopAlerts, routeId);\n};\n\nexport const alertsByActivity = (\n  alerts: Alert[],\n  activity: Activity\n): Alert[] =>\n  alerts.filter(\n    ({ informed_entity: { activities } }: Alert): boolean =>\n      activities && activities.includes(activity)\n  );\n\nconst hasEffect = (alerts: Alert[], effect: string): boolean =>\n  some(alerts, alert => alert.effect === effect);\n\nexport const hasSuspension = (alerts: Alert[]): boolean =>\n  hasEffect(alerts, \"suspension\");\n\nexport const hasShuttleService = (alerts: Alert[]): boolean =>\n  hasEffect(alerts, \"shuttle\");\n\nexport const hasDetour = (alerts: Alert[]): boolean =>\n  hasEffect(alerts, \"detour\");\n\nexport const hasStopClosure = (alerts: Alert[]): boolean =>\n  hasEffect(alerts, \"stop_closure\");\n\nexport const hasStationClosure = (alerts: Alert[]): boolean =>\n  hasEffect(alerts, \"station_closure\");\n\nexport const hasClosure = (alerts: Alert[]): boolean =>\n  hasStopClosure(alerts) || hasStationClosure(alerts);\n\nexport const alertsWithStop = (alerts: Alert[]): Alert[] =>\n  alerts.filter(\n    ({ informed_entity: entites }: Alert): boolean => !!entites.stop\n  );\n\nexport const routeWideAlerts = (alerts: Alert[]): Alert[] =>\n  alerts.filter(({ informed_entity: { entities } }: Alert): boolean =>\n    entities.some(entity => !entity.stop && !entity.trip)\n  );\n\nexport const alertsByRoute = (alerts: Alert[]): { [key: string]: Alert[] } => {\n  return reduce(\n    alerts,\n    (acc, alert) => {\n      // create a map of every route id to the alert\n      const explodedAlerts = reduce(\n        alert.informed_entity.route,\n        (innerAcc, routeId) => {\n          return { ...innerAcc, [routeId]: [alert] };\n        },\n        {}\n      );\n\n      return mergeWith(acc, explodedAlerts, (objValue, srcValue) => {\n        if (isArray(objValue)) {\n          return objValue.concat(srcValue);\n        }\n        return srcValue;\n      });\n    },\n    {}\n  );\n};\n\n// This will only return alerts with direction id specified (aka affecting a single direction)\nexport const alertsByDirectionId = (\n  alerts: Alert[]\n): { [key: number]: Alert[] } => {\n  return reduce(\n    alerts,\n    (acc, alert) => {\n      const explodedAlerts = reduce(\n        alert.informed_entity.direction_id,\n        (innerAcc, directionId) => {\n          // only include specified directions\n          if (directionId !== null) {\n            return { ...innerAcc, [directionId]: [alert] };\n          }\n          return innerAcc;\n        },\n        {}\n      );\n\n      return mergeWith(acc, explodedAlerts, (objValue, srcValue) => {\n        if (isArray(objValue)) {\n          return objValue.concat(srcValue);\n        }\n        return srcValue;\n      });\n    },\n    {}\n  );\n};\n\nexport const alertsAffectingBothDirections = (alerts: Alert[]): Alert[] => {\n  return alerts.filter(alert => {\n    return (\n      alert.informed_entity.direction_id === null ||\n      alert.informed_entity.direction_id.length === 0 ||\n      alert.informed_entity.direction_id[0] === null\n    );\n  });\n};\n\nexport const allAlertsForDirection = (\n  alerts: Alert[],\n  direction_id: number\n): Alert[] => {\n  const alertsByDirectionObj = alertsByDirectionId(alerts);\n  const alertsAffectingBothDirectionsArray = alertsAffectingBothDirections(\n    alerts\n  );\n  const alertsDirectionArray = alertsByDirectionObj[direction_id]\n    ? alertsByDirectionObj[direction_id]\n    : [];\n\n  return concat(alertsAffectingBothDirectionsArray, alertsDirectionArray);\n};\n\nexport const uniqueByEffect = (\n  alert: Alert,\n  index: number,\n  alerts: Alert[]\n): boolean => alerts.findIndex(a => a.effect === alert.effect) === index;\n\nconst activePeriodToDates = (\n  activePeriod: TimePeriodPairs\n): (Date | null)[] => {\n  return activePeriod.map((d: string): Date | null => {\n    return parseISO(d);\n  });\n};\n\nexport const isCurrentLifecycle = ({ lifecycle }: Alert): boolean =>\n  lifecycle === \"new\" ||\n  lifecycle === \"ongoing\" ||\n  lifecycle === \"ongoing_upcoming\";\n\nexport const isUpcomingOrCurrentLifecycle = (alert: Alert): boolean =>\n  alert.lifecycle === \"upcoming\" || isCurrentLifecycle(alert);\n\nexport const isInNextXDays = (\n  alert: Alert,\n  days: number,\n  selectedDate: Date = new Date()\n): boolean => {\n  const xDays = add(selectedDate, { days });\n  xDays.setHours(23, 59, 59); // set to end of X day\n  if (!alert.active_period) return false;\n  const dateRanges = alert.active_period.map(ap => activePeriodToDates(ap));\n  const isInARange = dateRanges.some((range): boolean => {\n    const [start, end] = range;\n    if (!start || !isValid(start)) return false; // end might be null for ongoing alerts\n    if (!end || !isValid(end)) return true;\n\n    if (days === 0) {\n      return start <= selectedDate && end >= selectedDate;\n    }\n    return start <= xDays && end >= selectedDate;\n  });\n  return days === 0 ? isCurrentLifecycle(alert) && isInARange : isInARange;\n};\n\nexport const isActiveDiversion = (alert: Alert): boolean =>\n  isDiversion(alert) && isInNextXDays(alert, 0);\n\nexport const hasAnActiveDiversion = (\n  stopId: StopId,\n  alerts: Alert[]\n): boolean => alertsByStop(alerts, stopId).some(isActiveDiversion);\n\nexport const isGlobalBannerAlert = (alert: Alert): boolean => {\n  return alert.banner != null;\n};\n\nexport const hasCurrentFacilityAlert = (\n  facilityId: string,\n  alerts: Alert[]\n): boolean => {\n  return alerts.filter(isCurrentLifecycle).some(alert => {\n    if (alert.informed_entity?.facility) {\n      return alert.informed_entity.facility.includes(facilityId);\n    }\n    return false;\n  });\n};\n\nexport const alertsByFacility = (\n  facilities: Facility[],\n  alerts: Alert[]\n): Alert[] => {\n  const facilityIds = facilities.map(facility => facility.id);\n  return alerts.filter(({ informed_entity: { facility } }: Alert): boolean => {\n    if (facility) {\n      return facility.some(facilityId => facilityIds.includes(facilityId));\n    }\n    return false;\n  });\n};\n\n/**\n * Sometimes we want to use the alerts to affect the display of departures. This\n * is mainly when:\n * - A shuttle is in service\n * - A suspension is underway – accounting for the fact that, when a suspension\n *   applies to a range of stops, the first/last stops in that range might only\n *   experience the suspension in a single direction. We might not have\n *   sufficient data in the alert itself to conclusively determine that, but we\n *   can approximate this by observing whether arrival/departure data is\n *   present.\n */\nexport const isSuppressiveAlert = (\n  alert: Alert,\n  numPredictions: number\n): boolean => {\n  const { effect } = alert;\n  // if predictions are present, suspension or shuttle likely doesn't apply here\n  const isValidSuppressiveAlert =\n    ((effect === \"suspension\" || effect === \"shuttle\") &&\n      numPredictions === 0) ||\n    effect === \"station_closure\" ||\n    effect === \"stop_closure\";\n  return isCurrentLifecycle(alert) && isValidSuppressiveAlert;\n};\n","import { TripPrediction } from \"../schedule/components/__trips\";\nimport { HeadsignWithCrowding } from \"../__v3api\";\n\n// eslint-disable-next-line import/prefer-default-export\nexport const isSkippedOrCancelled = (\n  prediction: TripPrediction | null\n): boolean =>\n  prediction\n    ? prediction.schedule_relationship === \"skipped\" ||\n      prediction.schedule_relationship === \"cancelled\"\n    : false;\n\nexport const hasPredictionTime = ({\n  time_data_with_crowding_list: timeDataList\n}: HeadsignWithCrowding): boolean =>\n  !!(\n    timeDataList &&\n    timeDataList[0] &&\n    timeDataList[0].time_data &&\n    timeDataList[0].time_data.prediction &&\n    timeDataList[0].time_data.prediction.time\n  );\n","import { Mode, Route, RouteType } from \"../__v3api\";\n\nconst isRouteType = (obj: Route | RouteType): obj is RouteType =>\n  typeof obj === \"number\";\n\nexport const isFerryRoute = ({ type }: Route): boolean => type === 4;\n\nexport const isABusRoute = ({ type }: Route): boolean => type === 3;\n\nexport const isSubwayRoute = ({ type }: Route): boolean =>\n  type === 1 || type === 0;\n\nconst isCommuterRailRouteType = (type: RouteType): boolean => type === 2;\n\nexport const isACommuterRailRoute = (routeOrType: Route | RouteType): boolean =>\n  isRouteType(routeOrType)\n    ? isCommuterRailRouteType(routeOrType)\n    : isCommuterRailRouteType(routeOrType.type);\n\nexport const isAGreenLineRoute = ({ id }: Route): boolean =>\n  id.startsWith(\"Green\");\n\nexport const isASilverLineRoute = (routeOrRouteId: Route | string): boolean => {\n  const id =\n    typeof routeOrRouteId === \"string\" ? routeOrRouteId : routeOrRouteId.id;\n  return [\"741\", \"742\", \"743\", \"746\", \"749\", \"751\"].includes(id);\n};\n\nexport const RAPID_TRANSIT = \"rapid_transit\";\nexport const RAIL_REPLACEMENT_BUS = \"rail_replacement_bus\";\n\nexport const isRapidTransit = ({ description }: Route): boolean =>\n  description === RAPID_TRANSIT;\nexport const isGreenLine = ({ id }: Route): boolean => id === \"Green\";\nexport const isRailReplacementBus = ({ description }: Route): boolean =>\n  description === RAIL_REPLACEMENT_BUS;\n\nconst routeTypesToMode: {\n  [key in RouteType]: Mode;\n} = {\n  0: \"subway\",\n  1: \"subway\",\n  2: \"commuter_rail\",\n  3: \"bus\",\n  4: \"ferry\"\n};\n\nexport const modeForRoute = ({ type }: Route): Mode => routeTypesToMode[type];\n","import { CrowdingType } from \"../schedule/components/__schedule\";\n\n// eslint-disable-next-line import/prefer-default-export\nexport const crowdingDescriptions = (crowding: CrowdingType): string =>\n  crowding\n    ? {\n        // eslint-disable-next-line camelcase\n        not_crowded: \"Not crowded\",\n        // eslint-disable-next-line camelcase\n        some_crowding: \"Some crowding\",\n        crowded: \"Crowded\"\n      }[crowding]\n    : \"\";\n\nexport const crCrowdingDescriptions = (crowding: CrowdingType): string =>\n  crowding\n    ? {\n        // eslint-disable-next-line camelcase\n        not_crowded: \"many seats available\",\n        // eslint-disable-next-line camelcase\n        some_crowding: \"some seats available\",\n        crowded: \"few seats available\"\n      }[crowding]\n    : \"\";\n","import { ReactElement } from \"react\";\n\nimport {\n  blueLineIcon,\n  busIcon,\n  commuterRailIcon,\n  ferryIcon,\n  genericSubwayIcon,\n  greenLineIcon,\n  greenBLineIcon,\n  greenCLineIcon,\n  greenDLineIcon,\n  greenELineIcon,\n  mattapanLineIcon,\n  orangeLineIcon,\n  redLineIcon,\n  silverLineIcon\n} from \"../../helpers/icon\";\n\ninterface TagDispatchTable {\n  [key: string]: (className: string) => JSX.Element;\n}\n\ninterface Props {\n  tag: string;\n  extraClasses: string;\n}\n\nconst tagsToIcons: TagDispatchTable = {\n  blue: blueLineIcon,\n  bus: busIcon,\n  commuterRail: commuterRailIcon,\n  ferry: ferryIcon,\n  green: greenLineIcon,\n  \"green-b\": greenBLineIcon,\n  \"green-c\": greenCLineIcon,\n  \"green-d\": greenDLineIcon,\n  \"green-e\": greenELineIcon,\n  mattapan: mattapanLineIcon,\n  orange: orangeLineIcon,\n  red: redLineIcon,\n  silver: silverLineIcon,\n  subway: genericSubwayIcon\n};\n\nconst RouteIcon = ({ tag, extraClasses }: Props): ReactElement<HTMLElement> => {\n  const iconFunction = tagsToIcons[tag];\n  return iconFunction(`c-svg__icon ${extraClasses}`);\n};\n\nexport default RouteIcon;\n","import schedule from \"./schedule/schedule-loader\";\n\nschedule();\n","import React, { ReactElement } from \"react\";\nimport { Holiday, SchedulePDF, Fare, ScheduleNote } from \"./__schedule\";\nimport { EnhancedRoute } from \"../../__v3api\";\nimport { TypedRoutes } from \"../../stop/components/__stop\";\nimport PDFSchedules from \"./PDFSchedules\";\nimport Connections from \"./Connections\";\nimport ContentTeasers from \"./ContentTeasers\";\nimport Fares from \"./Fares\";\nimport UpcomingHolidays from \"./UpcomingHolidays\";\nimport HoursOfOperation from \"./HoursOfOperation\";\nimport { isSubwayRoute } from \"../../models/route\";\n\ninterface Props {\n  teasers: string | null;\n  pdfs: SchedulePDF[];\n  connections: TypedRoutes[];\n  fares: Fare[];\n  fareLink: string;\n  route: EnhancedRoute;\n  holidays: Holiday[];\n  scheduleNote: ScheduleNote | null;\n  hours: string;\n}\n\nconst AdditionalLineInfo = ({\n  connections,\n  pdfs,\n  teasers,\n  fares,\n  holidays,\n  fareLink,\n  route,\n  hours,\n  scheduleNote\n}: Props): ReactElement<HTMLElement> => (\n  <>\n    <ContentTeasers teasers={teasers} />\n    <PDFSchedules pdfs={pdfs} />\n    <Connections connections={connections} />\n    <Fares fares={fares} fareLink={fareLink} routeType={route.type} />\n    {/* Only show the hours for non subway lines */}\n    {!isSubwayRoute(route) && (\n      <HoursOfOperation\n        route={route}\n        pdfs={pdfs}\n        scheduleNote={scheduleNote}\n        hours={hours}\n      />\n    )}\n    <UpcomingHolidays holidays={holidays} />\n  </>\n);\n\nexport default AdditionalLineInfo;\n","import React, { ReactElement } from \"react\";\nimport ExpandableBlock from \"../../components/ExpandableBlock\";\nimport RoutePillList from \"../../stop/components/RoutePillList\";\nimport { TypedRoutes } from \"../../stop/components/__stop\";\n\ninterface Props {\n  connections: TypedRoutes[];\n}\n\nconst Connections = ({\n  connections\n}: Props): ReactElement<HTMLDivElement> | null =>\n  connections.length ? (\n    <ExpandableBlock\n      header={{ text: \"Connections\", iconSvgText: null }}\n      initiallyExpanded={false}\n      id=\"connections\"\n    >\n      <RoutePillList routes={connections} showGroupName />\n    </ExpandableBlock>\n  ) : null;\n\nexport default Connections;\n","import React, { ReactElement } from \"react\";\n\ninterface Props {\n  teasers: string | null;\n}\n\nconst ContentTeasers = ({ teasers }: Props): ReactElement<HTMLElement> | null =>\n  // eslint-disable-next-line react/no-danger\n  teasers ? <div dangerouslySetInnerHTML={{ __html: teasers }} /> : null;\n\nexport default ContentTeasers;\n","import React, { ReactElement } from \"react\";\nimport ExpandableBlock from \"../../components/ExpandableBlock\";\n\nconst DefaultHoursOfOperation = ({\n  hours\n}: {\n  hours: string;\n}): ReactElement<HTMLElement> | null =>\n  hours ? (\n    <ExpandableBlock\n      header={{ text: \"Hours of Operation\", iconSvgText: null }}\n      initiallyExpanded={false}\n      id=\"hours\"\n    >\n      <div\n        className=\"m-schedule-page__sidebar-hours\"\n        // eslint-disable-next-line react/no-danger\n        dangerouslySetInnerHTML={{ __html: hours }}\n      />\n    </ExpandableBlock>\n  ) : null;\n\nexport default DefaultHoursOfOperation;\n","import React, { ReactElement } from \"react\";\nimport ExpandableBlock from \"../../components/ExpandableBlock\";\nimport { Fare } from \"./__schedule\";\nimport { RouteType } from \"../../__v3api\";\n\nconst fareItem = (fare: Fare): ReactElement<HTMLElement> => (\n  <p key={fare.title} className=\"m-schedule-page__fare\">\n    <span>{fare.title}</span>\n    <span>{fare.price}</span>\n  </p>\n);\n\ninterface Props {\n  fares: Fare[];\n  fareLink: string;\n  routeType: RouteType;\n}\n\nconst Fares = ({\n  fares,\n  fareLink,\n  routeType\n}: Props): ReactElement<HTMLElement> | null =>\n  fares.length > 0 ? (\n    <ExpandableBlock\n      header={{ text: \"Fares\", iconSvgText: null }}\n      initiallyExpanded={false}\n      id=\"fares\"\n    >\n      <>\n        {fares.map(f => fareItem(f))}\n        {routeType === 2 && (\n          <p>\n            <a className=\"c-call-to-action\" href=\"/fares/commuter-rail-fares\">\n              Commuter Rail Fares\n            </a>\n          </p>\n        )}\n        <p className=\"m-schedule-page__link\">\n          <a className=\"c-call-to-action\" href={fareLink}>\n            More about fares\n          </a>\n        </p>\n      </>\n    </ExpandableBlock>\n  ) : null;\n\nexport default Fares;\n","import React, { ReactElement } from \"react\";\nimport ExpandableBlock from \"../../components/ExpandableBlock\";\nimport pdfLink from \"../helpers/hoursOfOperationHelpers\";\nimport { SchedulePDF } from \"./__schedule\";\n\nconst getGreenLineScheduleLinks = (): ReactElement<HTMLElement> => (\n  <>\n    <div>\n      <a href=\"/schedules/Green-B/line\">B Line Schedule</a>\n    </div>\n    <div>\n      <a href=\"/schedules/Green-C/line\">C Line Schedule</a>\n    </div>\n    <div>\n      <a href=\"/schedules/Green-D/line\">D Line Schedule</a>\n    </div>\n    <div>\n      <a href=\"/schedules/Green-E/line\">E Line Schedule</a>\n    </div>\n  </>\n);\n\nconst GreenLineScheduleLinks = ({\n  pdfs\n}: {\n  pdfs: SchedulePDF[];\n}): ReactElement<HTMLElement> | null => (\n  <>\n    <ExpandableBlock\n      header={{ text: \"Weekday Schedule\", iconSvgText: null }}\n      initiallyExpanded={false}\n      id=\"weekday-hours\"\n    >\n      <div className=\"m-schedule-page__sidebar-hours\">\n        {getGreenLineScheduleLinks()}\n        {pdfLink(pdfs[0])}\n      </div>\n    </ExpandableBlock>\n    <ExpandableBlock\n      header={{ text: \"Weekend Schedule\", iconSvgText: null }}\n      initiallyExpanded={false}\n      id=\"weekend-hours\"\n    >\n      <div className=\"m-schedule-page__sidebar-hours\">\n        {getGreenLineScheduleLinks()}\n        {pdfLink(pdfs[0])}\n      </div>\n    </ExpandableBlock>\n  </>\n);\n\nexport default GreenLineScheduleLinks;\n","import React, { ReactElement } from \"react\";\nimport { isGreenLine, isRapidTransit } from \"../../models/route\";\nimport { EnhancedRoute } from \"../../__v3api\";\nimport DefaultHoursOfOperation from \"./DefaultHoursOfOperation\";\nimport GreenLineScheduleLinks from \"./GreenLineScheduleLinks\";\nimport RapidTransitHoursOfOperation from \"./RapidTransitHoursOfOperation\";\nimport { SchedulePDF, ScheduleNote } from \"./__schedule\";\n\nconst HoursOfOperation = ({\n  route,\n  pdfs,\n  hours,\n  scheduleNote\n}: {\n  route: EnhancedRoute;\n  pdfs: SchedulePDF[];\n  hours: string;\n  scheduleNote: ScheduleNote | null;\n}): ReactElement<HTMLElement> | null => {\n  if (isGreenLine(route)) {\n    return <GreenLineScheduleLinks pdfs={pdfs} />;\n  }\n  if (isRapidTransit(route)) {\n    return (\n      <RapidTransitHoursOfOperation\n        pdfs={pdfs}\n        route={route}\n        scheduleNote={scheduleNote}\n      />\n    );\n  }\n  return <DefaultHoursOfOperation hours={hours} />;\n};\n\nexport default HoursOfOperation;\n","import React, { ReactElement, Reducer, useRef } from \"react\";\nimport { SocketEvent } from \"../../app/channels\";\nimport LeafletMap from \"../../leaflet/components/Map\";\nimport getBounds from \"../../leaflet/bounds\";\nimport {\n  MapData,\n  MapMarker as Marker\n} from \"../../leaflet/components/__mapdata\";\nimport CrowdingPill from \"./line-diagram/CrowdingPill\";\nimport useChannel from \"../../hooks/useChannel\";\n\ninterface Props {\n  channel: string;\n  data: MapData;\n  currentShapes: string[];\n  currentStops: string[];\n}\n\nexport const iconOpts = (\n  icon: string | null\n): {\n  icon_size?: [number, number];\n  icon_anchor?: [number, number];\n} => {\n  switch (icon) {\n    case null:\n      return {};\n\n    case \"vehicle-bordered-expanded\":\n      return {\n        icon_size: [18, 18], // eslint-disable-line camelcase\n        icon_anchor: [6, 6] // eslint-disable-line camelcase\n      };\n\n    case \"stop-circle-bordered-expanded\":\n      return {\n        icon_size: [12, 12], // eslint-disable-line camelcase\n        icon_anchor: [6, 6] // eslint-disable-line camelcase\n      };\n\n    default:\n      throw new Error(`unexpected icon type: ${icon}`);\n  }\n};\n\nconst zIndex = (icon: string | null): number | undefined =>\n  icon === \"vehicle-bordered-expanded\" ? 1000 : undefined;\n\nconst updateMarker = (marker: Marker): Marker => ({\n  ...marker,\n  tooltip: (\n    <div>\n      {marker.vehicle_crowding && (\n        <>\n          <CrowdingPill crowding={marker.vehicle_crowding} />\n          <br />\n        </>\n      )}\n      {marker.tooltip_text}\n    </div>\n  ),\n  icon_opts: iconOpts(marker.icon), // eslint-disable-line camelcase\n  z_index: zIndex(marker.icon) // eslint-disable-line camelcase\n});\n\nconst isVehicleMarker = (marker: Marker): boolean =>\n  marker.icon ? marker.icon.includes(\"vehicle\") : false;\n\ninterface IdHash {\n  [id: string]: true;\n}\n\nconst shouldRemoveMarker = (id: string | null, idHash: IdHash): boolean =>\n  id !== null && idHash[id] === true;\n\ninterface EventData {\n  marker: Marker;\n}\n\ntype DataFromSocketType = SocketEvent<EventData[]>;\ninterface DataReducerState {\n  markers: Marker[];\n}\ntype DataReducerAction = DataFromSocketType;\ntype DataReducerType = Reducer<DataReducerState, DataReducerAction>;\n\nexport const reducer: DataReducerType = (state, action) => {\n  switch (action.event) {\n    case \"reset\":\n      return {\n        ...state,\n        markers: state.markers\n          .filter(marker => !isVehicleMarker(marker))\n          .concat(\n            action.data.map(({ marker }: EventData) => updateMarker(marker))\n          )\n      };\n\n    case \"add\":\n      return {\n        ...state,\n        markers: state.markers.concat(\n          action.data.map(({ marker }) => updateMarker(marker))\n        )\n      };\n\n    case \"update\":\n      if (action.data.length === 0) {\n        return state;\n      }\n      // Filter out the existing marker if necessary, always add new marker\n      return {\n        ...state,\n        markers: [\n          updateMarker(action.data[0].marker),\n          ...state.markers.filter(\n            marker => marker.id !== action.data[0].marker.id\n          )\n        ]\n      };\n    case \"remove\":\n      return {\n        ...state,\n        markers: state.markers.filter(\n          marker =>\n            !shouldRemoveMarker(\n              marker.id,\n              action.data.reduce((acc: IdHash, id: string) => {\n                acc[id] = true;\n                return acc;\n              }, {})\n            )\n        )\n      };\n    default:\n      /* istanbul ignore next */\n      // eslint-disable-next-line no-console\n      console.error(\"unexpected event\", action);\n      return state;\n  }\n};\n\nconst Map = ({\n  data,\n  channel,\n  currentShapes,\n  currentStops\n}: Props): ReactElement<HTMLElement> | null => {\n  const state = useChannel<DataFromSocketType, DataReducerType>(\n    channel,\n    reducer,\n    { markers: [] }\n  );\n\n  const stopMarkers = data.stop_markers\n    ? data.stop_markers\n        .filter(mark => currentStops.includes(mark.id as string))\n        .map(marker => updateMarker(marker))\n    : [];\n\n  const mapData = {\n    ...data,\n    polylines: data.polylines.filter(p =>\n      currentShapes.some(shape => shape === p.id)\n    ),\n    markers: state.markers.concat(stopMarkers)\n  };\n  const bounds = useRef(getBounds(stopMarkers));\n  return (\n    <div className=\"m-schedule__map\">\n      <LeafletMap bounds={bounds.current} mapData={mapData} />\n    </div>\n  );\n};\n\nexport default Map;\n","import React, { ReactElement } from \"react\";\nimport ExpandableBlock from \"../../components/ExpandableBlock\";\nimport { SchedulePDF } from \"./__schedule\";\nimport renderSvg from \"../../helpers/render-svg\";\nimport pdfIcon from \"../../../static/images/icon-pdf-default.svg\";\n\nconst link = (pdf: SchedulePDF): ReactElement<HTMLElement> => (\n  <a\n    key={pdf.url}\n    href={pdf.url}\n    rel=\"noopener noreferrer\"\n    target=\"_blank\"\n    data-turbolinks=\"false\"\n    className=\"m-schedule-page__sidebar-pdfs\"\n  >\n    {renderSvg(\"c-svg__icon-pdf\", pdfIcon)}\n    {pdf.title}\n  </a>\n);\n\ninterface Props {\n  pdfs: SchedulePDF[];\n}\n\nconst PDFSchedules = ({ pdfs }: Props): ReactElement<HTMLElement> | null =>\n  pdfs.length > 0 ? (\n    <ExpandableBlock\n      header={{ text: \"PDF Schedules\", iconSvgText: null }}\n      initiallyExpanded\n      id=\"pdfs\"\n    >\n      <>{pdfs.map(pdf => link(pdf))}</>\n    </ExpandableBlock>\n  ) : null;\n\nexport default PDFSchedules;\n","import { isEqual, isWeekend, parseISO } from \"date-fns\";\nimport { map, uniqueId, sortBy, filter, concat } from \"lodash\";\nimport React, { ReactElement } from \"react\";\nimport ExpandableBlock from \"../../components/ExpandableBlock\";\nimport { formatToBostonTime } from \"../../helpers/date\";\nimport useHoursOfOperation from \"../../hooks/useHoursOfOperation\";\nimport { EnhancedRoute, StopHours } from \"../../__v3api\";\nimport pdfLink from \"../helpers/hoursOfOperationHelpers\";\nimport { ScheduleNote, SchedulePDF } from \"./__schedule\";\n\nconst getSchedule = (\n  dataArray: StopHours[][] | StopHours[]\n): ReactElement<HTMLElement>[] | ReactElement<HTMLElement> => {\n  if (dataArray.length === 0) {\n    return [];\n  }\n  const bothDirectionData = concat(dataArray[0], dataArray[1]);\n  const filteredData = filter(\n    bothDirectionData,\n    (stopData: StopHours) => stopData.is_terminus\n  );\n  const sortedData = sortBy(\n    filteredData,\n    (stopData: StopHours) => stopData.stop_name\n  );\n  const mappedData = map(sortedData, (stopData: StopHours) => {\n    const firstDeparture = parseISO(stopData.first_departure);\n    const lastDeparture = parseISO(stopData.last_departure);\n    if (isEqual(firstDeparture, lastDeparture)) {\n      return <></>;\n    }\n    const timeString = `${formatToBostonTime(\n      stopData.first_departure\n    )} – ${formatToBostonTime(stopData.last_departure)}`;\n    return (\n      <div key={uniqueId()} className=\"fs-18 font-helvetica-neue\">\n        <span className=\"pe-16\">{stopData.stop_name}</span>\n        <span className=\"font-weight-bold\">{timeString}</span>\n      </div>\n    );\n  });\n\n  return mappedData;\n};\n\nconst regularScheduleHTML = (): JSX.Element => (\n  <div className=\"font-weight-bold fs-14 pb-8\">Regular schedule</div>\n);\n\nconst trainsEveryHTML = (minuteString: string | undefined): JSX.Element => (\n  <div className=\"fs-14 pt-8\">{`Trains depart every ${minuteString}`}</div>\n);\n\nconst RapidTransitHoursOfOperation = ({\n  route,\n  pdfs,\n  scheduleNote\n}: {\n  route: EnhancedRoute;\n  pdfs: SchedulePDF[];\n  scheduleNote: ScheduleNote | null;\n}): ReactElement<HTMLElement> => {\n  const hours = useHoursOfOperation(route.id);\n  const isTodayWeekend = isWeekend(new Date());\n  const hideScheduleFrequency = route.id === \"Orange\";\n\n  return (\n    <>\n      <ExpandableBlock\n        header={{ text: \"Weekday Schedule\", iconSvgText: null }}\n        initiallyExpanded={!isTodayWeekend}\n        id=\"weekday-hours\"\n      >\n        <div className=\"m-schedule-page__sidebar-hours\">\n          {regularScheduleHTML()}\n          {hours && getSchedule(hours.week)}\n          {!hideScheduleFrequency &&\n            trainsEveryHTML(scheduleNote?.peak_service)}\n          {pdfLink(pdfs[0])}\n        </div>\n      </ExpandableBlock>\n      <ExpandableBlock\n        header={{ text: \"Weekend Schedule\", iconSvgText: null }}\n        initiallyExpanded={isTodayWeekend}\n        id=\"weekend-hours\"\n      >\n        <div className=\"m-schedule-page__sidebar-hours\">\n          <div className=\"font-weight-bold fs-18 pb-14 font-helvetica-neue\">\n            Saturday\n          </div>\n          {regularScheduleHTML()}\n          {hours && getSchedule(hours.saturday)}\n          {!hideScheduleFrequency &&\n            trainsEveryHTML(scheduleNote?.saturday_service)}\n          <hr\n            style={{\n              borderBottomWidth: \"1px\",\n              borderBottomColor: \"#e9eaed\",\n              borderBottomStyle: \"solid\",\n              marginBottom: \"0rem\"\n            }}\n          />\n          <div className=\"font-weight-bold fs-18 pt-18 pb-14 font-helvetica-neue\">\n            Sunday\n          </div>\n          {regularScheduleHTML()}\n          {hours && getSchedule(hours.sunday)}\n          {!hideScheduleFrequency &&\n            trainsEveryHTML(scheduleNote?.sunday_service)}\n          {pdfLink(pdfs[0])}\n        </div>\n      </ExpandableBlock>\n    </>\n  );\n};\n\nexport default RapidTransitHoursOfOperation;\n","import React, { ReactElement, useReducer, useEffect, Dispatch } from \"react\";\nimport { Alert, DirectionId, EnhancedRoute } from \"../../__v3api\";\nimport {\n  RoutePatternsByDirection,\n  EnhancedRoutePattern,\n  StopTree,\n  RouteStop,\n  IndexedRouteStop\n} from \"./__schedule\";\nimport ScheduleDirectionMenu from \"./direction/ScheduleDirectionMenu\";\nimport ScheduleDirectionButton from \"./direction/ScheduleDirectionButton\";\nimport { fetchAction, reducer as fetchReducer } from \"../../helpers/fetch\";\nimport { menuReducer } from \"./direction/reducer\";\nimport { MapData, StaticMapData } from \"../../leaflet/components/__mapdata\";\nimport Map from \"./Map\";\nimport {\n  isABusRoute,\n  isSubwayRoute,\n  isACommuterRailRoute\n} from \"../../models/route\";\nimport LineDiagram from \"./line-diagram/LineDiagram\";\nimport { fromStopTreeData } from \"./ScheduleLoader\";\n\nexport interface Props {\n  route: EnhancedRoute;\n  directionId: DirectionId;\n  routePatternsByDirection: RoutePatternsByDirection;\n  mapData?: MapData;\n  staticMapData?: StaticMapData;\n  stopTree: StopTree | null;\n  routeStopLists: RouteStop[][] | null;\n  alerts: Alert[];\n  busVariantId: string | null;\n}\n\nexport const fetchMapData = (\n  routeId: string,\n  directionId: DirectionId,\n  currentRoutePatternIdForData: string | undefined,\n  dispatch: Dispatch<fetchAction>\n): Promise<void> => {\n  dispatch({ type: \"FETCH_STARTED\" });\n  const baseURL = `/schedules/map_api?id=${routeId}&direction_id=${directionId}`;\n  const url = currentRoutePatternIdForData\n    ? `${baseURL}&shape_id=${currentRoutePatternIdForData}`\n    : baseURL;\n\n  return (\n    window.fetch &&\n    window\n      .fetch(url)\n      .then(response => {\n        if (response.ok) return response.json();\n        throw new Error(response.statusText);\n      })\n      .then(json => dispatch({ type: \"FETCH_COMPLETE\", payload: json }))\n      // @ts-ignore\n      .catch(() => dispatch({ type: \"FETCH_ERROR\" }))\n  );\n};\n\nexport const fetchLineData = (\n  routeId: string,\n  directionId: DirectionId,\n  currentRoutePatternIdForData: string | undefined,\n  dispatch: Dispatch<fetchAction>\n): Promise<void> => {\n  dispatch({ type: \"FETCH_STARTED\" });\n\n  const baseURL = `/schedules/line_api?id=${routeId}&direction_id=${directionId}`;\n  const url = currentRoutePatternIdForData\n    ? `${baseURL}&route_pattern=${currentRoutePatternIdForData}`\n    : baseURL;\n\n  return (\n    window.fetch &&\n    window\n      .fetch(url)\n      .then(response => {\n        if (response.ok) return response.json();\n        throw new Error(response.statusText);\n      })\n      .then(({ stop_tree, route_stop_lists }) => {\n        const stopTree = stop_tree ? fromStopTreeData(stop_tree) : null;\n        const routeStopListsWithIndices: IndexedRouteStop[][] = route_stop_lists\n          ? (route_stop_lists as RouteStop[][]).map(rs_list =>\n              rs_list.map((rs, index) => ({ ...rs, routeIndex: index }))\n            )\n          : [];\n        dispatch({\n          type: \"FETCH_COMPLETE\",\n          payload: { stopTree, routeStopLists: routeStopListsWithIndices }\n        });\n      })\n      // @ts-ignore\n      .catch(() => dispatch({ type: \"FETCH_ERROR\" }))\n  );\n};\n\nconst ScheduleDirection = ({\n  route,\n  directionId,\n  routePatternsByDirection,\n  mapData,\n  staticMapData,\n  stopTree: initialStopTree,\n  routeStopLists: initialRouteStopLists,\n  alerts,\n  busVariantId\n}: Props): ReactElement<HTMLElement> => {\n  const routePatternsInCurrentDirection = routePatternsByDirection[directionId];\n  const defaultRoutePattern =\n    routePatternsInCurrentDirection.find(\n      routePattern => routePattern.id === busVariantId\n    ) || routePatternsInCurrentDirection.slice(0, 1)[0];\n\n  const reverseDirection = directionId === 0 ? 1 : 0;\n  const directionIsChangeable = route.direction_names[reverseDirection] != null;\n\n  const [state, dispatch] = useReducer(menuReducer, {\n    routePattern: defaultRoutePattern,\n    directionId,\n    routePatternsByDirection,\n    routePatternMenuOpen: false,\n    routePatternMenuAll: false,\n    itemFocus: null\n  });\n\n  const [mapState, dispatchMapData] = useReducer(fetchReducer, {\n    data: mapData,\n    isLoading: false,\n    error: false\n  });\n\n  // To distinguish CR shuttles and branches and multi-route trips, we have to filter in a particular order:\n  //    1. Filter by route_id - we only want to show the primary path, not the multi-route trips\n  //    2. Filter by typicality\n  //    3. If there are multiple route_patterns with different shape values, then filter out shuttles (which usually have priority = -1)\n  let currentShapes;\n  let currentStops;\n  if (isABusRoute(route)) {\n    currentShapes = [state.routePattern.shape_id];\n    currentStops = state.routePattern.stop_ids;\n  } else if (isACommuterRailRoute(route)) {\n    const currentPatterns = routePatternsInCurrentDirection\n      .filter(pattern => pattern.route_id === route.id)\n      .reduce((result, current) => {\n        if (result.length === 0 || current.typicality < result[0].typicality)\n          return [current];\n        if (current.typicality === result[0].typicality) {\n          if (result[0].shape_priority < 0 && current.shape_priority > 0)\n            return [current];\n          if (current.shape_priority < 0 && result[0].shape_priority > 0)\n            return result;\n          return result.concat(current);\n        }\n        return result;\n      }, [] as EnhancedRoutePattern[]);\n\n    currentShapes = currentPatterns.map(pattern => pattern.shape_id);\n    currentStops = currentPatterns.reduce(\n      (acc, cur) => acc.concat(cur.stop_ids),\n      [] as string[]\n    );\n  } else {\n    currentShapes = routePatternsInCurrentDirection.map(\n      pattern => pattern.shape_id\n    );\n    currentStops = routePatternsInCurrentDirection.reduce(\n      (acc, cur) => acc.concat(cur.stop_ids),\n      [] as string[]\n    );\n  }\n\n  const currentRoutePatternIdForData =\n    isABusRoute(route) && routePatternsInCurrentDirection.length > 1\n      ? state.routePattern.id\n      : undefined;\n\n  useEffect(\n    () => {\n      if (!staticMapData) {\n        fetchMapData(\n          route.id,\n          state.directionId,\n          currentRoutePatternIdForData,\n          dispatchMapData\n        );\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [route, state.directionId, busVariantId, staticMapData]\n  );\n\n  const [lineState, dispatchLineData] = useReducer(fetchReducer, {\n    data: {\n      stopTree: initialStopTree,\n      routeStopLists: initialRouteStopLists\n    },\n    isLoading: false,\n    error: false\n  });\n  useEffect(() => {\n    fetchLineData(\n      route.id,\n      state.directionId,\n      currentRoutePatternIdForData,\n      dispatchLineData\n    );\n  }, [route, state.directionId, busVariantId, currentRoutePatternIdForData]);\n\n  const routeStopList =\n    lineState.data && lineState.data.routeStopLists\n      ? (lineState.data.routeStopLists as IndexedRouteStop[][]).find(\n          rsList => !!rsList.find(rs => rs.branch === state.routePattern.name)\n        ) || []\n      : [];\n  return (\n    <>\n      <div className=\"m-schedule-direction\">\n        <div id=\"direction-name\" className=\"m-schedule-direction__direction\">\n          {route.direction_names[state.directionId]}\n        </div>\n        <ScheduleDirectionMenu\n          route={route}\n          directionId={state.directionId}\n          routePatternsByDirection={routePatternsByDirection}\n          selectedRoutePatternId={state.routePattern.id}\n          menuOpen={state.routePatternMenuOpen}\n          showAllRoutePatterns={state.routePatternMenuAll}\n          itemFocus={state.itemFocus}\n          dispatch={dispatch}\n        />\n        {directionIsChangeable ? (\n          <ScheduleDirectionButton dispatch={dispatch} />\n        ) : null}\n      </div>\n      {isSubwayRoute(route) && lineState.data && (\n        <LineDiagram\n          stopTree={lineState.data.stopTree}\n          routeStopList={routeStopList}\n          route={route}\n          directionId={state.directionId}\n          alerts={alerts}\n        />\n      )}\n\n      {!staticMapData && mapState.data && (\n        <Map\n          channel={`vehicles:${route.id}:${state.directionId}`}\n          data={mapState.data}\n          currentShapes={currentShapes}\n          currentStops={currentStops}\n        />\n      )}\n      {staticMapData && (\n        <>\n          <img\n            src={staticMapData.img_src}\n            alt={`${route.name} route map`}\n            className=\"img-fluid\"\n          />\n          <a\n            href={staticMapData.pdf_url}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <i className=\"fa fa-search-plus\" aria-hidden=\"true\" />\n            View map as a PDF\n          </a>\n        </>\n      )}\n      {!isSubwayRoute(route) && (\n        <LineDiagram\n          stopTree={lineState.data && lineState.data.stopTree}\n          routeStopList={routeStopList}\n          route={route}\n          directionId={state.directionId}\n          alerts={alerts}\n        />\n      )}\n    </>\n  );\n};\n\nexport default ScheduleDirection;\n","import React, { ReactElement } from \"react\";\nimport { Route, DirectionId } from \"../../__v3api\";\nimport {\n  SimpleStopMap,\n  RoutePatternsByDirection,\n  ServiceInSelector,\n  SelectedOrigin,\n  ScheduleNote\n} from \"./__schedule\";\nimport ScheduleFinderForm from \"./schedule-finder/ScheduleFinderForm\";\nimport ScheduleFinderModal, {\n  Mode as ModalMode\n} from \"./schedule-finder/ScheduleFinderModal\";\nimport { getCurrentState, storeHandler } from \"../store/ScheduleStore\";\nimport { routeToModeName } from \"../../helpers/css\";\nimport useDirectionChangeEvent from \"../../hooks/useDirectionChangeEvent\";\n\ninterface Props {\n  updateURL: (origin: SelectedOrigin, direction?: DirectionId) => void;\n  services: ServiceInSelector[];\n  directionId: DirectionId;\n  route: Route;\n  stops: SimpleStopMap;\n  routePatternsByDirection: RoutePatternsByDirection;\n  today: string;\n  changeDirection: (direction: DirectionId) => void;\n  selectedOrigin: SelectedOrigin;\n  changeOrigin: (origin: SelectedOrigin) => void;\n  closeModal: () => void;\n  modalMode: ModalMode;\n  modalOpen: boolean;\n  scheduleNote: ScheduleNote | null;\n}\n\nconst ScheduleFinder = ({\n  updateURL,\n  directionId,\n  route,\n  services,\n  stops,\n  routePatternsByDirection,\n  today,\n  modalMode,\n  selectedOrigin,\n  changeDirection,\n  changeOrigin,\n  modalOpen,\n  closeModal,\n  scheduleNote\n}: Props): ReactElement<HTMLElement> => {\n  const currentDirection = useDirectionChangeEvent(directionId);\n  const openOriginModal = (): void => {\n    const currentState = getCurrentState();\n    const { modalOpen: modalIsOpen } = currentState;\n    if (!modalIsOpen) {\n      storeHandler({\n        type: \"OPEN_MODAL\",\n        newStoreValues: {\n          modalMode: \"origin\"\n        }\n      });\n    }\n  };\n\n  const openScheduleModal = (): void => {\n    const currentState = getCurrentState();\n    const { modalOpen: modalIsOpen } = currentState;\n    if (selectedOrigin !== undefined && !modalIsOpen) {\n      storeHandler({\n        type: \"OPEN_MODAL\",\n        newStoreValues: {\n          modalMode: \"schedule\"\n        }\n      });\n    }\n  };\n\n  const handleOriginSelectClick = (): void => {\n    storeHandler({\n      type: \"OPEN_MODAL\",\n      newStoreValues: {\n        modalMode: \"origin\"\n      }\n    });\n  };\n\n  const isFerryRoute = routeToModeName(route) === \"ferry\";\n\n  return (\n    <div\n      className={`${\n        isFerryRoute ? \"schedule-finder-vertical\" : \"schedule-finder\"\n      }`}\n    >\n      <ScheduleFinderForm\n        onDirectionChange={changeDirection}\n        onOriginChange={changeOrigin}\n        onOriginSelectClick={openOriginModal}\n        onSubmit={openScheduleModal}\n        route={route}\n        selectedDirection={currentDirection}\n        selectedOrigin={selectedOrigin}\n        stopsByDirection={stops}\n      />\n      {modalOpen && (\n        <ScheduleFinderModal\n          closeModal={closeModal}\n          directionChanged={changeDirection}\n          initialMode={modalMode}\n          initialDirection={currentDirection}\n          initialOrigin={selectedOrigin}\n          handleOriginSelectClick={handleOriginSelectClick}\n          originChanged={changeOrigin}\n          route={route}\n          routePatternsByDirection={routePatternsByDirection}\n          services={services}\n          stops={stops}\n          today={today}\n          updateURL={updateURL}\n          scheduleNote={scheduleNote}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ScheduleFinder;\n","import React, { ReactElement } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useQueryParams, StringParam } from \"use-query-params\";\nimport ContentTeasers from \"./ContentTeasers\";\nimport UpcomingHolidays from \"./UpcomingHolidays\";\nimport AdditionalLineInfo from \"./AdditionalLineInfo\";\nimport ScheduleDirection from \"./ScheduleDirection\";\nimport {\n  SchedulePageData,\n  SelectedOrigin,\n  ComponentToRender,\n  StopTree,\n  StopTreeData\n} from \"../components/__schedule\";\nimport { MapData, StaticMapData } from \"../../leaflet/components/__mapdata\";\nimport ScheduleFinder from \"./ScheduleFinder\";\nimport ScheduleFinderModal from \"./schedule-finder/ScheduleFinderModal\";\nimport { DirectionId } from \"../../__v3api\";\nimport {\n  mapStateToProps,\n  getCurrentState,\n  storeHandler\n} from \"../store/ScheduleStore\";\nimport { routeToModeName } from \"../../helpers/css\";\nimport { isSubwayRoute } from \"../../models/route\";\nimport HoursOfOperation from \"./HoursOfOperation\";\n\ninterface Props {\n  schedulePageData: SchedulePageData;\n  component: ComponentToRender;\n  updateURL: (origin: SelectedOrigin, direction?: DirectionId) => void;\n}\n\nexport const fromStopTreeData = (stopTreeData: StopTreeData): StopTree => ({\n  byId: stopTreeData.by_id,\n  edges: stopTreeData.edges,\n  startingNodes: stopTreeData.starting_nodes\n});\n\nexport const changeOrigin = (origin: SelectedOrigin): void => {\n  storeHandler({\n    type: \"CHANGE_ORIGIN\",\n    newStoreValues: {\n      selectedOrigin: origin\n    }\n  });\n  // reopen modal depending on choice:\n  storeHandler({\n    type: \"OPEN_MODAL\",\n    newStoreValues: {\n      modalMode: origin ? \"schedule\" : \"origin\"\n    }\n  });\n};\n\nexport const ScheduleLoader = ({\n  component,\n  schedulePageData,\n  updateURL\n}: Props): ReactElement<HTMLElement> => {\n  const [query] = useQueryParams({\n    // eslint-disable-next-line camelcase\n    \"schedule_finder[direction_id]\": StringParam,\n    \"schedule_direction[direction_id]\": StringParam,\n    \"schedule_finder[origin]\": StringParam\n  });\n\n  const changeDirection = (direction: DirectionId): void => {\n    storeHandler({\n      type: \"CHANGE_DIRECTION\",\n      newStoreValues: {\n        selectedDirection: direction,\n        selectedOrigin: null\n      }\n    });\n  };\n\n  const closeModal = (): void => {\n    storeHandler({\n      type: \"CLOSE_MODAL\",\n      newStoreValues: {}\n    });\n    // clear parameters from URL when closing the modal:\n    updateURL(\"\");\n  };\n\n  React.useEffect(() => {\n    // get initial values from the store:\n    const currentState = getCurrentState();\n    const { selectedDirection, selectedOrigin } = currentState;\n    let { modalOpen, modalMode } = currentState;\n\n    let newDirection: DirectionId | undefined;\n    const newOrigin: SelectedOrigin | undefined =\n      query[\"schedule_finder[origin]\"];\n\n    // modify the store values in case URL has parameters:\n    const queryDirectionId =\n      query[\"schedule_finder[direction_id]\"] ||\n      query[\"schedule_direction[direction_id]\"];\n    if (queryDirectionId !== undefined) {\n      newDirection = queryDirectionId === \"0\" ? 0 : 1;\n    }\n\n    if (newDirection !== undefined && newOrigin !== undefined) {\n      modalMode = \"schedule\";\n      modalOpen = true;\n    }\n\n    storeHandler({\n      type: \"INITIALIZE\",\n      newStoreValues: {\n        selectedDirection: newDirection || selectedDirection,\n        selectedOrigin: newOrigin || selectedOrigin,\n        modalMode,\n        modalOpen\n      }\n    });\n    // we disable linting in this next line because we DO want to specify an empty array since we want this piece to run only once\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleOriginSelectClick = (): void => {\n    storeHandler({\n      type: \"OPEN_MODAL\",\n      newStoreValues: {\n        modalMode: \"origin\"\n      }\n    });\n  };\n\n  const {\n    route,\n    stops,\n    services,\n    route_patterns: routePatternsByDirection,\n    schedule_note: scheduleNote,\n    today,\n    stop_tree,\n    route_stop_lists: routeStopLists,\n    alerts,\n    variant: busVariantId\n  } = schedulePageData;\n  const stopTree: StopTree | null = stop_tree\n    ? fromStopTreeData(stop_tree)\n    : null;\n  const routeIsSuspended = Object.keys(routePatternsByDirection).length === 0;\n\n  const currentState = getCurrentState();\n  if (!!currentState && Object.keys(currentState).length !== 0) {\n    const {\n      selectedDirection: currentDirection,\n      selectedOrigin,\n      modalOpen,\n      modalMode\n    } = currentState;\n\n    // check first if this is a unidirectional route:\n    let readjustedDirectionId: DirectionId = currentDirection;\n    if (\n      !routeIsSuspended &&\n      !Object.keys(routePatternsByDirection).includes(\n        currentDirection.toString()\n      )\n    ) {\n      // This route doesn't have this direction, so pick first existing direction\n      readjustedDirectionId = parseInt(\n        Object.keys(routePatternsByDirection)[0],\n        10\n      ) as DirectionId;\n      changeDirection(readjustedDirectionId);\n      updateURL(selectedOrigin, readjustedDirectionId);\n    }\n\n    const isFerryRoute = routeToModeName(route) === \"ferry\";\n\n    if (component === \"ADDITIONAL_LINE_INFORMATION\") {\n      const {\n        teasers,\n        pdfs,\n        connections,\n        fares,\n        fare_link: fareLink,\n        holidays,\n        hours\n      } = schedulePageData;\n\n      if (routeIsSuspended) {\n        return (\n          <>\n            <ContentTeasers teasers={teasers} />\n            <UpcomingHolidays holidays={holidays} />\n          </>\n        );\n      }\n\n      return (\n        <AdditionalLineInfo\n          teasers={teasers}\n          pdfs={pdfs}\n          connections={connections}\n          fares={fares}\n          fareLink={fareLink}\n          route={route}\n          holidays={holidays}\n          hours={hours}\n          scheduleNote={scheduleNote}\n        />\n      );\n    }\n\n    if (component === \"SCHEDULE_NOTE\" && scheduleNote) {\n      const { pdfs, hours } = schedulePageData;\n      return (\n        <>\n          {isSubwayRoute(route) ? (\n            <HoursOfOperation\n              route={route}\n              pdfs={pdfs}\n              hours={hours}\n              scheduleNote={scheduleNote}\n            />\n          ) : null}\n          {modalOpen && (\n            <ScheduleFinderModal\n              closeModal={closeModal}\n              directionChanged={changeDirection}\n              initialMode={modalMode}\n              initialDirection={readjustedDirectionId}\n              initialOrigin={selectedOrigin}\n              handleOriginSelectClick={handleOriginSelectClick}\n              originChanged={changeOrigin}\n              route={route}\n              routePatternsByDirection={routePatternsByDirection}\n              services={services}\n              stops={stops}\n              today={today}\n              updateURL={updateURL}\n              scheduleNote={scheduleNote}\n            />\n          )}\n        </>\n      );\n    }\n\n    if (component === \"SCHEDULE_FINDER\" && !isFerryRoute) {\n      return (\n        <ScheduleFinder\n          updateURL={updateURL}\n          route={route}\n          stops={stops}\n          services={services}\n          routePatternsByDirection={routePatternsByDirection}\n          today={today}\n          modalMode={modalMode}\n          modalOpen={modalOpen}\n          directionId={readjustedDirectionId}\n          changeDirection={changeDirection}\n          selectedOrigin={selectedOrigin}\n          changeOrigin={changeOrigin}\n          closeModal={closeModal}\n          scheduleNote={scheduleNote}\n        />\n      );\n    }\n\n    if (component === \"SCHEDULE_DIRECTION\") {\n      let mapData: MapData | undefined;\n      const mapDataEl = document.getElementById(\"js-map-data\");\n      if (mapDataEl) {\n        mapData = JSON.parse(mapDataEl.innerHTML);\n      }\n\n      let staticMapData: StaticMapData | undefined;\n      const staticDataEl = document.getElementById(\"static-map-data\");\n      if (staticDataEl) {\n        staticMapData = JSON.parse(staticDataEl.innerHTML);\n      }\n\n      return isFerryRoute ? (\n        <>\n          <ScheduleFinder\n            updateURL={updateURL}\n            route={route}\n            stops={stops}\n            services={services}\n            routePatternsByDirection={routePatternsByDirection}\n            today={today}\n            modalMode={modalMode}\n            modalOpen={modalOpen}\n            directionId={readjustedDirectionId}\n            changeDirection={changeDirection}\n            selectedOrigin={selectedOrigin}\n            changeOrigin={changeOrigin}\n            closeModal={closeModal}\n            scheduleNote={scheduleNote}\n          />\n          <div className=\"schedule-map-container\">\n            <h2>Route Map</h2>\n            {staticMapData && (\n              <>\n                <img\n                  src={staticMapData.img_src}\n                  alt={`${route.name} route map`}\n                  className=\"img-fluid\"\n                />\n                <a\n                  href={staticMapData.pdf_url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  <i className=\"fa fa-search-plus\" aria-hidden=\"true\" />\n                  View map as a PDF\n                </a>\n              </>\n            )}\n          </div>\n        </>\n      ) : (\n        <ScheduleDirection\n          directionId={readjustedDirectionId}\n          route={route}\n          routePatternsByDirection={routePatternsByDirection}\n          routeStopLists={routeStopLists}\n          mapData={mapData}\n          staticMapData={staticMapData}\n          stopTree={stopTree}\n          alerts={alerts}\n          busVariantId={busVariantId}\n        />\n      );\n    }\n  }\n  return <></>;\n};\n\nexport default connect(mapStateToProps)(ScheduleLoader);\n","import React, { ReactElement } from \"react\";\nimport ExpandableBlock from \"../../components/ExpandableBlock\";\nimport { Holiday } from \"./__schedule\";\n\ninterface Props {\n  holidays: Holiday[];\n}\n\nconst UpcomingHolidays = ({\n  holidays\n}: Props): ReactElement<HTMLElement> | null =>\n  holidays.length > 0 ? (\n    <ExpandableBlock\n      header={{ text: \"Upcoming Holidays\", iconSvgText: null }}\n      initiallyExpanded={false}\n      id=\"holidays\"\n    >\n      <>\n        <ul className=\"c-unordered-list m-schedule-page__sidebar-list\">\n          {holidays.map(\n            (holiday: Holiday): ReactElement<HTMLElement> => (\n              <li key={holiday.date} className=\"c-unordered-list-item\">\n                {holiday.name} ({holiday.date})\n              </li>\n            )\n          )}\n        </ul>\n        <a className=\"c-call-to-action\" href=\"/holiday\">\n          View holiday schedules\n        </a>\n      </>\n    </ExpandableBlock>\n  ) : null;\n\nexport default UpcomingHolidays;\n","import React, {\n  ReactElement,\n  Dispatch,\n  KeyboardEvent as ReactKeyboardEvent\n} from \"react\";\nimport {\n  MenuAction,\n  setRoutePatternAction,\n  showAllRoutePatternsAction,\n  toggleRoutePatternMenuAction\n} from \"./reducer\";\nimport { EnhancedRoutePattern } from \"../__schedule\";\nimport handleNavigation from \"./menu-helpers\";\nimport renderSvg from \"../../../helpers/render-svg\";\nimport arrowIcon from \"../../../../static/images/icon-down-arrow.svg\";\nimport checkIcon from \"../../../../static/images/icon-checkmark.svg\";\nimport { handleReactEnterKeyPress } from \"../../../helpers/keyboard-events-react\";\n\ninterface ExpandedBusMenuProps {\n  routePatterns: EnhancedRoutePattern[];\n  selectedRoutePatternId: string;\n  showAllRoutePatterns: boolean;\n  itemFocus: string | null;\n  dispatch: Dispatch<MenuAction>;\n}\n\ninterface RoutePatternItem {\n  routePatternIds: string[];\n  routePattern: EnhancedRoutePattern;\n  selected: boolean;\n  focused: boolean;\n  duplicated: boolean;\n  dispatch: Dispatch<MenuAction>;\n}\n\ninterface UncommonDestinationsItem {\n  routePatternIds: string[];\n  dispatch: Dispatch<MenuAction>;\n}\n\ninterface BusMenuSelectProps {\n  routePatterns: EnhancedRoutePattern[];\n  selectedRoutePatternId: string;\n  dispatch: Dispatch<MenuAction>;\n}\n\nconst typicalityDefaultText = (typicality: number): string => {\n  if (typicality === 1) return \"typical route\";\n  if (typicality === 2) return \"less common route\";\n  return \"\";\n};\n\nconst RoutePatternItem = ({\n  routePatternIds,\n  routePattern,\n  selected,\n  focused,\n  duplicated,\n  dispatch\n}: RoutePatternItem): ReactElement<HTMLElement> => {\n  const selectedClass = selected ? \" m-schedule-direction__menu--selected\" : \"\";\n\n  const icon = selected ? (\n    <div className=\"m-schedule-direction__checkmark\">\n      {renderSvg(\"c-svg__icon\", checkIcon)}\n    </div>\n  ) : null;\n\n  const handleClick = (): void => dispatch(setRoutePatternAction(routePattern));\n\n  return (\n    <div\n      aria-current={selected ? \"page\" : undefined}\n      id={`route-pattern_${routePattern.id}`}\n      tabIndex={0}\n      role=\"menuitem\"\n      className={`m-schedule-direction__menu-item${selectedClass}`}\n      onClick={handleClick}\n      ref={item => item && focused && item.focus()}\n      onKeyUp={(e: ReactKeyboardEvent) => {\n        handleReactEnterKeyPress(e, () => {\n          handleClick();\n        });\n      }}\n      onKeyDown={(e: ReactKeyboardEvent) => {\n        handleNavigation(e, routePatternIds);\n      }}\n    >\n      <div className=\"m-schedule-direction__menu-item-headsign\">\n        {icon}\n        {routePattern.headsign}\n      </div>\n      <div className=\"m-schedule-direction__menu-item-description\">\n        {duplicated && `from ${routePattern.name.split(\" - \")[0]}, `}\n        {routePattern.time_desc ||\n          typicalityDefaultText(routePattern.typicality)}\n      </div>\n    </div>\n  );\n};\n\nconst UncommonDestinationsItem = ({\n  routePatternIds,\n  dispatch\n}: UncommonDestinationsItem): ReactElement<HTMLElement> => {\n  const handleClick = (): void => dispatch(showAllRoutePatternsAction());\n\n  return (\n    <div\n      id=\"route-pattern_uncommon\"\n      role=\"menuitem\"\n      tabIndex={0}\n      aria-label=\"click for additional routes\"\n      className=\"m-schedule-direction__menu-item\"\n      onClick={handleClick}\n      onKeyUp={(e: ReactKeyboardEvent) =>\n        handleReactEnterKeyPress(e, () => {\n          handleClick();\n        })\n      }\n      onKeyDown={(e: ReactKeyboardEvent) => {\n        handleNavigation(e, routePatternIds);\n      }}\n    >\n      <div className=\"m-schedule-direction__menu-item-more\">\n        Uncommon destinations{\" \"}\n        {renderSvg(\n          \"c-svg__icon m-schedule-direction__route-pattern-arrow\",\n          arrowIcon\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst hasMoreRoutePatterns = (routePatterns: EnhancedRoutePattern[]): boolean =>\n  routePatterns.some(\n    (routePattern: EnhancedRoutePattern) => routePattern.typicality > 2\n  );\n\nconst determineFocusIndex = (\n  itemFocus: string | null,\n  routePatterns: EnhancedRoutePattern[]\n): number => {\n  if (itemFocus === \"first\") return 0;\n  return routePatterns.findIndex(\n    (routePattern: EnhancedRoutePattern) => routePattern.typicality > 2\n  );\n};\n\nconst isDuplicateHeadsign = (\n  compareRoutePattern: EnhancedRoutePattern,\n  routePatterns: EnhancedRoutePattern[]\n): boolean =>\n  routePatterns.filter(\n    (routePattern: EnhancedRoutePattern) =>\n      routePattern.id !== compareRoutePattern.id &&\n      routePattern.headsign === compareRoutePattern.headsign\n  ).length > 0;\n\nexport const ExpandedBusMenu = ({\n  routePatterns,\n  selectedRoutePatternId,\n  showAllRoutePatterns,\n  itemFocus,\n  dispatch\n}: ExpandedBusMenuProps): ReactElement<HTMLElement> => {\n  const filterRule = (routePattern: EnhancedRoutePattern): boolean =>\n    showAllRoutePatterns ? true : routePattern.typicality < 3;\n\n  const focusIndex = determineFocusIndex(itemFocus, routePatterns);\n\n  const toggleButtonIds =\n    hasMoreRoutePatterns(routePatterns) && showAllRoutePatterns === false\n      ? [\"uncommon\"]\n      : [];\n\n  const routePatternIds = routePatterns\n    .filter(filterRule)\n    .map((routePattern: EnhancedRoutePattern) => routePattern.id)\n    .concat(toggleButtonIds);\n\n  return (\n    <div className=\"m-schedule-direction__menu\" role=\"menu\">\n      {routePatterns\n        .filter(filterRule)\n        .map((routePattern: EnhancedRoutePattern, index: number) => (\n          <RoutePatternItem\n            key={routePattern.id}\n            routePatternIds={routePatternIds}\n            routePattern={routePattern}\n            selected={selectedRoutePatternId === routePattern.id}\n            focused={index === focusIndex}\n            duplicated={isDuplicateHeadsign(routePattern, routePatterns)}\n            dispatch={dispatch}\n          />\n        ))}\n      {hasMoreRoutePatterns(routePatterns) &&\n        showAllRoutePatterns === false && (\n          <UncommonDestinationsItem\n            routePatternIds={routePatternIds}\n            dispatch={dispatch}\n          />\n        )}\n    </div>\n  );\n};\n\nconst routePatternNameById = (\n  routePatterns: EnhancedRoutePattern[],\n  selectedRoutePatternId: string\n): string =>\n  routePatterns.find(\n    (routePattern: EnhancedRoutePattern) =>\n      routePattern.id === selectedRoutePatternId\n  )!.headsign;\n\nexport const BusMenuSelect = ({\n  routePatterns,\n  selectedRoutePatternId,\n  dispatch\n}: BusMenuSelectProps): ReactElement<HTMLElement> => {\n  const isMenuClickable = routePatterns.length > 1;\n\n  const handleClick = isMenuClickable\n    ? () => {\n        dispatch(toggleRoutePatternMenuAction());\n      }\n    : /* istanbul ignore next */\n      () => {};\n\n  const linkClass = isMenuClickable\n    ? \" m-schedule-direction__route-pattern--clickable\"\n    : \"\";\n\n  return (\n    // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n    <div\n      // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n      tabIndex={isMenuClickable ? 0 : undefined}\n      role={isMenuClickable ? \"button\" : undefined}\n      className={`m-schedule-direction__route-pattern${linkClass} notranslate`}\n      onClick={handleClick}\n      onKeyUp={e =>\n        handleReactEnterKeyPress(e, () => {\n          handleClick();\n        })\n      }\n    >\n      {routePatternNameById(routePatterns, selectedRoutePatternId)}{\" \"}\n      {isMenuClickable &&\n        renderSvg(\n          \"c-svg__icon m-schedule-direction__route-pattern-arrow\",\n          arrowIcon\n        )}\n    </div>\n  );\n};\n","import React, {\n  ReactElement,\n  Dispatch,\n  KeyboardEvent as ReactKeyboardEvent\n} from \"react\";\nimport { DirectionId, EnhancedRoute } from \"../../../__v3api\";\nimport { MenuAction, toggleRoutePatternMenuAction } from \"./reducer\";\nimport renderSvg from \"../../../helpers/render-svg\";\nimport handleNavigation from \"./menu-helpers\";\nimport arrowIcon from \"../../../../static/images/icon-down-arrow.svg\";\nimport checkIcon from \"../../../../static/images/icon-checkmark.svg\";\nimport iconGreenB from \"../../../../static/images/icon-green-line-b-small.svg\";\nimport iconGreenC from \"../../../../static/images/icon-green-line-c-small.svg\";\nimport iconGreenD from \"../../../../static/images/icon-green-line-d-small.svg\";\nimport iconGreenE from \"../../../../static/images/icon-green-line-e-small.svg\";\nimport iconGreen from \"../../../../static/images/icon-green-line-small.svg\";\nimport { handleReactEnterKeyPress } from \"../../../helpers/keyboard-events-react\";\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst destinations: Map<string, any> = new Map();\ndestinations.set(\"Green\", [\"All branches\", \"All branches\"]);\nPromise.resolve(\n  window.fetch &&\n    window\n      .fetch(`/schedules/green_termini_api`)\n      .then(response => {\n        if (response.ok) return response.json();\n        throw new Error(response.statusText);\n      })\n      .then(result => {\n        const keys = Object.keys(result);\n        for (let i = 0; i < keys.length; i += 1) {\n          destinations.set(keys[i], result[keys[i]]);\n        }\n      })\n);\n\ninterface GreenLineSelectProps {\n  routeId: string;\n  dispatch: Dispatch<MenuAction>;\n  directionId: DirectionId;\n}\n\ninterface ExpandedGreenMenuProps {\n  route: EnhancedRoute;\n  directionId: DirectionId;\n}\n\ninterface GreenRoute {\n  id: string;\n  name: string;\n  direction_destinations: String[];\n  icon: string;\n}\n\ninterface GreenLineItem {\n  routeIds: string[];\n  route: GreenRoute;\n  selected: boolean;\n  focused: boolean;\n  directionId: DirectionId;\n}\n\n/* eslint-disable camelcase */\nconst greenRoutes: GreenRoute[] = [\n  {\n    id: \"Green\",\n    name: \"Green Line\",\n    direction_destinations: destinations.get(\"Green\"),\n    icon: iconGreen\n  },\n  {\n    id: \"Green-B\",\n    name: \"Green Line B\",\n    direction_destinations:\n      destinations.size > 1 ? destinations.get(\"Green-B\") : \"\",\n    icon: iconGreenB\n  },\n  {\n    id: \"Green-C\",\n    name: \"Green Line C\",\n    direction_destinations:\n      destinations.size > 1 ? destinations.get(\"Green-C\") : \"\",\n    icon: iconGreenC\n  },\n  {\n    id: \"Green-D\",\n    name: \"Green Line D\",\n    direction_destinations:\n      destinations.size > 1 ? destinations.get(\"Green-D\") : \"\",\n    icon: iconGreenD\n  },\n  {\n    id: \"Green-E\",\n    name: \"Green Line E\",\n    direction_destinations:\n      destinations.size > 1 ? destinations.get(\"Green-E\") : \"\",\n    icon: iconGreenE\n  }\n];\n\nexport const GreenLineItem = ({\n  directionId,\n  routeIds,\n  route,\n  selected,\n  focused\n}: GreenLineItem): ReactElement<HTMLElement> => {\n  const selectedClass = selected ? \" m-schedule-direction__menu--selected\" : \"\";\n  const icon = selected ? (\n    <div className=\"m-schedule-direction__checkmark\">\n      {renderSvg(\"c-svg__icon\", checkIcon)}\n    </div>\n  ) : null;\n  const handleClick = (): void => {\n    window.location.assign(\n      `/schedules/${route.id}?direction_id=${directionId}`\n    );\n  };\n\n  return (\n    <div\n      aria-current={selected ? \"page\" : undefined}\n      id={`route-pattern_${route.id}`}\n      tabIndex={0}\n      role=\"menuitem\"\n      className={`m-schedule-direction__menu-item${selectedClass} notranslate`}\n      onClick={handleClick}\n      onKeyUp={(e: ReactKeyboardEvent) => {\n        handleReactEnterKeyPress(e, () => {\n          handleClick();\n        });\n      }}\n      onKeyDown={(e: ReactKeyboardEvent) => {\n        handleNavigation(e, routeIds);\n      }}\n      ref={item => item && focused && item.focus()}\n    >\n      <div className=\"m-schedule-direction__menu-item-headsign notranslate\">\n        {icon}\n        {renderSvg(\n          \"c-svg__icon m-schedule-direction__menu-item-icon\",\n          route.icon\n        )}\n        <span className=\"sr-only\">{route.name}</span>\n        {destinations.size > 1\n          ? destinations.get(route.id)[directionId]\n          : []}{\" \"}\n      </div>\n    </div>\n  );\n};\n\nexport const ExpandedGreenMenu = ({\n  route,\n  directionId\n}: ExpandedGreenMenuProps): ReactElement<HTMLElement> => {\n  const routeIds = greenRoutes.map(greenRoute => greenRoute.id);\n  return (\n    <div className=\"m-schedule-direction__menu notranslate\" role=\"menu\">\n      {greenRoutes.map((greenRoute: GreenRoute, index: number) => (\n        <GreenLineItem\n          directionId={directionId}\n          key={greenRoute.id}\n          routeIds={routeIds}\n          route={greenRoute}\n          selected={route.id === greenRoute.id}\n          focused={index === 0}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport const GreenLineSelect = ({\n  routeId,\n  dispatch,\n  directionId\n}: GreenLineSelectProps): ReactElement<HTMLElement> => {\n  const handleClick = (): void => {\n    dispatch(toggleRoutePatternMenuAction());\n  };\n\n  return (\n    // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n    <div\n      // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n      tabIndex={0}\n      role=\"button\"\n      className=\"m-schedule-direction__route-pattern m-schedule-direction__route-pattern--clickable notranslate\"\n      onClick={handleClick}\n      onKeyUp={e =>\n        handleReactEnterKeyPress(e, () => {\n          handleClick();\n        })\n      }\n    >\n      {destinations.size > 1 ? destinations.get(routeId)[directionId] : []}{\" \"}\n      {renderSvg(\n        \"c-svg__icon m-schedule-direction__route-pattern-arrow\",\n        arrowIcon\n      )}\n    </div>\n  );\n};\n","import React, { ReactElement, Dispatch } from \"react\";\nimport renderSVG from \"../../../helpers/render-svg\";\nimport icon from \"../../../../static/images/icon-change-direction.svg\";\nimport { MenuAction, toggleDirectionAction } from \"./reducer\";\n\ninterface Props {\n  dispatch: Dispatch<MenuAction>;\n}\n\nconst ScheduleDirectionButton = ({\n  dispatch\n}: Props): ReactElement<HTMLElement> => (\n  <button\n    type=\"button\"\n    className=\"m-schedule-direction__button btn btn-primary\"\n    onClick={() => {\n      dispatch(toggleDirectionAction());\n    }}\n  >\n    {renderSVG(\"m-schedule-direction__icon\", icon)}Change Direction\n  </button>\n);\n\nexport default ScheduleDirectionButton;\n","import React, { ReactElement, Dispatch, useEffect } from \"react\";\nimport { DirectionId, EnhancedRoute } from \"../../../__v3api\";\nimport { RoutePatternsByDirection } from \"../__schedule\";\nimport { MenuAction, closeRoutePatternMenuAction } from \"./reducer\";\nimport { GreenLineSelect, ExpandedGreenMenu } from \"./GreenLineMenu\";\nimport { BusMenuSelect, ExpandedBusMenu } from \"./BusMenu\";\nimport { handleNativeEscapeKeyPress } from \"../../../helpers/keyboard-events\";\nimport { isABusRoute, isAGreenLineRoute } from \"../../../models/route\";\n\ninterface Props {\n  route: EnhancedRoute;\n  routePatternsByDirection: RoutePatternsByDirection;\n  directionId: DirectionId;\n  selectedRoutePatternId: string;\n  menuOpen: boolean;\n  showAllRoutePatterns: boolean;\n  itemFocus: string | null;\n  dispatch: Dispatch<MenuAction>;\n}\n\nconst ScheduleDirectionMenu = ({\n  route,\n  routePatternsByDirection,\n  directionId,\n  selectedRoutePatternId,\n  menuOpen,\n  showAllRoutePatterns,\n  itemFocus,\n  dispatch\n}: Props): ReactElement<HTMLElement> => {\n  const routePatterns = routePatternsByDirection[directionId];\n\n  useEffect(() => {\n    if (!menuOpen) return () => {};\n    // if the menu is open, add event listeners to enable closing the menu by\n    // clicking outside the menu or with keypress\n    const clickToClose = (event: Event): void => {\n      if (!event.target) return;\n      const element = event.target as HTMLElement;\n      if (element.closest(\".js-m-schedule-click-boundary\")) return;\n      dispatch(closeRoutePatternMenuAction());\n    };\n\n    const keyToClose = (event: KeyboardEvent): void => {\n      handleNativeEscapeKeyPress(event, () => {\n        dispatch(closeRoutePatternMenuAction());\n      });\n    };\n\n    document.addEventListener(\"click\", clickToClose, true);\n    document.addEventListener(\"keydown\", keyToClose);\n\n    return () => {\n      // remove the event listeners\n      document.removeEventListener(\"click\", clickToClose, true);\n      document.removeEventListener(\"keydown\", keyToClose);\n    };\n  }, [menuOpen, dispatch]);\n\n  return (\n    <div className=\"js-m-schedule-click-boundary\">\n      {// bus mode\n      isABusRoute(route) && (\n        <BusMenuSelect\n          routePatterns={routePatternsByDirection[directionId]}\n          selectedRoutePatternId={selectedRoutePatternId}\n          dispatch={dispatch}\n        />\n      )}\n      {// Green Line\n      isAGreenLineRoute(route) && (\n        <GreenLineSelect\n          routeId={route.id}\n          dispatch={dispatch}\n          directionId={directionId}\n        />\n      )}\n      {// Mattapan Trolley\n      route.id === \"Mattapan\" && (\n        <div className=\"m-schedule-direction__route-pattern notranslate\">\n          {route.direction_destinations[directionId]}\n        </div>\n      )}\n      {// Subway, CR, Ferry\n      [1, 2, 4].indexOf(route.type) !== -1 && (\n        <div className=\"m-schedule-direction__route-pattern notranslate\">\n          {route.direction_destinations[directionId]}\n        </div>\n      )}\n      {menuOpen && isABusRoute(route) && (\n        <ExpandedBusMenu\n          routePatterns={routePatterns}\n          selectedRoutePatternId={selectedRoutePatternId}\n          showAllRoutePatterns={showAllRoutePatterns}\n          itemFocus={itemFocus}\n          dispatch={dispatch}\n        />\n      )}\n      {menuOpen && isAGreenLineRoute(route) && (\n        <ExpandedGreenMenu directionId={directionId} route={route} />\n      )}\n    </div>\n  );\n};\n\nexport default ScheduleDirectionMenu;\n","import { KeyboardEvent as ReactKeyboardEvent } from \"react\";\n\nconst nextRoutePatternIndex = (\n  currentId: string,\n  routePatternIds: string[]\n): number => {\n  const index = routePatternIds.indexOf(currentId);\n  return index === routePatternIds.length - 1 ? 0 : index + 1;\n};\n\nconst prevRoutePatternIndex = (\n  currentId: string,\n  routePatternIds: string[]\n): number => {\n  const index = routePatternIds.indexOf(currentId);\n  return index === 0 ? routePatternIds.length - 1 : index - 1;\n};\n\nexport default (e: ReactKeyboardEvent, routePatternIds: string[]): void => {\n  if (\n    e.key !== \"Tab\" &&\n    e.key !== \"ArrowRight\" &&\n    e.key !== \"ArrowLeft\" &&\n    e.key !== \"ArrowDown\" &&\n    e.key !== \"ArrowUp\"\n  )\n    return;\n\n  e.preventDefault();\n\n  const targetEl = e.target as HTMLDivElement;\n  const targetElId = targetEl.id.replace(\"route-pattern_\", \"\");\n\n  // forward\n  if (\n    (e.key === \"Tab\" && !e.shiftKey) ||\n    e.key === \"ArrowRight\" ||\n    e.key === \"ArrowDown\"\n  ) {\n    const nextIndex = nextRoutePatternIndex(targetElId, routePatternIds);\n    const nextElId = `route-pattern_${routePatternIds[nextIndex]}`;\n    // eslint-disable-next-line no-unused-expressions\n    document.getElementById(nextElId) &&\n      /* istanbul ignore next */\n      document.getElementById(nextElId)!.focus();\n  }\n\n  // backwards\n  if (\n    (e.key === \"Tab\" && e.shiftKey) ||\n    e.key === \"ArrowLeft\" ||\n    e.key === \"ArrowUp\"\n  ) {\n    const prevIndex = prevRoutePatternIndex(targetElId, routePatternIds);\n    const prevElId = `route-pattern_${routePatternIds[prevIndex]}`;\n    // eslint-disable-next-line no-unused-expressions\n    document.getElementById(prevElId) &&\n      /* istanbul ignore next */\n      document.getElementById(prevElId)!.focus();\n  }\n};\n","import { updateInLocation } from \"use-query-params\";\nimport { DirectionId } from \"../../../__v3api\";\nimport { RoutePatternsByDirection, EnhancedRoutePattern } from \"../__schedule\";\nimport { MapData } from \"../../../leaflet/components/__mapdata\";\nimport { dispatchChangedDirection } from \"../../../hooks/useDirectionChangeEvent\";\n\nexport interface State {\n  routePattern: EnhancedRoutePattern;\n  directionId: DirectionId;\n  routePatternsByDirection: RoutePatternsByDirection;\n  routePatternMenuOpen: boolean;\n  routePatternMenuAll: boolean;\n  itemFocus: string | null;\n}\n\nexport interface Payload {\n  routePattern?: EnhancedRoutePattern;\n}\n\nexport const toggleDirectionAction = (): MenuAction => ({\n  type: \"toggleDirection\"\n});\n\nexport const setRoutePatternAction = (\n  routePattern: EnhancedRoutePattern\n): MenuAction => ({\n  type: \"setRoutePattern\",\n  payload: { routePattern }\n});\n\nexport const toggleRoutePatternMenuAction = (): MenuAction => ({\n  type: \"toggleRoutePatternMenu\"\n});\n\nexport const closeRoutePatternMenuAction = (): MenuAction => ({\n  type: \"closeRoutePatternMenu\"\n});\n\nexport const showAllRoutePatternsAction = (): MenuAction => ({\n  type: \"showAllRoutePatterns\"\n});\n\nexport interface MenuAction {\n  type:\n    | \"toggleDirection\"\n    | \"setRoutePattern\"\n    | \"toggleRoutePatternMenu\"\n    | \"closeRoutePatternMenu\"\n    | \"showAllRoutePatterns\";\n  payload?: Payload;\n}\n\nexport type FetchAction =\n  | { type: \"FETCH_COMPLETE\"; payload: MapData[] }\n  | { type: \"FETCH_ERROR\" }\n  | { type: \"FETCH_STARTED\" };\n\nconst updateDirectionAndVariantInURL = (\n  directionId: DirectionId,\n  routePatternId: string\n): void => {\n  const query = {\n    // eslint-disable-next-line camelcase\n    \"schedule_direction[direction_id]\": directionId.toString(),\n    \"schedule_direction[variant]\": routePatternId\n  };\n  const newLoc = updateInLocation(query, window.location);\n  // newLoc is not a true Location, so toString doesn't work\n  window.history.replaceState({}, \"\", `${newLoc.pathname}${newLoc.search}`);\n};\n\nconst toggleDirection = (state: State): State => {\n  const nextDirection = state.directionId === 0 ? 1 : 0;\n\n  // attempt to find the same route pattern for the opposite direction\n  const possibleNextRoutePattern = `${state.routePattern.id.slice(\n    0,\n    -1\n  )}${nextDirection}`;\n\n  const nextRoutePattern = state.routePatternsByDirection[nextDirection].find(\n    element => element.id === possibleNextRoutePattern\n  );\n\n  const defaultRoutePatternForDirection =\n    nextRoutePattern || state.routePatternsByDirection[nextDirection][0];\n\n  updateDirectionAndVariantInURL(\n    nextDirection,\n    defaultRoutePatternForDirection.id\n  );\n\n  // notify other components of change\n  dispatchChangedDirection(nextDirection);\n\n  return {\n    ...state,\n    directionId: nextDirection,\n    routePattern: defaultRoutePatternForDirection,\n    itemFocus: \"first\"\n  };\n};\n\nconst toggleRoutePatternMenu = (state: State): State => ({\n  ...state,\n  routePatternMenuOpen: !state.routePatternMenuOpen,\n  itemFocus: \"first\"\n});\n\nconst setRoutePattern = (state: State, data: Payload): State => {\n  const newRoutePattern = data!.routePattern!;\n  updateDirectionAndVariantInURL(state.directionId, newRoutePattern.id);\n  return {\n    ...state,\n    routePattern: newRoutePattern,\n    routePatternMenuOpen: false,\n    itemFocus: null\n  };\n};\n\nconst showAllRoutePatterns = (state: State): State => ({\n  ...state,\n  routePatternMenuAll: true,\n  itemFocus: \"first-uncommon\"\n});\n\nexport const menuReducer = (state: State, action: MenuAction): State => {\n  switch (action.type) {\n    case \"toggleDirection\":\n      return toggleDirection(state);\n\n    case \"toggleRoutePatternMenu\":\n      return toggleRoutePatternMenu(state);\n\n    case \"showAllRoutePatterns\":\n      return showAllRoutePatterns(state);\n\n    case \"closeRoutePatternMenu\":\n      return {\n        ...state,\n        routePatternMenuOpen: false,\n        itemFocus: null\n      };\n\n    case \"setRoutePattern\":\n      return setRoutePattern(state, action.payload!);\n\n    /* istanbul ignore next */\n    default:\n      return state;\n  }\n};\n","import React from \"react\";\nimport { CrowdingType } from \"../__schedule\";\nimport { crowdingIcon } from \"../../../helpers/icon\";\nimport { crowdingDescriptions } from \"../../../models/vehicle\";\n\nconst CrowdingPill = ({\n  crowding\n}: {\n  crowding: CrowdingType;\n}): JSX.Element | null => {\n  if (!crowding) return null;\n\n  return (\n    <div\n      className={`u-small-caps u-bold c-crowding-pill c-crowding-pill--${crowding}`}\n    >\n      {crowdingIcon(`c-icon__crowding--${crowding}`)}\n      <span className=\"c-crowding-pill__label\">\n        {crowdingDescriptions(crowding)}\n      </span>\n    </div>\n  );\n};\n\nexport default CrowdingPill;\n","import { times } from \"lodash\";\nimport React, { ReactElement, useContext, useState } from \"react\";\nimport ExpandableBlock from \"../../../components/ExpandableBlock\";\nimport { routeToModeName } from \"../../../helpers/css\";\nimport { stopForId } from \"../../../helpers/stop-tree\";\nimport { Alert } from \"../../../__v3api\";\nimport { RouteStop, StopId, StopTree } from \"../__schedule\";\nimport {\n  BRANCH_LINE_WIDTH,\n  CIRC_DIAMETER,\n  CIRC_RADIUS\n} from \"./graphics/graphic-helpers\";\nimport { branchPosition, diagramWidth } from \"./line-diagram-helpers\";\nimport { StopRefContext } from \"./LineDiagramWithStops\";\nimport StopCard from \"./StopCard\";\nimport { LiveDataByStop } from \"./__line-diagram\";\nimport { alertsByStop } from \"../../../models/alert\";\n\ninterface Props {\n  stopTree: StopTree;\n  stopIds: StopId[];\n  alerts: Alert[];\n  handleStopClick: (stop: RouteStop) => void;\n  liveData?: LiveDataByStop;\n}\n\nconst BranchToggle = (\n  stopTree: StopTree,\n  stopIds: StopId[],\n  isExpanded: boolean\n): JSX.Element => {\n  const position = branchPosition(stopTree, stopIds[0]);\n  const width = diagramWidth(position) - 15;\n\n  return (\n    <div className=\"m-schedule-diagram__expander-header\">\n      <div style={{ width }}>\n        {!isExpanded && (\n          <svg\n            className={`line-diagram-svg__toggle ${routeToModeName(\n              stopForId(stopTree, stopIds[0]).route!\n            )}`}\n            width={width}\n            height=\"100%\"\n          >\n            <g\n              transform={`translate(${(position - 1) * BRANCH_LINE_WIDTH -\n                1}, 1)`}\n            >\n              <rect width={CIRC_DIAMETER * 2} height=\"42\" rx={CIRC_DIAMETER} />\n              {times(3, i => (\n                <circle\n                  key={i}\n                  cx={CIRC_DIAMETER}\n                  cy={10 * (i + 1) + 1}\n                  r={CIRC_RADIUS}\n                />\n              ))}\n            </g>\n          </svg>\n        )}\n      </div>\n      <button className=\"btn btn-link m-schedule-diagram__toggle\" type=\"button\">\n        {stopIds.length} stops\n      </button>\n    </div>\n  );\n};\n\nconst ExpandableBranch = ({\n  stopTree,\n  stopIds,\n  alerts,\n  handleStopClick,\n  liveData\n}: Props): ReactElement<HTMLElement> => {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const updateAllStopCoords = useContext(StopRefContext)[1];\n  // reset all the coordinates.\n  React.useEffect(() => {\n    updateAllStopCoords();\n  }, [isExpanded, updateAllStopCoords]);\n\n  return (\n    <div className=\"m-schedule-diagram__expander\">\n      <ExpandableBlock\n        header={{\n          iconSvgText: null,\n          text: BranchToggle(stopTree, stopIds, isExpanded)\n        }}\n        initiallyExpanded={isExpanded}\n        notifyExpanded={(blockIsExpanded: boolean) => {\n          setIsExpanded(blockIsExpanded);\n        }}\n        preventScroll\n        id={`${stopForId(stopTree, stopIds[0]).branch}`}\n      >\n        <>\n          {stopIds.map(stopId => (\n            <StopCard\n              key={stopId}\n              stopTree={stopTree}\n              routeStopList={[]}\n              stopId={stopId}\n              alerts={alertsByStop(alerts, stopId)}\n              onClick={handleStopClick}\n              liveData={liveData?.[stopId]}\n            />\n          ))}\n        </>\n      </ExpandableBlock>\n    </div>\n  );\n};\n\nexport default ExpandableBranch;\n","import React, { ReactElement, useState } from \"react\";\nimport { Provider } from \"react-redux\";\nimport { updateInLocation } from \"use-query-params\";\nimport SearchBox from \"../../../components/SearchBox\";\nimport { stopForId, stopIds } from \"../../../helpers/stop-tree\";\nimport useRealtime from \"../../../hooks/useRealtime\";\nimport { isSubwayRoute } from \"../../../models/route\";\nimport { Alert, DirectionId, Route } from \"../../../__v3api\";\nimport { getCurrentState, storeHandler } from \"../../store/ScheduleStore\";\nimport { changeOrigin } from \"../ScheduleLoader\";\nimport {\n  IndexedRouteStop,\n  RouteStop,\n  SelectedOrigin,\n  StopTree\n} from \"../__schedule\";\nimport { createStopTreeCoordStore } from \"./graphics/useTreeStopPositions\";\nimport LineDiagramWithStops from \"./LineDiagramWithStops\";\nimport StopCard from \"./StopCard\";\nimport { alertsByStop } from \"../../../models/alert\";\n\ninterface Props {\n  stopTree: StopTree | null;\n  route: Route;\n  routeStopList: IndexedRouteStop[];\n  directionId: DirectionId;\n  alerts: Alert[];\n}\n\nconst stationsOrStops = (routeType: number): string =>\n  [0, 1, 2].includes(routeType) ? \"Stations\" : \"Stops\";\n\nconst updateURL = (origin: SelectedOrigin, direction?: DirectionId): void => {\n  /* istanbul ignore else */\n  if (window) {\n    // eslint-disable-next-line camelcase\n    const newQuery = {\n      \"schedule_finder[direction_id]\":\n        direction !== undefined ? direction.toString() : \"\",\n      \"schedule_finder[origin]\": origin\n    };\n    const newLoc = updateInLocation(newQuery, window.location);\n    // newLoc is not a true Location, so toString doesn't work\n    window.history.replaceState({}, \"\", `${newLoc.pathname}${newLoc.search}`);\n  }\n};\n\nconst LineDiagram = ({\n  stopTree,\n  routeStopList,\n  route,\n  directionId,\n  alerts\n}: Props): ReactElement<HTMLElement> => {\n  const stopTreeCoordStore = stopTree\n    ? createStopTreeCoordStore(stopTree)\n    : createStopTreeCoordStore(routeStopList);\n  const liveData = useRealtime(route, directionId, true);\n  const [query, setQuery] = useState(\"\");\n\n  const allStops: RouteStop[] = stopTree\n    ? stopIds(stopTree).map(stopId => stopForId(stopTree, stopId))\n    : routeStopList;\n  const filteredStops: RouteStop[] = allStops.filter(stop =>\n    stop.name.toLowerCase().includes(query.toLowerCase())\n  );\n\n  const handleStopClick = (stop: RouteStop): void => {\n    changeOrigin(stop.id);\n\n    const currentState = getCurrentState();\n    const { modalOpen: modalIsOpen } = currentState;\n\n    updateURL(stop.id, directionId);\n\n    if (currentState.selectedOrigin !== undefined && !modalIsOpen) {\n      storeHandler({\n        type: \"OPEN_MODAL\",\n        newStoreValues: {\n          modalMode: \"schedule\"\n        }\n      });\n    }\n  };\n\n  return (\n    <>\n      {!isSubwayRoute(route) && (\n        <h3 className=\"m-schedule-diagram__heading\">\n          {stationsOrStops(route.type)}\n        </h3>\n      )}\n      <SearchBox\n        id=\"stop-search\"\n        labelText={`Search for a ${stationsOrStops(route.type)\n          .toLowerCase()\n          .slice(0, -1)}`}\n        onChange={setQuery}\n        className=\"m-schedule-diagram__filter\"\n      />\n      {query !== \"\" ? (\n        <ol className=\"m-schedule-diagram m-schedule-diagram--searched\">\n          {filteredStops.length ? (\n            filteredStops.map((stop: RouteStop) => (\n              <StopCard\n                key={stop.id}\n                stopTree={stopTree}\n                stopId={stop.id}\n                routeStopList={routeStopList}\n                alerts={alertsByStop(alerts, stop.id)}\n                onClick={handleStopClick}\n                liveData={liveData?.[stop.id]}\n                searchQuery={query}\n              />\n            ))\n          ) : (\n            <div className=\"c-alert-item c-alert-item--low c-alert-item__top-text-container\">\n              No stops {route.direction_names[directionId]} to{\" \"}\n              {route.direction_destinations[directionId]} matching{\" \"}\n              <b className=\"u-highlight\">{query}</b>. Try changing your\n              direction or adjusting your search.\n            </div>\n          )}\n        </ol>\n      ) : (\n        <Provider store={stopTreeCoordStore}>\n          <LineDiagramWithStops\n            stopTree={stopTree}\n            routeStopList={routeStopList}\n            route={route}\n            directionId={directionId}\n            alerts={alerts}\n            handleStopClick={handleStopClick}\n            liveData={liveData}\n          />\n        </Provider>\n      )}\n    </>\n  );\n};\n\nexport default LineDiagram;\n","import { partition } from \"lodash\";\nimport React, { ReactElement } from \"react\";\nimport {\n  longestPath,\n  longestPathStartingId,\n  newBranchesStartingInSlice,\n  nextStopIds\n} from \"../../../helpers/stop-tree\";\nimport { hasPredictionTime } from \"../../../models/prediction\";\nimport { Alert, DirectionId, Route } from \"../../../__v3api\";\nimport { IndexedRouteStop, RouteStop, StopId, StopTree } from \"../__schedule\";\nimport { Diagram, SimpleDiagram } from \"./graphics/Diagram\";\nimport useTreeStopPositions, { RefMap } from \"./graphics/useTreeStopPositions\";\nimport ExpandableBranch from \"./ExpandableBranch\";\nimport StopCard from \"./StopCard\";\nimport { LiveDataByStop } from \"./__line-diagram\";\nimport { alertsByStop } from \"../../../models/alert\";\n\ninterface Props {\n  stopTree: StopTree | null;\n  routeStopList: IndexedRouteStop[];\n  route: Route;\n  directionId: DirectionId;\n  alerts: Alert[];\n  handleStopClick: (stop: RouteStop) => void;\n  liveData?: LiveDataByStop;\n}\n\nexport const StopRefContext = React.createContext<[RefMap, () => void]>([\n  new Map(),\n  () => {}\n]);\n\nconst stopsToTerminus = (stopTree: StopTree, stopId: StopId): StopId[] => [\n  stopId,\n  ...nextStopIds(stopTree, stopId).flatMap(nextId =>\n    stopsToTerminus(stopTree, nextId)\n  )\n];\n\nconst nextPrimaryAndBranches = (\n  stopTree: StopTree,\n  stopIds: StopId[]\n): [StopId, StopId[]] => {\n  const primaryPath = longestPath(stopTree);\n  const [primary, branches] = partition(stopIds, id =>\n    primaryPath.includes(id)\n  );\n\n  return [primary[0], branches];\n};\n\nconst NextStopOrBranch = ({\n  stopTree,\n  stopId,\n  alerts,\n  mergingInBranches,\n  splittingOffBranches,\n  handleStopClick,\n  liveData\n}: {\n  stopTree: StopTree;\n  stopId: StopId;\n  alerts: Alert[];\n  mergingInBranches: StopId[][];\n  splittingOffBranches: StopId[];\n  handleStopClick: (stop: RouteStop) => void;\n  liveData?: LiveDataByStop;\n}): ReactElement<HTMLElement> => {\n  // Splitting off branch\n  if (splittingOffBranches.length) {\n    const splittingOffBranch =\n      splittingOffBranches[splittingOffBranches.length - 1];\n    const remainingSplittingOffBranches = splittingOffBranches.slice(0, -1);\n\n    const branchStopIds = stopsToTerminus(stopTree, splittingOffBranch);\n    const terminalStopId = branchStopIds[branchStopIds.length - 1];\n    const nonTerminalStops = branchStopIds.slice(0, -1);\n    const expandableBranch = nonTerminalStops.length\n      ? [\n          <ExpandableBranch\n            key={`branch-${terminalStopId}`}\n            stopTree={stopTree}\n            // Strip the terminus stop\n            stopIds={nonTerminalStops}\n            alerts={alerts}\n            handleStopClick={handleStopClick}\n            liveData={liveData}\n          />\n        ]\n      : [];\n    const children = [\n      ...expandableBranch,\n      <StopCard\n        key={`stop-card-${terminalStopId}`}\n        stopTree={stopTree}\n        routeStopList={[]}\n        stopId={terminalStopId}\n        alerts={alertsByStop(alerts, terminalStopId)}\n        onClick={handleStopClick}\n        liveData={liveData?.[terminalStopId]}\n      />,\n      <NextStopOrBranch\n        key={`tail-${terminalStopId}`}\n        stopTree={stopTree}\n        stopId={stopId}\n        alerts={alerts}\n        mergingInBranches={mergingInBranches}\n        splittingOffBranches={remainingSplittingOffBranches}\n        handleStopClick={handleStopClick}\n        liveData={liveData}\n      />\n    ];\n\n    return <>{children}</>;\n  }\n\n  const newMergingInBranches: StopId[][] = mergingInBranches.concat(\n    newBranchesStartingInSlice(stopTree, stopId).map(id => [id])\n  );\n\n  const mergingBranch: StopId[] | undefined = newMergingInBranches.find(\n    branch => branch[branch.length - 1] === stopId\n  );\n\n  // Merging in branch\n  if (mergingBranch) {\n    const remainingMergingInBranches = mergingInBranches.filter(\n      branch => branch !== mergingBranch\n    );\n    const startingId: StopId = mergingBranch[0];\n    const nonStartingStops = mergingBranch.slice(1, -1);\n\n    const expandableBranch = nonStartingStops.length\n      ? [\n          <ExpandableBranch\n            key={`branch-${startingId}`}\n            stopTree={stopTree}\n            // Strip the merge stop\n            stopIds={nonStartingStops}\n            alerts={alerts}\n            handleStopClick={handleStopClick}\n            liveData={liveData}\n          />\n        ]\n      : [];\n    const children = [\n      <StopCard\n        key={`stop-card-${startingId}`}\n        stopTree={stopTree}\n        routeStopList={[]}\n        stopId={startingId}\n        alerts={alertsByStop(alerts, startingId)}\n        onClick={handleStopClick}\n        liveData={liveData?.[startingId]}\n      />,\n      ...expandableBranch,\n      <NextStopOrBranch\n        key={`tail-${startingId}`}\n        stopTree={stopTree}\n        stopId={stopId}\n        alerts={alerts}\n        mergingInBranches={remainingMergingInBranches}\n        splittingOffBranches={splittingOffBranches}\n        handleStopClick={handleStopClick}\n        liveData={liveData}\n      />\n    ];\n\n    return <>{children}</>;\n  }\n\n  // Primary branch\n  const nextIds = nextStopIds(stopTree, stopId);\n  if (nextIds.length) {\n    const [nextId, newSplittingOffBranches] = nextPrimaryAndBranches(\n      stopTree,\n      nextIds\n    );\n\n    if (newSplittingOffBranches.length) {\n      // Display splitting off branches before any next stops on the primary branch\n      const children = [\n        <StopCard\n          key={stopId}\n          stopTree={stopTree}\n          routeStopList={[]}\n          stopId={stopId}\n          alerts={alertsByStop(alerts, stopId)}\n          onClick={handleStopClick}\n          liveData={liveData?.[stopId]}\n        />,\n        <NextStopOrBranch\n          key={`${stopId}-${nextId}`}\n          stopTree={stopTree}\n          stopId={nextId}\n          alerts={alerts}\n          mergingInBranches={mergingInBranches}\n          splittingOffBranches={newSplittingOffBranches}\n          handleStopClick={handleStopClick}\n          liveData={liveData}\n        />\n      ];\n\n      return <>{children}</>;\n    }\n\n    const mergingInBranchesWithNext = newMergingInBranches.map(branch => {\n      const lastStopId: StopId = branch[branch.length - 1];\n      return branch.concat(nextStopIds(stopTree, lastStopId));\n    });\n\n    const children = [\n      <StopCard\n        key={stopId}\n        stopTree={stopTree}\n        routeStopList={[]}\n        stopId={stopId}\n        alerts={alertsByStop(alerts, stopId)}\n        onClick={handleStopClick}\n        liveData={liveData?.[stopId]}\n      />,\n      <NextStopOrBranch\n        key={`${stopId}-${nextId}`}\n        stopTree={stopTree}\n        stopId={nextId}\n        alerts={alerts}\n        mergingInBranches={mergingInBranchesWithNext}\n        splittingOffBranches={[]}\n        handleStopClick={handleStopClick}\n        liveData={liveData}\n      />\n    ];\n\n    return <>{children}</>;\n  }\n\n  return (\n    <StopCard\n      key={stopId}\n      stopTree={stopTree}\n      routeStopList={[]}\n      stopId={stopId}\n      alerts={alertsByStop(alerts, stopId)}\n      onClick={handleStopClick}\n      liveData={liveData?.[stopId]}\n    />\n  );\n};\n\nconst LineDiagramWithStops = ({\n  stopTree,\n  routeStopList,\n  route,\n  directionId,\n  alerts,\n  handleStopClick,\n  liveData\n}: Props): ReactElement<HTMLElement> => {\n  // create a ref for each stop - we will use this to track the location of the stop so we can place the line diagram bubbles\n  const [stopRefsMap, updateAllStopCoords] = useTreeStopPositions(\n    stopTree || routeStopList\n  );\n\n  const anyCrowding = Object.values(\n    liveData || {}\n  ).some(({ headsigns }): boolean =>\n    headsigns\n      ? headsigns\n          .filter(hasPredictionTime)\n          .some(\n            ({ time_data_with_crowding_list: timeData }): boolean =>\n              !!timeData[0].crowding\n          )\n      : false\n  );\n\n  return (\n    <StopRefContext.Provider value={[stopRefsMap, updateAllStopCoords]}>\n      <div\n        className={`m-schedule-diagram ${\n          !anyCrowding ? \"u-no-crowding-data\" : \"\"\n        }`}\n      >\n        {stopTree ? (\n          <Diagram\n            stopTree={stopTree}\n            route={route}\n            directionId={directionId}\n            alerts={alerts}\n            liveData={liveData}\n          />\n        ) : (\n          <SimpleDiagram\n            routeStopList={routeStopList}\n            route={route}\n            directionId={directionId}\n            alerts={alerts}\n            liveData={liveData}\n          />\n        )}\n        <ol>\n          {stopTree ? (\n            <NextStopOrBranch\n              stopTree={stopTree}\n              stopId={longestPathStartingId(stopTree)}\n              alerts={alerts}\n              mergingInBranches={[]}\n              splittingOffBranches={[]}\n              handleStopClick={handleStopClick}\n              liveData={liveData}\n            />\n          ) : (\n            <>\n              {routeStopList.map(routeStop => (\n                <StopCard\n                  key={`stop-card-${routeStop.routeIndex}`}\n                  stopTree={null}\n                  routeStopList={routeStopList}\n                  stopId={routeStop.id}\n                  alerts={alertsByStop(alerts, routeStop.id)}\n                  onClick={handleStopClick}\n                  liveData={liveData?.[routeStop.id]}\n                />\n              ))}\n            </>\n          )}\n        </ol>\n      </div>\n    </StopRefContext.Provider>\n  );\n};\n\nexport default LineDiagramWithStops;\n","import React from \"react\";\nimport { TooltipWrapper, crowdingIcon } from \"../../../helpers/icon\";\nimport {\n  crowdingDescriptions,\n  crCrowdingDescriptions\n} from \"../../../models/vehicle\";\nimport { CrowdingType } from \"../__schedule\";\n\ninterface LiveCrowdingIconProps {\n  crowding: CrowdingType;\n  tooltipPlacement?: \"top\" | \"bottom\" | \"left\" | \"right\";\n  isCommuterRail?: boolean;\n}\n\nconst LiveCrowdingIcon = ({\n  crowding,\n  tooltipPlacement,\n  isCommuterRail\n}: LiveCrowdingIconProps): JSX.Element => (\n  <div className=\"m-schedule-diagram__prediction-crowding\">\n    {crowding ? (\n      <TooltipWrapper\n        tooltipText={\n          isCommuterRail\n            ? `This train typically has<br /><strong>${crCrowdingDescriptions(\n                crowding\n              )}</strong>`\n            : `Currently <strong>${crowdingDescriptions(\n                crowding\n              ).toLowerCase()}</strong>`\n        }\n        tooltipOptions={{\n          placement: tooltipPlacement || \"left\",\n          animation: false,\n          html: true\n        }}\n      >\n        {crowdingIcon(\n          `c-icon__crowding--${crowding} ${\n            isCommuterRail ? \"c-icon__crowding--commuter-rail\" : \"\"\n          }`\n        )}\n      </TooltipWrapper>\n    ) : (\n      crowdingIcon(\"c-icon__crowding--crowding_unavailable\")\n    )}\n  </div>\n);\n\nexport default LiveCrowdingIcon;\n","import React, { ReactElement, useContext } from \"react\";\nimport { effectNameForAlert } from \"../../../components/Alerts\";\nimport GlxOpen from \"../../../components/GlxOpen\";\nimport MatchHighlight from \"../../../components/MatchHighlight\";\nimport { alertIcon } from \"../../../helpers/icon\";\nimport {\n  hasBranches,\n  isEndNode,\n  isStartNode,\n  stopForId\n} from \"../../../helpers/stop-tree\";\nimport {\n  alertsByStop,\n  isActiveDiversion,\n  isHighSeverityOrHighPriority\n} from \"../../../models/alert\";\nimport { hasPredictionTime } from \"../../../models/prediction\";\nimport {\n  isACommuterRailRoute,\n  isAGreenLineRoute,\n  isSubwayRoute\n} from \"../../../models/route\";\nimport { Alert, Route } from \"../../../__v3api\";\nimport { RouteStop, RouteStopRoute, StopId, StopTree } from \"../__schedule\";\nimport { branchPosition, diagramWidth } from \"./line-diagram-helpers\";\nimport StopConnections from \"./StopConnections\";\nimport StopFeatures from \"./StopFeatures\";\nimport StopPredictions from \"./StopPredictions\";\nimport { StopRefContext } from \"./LineDiagramWithStops\";\nimport { LiveData } from \"./__line-diagram\";\n\ninterface Props {\n  stopTree: StopTree | null;\n  routeStopList: RouteStop[];\n  stopId: StopId;\n  alerts: Alert[];\n  onClick: (stop: RouteStop) => void;\n  liveData?: LiveData;\n  searchQuery?: string;\n}\n\nconst width = (stopTree: StopTree, stopId: StopId): number =>\n  diagramWidth(branchPosition(stopTree, stopId));\n\nconst hasBranchLabel = (stopTree: StopTree, stopId: StopId): boolean => {\n  const stop: RouteStop = stopForId(stopTree, stopId);\n  return (\n    hasBranches(stopTree) &&\n    (isStartNode(stopTree, stopId) || isEndNode(stopTree, stopId)) &&\n    !!stop.branch &&\n    !!stop.route\n  );\n};\n\nconst lineName = ({ name, route: routeStopRoute }: RouteStop): string => {\n  const route = routeStopRoute as Route;\n  const title = isAGreenLineRoute(route)\n    ? `Green Line ${route.id.split(\"-\")[1]}`\n    : name;\n  const lineOrBranch = isACommuterRailRoute(route) ? \"Line\" : \"Branch\";\n  return `${title} ${lineOrBranch}`;\n};\n\nconst hasLivePredictions = (liveData?: LiveData): boolean =>\n  !!liveData && liveData.headsigns.some(hasPredictionTime);\n\nconst connectionsFor = (\n  routeStop: RouteStop,\n  stopTree: StopTree\n): RouteStopRoute[] => {\n  const { connections } = routeStop;\n  const greenLineConnections = connections.filter(isAGreenLineRoute);\n  if (routeStop.route && hasBranches(stopTree) && greenLineConnections.length) {\n    // If we can connect to other Green Line routes, they can connect back to\n    // this route as well.\n    const routeStopRoute: RouteStopRoute = {\n      ...routeStop.route,\n      \"custom_route?\": false\n    };\n    return [routeStopRoute, ...connections];\n  }\n  return connections;\n};\n\nconst hasHighPriorityAlert = (stopId: StopId, alerts: Alert[]): boolean =>\n  alertsByStop(alerts, stopId).filter(isHighSeverityOrHighPriority).length > 0;\n\nconst routeForStop = (\n  stopTree: StopTree,\n  stopId: StopId\n): RouteStopRoute | null => {\n  const { route } = stopForId(stopTree, stopId);\n  return route;\n};\n\nconst hasUpcomingDeparturesIfSubway = (\n  stopTree: StopTree,\n  stopId: StopId,\n  liveData?: LiveData\n): boolean => {\n  const route = routeForStop(stopTree, stopId);\n  if (!route || !isSubwayRoute(route)) return true;\n  return !!liveData && liveData.headsigns.length > 0;\n};\n\nconst schedulesButtonLabel = (route: RouteStopRoute | null): string => {\n  return route && isSubwayRoute(route)\n    ? \"View upcoming departures\"\n    : \"View schedule\";\n};\n\nconst Alert = (): JSX.Element => (\n  <>\n    {alertIcon(\"c-svg__icon-alerts-triangle\")}\n    <span className=\"sr-only\">Service alert or delay</span>\n    &nbsp;\n  </>\n);\n\nconst StopCard = ({\n  stopTree,\n  stopId,\n  routeStopList,\n  alerts,\n  onClick,\n  liveData,\n  searchQuery\n}: Props): ReactElement<HTMLElement> => {\n  const refs = useContext(StopRefContext)[0];\n  const routeStop = stopTree\n    ? stopForId(stopTree, stopId)\n    : routeStopList.find(rs => rs.id === stopId)!;\n  const routeStopIndex = routeStopList.indexOf(routeStop);\n  const isEnd = stopTree\n    ? isEndNode(stopTree, stopId)\n    : routeStopIndex === routeStopList.length - 1;\n\n  const diversionAlert = alerts.find(isActiveDiversion);\n  const showDiversion =\n    diversionAlert && !(hasLivePredictions(liveData) && isEnd);\n\n  const left = stopTree ? width(stopTree, stopId) : diagramWidth(1);\n  const connections = stopTree\n    ? connectionsFor(routeStop, stopTree)\n    : routeStop.connections;\n\n  return (\n    <li\n      className=\"m-schedule-diagram__stop\"\n      style={{\n        paddingLeft: searchQuery ? \"0.5rem\" : `${left}px`\n      }}\n    >\n      <section className=\"m-schedule-diagram__content\">\n        <GlxOpen pageType=\"line-diagram\" stopId={stopId} />\n        {stopTree && hasBranchLabel(stopTree, stopId) && (\n          <div className=\"u-bold u-small-caps\">{lineName(routeStop)}</div>\n        )}\n        <header\n          className=\"m-schedule-diagram__stop-heading\"\n          ref={el => refs.set(stopId, el)}\n        >\n          <h4 className=\"m-schedule-diagram__stop-link notranslate\">\n            <a href={`/stops/${stopId}`}>\n              {hasHighPriorityAlert(stopId, alerts) && <Alert />}\n              <MatchHighlight text={routeStop.name} matchQuery={searchQuery} />\n            </a>\n          </h4>\n          {StopFeatures(routeStop)}\n        </header>\n\n        <div className=\"m-schedule-diagram__stop-details\">\n          {StopConnections(stopId, connections)}\n          {hasLivePredictions(liveData) && !isEnd ? (\n            <StopPredictions\n              headsigns={liveData!.headsigns}\n              isCommuterRail={\n                !!routeStop.route && isACommuterRailRoute(routeStop.route)\n              }\n            />\n          ) : (\n            showDiversion && (\n              <div className=\"m-schedule-diagram__alert\">\n                {effectNameForAlert(diversionAlert!)}\n              </div>\n            )\n          )}\n        </div>\n\n        {!isEnd &&\n          (stopTree\n            ? hasUpcomingDeparturesIfSubway(stopTree, stopId, liveData)\n            : true) && (\n            <footer className=\"m-schedule-diagram__footer\">\n              <button\n                className=\"btn btn-link\"\n                type=\"button\"\n                onClick={() => onClick(routeStop)}\n              >\n                {schedulesButtonLabel(\n                  stopTree ? routeForStop(stopTree, stopId) : routeStop.route\n                )}\n              </button>\n            </footer>\n          )}\n      </section>\n    </li>\n  );\n};\n\nexport default StopCard;\n","import React from \"react\";\nimport { sortBy } from \"lodash\";\nimport { RouteStopRoute } from \"../__schedule\";\nimport { TooltipWrapper, modeIcon } from \"../../../helpers/icon\";\nimport { isABusRoute, isACommuterRailRoute } from \"../../../models/route\";\nimport { routeBgClass } from \"../../../helpers/css\";\nimport { Route } from \"../../../__v3api\";\n\nconst filteredConnections = (\n  connections: RouteStopRoute[]\n): RouteStopRoute[] => {\n  const firstCRIndex = connections.findIndex(\n    connection => connection.type === 2\n  );\n  const firstFerryIndex = connections.findIndex(\n    connection => connection.type === 4\n  );\n\n  // show only 1 CR or Ferry icon\n  const consolidated = connections.filter(\n    (connection, index) =>\n      (connection.type !== 2 && connection.type !== 4) ||\n      (connection.type === 2 && index === firstCRIndex) ||\n      (connection.type === 4 && index === firstFerryIndex)\n  );\n\n  // sort by type (CR or Ferry icon first), then sort_order\n  return sortBy(consolidated, [\n    ({ type }) => ([2, 4].includes(type) ? -1 : 0),\n    \"sort_order\"\n  ]);\n};\n\nconst connectionName = (connection: Route): string => {\n  if (isABusRoute(connection)) {\n    return connection.name.startsWith(\"SL\")\n      ? `Silver Line ${connection.name}`\n      : `Route ${connection.name}`;\n  }\n\n  if (isACommuterRailRoute(connection)) {\n    return \"Commuter Rail\";\n  }\n\n  return connection.name;\n};\n\nconst StopConnections = (\n  route_id: string,\n  connections: RouteStopRoute[]\n): JSX.Element => (\n  <div className=\"m-schedule-diagram__connections\">\n    {filteredConnections(connections).map((connectingRoute: Route) => (\n      <TooltipWrapper\n        key={connectingRoute.id}\n        href={`/schedules/${connectingRoute.id}/line`}\n        tooltipText={connectionName(connectingRoute)}\n        tooltipOptions={{\n          placement: \"bottom\",\n          animation: false\n        }}\n      >\n        {isABusRoute(connectingRoute) ? (\n          <span\n            key={connectingRoute.id}\n            className={`c-icon__bus-pill--small m-schedule-diagram__connection ${routeBgClass(\n              connectingRoute\n            )}`}\n          >\n            {connectingRoute.name}\n          </span>\n        ) : (\n          <span\n            key={connectingRoute.id}\n            className=\"m-schedule-diagram__connection\"\n          >\n            {modeIcon(connectingRoute.id)}\n          </span>\n        )}\n      </TooltipWrapper>\n    ))}\n  </div>\n);\n\nexport { filteredConnections, StopConnections as default };\n","import React from \"react\";\nimport { RouteStop } from \"../__schedule\";\nimport {\n  TooltipWrapper,\n  parkingIcon,\n  accessibleIcon\n} from \"../../../helpers/icon\";\nimport { isACommuterRailRoute } from \"../../../models/route\";\nimport { isBusRouteStop } from \"../../../helpers/routes\";\n\nconst StopFeatures = (routeStop: RouteStop): JSX.Element => (\n  <div className=\"m-schedule-diagram__features\">\n    {routeStop.stop_features.includes(\"parking_lot\") ? (\n      <TooltipWrapper\n        tooltipText=\"Parking\"\n        tooltipOptions={{ placement: \"bottom\" }}\n      >\n        {parkingIcon(\"u-color-gray-light m-schedule-diagram__feature-icon\")}\n      </TooltipWrapper>\n    ) : null}\n    {// NOTE: Bus routes are always considered accessible, see\n    // https://app.asana.com/0/1201653980996886/1201894234147725/f\n    isBusRouteStop(routeStop) || routeStop.stop_features.includes(\"access\") ? (\n      <TooltipWrapper\n        tooltipText=\"Accessible\"\n        tooltipOptions={{ placement: \"bottom\" }}\n      >\n        {accessibleIcon(\n          \"c-svg__icon-acessible-default m-schedule-diagram__feature-icon\"\n        )}\n      </TooltipWrapper>\n    ) : null}\n    {routeStop.zone &&\n      routeStop.route &&\n      isACommuterRailRoute(routeStop.route) && (\n        <span className=\"c-icon__cr-zone m-schedule-diagram__feature-icon\">{`Zone ${routeStop.zone}`}</span>\n      )}\n  </div>\n);\n\nexport default StopFeatures;\n","import React from \"react\";\nimport { capitalize } from \"lodash\";\nimport { HeadsignWithCrowding } from \"../../../__v3api\";\nimport {\n  timeForCommuterRail,\n  statusForCommuterRail\n} from \"../../../helpers/prediction-helpers\";\nimport {\n  isSkippedOrCancelled,\n  hasPredictionTime\n} from \"../../../models/prediction\";\nimport LiveCrowdingIcon from \"./LiveCrowdingIcon\";\n\ninterface StopPredictions {\n  headsigns: HeadsignWithCrowding[];\n  isCommuterRail: boolean;\n}\n\nconst predictionTexts = (headsign: HeadsignWithCrowding): string[] => {\n  const texts = [headsign.name];\n  if (headsign.train_number) {\n    texts.push(` · Train ${headsign.train_number}`);\n  }\n\n  const predictedOrScheduledTime =\n    headsign.time_data_with_crowding_list[0].time_data;\n  const { prediction } = predictedOrScheduledTime;\n\n  if (prediction && prediction.track) {\n    texts.push(` · Track ${prediction.track}`);\n  }\n\n  const status = statusForCommuterRail(predictedOrScheduledTime);\n  if (status) {\n    texts.push(` · ${status}`);\n  }\n  return texts;\n};\n\nconst StopPredictions = ({\n  headsigns,\n  isCommuterRail\n}: StopPredictions): JSX.Element => {\n  let predictions: JSX.Element[];\n  const liveHeadsigns = headsigns.filter(hasPredictionTime);\n\n  if (isCommuterRail) {\n    // Display at most 1 prediction for Commuter Rail\n    predictions = liveHeadsigns.slice(0, 1).map(headsign => {\n      const enhancedTimeData = headsign.time_data_with_crowding_list[0];\n      const predictedOrScheduledTime = enhancedTimeData.time_data;\n      const predictionTimeClass = isSkippedOrCancelled(\n        enhancedTimeData.predicted_schedule.prediction\n      )\n        ? \"m-schedule-diagram__cr-prediction-time strikethrough\"\n        : \"m-schedule-diagram__cr-prediction-time\";\n\n      return (\n        <div key={`${headsign.name}-cr`}>\n          <div className=\"m-schedule-diagram__cr-prediction\">\n            {timeForCommuterRail(predictedOrScheduledTime, predictionTimeClass)}\n          </div>\n          <div className=\"m-schedule-diagram__cr-prediction-details\">\n            {predictionTexts(headsign).map((text: string) => (\n              <span key={text}>{text}</span>\n            ))}\n          </div>\n        </div>\n      );\n    });\n  } else {\n    predictions = liveHeadsigns.map((headsign, index) => {\n      const { crowding } = headsign.time_data_with_crowding_list[0];\n      return (\n        <div\n          // eslint-disable-next-line react/no-array-index-key\n          key={`headsign.name-${index}`}\n          className=\"m-schedule-diagram__prediction notranslate\"\n        >\n          <div>{headsign.name}</div>\n          <div className=\"m-schedule-diagram__prediction-time\">\n            {capitalize(\n              headsign.time_data_with_crowding_list[0].time_data.prediction!.time.join(\n                \" \"\n              )\n            )}\n          </div>\n          <LiveCrowdingIcon crowding={crowding} />\n        </div>\n      );\n    });\n  }\n\n  return <div className=\"m-schedule-diagram__predictions\">{predictions}</div>;\n};\n\nexport default StopPredictions;\n","import React from \"react\";\nimport { renderToString } from \"react-dom/server\";\nimport { useSelector } from \"react-redux\";\nimport { RouteStop, LineDiagramVehicle } from \"../__schedule\";\nimport CrowdingPill from \"./CrowdingPill\";\nimport { TooltipWrapper, vehicleArrowIcon } from \"../../../helpers/icon\";\nimport { StopCoord, CoordState, CIRC_RADIUS } from \"./graphics/graphic-helpers\";\n\ninterface VehicleIconsProps {\n  stop: RouteStop;\n  vehicles: LineDiagramVehicle[] | null;\n}\n\nconst CrowdingIconString = (vehicle: LineDiagramVehicle): string =>\n  renderToString(<CrowdingPill crowding={vehicle.crowding} />);\n\nconst VehicleIcons = ({\n  stop,\n  vehicles\n}: VehicleIconsProps): JSX.Element | null => {\n  const coords: StopCoord | null = useSelector(\n    (state: CoordState) => state[stop.id]\n  );\n  if (!vehicles || !coords) return null;\n  const [x, y] = coords;\n  const left = `${x - CIRC_RADIUS}px`;\n  const tooltips = vehicles.map(vehicle => {\n    const top = `${{\n      // eslint-disable-next-line camelcase\n      in_transit: y - 50,\n      incoming: y - 25,\n      stopped: y - 10\n    }[vehicle.status] || y}px`;\n\n    return (\n      <div\n        key={vehicle.id}\n        className=\"m-schedule-diagram__vehicle\"\n        style={{ top, left }}\n      >\n        <TooltipWrapper\n          tooltipText={`<div class=\"m-schedule-diagram__vehicle-tooltip\">${\n            vehicle.crowding ? `${CrowdingIconString(vehicle)}<br/>` : \"\"\n          }${vehicle.tooltip}</div>`}\n          tooltipOptions={{ placement: \"right\", animation: false, html: true }}\n        >\n          {vehicleArrowIcon(\"m-schedule-diagram__vehicle--icon\")}\n        </TooltipWrapper>\n      </div>\n    );\n  });\n\n  return <>{tooltips}</>;\n};\n\nexport default VehicleIcons;\n","import React, { ReactElement } from \"react\";\nimport { uniqBy } from \"lodash\";\nimport { routeToModeName } from \"../../../../helpers/css\";\nimport {\n  isBranchingNode,\n  isStartNode,\n  largestSliceSize,\n  longestPath,\n  longestPathLength,\n  nextStopIds,\n  stopForId,\n  stopIds\n} from \"../../../../helpers/stop-tree\";\nimport { isAGreenLineRoute } from \"../../../../models/route\";\nimport { Alert, DirectionId, Route } from \"../../../../__v3api\";\nimport {\n  IndexedRouteStop,\n  RouteStop,\n  StopId,\n  StopTree\n} from \"../../__schedule\";\nimport { diagramWidth } from \"../line-diagram-helpers\";\nimport VehicleIcons from \"../VehicleIcons\";\nimport { LiveDataByStop } from \"../__line-diagram\";\nimport { BASE_LINE_WIDTH, DiagonalHatchPattern } from \"./graphic-helpers\";\nimport Stop from \"./Stop\";\nimport { Line, SimpleLine } from \"./Line\";\nimport Merges from \"./Merges\";\n\ninterface Props {\n  stopTree: StopTree;\n  route: Route;\n  directionId: DirectionId;\n  alerts: Alert[];\n  liveData?: LiveDataByStop;\n}\n\nconst routeName = (route: Route): string =>\n  isAGreenLineRoute(route) ? \"Green Line\" : route.name;\n\nconst diagramDescription = (\n  pathLength: number,\n  route: Route,\n  directionId: DirectionId\n): string => {\n  const text = `${pathLength} stops`;\n  const {\n    direction_destinations: destinations,\n    direction_names: names\n  } = route;\n  if (destinations) {\n    return `${text} going ${names[directionId]} to ${destinations[directionId]}`;\n  }\n  return text;\n};\n\nconst hasBranchLines = (stopTree: StopTree): boolean =>\n  largestSliceSize(stopTree) > 1;\n\nconst branchingDescription = (stopTree: StopTree): string => {\n  const primaryPath = longestPath(stopTree);\n  const branchingStops: StopId[] = primaryPath.filter(id =>\n    isBranchingNode(stopTree, id)\n  );\n  const branchText = branchingStops.map(branchingStopId => {\n    const routeStop: RouteStop = stopForId(stopTree, branchingStopId);\n    const branchNames: string[] = nextStopIds(stopTree, branchingStopId)\n      .filter(id => !primaryPath.includes(id))\n      .map(id => stopForId(stopTree, id)?.branch || \"\");\n\n    return `Use ${routeStop.name} to transfer to trains on ${branchNames.join(\n      \" or \"\n    )} branches.`;\n  });\n  return branchText.join(\"\");\n};\n\nconst LiveVehicleIconSet = ({\n  isStart,\n  stop,\n  liveData\n}: {\n  isStart: boolean;\n  stop: RouteStop;\n  liveData?: LiveDataByStop;\n}): ReactElement<HTMLElement> | null => {\n  const stopId = stop.id;\n  if (!liveData || !liveData[stopId]) return null;\n  const vehicles = uniqBy(liveData[stopId].vehicles, \"id\");\n  // Hide vehicles arriving to the origin from 'off the line'\n  const vehicleData = isStart\n    ? vehicles.filter(vehicle => vehicle.status === \"stopped\")\n    : vehicles;\n\n  return (\n    <VehicleIcons\n      key={`${stopId}-vehicles`}\n      stop={stop}\n      vehicles={vehicleData}\n    />\n  );\n};\n\ninterface SimpleProps {\n  routeStopList: IndexedRouteStop[];\n  route: Route;\n  directionId: DirectionId;\n  alerts: Alert[];\n  liveData?: LiveDataByStop;\n}\n\nconst SimpleDiagram = ({\n  routeStopList,\n  route,\n  directionId,\n  alerts,\n  liveData\n}: SimpleProps): ReactElement<HTMLElement> => (\n  <>\n    {routeStopList.map((routeStop, index) => (\n      <LiveVehicleIconSet\n        key={`vehicle-set-${routeStop.routeIndex}`}\n        isStart={index === 0}\n        stop={routeStop}\n        liveData={liveData}\n      />\n    ))}\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      role=\"img\"\n      aria-labelledby=\"diagram-title diagram-desc\"\n      className={`line-diagram-svg ${routeToModeName(route)}`}\n      width={`${diagramWidth(1)}px`}\n      height=\"100%\"\n      style={{ left: BASE_LINE_WIDTH / 2, overflow: \"visible\" }}\n    >\n      <title id=\"diagram-title\">Line diagram for {routeName(route)}</title>\n      <desc id=\"diagram-desc\">\n        {diagramDescription(routeStopList.length, route, directionId)}\n      </desc>\n      <defs>{DiagonalHatchPattern()}</defs>\n      {/* Draw lines between stops */\n      routeStopList.map((routeStop, index) => {\n        const nextStop = routeStopList[index + 1];\n        if (!nextStop) return null;\n        return (\n          <SimpleLine\n            key={`${routeStop.id}-${nextStop.id}`}\n            fromId={routeStop.id}\n            toId={nextStop.id}\n            alerts={alerts}\n          />\n        );\n      })}\n\n      {/* Draw circles for each stop */\n      routeStopList.map(routeStop => (\n        <Stop key={`stop-${routeStop.routeIndex}`} stopId={routeStop.id} />\n      ))}\n    </svg>\n  </>\n);\n\nconst Diagram = ({\n  stopTree,\n  route,\n  directionId,\n  alerts,\n  liveData\n}: Props): ReactElement<HTMLElement> => (\n  <>\n    {stopIds(stopTree).map(stopId => (\n      <LiveVehicleIconSet\n        key={stopId}\n        isStart={isStartNode(stopTree, stopId)}\n        stop={stopForId(stopTree, stopId)}\n        liveData={liveData}\n      />\n    ))}\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      role=\"img\"\n      aria-labelledby=\"diagram-title diagram-desc\"\n      className={`line-diagram-svg ${routeToModeName(route)}`}\n      width={`${diagramWidth(1)}px`}\n      height=\"100%\"\n      style={{ left: BASE_LINE_WIDTH / 2, overflow: \"visible\" }}\n    >\n      <title id=\"diagram-title\">Line diagram for {routeName(route)}</title>\n      <desc id=\"diagram-desc\">\n        {diagramDescription(longestPathLength(stopTree), route, directionId)}\n        {hasBranchLines(stopTree) && branchingDescription(stopTree)}\n      </desc>\n      <defs>{DiagonalHatchPattern()}</defs>\n\n      {/* If there are multiple branches, draw the lines and curves for those */\n      hasBranchLines(stopTree) && (\n        <Merges stopTree={stopTree} alerts={alerts} />\n      )}\n\n      {/* Draw lines between stops */\n      stopIds(stopTree).map(stopId =>\n        nextStopIds(stopTree, stopId).map(nextStopId => (\n          <Line\n            key={`${stopId}-${nextStopId}`}\n            stopTree={stopTree}\n            fromId={stopId}\n            toId={nextStopId}\n            alerts={alerts}\n          />\n        ))\n      )}\n\n      {/* Draw circles for each stop */\n      stopIds(stopTree).map(stopId => (\n        <Stop key={stopId} stopId={stopId} />\n      ))}\n    </svg>\n  </>\n);\n\nexport { Diagram, SimpleDiagram };\n","import React, { ReactElement } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport {\n  isBranchingNode,\n  isEndNode,\n  isMergeNode,\n  isStartNode,\n  longestPath\n} from \"../../../../helpers/stop-tree\";\nimport { hasAnActiveDiversion } from \"../../../../models/alert\";\nimport { Alert } from \"../../../../__v3api\";\nimport { StopId, StopTree } from \"../../__schedule\";\nimport { branchPosition } from \"../line-diagram-helpers\";\nimport {\n  BASE_LINE_WIDTH,\n  BRANCH_LINE_WIDTH,\n  BRANCH_SPACING,\n  CoordState,\n  StopCoord\n} from \"./graphic-helpers\";\n\ninterface Props {\n  stopTree: StopTree;\n  fromId: StopId;\n  toId: StopId;\n  alerts: Alert[];\n}\n\nconst isOnPrimaryBranch = (stopTree: StopTree, stopId: StopId): boolean =>\n  longestPath(stopTree).includes(stopId);\n\nconst isMiddleBranchStop = (stopTree: StopTree, stopId: StopId): boolean =>\n  !isOnPrimaryBranch(stopTree, stopId) &&\n  !isStartNode(stopTree, stopId) &&\n  !isEndNode(stopTree, stopId) &&\n  !isMergeNode(stopTree, stopId) &&\n  !isBranchingNode(stopTree, stopId);\n\nconst lineProps = (\n  stopTree: StopTree,\n  fromId: StopId,\n  toId: StopId,\n  fromCoords: StopCoord,\n  toCoords: StopCoord,\n  alerts: Alert[]\n): React.SVGProps<SVGLineElement> => {\n  const x =\n    BRANCH_SPACING * (branchPosition(stopTree, fromId) - 1) +\n    BASE_LINE_WIDTH +\n    1;\n  const [, y1] = fromCoords;\n  const [, y2] = toCoords;\n\n  const strokeWidth =\n    isMiddleBranchStop(stopTree, fromId) && isMiddleBranchStop(stopTree, toId)\n      ? BRANCH_LINE_WIDTH\n      : BASE_LINE_WIDTH;\n\n  const strokeProp =\n    hasAnActiveDiversion(fromId, alerts) && hasAnActiveDiversion(toId, alerts)\n      ? { stroke: \"url(#diagonalHatch)\" }\n      : {};\n\n  return {\n    key: `${fromId}-${toId}`,\n    className: \"line-diagram-svg__line\",\n    strokeWidth: `${strokeWidth}px`,\n    x1: `${x}px`,\n    x2: `${x}px`,\n    y1: `${y1}px`,\n    y2: `${y2}px`,\n    ...strokeProp\n  };\n};\n\nconst Line = ({\n  stopTree,\n  fromId,\n  toId,\n  alerts\n}: Props): ReactElement | null => {\n  const fromCoords: StopCoord | null = useSelector(\n    (state: CoordState) => state[fromId]\n  );\n  const toCoords: StopCoord | null = useSelector(\n    (state: CoordState) => state[toId]\n  );\n  if (!fromCoords || !toCoords) return null;\n\n  if (isMergeNode(stopTree, toId) && !isOnPrimaryBranch(stopTree, fromId))\n    return null;\n\n  return (\n    <line\n      {...lineProps(stopTree, fromId, toId, fromCoords, toCoords, alerts)}\n    />\n  );\n};\n\nconst SimpleLine = ({\n  fromId,\n  toId,\n  alerts\n}: Omit<Props, \"stopTree\">): ReactElement | null => {\n  const fromCoords: StopCoord | null = useSelector(\n    (state: CoordState) => state[fromId]\n  );\n  const toCoords: StopCoord | null = useSelector(\n    (state: CoordState) => state[toId]\n  );\n  if (!fromCoords || !toCoords) return null;\n\n  const x = BASE_LINE_WIDTH + 1;\n  const [, y1] = fromCoords;\n  const [, y2] = toCoords;\n  const strokeProp =\n    hasAnActiveDiversion(fromId, alerts) && hasAnActiveDiversion(toId, alerts)\n      ? { stroke: \"url(#diagonalHatch)\" }\n      : {};\n  return (\n    <line\n      className=\"line-diagram-svg__line\"\n      strokeWidth={`${BASE_LINE_WIDTH}px`}\n      x1={`${x}px`}\n      x2={`${x}px`}\n      y1={`${y1}px`}\n      y2={`${y2}px`}\n      {...strokeProp}\n    />\n  );\n};\n\nexport { Line, SimpleLine };\n","import React, { ReactElement } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport {\n  isBranchingNode,\n  isMergeNode,\n  longestPath,\n  nextStopIds,\n  previousStopIds\n} from \"../../../../helpers/stop-tree\";\nimport { hasAnActiveDiversion } from \"../../../../models/alert\";\nimport { Alert } from \"../../../../__v3api\";\nimport { StopId, StopTree } from \"../../__schedule\";\nimport {\n  BASE_LINE_WIDTH,\n  CoordState,\n  MERGE_RADIUS,\n  StopCoord\n} from \"./graphic-helpers\";\nimport { Line } from \"./Line\";\n\ninterface Props {\n  stopTree: StopTree;\n  alerts: Alert[];\n}\n\n// [fromStopId, toStopId]\ntype StopGap = [StopId, StopId];\n\nconst notOnPrimaryPath = (primaryPath: StopId[]) => (stopId: StopId): boolean =>\n  !primaryPath.includes(stopId);\n\nconst mergeStopGaps = (\n  stopTree: StopTree,\n  primaryPath: StopId[]\n): StopGap[] => {\n  const mergeStops: StopId[] = primaryPath.filter(id =>\n    isMergeNode(stopTree, id)\n  );\n  return mergeStops.flatMap(toStopId => {\n    const fromStopIds: StopId[] = previousStopIds(stopTree, toStopId).filter(\n      notOnPrimaryPath(primaryPath)\n    );\n    return fromStopIds.map(fromStopId => [fromStopId, toStopId] as StopGap);\n  });\n};\n\nconst branchingStopGaps = (\n  stopTree: StopTree,\n  primaryPath: StopId[]\n): StopGap[] => {\n  const branchingStops: StopId[] = primaryPath.filter(id =>\n    isBranchingNode(stopTree, id)\n  );\n  return branchingStops.flatMap(fromStopId => {\n    const toStopIds: StopId[] = nextStopIds(stopTree, fromStopId).filter(\n      notOnPrimaryPath(primaryPath)\n    );\n    return toStopIds.map(toStopId => [fromStopId, toStopId] as StopGap);\n  });\n};\n\nconst stopsToStart = (stopTree: StopTree, stopId: StopId): StopId[] => [\n  ...previousStopIds(stopTree, stopId).flatMap(previousId =>\n    stopsToStart(stopTree, previousId)\n  ),\n  stopId\n];\nconst mergeBends = (\n  stopTree: StopTree,\n  coords: CoordState,\n  mergeGaps: StopGap[],\n  alerts: Alert[]\n): (JSX.Element | null)[] =>\n  mergeGaps.map(([lastStopOnBranch, trunkStop]) => {\n    const trunkStopCoords: StopCoord | null = coords[trunkStop];\n    if (!trunkStopCoords) return null;\n\n    const branchStopIds = stopsToStart(stopTree, lastStopOnBranch);\n    const startingStopId: StopId = branchStopIds[0];\n\n    // Try the last stop on the branch first. If the branch is collapsed, the\n    // coordinates will be null as the last stop is hidden, so use terminus.\n    const branchStopCoords: StopCoord | null =\n      coords[lastStopOnBranch] || coords[startingStopId];\n    if (!branchStopCoords) return null;\n\n    const [trunkX, trunkY] = trunkStopCoords;\n    const [branchX, branchY] = branchStopCoords;\n    const dx = (Math.abs(trunkX - branchX) - MERGE_RADIUS) * -1;\n    const dy = (Math.abs(trunkY - branchY) - MERGE_RADIUS - 20) * 1;\n    const arc = `-${MERGE_RADIUS},${MERGE_RADIUS} 0 0 1 -${MERGE_RADIUS},${MERGE_RADIUS}`;\n    const strokeProp = hasAnActiveDiversion(lastStopOnBranch, alerts)\n      ? { stroke: \"url(#diagonalHatch)\" }\n      : {};\n    const pathProps: React.SVGProps<SVGPathElement> = {\n      key: `${startingStopId}-${trunkStop}-merge`,\n      strokeWidth: `${BASE_LINE_WIDTH}px`,\n      d: `M${branchX},${branchY} v${dy} a${arc} h${dx}`,\n      ...strokeProp\n    };\n    return <path key={pathProps.key} {...pathProps} />;\n  });\n\nconst stopsToTerminus = (stopTree: StopTree, stopId: StopId): StopId[] => [\n  stopId,\n  ...nextStopIds(stopTree, stopId).flatMap(nextId =>\n    stopsToTerminus(stopTree, nextId)\n  )\n];\nconst branchingBends = (\n  stopTree: StopTree,\n  coords: CoordState,\n  branchingGaps: StopGap[],\n  alerts: Alert[]\n): (JSX.Element | null)[] =>\n  branchingGaps.map(([trunkStop, firstStopOnBranch]) => {\n    const trunkStopCoords: StopCoord | null = coords[trunkStop];\n    if (!trunkStopCoords) return null;\n\n    const branchStopIds = stopsToTerminus(stopTree, firstStopOnBranch);\n    const terminusStopId: StopId = branchStopIds[branchStopIds.length - 1];\n\n    // Try the next stop on the branch first. If the branch is collapsed, the\n    // coordinates will be null as the next stop is hidden, so use terminus.\n    const branchStopCoords: StopCoord | null =\n      coords[firstStopOnBranch] || coords[terminusStopId];\n    if (!branchStopCoords) return null;\n\n    const [trunkX, trunkY] = trunkStopCoords;\n    const [branchX, branchY] = branchStopCoords;\n    const dx = (Math.abs(trunkX - branchX) - MERGE_RADIUS) * -1;\n    const dy = (Math.abs(trunkY - branchY) - MERGE_RADIUS - 60) * -1;\n    const arc = `-${MERGE_RADIUS},-${MERGE_RADIUS} 0 0 0 -${MERGE_RADIUS},-${MERGE_RADIUS}`;\n    const strokeProp = hasAnActiveDiversion(firstStopOnBranch, alerts)\n      ? { stroke: \"url(#diagonalHatch)\" }\n      : {};\n    const pathProps: React.SVGProps<SVGPathElement> = {\n      key: `${trunkStop}-${terminusStopId}-branch`,\n      strokeWidth: `${BASE_LINE_WIDTH}px`,\n      d: `M${branchX},${branchY} v${dy} a${arc} h${dx}`,\n      ...strokeProp\n    };\n\n    return <path key={pathProps.key} {...pathProps} />;\n  });\n\nconst Merges = ({\n  stopTree,\n  alerts\n}: Props): ReactElement<HTMLElement> | null => {\n  const coords: CoordState = useSelector((state: CoordState) => state);\n  if (!coords) return null;\n\n  const primaryPath = longestPath(stopTree);\n  const mergeGaps: StopGap[] = mergeStopGaps(stopTree, primaryPath);\n  const branchingGaps: StopGap[] = branchingStopGaps(stopTree, primaryPath);\n  const stopGaps: StopGap[] = mergeGaps.concat(branchingGaps);\n  const bends = mergeBends(stopTree, coords, mergeGaps, alerts).concat(\n    branchingBends(stopTree, coords, branchingGaps, alerts)\n  );\n\n  if (!stopGaps.length && !bends.length) return null;\n\n  return (\n    <g className=\"line-diagram-svg__merge\">\n      {stopGaps.map(\n        ([fromId, toId]) =>\n          fromId &&\n          toId && (\n            <Line\n              key={`${fromId}-${toId}-line`}\n              stopTree={stopTree}\n              fromId={fromId}\n              toId={toId}\n              alerts={alerts}\n            />\n          )\n      )}\n      {bends}\n    </g>\n  );\n};\n\nexport default Merges;\n","import React, { ReactElement } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { StopId } from \"../../__schedule\";\nimport { StopCoord, CoordState, CIRC_RADIUS } from \"./graphic-helpers\";\n\nconst Stop = ({\n  stopId,\n  shuttle\n}: {\n  stopId: StopId;\n  shuttle?: boolean;\n}): ReactElement<SVGCircleElement> | null => {\n  const coords: StopCoord | null = useSelector(\n    (state: CoordState) => state[stopId]\n  );\n  if (!coords) return null;\n  const [x, y] = coords;\n  return (\n    <circle\n      className=\"line-diagram-svg__stop\"\n      r={`${CIRC_RADIUS}px`}\n      cx={`${x}px`}\n      cy={`${y}px`}\n      data-shuttle={!!shuttle}\n    />\n  );\n};\n\nexport default Stop;\n","import React from \"react\";\nimport { AnyAction, Reducer } from \"redux\";\n\nexport const CIRC_RADIUS = 4;\nexport const CIRC_DIAMETER = CIRC_RADIUS * 2;\nexport const BASE_LINE_WIDTH = CIRC_DIAMETER + 2;\nexport const BRANCH_LINE_WIDTH = BASE_LINE_WIDTH + 6;\nexport const BRANCH_SPACING = 16;\nexport const MERGE_RADIUS = 6;\n\nexport type StopCoord = [number, number];\nexport interface CoordState {\n  [key: string]: StopCoord | null;\n}\n\nexport interface CoordAction extends AnyAction {\n  stop: string;\n  coords: StopCoord | null;\n}\n\nexport const coordReducer: Reducer<CoordState, CoordAction> = (\n  allCoordinates: CoordState | undefined,\n  action: CoordAction\n): CoordState => {\n  const { stop, coords } = action;\n  return {\n    ...allCoordinates,\n    [stop]: coords\n  };\n};\n\nexport const DiagonalHatchPattern = (\n  id?: string | undefined\n): React.SVGProps<SVGPatternElement> => (\n  <pattern\n    id={id ?? \"diagonalHatch\"}\n    width=\"10\"\n    height=\"10\"\n    patternTransform=\"rotate(45 0 0)\"\n    patternUnits=\"userSpaceOnUse\"\n  >\n    <line\n      className=\"line-diagram-svg__line\"\n      y2={CIRC_DIAMETER}\n      strokeWidth={`${BRANCH_LINE_WIDTH}px`}\n    />\n  </pattern>\n);\n","import { useCallback, useEffect, useRef } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { createStore, Store } from \"redux\";\nimport { stopIds } from \"../../../../helpers/stop-tree\";\nimport { RouteStop, StopId, StopTree } from \"../../__schedule\";\nimport { branchPosition } from \"../line-diagram-helpers\";\nimport {\n  BASE_LINE_WIDTH,\n  BRANCH_SPACING,\n  CoordAction,\n  coordReducer,\n  CoordState\n} from \"./graphic-helpers\";\n\nexport type RefMap = Map<string, HTMLElement | null>;\n\nconst isRouteStopList = (\n  stopOrList: StopTree | RouteStop[]\n): stopOrList is RouteStop[] => Array.isArray(stopOrList);\n\nexport const createStopTreeCoordStore = (\n  stopTreeOrList: StopTree | RouteStop[]\n): Store<CoordState, CoordAction> => {\n  const ids: StopId[] = isRouteStopList(stopTreeOrList)\n    ? stopTreeOrList.map(rs => rs.id)\n    : stopIds(stopTreeOrList);\n\n  const initialCoordState: CoordState = ids.reduce(\n    (acc, id) => ({ ...acc, [id]: null }),\n    {}\n  );\n  const store = createStore(\n    coordReducer,\n    initialCoordState,\n    /* eslint-disable no-underscore-dangle, @typescript-eslint/no-explicit-any */\n    (window as any).__REDUX_DEVTOOLS_EXTENSION__ &&\n      (window as any).__REDUX_DEVTOOLS_EXTENSION__()\n    /* eslint-enable no-underscore-dangle, @typescript-eslint/no-explicit-any */\n  );\n\n  return store;\n};\n\nconst xCoordForStop = (stopTree: StopTree, id: StopId): number =>\n  BRANCH_SPACING * (branchPosition(stopTree, id) - 1) + BASE_LINE_WIDTH + 1;\n\nexport default function useTreeStopPositions(\n  stopTreeOrList: StopTree | RouteStop[]\n): [RefMap, () => void] {\n  const stopRefsMap = useRef(new Map() as RefMap);\n  const dispatchStopCoords = useDispatch();\n\n  const updateAllStops = useCallback((): void => {\n    stopRefsMap.current.forEach((el, stopId) => {\n      const x = isRouteStopList(stopTreeOrList)\n        ? BASE_LINE_WIDTH + 1\n        : xCoordForStop(stopTreeOrList, stopId);\n      let coordinates = null;\n      if (el) {\n        const { offsetTop, offsetHeight } = el;\n        const y = offsetTop + offsetHeight / 2;\n        coordinates = [x, y];\n      }\n\n      dispatchStopCoords({\n        type: \"set\",\n        stop: stopId,\n        coords: coordinates\n      });\n    });\n  }, [dispatchStopCoords, stopRefsMap, stopTreeOrList]);\n\n  useEffect(() => {\n    updateAllStops();\n    window.addEventListener(\"resize\", updateAllStops);\n    return () => window.removeEventListener(\"resize\", updateAllStops);\n  }, [updateAllStops]);\n\n  return [stopRefsMap.current, updateAllStops];\n}\n","import {\n  isBranchingNode,\n  isEndNode,\n  isMergeNode,\n  isStartNode,\n  longestPath,\n  nextStopIds,\n  previousStopIds,\n  sliceForId,\n  stopForId\n} from \"../../../helpers/stop-tree\";\nimport { RouteStop, StopId, StopTree } from \"../__schedule\";\nimport { BRANCH_SPACING, BASE_LINE_WIDTH } from \"./graphics/graphic-helpers\";\n\nexport const diagramWidth = (maxBranches: number): number =>\n  BASE_LINE_WIDTH + maxBranches * BRANCH_SPACING + BASE_LINE_WIDTH;\n\nconst isOnPrimaryPath = (stopTree: StopTree, stopId: StopId): boolean =>\n  longestPath(stopTree).includes(stopId);\n\nconst stopBeforeMerging = (\n  stopTree: StopTree,\n  stopId: StopId\n): StopId | undefined => {\n  if (isEndNode(stopTree, stopId)) return undefined;\n  // Making an assumption that branches never branch again\n  const nextId = nextStopIds(stopTree, stopId)[0];\n  if (isMergeNode(stopTree, nextId)) return stopId;\n  return stopBeforeMerging(stopTree, nextId);\n};\n\nconst stopAfterBranchingOff = (\n  stopTree: StopTree,\n  stopId: StopId\n): StopId | undefined => {\n  if (isStartNode(stopTree, stopId)) return undefined;\n  // Making an assumption that branches never branch again\n  const previousId = previousStopIds(stopTree, stopId)[0];\n  if (isBranchingNode(stopTree, previousId)) return stopId;\n  return stopAfterBranchingOff(stopTree, previousId);\n};\n\nconst byBranch = (stopTree: StopTree) => (\n  stopA: StopId,\n  stopB: StopId\n): number => {\n  if (isOnPrimaryPath(stopTree, stopA)) return -1;\n  if (isOnPrimaryPath(stopTree, stopB)) return +1;\n\n  const routeA: RouteStop = stopForId(stopTree, stopA);\n  const routeB: RouteStop = stopForId(stopTree, stopB);\n\n  return (routeA.branch || \"\") < (routeB.branch || \"\") ? -1 : +1;\n};\n\nconst slicePosition = (stopTree: StopTree, stopId: StopId): number => {\n  const slice = sliceForId(stopTree, stopId)?.sort(byBranch(stopTree));\n  return (slice?.findIndex(id => id === stopId) || 0) + 1;\n};\n\nconst stopAdjacentToMerge = (\n  stopTree: StopTree,\n  stopId: StopId\n): StopId | undefined =>\n  stopBeforeMerging(stopTree, stopId) ||\n  stopAfterBranchingOff(stopTree, stopId);\n\nexport const branchPosition = (stopTree: StopTree, stopId: StopId): number => {\n  if (isOnPrimaryPath(stopTree, stopId)) return 1;\n\n  const stop = stopAdjacentToMerge(stopTree, stopId);\n  return stop ? slicePosition(stopTree, stop) : 1;\n};\n","import React, { ReactElement } from \"react\";\nimport { handleReactEnterKeyPress } from \"../../../helpers/keyboard-events-react\";\nimport renderSvg from \"../../../helpers/render-svg\";\nimport checkIcon from \"../../../../static/images/icon-checkmark.svg\";\nimport { SimpleStop, SelectedOrigin } from \"../__schedule\";\n\ninterface OriginListItemProps {\n  changeOrigin: Function;\n  stop: SimpleStop;\n  selectedOrigin: SelectedOrigin;\n  lastStop: SimpleStop;\n}\n\nconst OriginListItem = ({\n  changeOrigin,\n  stop,\n  selectedOrigin,\n  lastStop\n}: OriginListItemProps): ReactElement<HTMLElement> => {\n  const isDisabled = stop.is_closed || stop.id === lastStop.id;\n  const handleClick = (): void => {\n    if (isDisabled) return;\n    changeOrigin(stop.id);\n  };\n\n  return (\n    <div\n      tabIndex={0}\n      role=\"button\"\n      className={`schedule-finder__origin-list-item ${\n        stop.id === selectedOrigin ? \"active\" : \"\"\n      } ${isDisabled ? \"disabled\" : \"\"}`}\n      onClick={() => {\n        handleClick();\n      }}\n      onKeyUp={e =>\n        handleReactEnterKeyPress(e, () => {\n          handleClick();\n        })\n      }\n    >\n      <div className=\"schedule-finder__origin-list-leftpad\">\n        {stop.id === selectedOrigin\n          ? renderSvg(\"schedule-finder__check\", checkIcon)\n          : \"\"}{\" \"}\n      </div>\n      {stop.name}{\" \"}\n      {stop.zone && (\n        <span className=\"schedule-finder__zone\">Zone {stop.zone}</span>\n      )}\n    </div>\n  );\n};\n\nexport default OriginListItem;\n","import React, { ReactElement, useState } from \"react\";\nimport { SimpleStop, SelectedOrigin } from \"../__schedule\";\nimport OriginListItem from \"./OriginListItem\";\nimport SearchBox from \"../../../components/SearchBox\";\n\nconst stopListSearchFilter = (\n  stops: SimpleStop[],\n  originSearch: string\n): SimpleStop[] => {\n  if (originSearch.trim() === \"\") {\n    return stops;\n  }\n\n  const streetSuffixRegExp = /( s| st| | st\\.| str| stre| stree| street)$/gi;\n  const cleanSearch = originSearch.trim().replace(streetSuffixRegExp, \"\");\n\n  const regExp = new RegExp(cleanSearch, \"gi\");\n  return stops.filter(stop => (stop.name.match(regExp) || []).length > 0);\n};\n\ninterface Props {\n  selectedOrigin: SelectedOrigin;\n  stops: SimpleStop[];\n  handleChangeOrigin: Function;\n}\n\nconst OriginModalContent = ({\n  selectedOrigin,\n  stops,\n  handleChangeOrigin\n}: Props): ReactElement<HTMLElement> => {\n  const [originSearch, setOriginSearch] = useState(\"\");\n\n  return (\n    <>\n      <br />\n      <h3 className=\"schedule-finder__origin-text\">Choose an origin stop</h3>\n      <SearchBox\n        id=\"origin-filter\"\n        labelText=\"Choose an origin stop\"\n        className=\"schedule-finder__origin-search-container\"\n        placeholder=\"Filter stops and stations\"\n        onChange={setOriginSearch}\n      />\n      <p className=\"schedule-finder__origin-text\">\n        Select from the list below.\n      </p>\n      <div className=\"schedule-finder__origin-list notranslate\">\n        {stopListSearchFilter(stops, originSearch).map((stop: SimpleStop) => (\n          <OriginListItem\n            key={stop.id}\n            stop={stop}\n            changeOrigin={handleChangeOrigin}\n            selectedOrigin={selectedOrigin}\n            lastStop={stops[stops.length - 1]}\n          />\n        ))}\n      </div>\n    </>\n  );\n};\n\nexport default OriginModalContent;\n","import React, { FormEvent, ReactElement, useState } from \"react\";\nimport { DirectionId, DirectionInfo, Route } from \"../../../__v3api\";\nimport { SimpleStopMap, SelectedOrigin } from \"../__schedule\";\nimport icon from \"../../../../static/images/icon-schedule-finder.svg\";\nimport renderSvg from \"../../../helpers/render-svg\";\nimport SelectContainer from \"./SelectContainer\";\nimport { routeToModeName } from \"../../../helpers/css\";\n\nconst validDirections = (directionInfo: DirectionInfo): DirectionId[] =>\n  ([0, 1] as DirectionId[]).filter(dir => directionInfo[dir] !== null);\n\ninterface Props {\n  onDirectionChange: (direction: DirectionId) => void;\n  onOriginChange: (origin: SelectedOrigin) => void;\n  onOriginSelectClick: () => void;\n  onSubmit?: () => void;\n  route: Route;\n  selectedDirection: DirectionId;\n  selectedOrigin: SelectedOrigin;\n  stopsByDirection: SimpleStopMap;\n}\n\nconst ScheduleFinderForm = ({\n  onDirectionChange,\n  onOriginChange,\n  onSubmit = () => {},\n  onOriginSelectClick,\n  route,\n  selectedDirection,\n  selectedOrigin,\n  stopsByDirection\n}: Props): ReactElement => {\n  const {\n    direction_names: directionNames,\n    direction_destinations: directionDestinations\n  } = route;\n\n  const [originError, setOriginError] = useState(false);\n\n  const handleOriginClick = (): void => {\n    setOriginError(false);\n    onOriginSelectClick();\n  };\n\n  const handleSubmit = (event: FormEvent): void => {\n    event.preventDefault();\n\n    if (!selectedOrigin) {\n      setOriginError(true);\n    } else {\n      setOriginError(false);\n      onSubmit();\n    }\n  };\n\n  const directionNameForId = (\n    direction: DirectionId\n  ): string => `${directionNames[direction]!.toUpperCase()} \n  ${directionDestinations[direction]!}`;\n\n  const isFerryRoute = routeToModeName(route) === \"ferry\";\n\n  return (\n    <>\n      <form onSubmit={handleSubmit}>\n        <h2 className=\"schedule-finder__heading\">\n          {renderSvg(\"c-svg__icon\", icon, true)} Schedule Finder\n        </h2>\n        <div className=\"schedule-finder__prompt\">\n          {isFerryRoute\n            ? `Get schedule information for your next ${route.name} trip.`\n            : \"Choose a stop to get schedule information and real-time departure predictions.\"}\n        </div>\n\n        {originError && (\n          <div className=\"error-container\">\n            <span role=\"alert\">Please provide an origin</span>\n          </div>\n        )}\n\n        <div className=\"schedule-finder__inputs\">\n          <label className=\"schedule-finder__label\">\n            Choose a direction\n            <SelectContainer>\n              <select\n                data-testid=\"schedule-finder-direction-select\"\n                className=\"c-select-custom notranslate\"\n                value={selectedDirection}\n                onChange={e =>\n                  onDirectionChange(parseInt(e.target.value, 10) as DirectionId)\n                }\n              >\n                {validDirections(directionNames).map(direction => (\n                  <option\n                    key={direction}\n                    value={direction}\n                    aria-label={directionNameForId(direction)}\n                  >\n                    {directionNameForId(direction)}\n                  </option>\n                ))}\n              </select>\n            </SelectContainer>\n          </label>\n\n          <label className=\"schedule-finder__label\">\n            Choose an origin stop\n            <SelectContainer\n              error={originError}\n              handleClick={handleOriginClick}\n            >\n              <select\n                className=\"c-select-custom c-select-custom--noclick notranslate\"\n                value={selectedOrigin || \"\"}\n                onChange={e => onOriginChange(e.target.value || null)}\n              >\n                <option value=\"\">Select</option>\n                {stopsByDirection[selectedDirection].map(({ id, name }) => (\n                  <option key={id} value={id} aria-label={name}>\n                    {name}\n                  </option>\n                ))}\n              </select>\n            </SelectContainer>\n          </label>\n        </div>\n\n        <div className=\"schedule-finder__submit text-right\">\n          <input\n            className=\"btn btn-primary\"\n            type=\"submit\"\n            value=\"Get schedules\"\n          />\n        </div>\n      </form>\n    </>\n  );\n};\n\nexport default ScheduleFinderForm;\n","import React, { ReactElement, useEffect, useState } from \"react\";\nimport { DirectionId, Route } from \"../../../__v3api\";\nimport {\n  SimpleStopMap,\n  RoutePatternsByDirection,\n  ServiceInSelector,\n  SelectedOrigin,\n  ScheduleNote\n} from \"../__schedule\";\nimport Modal from \"../../../components/Modal\";\nimport OriginModalContent from \"./OriginModalContent\";\nimport ScheduleModalContent from \"./ScheduleModalContent\";\n\nexport type Mode = \"origin\" | \"schedule\";\n\ninterface Props {\n  closeModal: () => void;\n  directionChanged?: (direction: DirectionId) => void;\n  initialMode: Mode;\n  initialDirection: DirectionId;\n  initialOrigin: SelectedOrigin;\n  originChanged?: (origin: SelectedOrigin) => void;\n  route: Route;\n  routePatternsByDirection: RoutePatternsByDirection;\n  services: ServiceInSelector[];\n  stops: SimpleStopMap;\n  today: string;\n  updateURL: (origin: SelectedOrigin, direction?: DirectionId) => void;\n  handleOriginSelectClick: () => void;\n  scheduleNote: ScheduleNote | null;\n}\n\nconst ScheduleFinderModal = ({\n  closeModal,\n  directionChanged,\n  initialMode,\n  initialDirection,\n  initialOrigin,\n  originChanged,\n  route,\n  routePatternsByDirection,\n  services,\n  stops,\n  today,\n  updateURL,\n  handleOriginSelectClick,\n  scheduleNote\n}: Props): ReactElement => {\n  const [originState, setOriginState] = useState(initialOrigin);\n\n  const getStopIdIfInDirection = (newDirection: DirectionId): string | null => {\n    const directionDestination = route.direction_destinations[newDirection];\n    const stopsForDirection = stops[newDirection];\n    const stopsWithoutTerminal = stopsForDirection.filter(\n      s => s.name !== directionDestination\n    );\n    // This needs to return null if the selected origin is the end of the line in the direction\n    return stopsWithoutTerminal.find(s => s.id === originState)?.id || null;\n  };\n\n  const handleChangeDirection = (newDirection: DirectionId): void => {\n    if (directionChanged) directionChanged(newDirection);\n\n    // return the stop if it is present in the new direction\n    // stops the user from having to reselect an origin on stop change\n    const stop = getStopIdIfInDirection(newDirection);\n\n    if (originChanged) originChanged(stop);\n    updateURL(initialOrigin, newDirection);\n  };\n\n  const handleChangeOrigin = (newOrigin: SelectedOrigin): void => {\n    setOriginState(newOrigin);\n    if (originChanged) originChanged(newOrigin);\n    updateURL(newOrigin, initialDirection);\n  };\n\n  const originModalContent = (): ReactElement => {\n    const origin = initialOrigin;\n    const direction = initialDirection;\n    return (\n      <OriginModalContent\n        handleChangeOrigin={handleChangeOrigin}\n        selectedOrigin={origin}\n        stops={stops[direction] || []}\n      />\n    );\n  };\n\n  const scheduleModalContent = (scheduleOrigin: string): ReactElement => (\n    <ScheduleModalContent\n      handleChangeDirection={handleChangeDirection}\n      handleChangeOrigin={handleChangeOrigin}\n      handleOriginSelectClick={handleOriginSelectClick}\n      route={route}\n      routePatternsByDirection={routePatternsByDirection}\n      selectedDirection={initialDirection}\n      selectedOrigin={scheduleOrigin}\n      services={services}\n      stops={stops}\n      today={today}\n      scheduleNote={scheduleNote}\n    />\n  );\n\n  const direction = initialDirection;\n  const origin = initialOrigin;\n  const originStop = stops[direction].find(stop => stop.id === origin);\n\n  useEffect(() => {\n    setOriginState(initialOrigin);\n  }, [initialOrigin]);\n\n  return (\n    <Modal\n      focusElementId={\n        initialMode === \"origin\" ? \"origin-filter\" : \"modal-close\"\n      }\n      ariaLabel={{\n        label:\n          initialMode === \"origin\"\n            ? \"Choose Origin Stop\"\n            : `Schedules on the ${route.name} ${\n                route.direction_names[direction]\n              } to ${route.direction_destinations[direction]}${\n                originStop ? ` from ${originStop.name}` : \"\"\n              }`\n      }}\n      className={\n        initialMode === \"origin\" ? \"schedule-finder__origin-modal\" : \"\"\n      }\n      closeModal={closeModal}\n    >\n      {initialMode === \"origin\" && originModalContent()}\n      {initialMode === \"schedule\" &&\n        origin !== null &&\n        scheduleModalContent(origin)}\n    </Modal>\n  );\n};\n\nexport default ScheduleFinderModal;\n","import React, { ReactElement } from \"react\";\nimport { DirectionId, Route } from \"../../../__v3api\";\nimport { routeToModeName } from \"../../../helpers/css\";\nimport {\n  SimpleStopMap,\n  RoutePatternsByDirection,\n  ServiceInSelector,\n  SelectedOrigin,\n  UserInput,\n  ScheduleNote\n} from \"../__schedule\";\nimport { EnhancedJourney, Journey, TripInfo } from \"../__trips\";\nimport ScheduleFinderForm from \"./ScheduleFinderForm\";\nimport DailySchedule from \"./daily-schedule/DailySchedule\";\nimport UpcomingDepartures from \"./upcoming-departures/UpcomingDepartures\";\nimport { useProvider } from \"../../../helpers/use-provider\";\nimport {\n  fetchJsonOrThrow,\n  fetchJson,\n  isFetchFailed\n} from \"../../../helpers/fetch-json\";\nimport { useAwaitInterval } from \"../../../helpers/use-await-interval\";\nimport { isSubwayRoute } from \"../../../models/route\";\nimport DailyScheduleSubway from \"./daily-schedule/DailyScheduleSubway\";\nimport formattedDate, { stringToDateObject } from \"../../../helpers/date\";\nimport { isInCurrentService } from \"../../../helpers/service\";\n\n// exported for testing\nexport const fetchData = async (\n  routeId: string,\n  selectedOrigin: string,\n  selectedDirection: DirectionId,\n  date: string\n): Promise<EnhancedJourney[]> => {\n  const departures = await fetchJsonOrThrow<Journey[]>(\n    `/schedules/finder_api/departures?id=${routeId}&stop=${selectedOrigin}&direction=${selectedDirection}`\n  );\n\n  const enhanced = await Promise.all(\n    departures.map(async departure => {\n      const res = await fetchJson<TripInfo>(\n        `/schedules/finder_api/trip?id=${departure.trip.id}&route=${routeId}&date=${date}&direction=${selectedDirection}&stop=${selectedOrigin}`\n      );\n\n      if (isFetchFailed(res)) {\n        // 404s here are a known failure mode, see finder_api.ex#get_trip_info\n        if (res.status !== 404) {\n          throw new Error(\n            `Failed to fetch trip information: ${res.status} ${res.statusText}`\n          );\n        }\n\n        return { ...departure, tripInfo: null };\n      }\n\n      return { ...departure, tripInfo: res };\n    })\n  );\n\n  return enhanced;\n};\n\ninterface Props {\n  handleChangeDirection: (direction: DirectionId) => void;\n  handleChangeOrigin: (origin: SelectedOrigin) => void;\n  handleOriginSelectClick: () => void;\n  route: Route;\n  selectedDirection: DirectionId;\n  selectedOrigin: string;\n  services: ServiceInSelector[];\n  stops: SimpleStopMap;\n  routePatternsByDirection: RoutePatternsByDirection;\n  today: string;\n  scheduleNote: ScheduleNote | null;\n}\n\nconst ScheduleModalContent = ({\n  handleChangeDirection,\n  handleChangeOrigin,\n  handleOriginSelectClick,\n  route,\n  selectedDirection,\n  selectedOrigin,\n  services,\n  stops,\n  routePatternsByDirection,\n  today,\n  scheduleNote\n}: Props): ReactElement<HTMLElement> | null => {\n  const { id: routeId } = route;\n\n  const input: UserInput = {\n    route: routeId,\n    origin: selectedOrigin,\n    date: today,\n    direction: selectedDirection\n  };\n\n  const [state, updateData] = useProvider(fetchData, [\n    routeId,\n    selectedOrigin,\n    selectedDirection,\n    input.date\n  ]);\n  useAwaitInterval(updateData, 10000);\n\n  const serviceToday = services.some(service =>\n    isInCurrentService(service, stringToDateObject(today))\n  );\n\n  const renderUpcomingDepartures = (): ReactElement<HTMLElement> =>\n    serviceToday ? (\n      <UpcomingDepartures state={state} />\n    ) : (\n      <div className=\"callout text-center u-bold\">\n        There are no scheduled trips for {formattedDate(today)}.\n      </div>\n    );\n\n  return (\n    <>\n      <div className=\"schedule-finder schedule-finder--modal\">\n        <ScheduleFinderForm\n          onDirectionChange={handleChangeDirection}\n          onOriginChange={handleChangeOrigin}\n          onOriginSelectClick={handleOriginSelectClick}\n          route={route}\n          selectedDirection={selectedDirection}\n          selectedOrigin={selectedOrigin}\n          stopsByDirection={stops}\n        />\n      </div>\n\n      {!isSubwayRoute(route) ? null : (\n        <DailyScheduleSubway\n          stops={stops}\n          services={services}\n          stopId={selectedOrigin}\n          directionId={selectedDirection}\n          routeId={routeId}\n          route={route}\n          scheduleNote={scheduleNote}\n          today={today}\n        />\n      )}\n\n      {routeToModeName(route) !== \"ferry\" && renderUpcomingDepartures()}\n\n      {isSubwayRoute(route) ? null : (\n        <DailySchedule\n          selectedOrigin={selectedOrigin}\n          services={services}\n          routeId={routeId}\n          directionId={selectedDirection}\n          routePatterns={routePatternsByDirection[selectedDirection]}\n          today={today}\n        />\n      )}\n    </>\n  );\n};\n\nexport default ScheduleModalContent;\n","import React, { ReactElement, ReactNode } from \"react\";\nimport { handleReactEnterKeyPress } from \"../../../helpers/keyboard-events-react\";\nimport renderSvg from \"../../../helpers/render-svg\";\nimport arrowIcon from \"../../../../static/images/icon-down-arrow.svg\";\n\ninterface SelectContainerProps {\n  children: ReactNode;\n  error?: boolean;\n  handleClick?: Function;\n}\n\nconst SelectContainer = ({\n  children,\n  error = false,\n  handleClick\n}: SelectContainerProps): ReactElement<HTMLElement> => (\n  <div\n    tabIndex={0}\n    className={`c-select-custom__container ${error ? \"error\" : \"\"}`}\n    role=\"button\"\n    onClick={e => {\n      if (handleClick) {\n        handleClick(e);\n      }\n    }}\n    onKeyUp={e =>\n      handleReactEnterKeyPress(e, () => {\n        if (handleClick) {\n          handleClick(e);\n        }\n      })\n    }\n  >\n    {children}\n    {renderSvg(\"c-svg__icon c-select-custom__arrow\", arrowIcon, true)}\n  </div>\n);\n\nexport default SelectContainer;\n","import React, { ReactElement, ReactNode } from \"react\";\nimport { caret } from \"../../../../helpers/icon\";\nimport { handleReactEnterKeyPress } from \"../../../../helpers/keyboard-events-react\";\n\ninterface Props {\n  id: string;\n  colSpan: number;\n  contentComponent: () => ReactElement<HTMLElement>;\n  expanded: boolean;\n  toggle: () => void;\n  children: ReactNode;\n}\n\nconst AccordionRow = ({\n  id,\n  colSpan,\n  contentComponent,\n  expanded,\n  toggle,\n  children\n}: Props): ReactElement<HTMLElement> => (\n  <>\n    <tr\n      className={\n        expanded ? \"schedule-table__row--expanded\" : \"schedule-table__row\"\n      }\n      aria-controls={id}\n      aria-expanded={expanded}\n      role=\"button\"\n      onClick={toggle}\n      onKeyPress={e => handleReactEnterKeyPress(e, toggle)}\n      tabIndex={0}\n    >\n      {contentComponent()}\n      <td className=\"schedule-table__cell schedule-table__cell--tiny\">\n        {expanded\n          ? caret(\"c-expandable-block__header-caret--white\", expanded)\n          : caret(\"c-expandable-block__header-caret\", expanded)}\n      </td>\n    </tr>\n    {expanded && (\n      <tr id={`${id}-expanded`}>\n        <td\n          colSpan={colSpan}\n          className=\"schedule-table__cell schedule-table__cell--expanded\"\n        >\n          {children}\n        </td>\n      </tr>\n    )}\n  </>\n);\n\nexport default AccordionRow;\n","import React, { ReactElement, useEffect, useState } from \"react\";\nimport { Dictionary } from \"lodash\";\nimport { DirectionId, Service } from \"../../../../__v3api\";\nimport Loading from \"../../../../components/Loading\";\nimport { stringToDateObject } from \"../../../../helpers/date\";\nimport {\n  hasMultipleWeekdaySchedules,\n  groupServicesByDateRating,\n  isCurrentValidService,\n  serviceStartDateComparator,\n  optGroupComparator,\n  serviceComparator\n} from \"../../../../helpers/service\";\nimport useFetch, {\n  isLoading,\n  isNotStarted\n} from \"../../../../helpers/use-fetch\";\nimport { EnhancedRoutePattern, ServiceInSelector } from \"../../__schedule\";\nimport { Journey } from \"../../__trips\";\nimport SelectContainer from \"../SelectContainer\";\nimport ScheduleTable from \"./ScheduleTable\";\nimport ServiceOptGroup from \"./ServiceOptGroup\";\n\n// until we come up with a good integration test for async with loading\n// some lines in this file have been ignored from codecov\n\ninterface Props {\n  selectedOrigin: string;\n  services: ServiceInSelector[];\n  routeId: string;\n  directionId: DirectionId;\n  routePatterns: EnhancedRoutePattern[];\n  today: string;\n}\n\n// Exported solely for testing\nexport const fetchJourneys = (\n  routeId: string,\n  selectedOrigin: string,\n  selectedService: Service,\n  selectedDirection: DirectionId,\n  isCurrent: boolean\n): (() => Promise<Response>) => () =>\n  window.fetch &&\n  window.fetch(\n    `/schedules/finder_api/journeys?id=${\n      routeId === \"627\" ? \"627,76,62\" : routeId\n    }&date=${\n      selectedService.end_date\n    }&direction=${selectedDirection}&stop=${selectedOrigin}&is_current=${isCurrent}`\n  );\n\n// Exported solely for testing\nexport const parseResults = (json: JSON): Journey[] =>\n  (json as unknown) as Journey[];\n\nconst SchedulesSelect = ({\n  sortedServices,\n  todayServiceId,\n  defaultSelectedServiceId,\n  todayDate,\n  onSelectService\n}: {\n  sortedServices: ServiceInSelector[];\n  defaultSelectedServiceId: string;\n  todayServiceId: string;\n  todayDate: Date;\n  onSelectService: (service: ServiceInSelector | undefined) => void;\n}): ReactElement<HTMLElement> => {\n  const servicesByOptGroup: Dictionary<Service[]> = groupServicesByDateRating(\n    sortedServices,\n    todayDate\n  );\n\n  return (\n    <div className=\"schedule-finder__service-selector\">\n      <label>\n        <span className=\"sr-only\">\n          Choose a schedule type from the available options\n        </span>\n        <SelectContainer>\n          <select\n            className=\"c-select-custom text-center u-bold\"\n            defaultValue={defaultSelectedServiceId}\n            onChange={e =>\n              onSelectService(sortedServices.find(s => s.id === e.target.value))\n            }\n            aria-controls=\"daily-schedule\"\n          >\n            {Object.keys(servicesByOptGroup)\n              .sort(optGroupComparator)\n              .map((group: string) => {\n                const groupedServices = servicesByOptGroup[group];\n                /* istanbul ignore next */\n                if (groupedServices.length <= 0) return null;\n\n                return (\n                  <ServiceOptGroup\n                    key={group}\n                    label={group}\n                    services={groupedServices.sort(serviceComparator)}\n                    multipleWeekdays={hasMultipleWeekdaySchedules(\n                      groupedServices\n                    )}\n                    todayServiceId={todayServiceId}\n                  />\n                );\n              })}\n          </select>\n        </SelectContainer>\n      </label>\n    </div>\n  );\n};\n\nexport const DailySchedule = ({\n  selectedOrigin,\n  services,\n  routeId,\n  directionId,\n  routePatterns,\n  today\n}: Props): ReactElement<HTMLElement> | null => {\n  const [fetchState, fetch] = useFetch<Journey[]>();\n\n  const todayDate = stringToDateObject(today);\n\n  // By default, show the current day's service\n  const sortedServices = services.sort(serviceStartDateComparator);\n  const currentServices = sortedServices.filter(service =>\n    isCurrentValidService(service, todayDate)\n  );\n  const todayServiceId =\n    currentServices.length > 0 ? currentServices[0].id : \"\";\n  const [defaultSelectedService] = currentServices.length\n    ? currentServices\n    : sortedServices;\n\n  const [selectedService, setSelectedService] = useState(\n    defaultSelectedService\n  );\n\n  const getJourneysForSelectedService = (service: Service): void => {\n    fetch({\n      fetcher: fetchJourneys(\n        routeId,\n        selectedOrigin,\n        service,\n        directionId,\n        false\n      ),\n      parser: parseResults\n    });\n  };\n\n  useEffect(\n    () => {\n      /* istanbul ignore next */\n      if (selectedService && isNotStarted(fetchState)) {\n        getJourneysForSelectedService(selectedService);\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  if (services.length <= 0) return null;\n\n  return (\n    <>\n      <h3>Daily Schedule</h3>\n\n      <SchedulesSelect\n        sortedServices={sortedServices}\n        todayServiceId={todayServiceId}\n        defaultSelectedServiceId={defaultSelectedService.id}\n        todayDate={todayDate}\n        onSelectService={chosenService => {\n          if (chosenService) {\n            setSelectedService(chosenService);\n            getJourneysForSelectedService(chosenService);\n          }\n        }}\n      />\n\n      <div id=\"daily-schedule\">\n        {isLoading(fetchState) ? (\n          <Loading />\n        ) : (\n          <span className=\"sr-only\" aria-live=\"polite\">\n            Showing times for {selectedService.description}\n          </span>\n        )}\n\n        {/* istanbul ignore next */ !isLoading(fetchState) &&\n          /* istanbul ignore next */ fetchState.data && (\n            /* istanbul ignore next */ <ScheduleTable\n              journeys={fetchState.data}\n              routePatterns={routePatterns}\n              input={{\n                route: routeId,\n                origin: selectedOrigin,\n                direction: directionId,\n                date: selectedService!.end_date\n              }}\n            />\n          )}\n      </div>\n    </>\n  );\n};\n\nexport default DailySchedule;\n","import {\n  compareAsc,\n  format,\n  isSameDay,\n  isSaturday,\n  isSunday,\n  isWeekend,\n  parse\n} from \"date-fns\";\nimport { concat, find, toLower } from \"lodash\";\nimport React, { ReactElement, useEffect, useState } from \"react\";\nimport ExpandableBlock from \"../../../../components/ExpandableBlock\";\nimport {\n  formatToBostonTime,\n  stringToDateObject\n} from \"../../../../helpers/date\";\nimport useHoursOfOperation from \"../../../../hooks/useHoursOfOperation\";\nimport RouteIcon from \"../../../../projects/components/RouteIcon\";\nimport { DirectionId, Route, StopHours } from \"../../../../__v3api\";\nimport {\n  ScheduleNote,\n  ServiceInSelector,\n  SimpleStopMap\n} from \"../../__schedule\";\nimport SelectContainer from \"../SelectContainer\";\n\nconst findStopName = (\n  stopId: string,\n  directionId: DirectionId,\n  stops: SimpleStopMap\n): string => {\n  const stopsInDirection = stops[directionId];\n  const stop = find(stopsInDirection, stopData => stopData.id === stopId);\n  return stop ? stop.name : \"\";\n};\n\nconst getHoursByStop = (\n  stopId: string,\n  hours: StopHours[][] | StopHours[] | undefined\n): StopHours | undefined => {\n  if (!hours) {\n    return undefined;\n  }\n  const bothDirectionHours = concat(hours[0], hours[1]);\n  const stopHours = find(bothDirectionHours, h => h.parent_stop_id === stopId);\n\n  return stopHours;\n};\n\ntype SpecialServiceMap = {\n  date: Date;\n  dateString: string;\n  name: string;\n};\n\nconst getSpecialServiceMaps = (\n  services: ServiceInSelector[]\n): SpecialServiceMap[] => {\n  const specialServices = services.filter(\n    service => service.typicality !== \"typical_service\"\n  );\n\n  const dateNameMaps = specialServices.flatMap(service =>\n    service.added_dates.flatMap(addedDate => {\n      return {\n        date: parse(addedDate, \"yyyy-MM-dd\", new Date()),\n        dateString: addedDate,\n        name: service.added_dates_notes[addedDate] || service.name\n      };\n    })\n  );\n\n  return dateNameMaps.sort((date1, date2) =>\n    compareAsc(date1.date, date2.date)\n  );\n};\n\nconst getSpecialServiceByDate = (\n  date: Date,\n  specialServices: SpecialServiceMap[]\n): SpecialServiceMap | undefined =>\n  specialServices.find(service => isSameDay(date, service.date));\n\nconst DailyScheduleSubway = ({\n  directionId,\n  stops,\n  stopId,\n  routeId,\n  route,\n  services,\n  scheduleNote,\n  today\n}: {\n  directionId: DirectionId;\n  stops: SimpleStopMap;\n  stopId: string;\n  routeId: string;\n  route: Route;\n  services: ServiceInSelector[];\n  scheduleNote: ScheduleNote | null;\n  today: string;\n}): ReactElement | null => {\n  const [selectedSchedule, setSelectedSchedule] = useState<string>(\"\");\n  const [firstTrainHours, setFirstTrainHours] = useState<string | undefined>();\n  const [lastTrainHours, setLastTrainHours] = useState<string | undefined>();\n  const [stopLatLong, setStopLatLong] = useState<string>(\"\");\n  const [scheduleNoteText, setScheduleNoteText] = useState<string>(\"\");\n\n  const todayDate = stringToDateObject(today);\n  const originStopName = findStopName(stopId, directionId, stops);\n  const hoursOfOperation = useHoursOfOperation(routeId);\n\n  const { direction_destinations: directionDestinations } = route;\n\n  const destinationName = directionDestinations[directionId];\n\n  const specialServices = getSpecialServiceMaps(services);\n\n  const todaysSpecialService = getSpecialServiceByDate(\n    todayDate,\n    specialServices\n  );\n  const isTodaySpecialService = todaysSpecialService !== undefined;\n  // We only want the regular schedule days if it is a typical service day\n  const isTodaySunday = isSunday(todayDate) && !isTodaySpecialService;\n  const isTodaySaturday = isSaturday(todayDate) && !isTodaySpecialService;\n  const isTodayAWeekday = !isWeekend(todayDate) && !isTodaySpecialService;\n\n  const hideScheduleFrequency = route.id === \"Orange\";\n\n  useEffect(() => {\n    if (isTodayAWeekday) {\n      setSelectedSchedule(\"weekday\");\n    } else if (isTodaySaturday) {\n      setSelectedSchedule(\"saturday\");\n    } else if (isTodaySunday) {\n      setSelectedSchedule(\"sunday\");\n    } else if (todaysSpecialService) {\n      setSelectedSchedule(todaysSpecialService.dateString);\n    }\n  }, [isTodayAWeekday, isTodaySaturday, isTodaySunday, todaysSpecialService]);\n\n  useEffect(() => {\n    if (selectedSchedule === \"weekday\") {\n      setScheduleNoteText(scheduleNote ? scheduleNote.peak_service : \"\");\n    } else if (selectedSchedule === \"saturday\") {\n      setScheduleNoteText(scheduleNote ? scheduleNote.saturday_service : \"\");\n    } else if (selectedSchedule === \"sunday\") {\n      setScheduleNoteText(scheduleNote ? scheduleNote.sunday_service : \"\");\n    }\n  }, [selectedSchedule, scheduleNote]);\n\n  useEffect(() => {\n    let hours;\n    if (selectedSchedule === \"weekday\") {\n      hours = getHoursByStop(stopId, hoursOfOperation?.week);\n    } else if (selectedSchedule === \"saturday\") {\n      hours = getHoursByStop(stopId, hoursOfOperation?.saturday);\n    } else if (selectedSchedule === \"sunday\") {\n      hours = getHoursByStop(stopId, hoursOfOperation?.sunday);\n    } else {\n      // We need to select a special service\n      const specialServiceHours = hoursOfOperation?.special_service;\n\n      if (specialServiceHours) {\n        hours = getHoursByStop(\n          stopId,\n          specialServiceHours[\n            selectedSchedule as keyof typeof specialServiceHours\n          ]\n        );\n      }\n    }\n    setStopLatLong(\n      hours?.latitude ? `${hours.latitude},${hours.longitude}` : \"\"\n    );\n    setFirstTrainHours(hours?.first_departure);\n    setLastTrainHours(hours?.last_departure);\n  }, [selectedSchedule, hoursOfOperation, stopId]);\n\n  return (\n    <div>\n      <div className=\"u-highlight-gray m-n24\">\n        <div className=\"m-24\">\n          <div className=\"d-flex pt-10\">\n            <RouteIcon\n              tag={toLower(routeId)}\n              extraClasses=\"schedule__icon-header--size me-8\"\n            />\n            <div className=\"fs-18 u-bold\">{originStopName}</div>\n          </div>\n          <div className=\"fs-12 u-bold pb-10\">To {destinationName}</div>\n        </div>\n      </div>\n      <h3 className=\"pt-18\">Daily Schedule</h3>\n      <div className=\"pt-8\">\n        <SelectContainer>\n          <select\n            value={selectedSchedule}\n            className=\"c-select-custom notranslate\"\n            onChange={e => {\n              setSelectedSchedule(e.target.value);\n            }}\n          >\n            <option value=\"weekday\" key=\"weekday\">\n              Weekday {isTodayAWeekday ? \"(Today)\" : \"\"}\n            </option>\n            <option value=\"saturday\" key=\"saturday\">\n              Saturday {isTodaySaturday ? \"(Today)\" : \"\"}\n            </option>\n            <option value=\"sunday\" key=\"sunday\">\n              Sunday {isTodaySunday ? \"(Today)\" : \"\"}\n            </option>\n            {specialServices.length > 0 && (\n              <optgroup label=\"Special Service\">\n                {specialServices.map(service => {\n                  const dateString = format(service.date, \"MMM dd\");\n                  const isToday = isSameDay(todayDate, service.date);\n                  return (\n                    <option value={service.dateString} key={service.dateString}>\n                      {service.name}, {dateString} {isToday ? \"(Today)\" : \"\"}\n                    </option>\n                  );\n                })}\n              </optgroup>\n            )}\n          </select>\n        </SelectContainer>\n      </div>\n      <div\n        className=\"d-flex justify-content-space-between pt-8\"\n        style={{ gap: \"2%\" }}\n        aria-live=\"polite\"\n      >\n        <div className=\"w-100 u-highlight ps-16 pt-16 pb-16\">\n          <div className=\"fs-14\">First Train</div>\n          <div className=\"fs-18 u-bold\">\n            {firstTrainHours && formatToBostonTime(firstTrainHours)}\n          </div>\n        </div>\n        <div className=\"w-100 u-highlight ps-16 pt-16 pb-16\">\n          <div className=\"fs-14\">Last Train</div>\n          <div className=\"fs-18 u-bold\">\n            {lastTrainHours && formatToBostonTime(lastTrainHours)}\n          </div>\n        </div>\n      </div>\n      {!hideScheduleFrequency && scheduleNoteText !== \"\" && (\n        <ExpandableBlock\n          header={{\n            text: \"Train Frequency\",\n            iconSvgText: null,\n            classOverride: \"mt-8\"\n          }}\n          initiallyExpanded={false}\n          id=\"train-frequency\"\n        >\n          <div className=\"m-schedule-page__sidebar-hours\">\n            <div className=\"font-weight-bold fs-14\">Regular schedule</div>\n            <div className=\"fs-16 pt-8\">\n              Trains depart every {scheduleNoteText}\n            </div>\n          </div>\n        </ExpandableBlock>\n      )}\n      <div className=\"d-flex pt-8 pb-18 fs-18\">\n        <a\n          href={`/trip-planner/from/${stopLatLong}`}\n          className=\"btn btn-secondary btn-block mt-8\"\n        >\n          Plan Your Trip\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default DailyScheduleSubway;\n","import React, { ReactElement } from \"react\";\nimport { isACommuterRailRoute } from \"../../../../models/route\";\nimport { EnhancedRoutePattern, UserInput } from \"../../__schedule\";\nimport { Journey } from \"../../__trips\";\nimport TableRow from \"./TableRow\";\n\ninterface Props {\n  journeys: Journey[];\n  routePatterns: EnhancedRoutePattern[];\n  input: UserInput;\n}\n\ninterface RoutePatternsById {\n  [key: string]: EnhancedRoutePattern;\n}\n\nconst isSchoolTrip = (\n  routePatternsById: RoutePatternsById,\n  routePatternId: string\n): boolean =>\n  (\n    (routePatternsById[routePatternId] &&\n      routePatternsById[routePatternId].time_desc) ||\n    \"\"\n  ).match(/school/gi) !== null;\n\nconst ScheduleTable = ({\n  journeys,\n  routePatterns,\n  input\n}: Props): ReactElement<HTMLElement> => {\n  if (journeys.length === 0) {\n    return (\n      <div className=\"callout u-bold text-center\">\n        There is no scheduled service for this time period.\n      </div>\n    );\n  }\n\n  const routePatternsById = routePatterns.reduce(\n    (accumulator, routePattern) => ({\n      ...accumulator,\n      [routePattern.id]: routePattern\n    }),\n    {}\n  ) as RoutePatternsById;\n  const anySchoolTrips = Object.values(\n    journeys\n  ).some(({ trip: { route_pattern_id: routePatternId } }) =>\n    isSchoolTrip(routePatternsById, routePatternId)\n  );\n\n  const firstTrip = journeys[0];\n  const lastTrip = journeys.length > 1 ? journeys[journeys.length - 1] : null;\n\n  return (\n    <>\n      <div className=\"schedule-finder__first-last-trip\">\n        <div className=\"u-small-caps u-bold\">First Trip</div>\n        {firstTrip.departure.time}\n        {lastTrip && (\n          <>\n            <div className=\"u-small-caps u-bold\">Last Trip</div>\n            {lastTrip.departure.time}\n          </>\n        )}\n      </div>\n\n      {anySchoolTrips && (\n        <p className=\"text-center\">\n          <strong>S</strong> - Does NOT run on school vacation\n        </p>\n      )}\n\n      <table className=\"schedule-table\">\n        <thead className=\"schedule-table__header\">\n          <tr>\n            {anySchoolTrips && <td className=\"schedule-table__cell\" />}\n            <th scope=\"col\" className=\"schedule-table__cell\">\n              Departs\n            </th>\n            {isACommuterRailRoute(firstTrip.route) && (\n              <th scope=\"col\" className=\"schedule-table__cell\">\n                Train\n              </th>\n            )}\n            <th scope=\"col\" colSpan={2} className=\"schedule-table__cell\">\n              <span className=\"pull-left\">Destination</span>\n              Trip Details\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          {journeys.map((journey: Journey) => (\n            <TableRow\n              key={journey.trip.id}\n              input={input}\n              journey={journey}\n              isSchoolTrip={isSchoolTrip(\n                routePatternsById,\n                journey.trip.route_pattern_id\n              )}\n              anySchoolTrips={anySchoolTrips}\n            />\n          ))}\n        </tbody>\n      </table>\n    </>\n  );\n};\n\nexport default ScheduleTable;\n","import React, { ReactElement } from \"react\";\nimport { format } from \"date-fns\";\nimport { Service } from \"../../../../__v3api\";\nimport { shortDate, stringToDateObject } from \"../../../../helpers/date\";\nimport {\n  ServiceGroupNames,\n  serviceDays,\n  dedupeServices,\n  isInCurrentService\n} from \"../../../../helpers/service\";\n\ninterface Props {\n  label: string;\n  services: Service[];\n  multipleWeekdays: boolean;\n  todayServiceId: string;\n  nowDate?: Date;\n}\n\nconst ServiceOptGroup = ({\n  label,\n  services,\n  multipleWeekdays,\n  todayServiceId,\n  nowDate = new Date()\n}: Props): ReactElement<HTMLElement> | null =>\n  services.length === 0 ? null : (\n    <optgroup label={label}>\n      {dedupeServices(services).map(service => {\n        const isMultipleWeekday =\n          multipleWeekdays &&\n          service.type === \"weekday\" &&\n          service.typicality !== \"holiday_service\";\n\n        const startDate = stringToDateObject(service.start_date);\n        const endDate = stringToDateObject(service.end_date);\n        let optionText = \"\";\n\n        if (\n          service.typicality === \"unplanned_disruption\" ||\n          service.typicality === \"planned_disruption\"\n        ) {\n          optionText = service.description;\n        } else if (\n          service.typicality === \"holiday_service\" &&\n          service.added_dates_notes\n        ) {\n          optionText = Object.entries(service.added_dates_notes)\n            .map(entry => {\n              const [addedDate, addedNote] = entry;\n              if (addedNote === \"\") {\n                return `${shortDate(stringToDateObject(addedDate))}`;\n              }\n              return `${addedNote}, ${shortDate(\n                stringToDateObject(addedDate)\n              )}`;\n            })\n            .join(\", \");\n        } else if (label === ServiceGroupNames.OTHER) {\n          optionText = isMultipleWeekday\n            ? `${serviceDays(service)} schedule`\n            : service.description;\n          optionText += `, ${shortDate(startDate)} to ${shortDate(endDate)}`;\n        } else {\n          optionText = isMultipleWeekday\n            ? `${serviceDays(service)} schedule`\n            : service.description;\n          if (service.rating_description) {\n            optionText += `, ${service.rating_description}`;\n          }\n        }\n\n        if (service.id === todayServiceId) {\n          // if it's the only service this rating, this service might not\n          // technically be now - adjust text for that\n          if (isInCurrentService(service, nowDate)) {\n            optionText += \" (now)\";\n          } else {\n            optionText += ` (Starting ${format(startDate, \"MMMM d, y\")})`;\n          }\n        }\n\n        return (\n          <option\n            key={service.id}\n            value={service.id}\n            // the <optgroup> is not reliably conveyed to assistive tech, so add extra label here\n            aria-label={`${label} ${optionText}`}\n          >\n            {optionText}\n          </option>\n        );\n      })}\n    </optgroup>\n  );\n\nexport default ServiceOptGroup;\n","import React, { useEffect, useState, ReactElement } from \"react\";\nimport { modeIcon } from \"../../../../helpers/icon\";\nimport { breakTextAtSlash } from \"../../../../helpers/text\";\nimport useFetch, { isNotStarted } from \"../../../../helpers/use-fetch\";\nimport { isACommuterRailRoute } from \"../../../../models/route\";\nimport { UserInput } from \"../../__schedule\";\nimport { Journey, TripInfo } from \"../../__trips\";\nimport AccordionRow from \"./AccordionRow\";\nimport TripDetails from \"./TripDetails\";\n\ninterface TableRowProps {\n  input: UserInput;\n  journey: Journey;\n  isSchoolTrip: boolean;\n  anySchoolTrips: boolean;\n}\n\ninterface AccordionProps {\n  input: UserInput;\n  journey: Journey;\n  anySchoolTrips: boolean;\n  contentComponent: () => ReactElement<HTMLElement>;\n}\n\n// Exported solely for testing\nexport const fetchTripInfo = (\n  tripId: string,\n  { route, direction, date, origin }: UserInput\n): (() => Promise<Response>) => () =>\n  window.fetch &&\n  window.fetch(\n    `/schedules/finder_api/trip?id=${tripId}&route=${route}&date=${date}&direction=${direction}&stop=${origin}`\n  );\n\n// Exported solely for testing\nexport const parseResults = (json: JSON): TripInfo =>\n  (json as unknown) as TripInfo;\n\nconst RouteIcon = ({\n  route: { type, name, id }\n}: Journey): ReactElement<HTMLElement> | undefined => {\n  if (type !== 3) {\n    return modeIcon(id);\n  }\n\n  const backgroundClass = name.startsWith(\"SL\")\n    ? \"u-bg--silver-line\"\n    : \"u-bg--bus\";\n  return (\n    <span className={`c-icon__bus-pill--small ${backgroundClass}`}>{name}</span>\n  );\n};\n\nconst BusTableRow = ({\n  journey,\n  anySchoolTrips,\n  isSchoolTrip\n}: {\n  journey: Journey;\n  anySchoolTrips: boolean;\n  isSchoolTrip: boolean;\n}): ReactElement<HTMLElement> => (\n  <>\n    {anySchoolTrips && (\n      <td className=\"schedule-table__cell schedule-table__cell--tiny\">\n        {isSchoolTrip && <strong>S</strong>}\n      </td>\n    )}\n    <td className=\"schedule-table__cell schedule-table__cell--time u-nowrap u-tabular-nums\">\n      {journey.departure.time}\n    </td>\n    <td className=\"schedule-table__cell schedule-table__cell--headsign\">\n      <span className=\"schedule-table__route-pill m-route-pills\">\n        {RouteIcon(journey)}\n      </span>\n      {breakTextAtSlash(journey.trip.headsign)}\n    </td>\n  </>\n);\n\nconst CrTableRow = ({\n  journey\n}: {\n  journey: Journey;\n}): ReactElement<HTMLElement> => (\n  <>\n    <td className=\"schedule-table__cell schedule-table__cell--time u-nowrap u-tabular-nums\">\n      {journey.departure.time}\n    </td>\n    {journey.trip.name && (\n      <td className=\"schedule-table__cell u-tabular-nums\">\n        {journey.trip.name}\n      </td>\n    )}\n    <td className=\"schedule-table__cell schedule-table__cell--headsign\">\n      {modeIcon(journey.route.id)} {breakTextAtSlash(journey.trip.headsign)}\n    </td>\n  </>\n);\n\nconst Accordion = ({\n  input,\n  journey,\n  anySchoolTrips,\n  contentComponent\n}: AccordionProps): ReactElement<HTMLElement> => {\n  const [expanded, setExpanded] = useState(false);\n  const [fetchState, fetch] = useFetch<TripInfo>();\n\n  const toggle = (): void => setExpanded(!expanded);\n  const tripId = journey.trip.id;\n\n  useEffect(() => {\n    if (expanded && isNotStarted(fetchState)) {\n      fetch({\n        fetcher: fetchTripInfo(tripId, input),\n        parser: parseResults\n      });\n    }\n  }, [tripId, input, expanded, fetchState, fetch]);\n\n  const isCommuterRail = isACommuterRailRoute(journey.route);\n\n  return (\n    <AccordionRow\n      id={`trip-${tripId}`}\n      colSpan={isCommuterRail || anySchoolTrips ? 4 : 3}\n      contentComponent={contentComponent}\n      expanded={expanded}\n      toggle={toggle}\n    >\n      <TripDetails fetchState={fetchState} showFare={isCommuterRail} />\n    </AccordionRow>\n  );\n};\n\nconst TableRow = ({\n  input,\n  journey,\n  anySchoolTrips,\n  isSchoolTrip\n}: TableRowProps): ReactElement<HTMLElement> | null => {\n  const contentComponent =\n    journey.route.type !== 2 &&\n    journey.route.description !== \"rail_replacement_bus\"\n      ? () => (\n          <BusTableRow\n            journey={journey}\n            anySchoolTrips={anySchoolTrips}\n            isSchoolTrip={isSchoolTrip}\n          />\n        )\n      : () => <CrTableRow journey={journey} />;\n\n  return (\n    <Accordion\n      input={input}\n      journey={journey}\n      anySchoolTrips={anySchoolTrips}\n      contentComponent={contentComponent}\n    />\n  );\n};\n\nexport default TableRow;\n","import React, { ReactElement } from \"react\";\nimport Loading from \"../../../../components/Loading\";\nimport { FetchState, hasData, isLoading } from \"../../../../helpers/use-fetch\";\nimport { TripInfo } from \"../../__trips\";\nimport CrowdingPill from \"../../line-diagram/CrowdingPill\";\nimport TripStop from \"./TripStop\";\n\ninterface Props {\n  fetchState: FetchState<TripInfo>;\n  showFare: boolean;\n}\n\nconst TripSummary = ({\n  tripInfo,\n  showFare\n}: {\n  tripInfo: TripInfo;\n  showFare: boolean;\n}): ReactElement<HTMLElement> => (\n  <tr className=\"trip-details-table__summary\">\n    <td colSpan={3} className=\"schedule-table__cell\">\n      <div>\n        <span className=\"trip-details-table__title u-small-caps u-bold\">\n          Trip length\n        </span>\n        {tripInfo.times.length} stops, {tripInfo.duration} minutes total\n      </div>\n      {showFare && (\n        <div>\n          <span className=\"trip-details-table__title u-small-caps u-bold\">\n            Fare\n          </span>\n\n          {tripInfo.fare && tripInfo.fare.price}\n          <a\n            className=\"trip-details-table__link\"\n            href={tripInfo.fare.fare_link}\n          >\n            View fares\n          </a>\n        </div>\n      )}\n    </td>\n  </tr>\n);\n\nconst allTimesHaveSchedule = (tripInfo: TripInfo): boolean =>\n  tripInfo.times.every(time => !!time.schedule);\n\nconst ErrorLoadingTrip = (): ReactElement<HTMLElement> => (\n  <p>\n    <em>Error loading trip details. Please try again later.</em>\n  </p>\n);\n\nconst TripDetailsTable = ({\n  tripInfo,\n  showFare\n}: {\n  tripInfo: TripInfo;\n  showFare: boolean;\n}): ReactElement<HTMLElement> => {\n  const crowding = tripInfo.vehicle ? tripInfo.vehicle.crowding : null;\n\n  return (\n    <table className=\"trip-details-table\">\n      <thead>\n        {crowding && (\n          <tr>\n            <th>\n              <CrowdingPill crowding={crowding} />\n            </th>\n          </tr>\n        )}\n        <TripSummary tripInfo={tripInfo} showFare={showFare} />\n        <tr>\n          <th scope=\"col\" className=\"schedule-table__cell\">\n            Stops\n          </th>\n          {showFare && (\n            <th\n              scope=\"col\"\n              className=\"schedule-table__cell schedule-table__cell--right-adjusted\"\n            >\n              Fare\n            </th>\n          )}\n          <th\n            scope=\"col\"\n            className=\"schedule-table__cell schedule-table__cell--right-adjusted\"\n          >\n            Arrival\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        {allTimesHaveSchedule(tripInfo) ? (\n          tripInfo.times.map((departure, index: number) => (\n            <TripStop\n              departure={departure}\n              index={index}\n              showFare={showFare}\n              routeType={tripInfo.route_type}\n              key={departure.schedule.stop.id}\n            />\n          ))\n        ) : (\n          <tr>\n            <td>\n              <ErrorLoadingTrip />\n            </td>\n          </tr>\n        )}\n      </tbody>\n    </table>\n  );\n};\n\nconst TripDetails = ({\n  fetchState,\n  showFare\n}: Props): ReactElement<HTMLElement> => {\n  if (hasData(fetchState) && !!fetchState.data) {\n    return <TripDetailsTable tripInfo={fetchState.data} showFare={showFare} />;\n  }\n\n  if (isLoading(fetchState)) {\n    return <Loading />;\n  }\n\n  return <ErrorLoadingTrip />;\n};\n\nexport default TripDetails;\n","import React, { ReactElement } from \"react\";\nimport { RouteType } from \"../../../../__v3api\";\nimport { alertIcon } from \"../../../../helpers/icon\";\nimport { breakTextAtSlash } from \"../../../../helpers/text\";\nimport { isSkippedOrCancelled } from \"../../../../models/prediction\";\nimport { isACommuterRailRoute } from \"../../../../models/route\";\nimport { TripDeparture } from \"../../__trips\";\n\ninterface Props {\n  departure: TripDeparture;\n  index: number;\n  showFare: boolean;\n  routeType: RouteType;\n}\n\nconst formattedDepartureTimes = (\n  departure: TripDeparture,\n  routeType: RouteType\n): ReactElement<HTMLElement> => {\n  const { schedule, prediction, delay } = departure;\n\n  if (isACommuterRailRoute(routeType)) {\n    if (delay && delay >= 300 && prediction && prediction.time) {\n      return (\n        <>\n          <span className=\"schedule-table__times--delayed schedule-table__times--delayed-future_stop\">\n            {schedule.time}\n          </span>\n          <br className=\"hidden-sm-up\" />\n          {prediction.time}\n        </>\n      );\n    }\n\n    return <>{schedule.time}</>;\n  }\n\n  return <>{prediction && prediction.time ? prediction.time : schedule.time}</>;\n};\n\nconst TripStop = ({\n  departure,\n  index,\n  showFare,\n  routeType\n}: Props): ReactElement<HTMLElement> | null => {\n  const { schedule } = departure;\n\n  /* istanbul ignore next */\n  if (!schedule || !schedule.stop) return null;\n\n  return (\n    <tr key={`${schedule.stop.id}`}>\n      <th className=\"schedule-table__cell\" scope=\"row\">\n        <a\n          href={`/stops/${schedule.stop.id}`}\n          className={\n            isSkippedOrCancelled(departure.prediction) ? \"strikethrough\" : \"\"\n          }\n        >\n          {isSkippedOrCancelled(departure.prediction) && (\n            <>\n              {alertIcon(\"c-svg__icon-alerts-triangle\")}\n              <span className=\"sr-only\">This trip skips this stop at</span>\n            </>\n          )}\n          {breakTextAtSlash(schedule.stop.name)}\n        </a>\n      </th>\n      {showFare && (\n        <td className=\"schedule-table__cell schedule-table__cell--right-adjusted u-tabular-nums\">\n          {index === 0 ? \"\" : schedule.fare.price}\n        </td>\n      )}\n      <td className=\"schedule-table__cell schedule-table__cell--right-adjusted u-tabular-nums\">\n        {formattedDepartureTimes(departure, routeType)}\n      </td>\n    </tr>\n  );\n};\n\nexport default TripStop;\n","import React, { ReactElement } from \"react\";\nimport {\n  TripDeparture,\n  TripDepartureWithPrediction,\n  TripInfo\n} from \"../../__trips\";\nimport CrowdingPill from \"../../line-diagram/CrowdingPill\";\nimport TripStop from \"./TripStop\";\n\ninterface Props {\n  tripInfo: TripInfo | null;\n  showFare: boolean;\n}\n\nconst hasAPrediction = (\n  departure: TripDeparture\n): departure is TripDepartureWithPrediction =>\n  departure.prediction !== null &&\n  departure.prediction.schedule_relationship !== \"skipped\";\n\nconst departuresWithPredictions = (\n  departures: TripDeparture[]\n): TripDepartureWithPrediction[] => departures.filter(hasAPrediction);\n\nconst TripSummary = ({\n  tripInfo\n}: {\n  tripInfo: TripInfo;\n}): ReactElement<HTMLElement> => (\n  <tr className=\"trip-details-table__summary\">\n    <td colSpan={3} className=\"schedule-table__cell\">\n      <div>\n        <span className=\"trip-details-table__title u-small-caps u-bold\">\n          Trip length\n        </span>\n        {departuresWithPredictions(tripInfo.times).length} stops,{\" \"}\n        {tripInfo.duration} minutes total\n      </div>\n      <div>\n        <span className=\"trip-details-table__title u-small-caps u-bold\">\n          Fare\n        </span>\n\n        {tripInfo.fare && tripInfo.fare.price}\n        <a className=\"trip-details-table__link\" href={tripInfo.fare.fare_link}>\n          View fares\n        </a>\n      </div>\n    </td>\n  </tr>\n);\n\nconst TripDetails = ({\n  tripInfo,\n  showFare\n}: Props): ReactElement<HTMLElement> | null => {\n  if (!tripInfo) return null;\n\n  const crowding = tripInfo.vehicle?.crowding || null;\n\n  return (\n    <table className=\"trip-details-table\">\n      <thead>\n        {crowding && (\n          <tr>\n            <th>\n              <CrowdingPill crowding={crowding} />\n            </th>\n          </tr>\n        )}\n        <TripSummary tripInfo={tripInfo} />\n        <tr>\n          <th scope=\"col\" className=\"schedule-table__cell\">\n            Stops\n          </th>\n          {showFare && (\n            <th\n              scope=\"col\"\n              className=\"schedule-table__cell schedule-table__cell--right-adjusted\"\n            >\n              Fare\n            </th>\n          )}\n          <th\n            scope=\"col\"\n            className=\"schedule-table__cell schedule-table__cell--right-adjusted\"\n          >\n            Arrival\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        {departuresWithPredictions(tripInfo.times).map(\n          (departure, index: number) => (\n            <TripStop\n              departure={departure}\n              index={index}\n              showFare={showFare}\n              routeType={tripInfo.route_type}\n              key={\n                (departure.prediction.stop && departure.prediction.stop.id) ||\n                departure.schedule.stop.id\n              }\n            />\n          )\n        )}\n      </tbody>\n    </table>\n  );\n};\n\nexport default TripDetails;\n","import React, { ReactElement } from \"react\";\nimport { RouteType } from \"../../../../__v3api\";\nimport { alertIcon } from \"../../../../helpers/icon\";\nimport { breakTextAtSlash } from \"../../../../helpers/text\";\nimport { isSkippedOrCancelled } from \"../../../../models/prediction\";\nimport { isACommuterRailRoute } from \"../../../../models/route\";\nimport { TripDepartureWithPrediction } from \"../../__trips\";\nimport GlxOpen from \"../../../../components/GlxOpen\";\n\ninterface Props {\n  departure: TripDepartureWithPrediction;\n  index: number;\n  showFare: boolean;\n  routeType: RouteType;\n}\n\nconst formattedDepartureTimes = (\n  departure: TripDepartureWithPrediction,\n  routeType: RouteType\n): ReactElement<HTMLElement> => {\n  const { schedule, prediction, delay } = departure;\n  if (isACommuterRailRoute(routeType)) {\n    if (delay && delay >= 300 && prediction && prediction.time) {\n      return (\n        <>\n          <span className=\"schedule-table__times--delayed schedule-table__times--delayed-future_stop\">\n            {schedule.time}\n          </span>\n          <br className=\"hidden-sm-up\" />\n          {prediction.time}\n        </>\n      );\n    }\n\n    return <>{schedule.time}</>;\n  }\n\n  return <>{prediction && prediction.time ? prediction.time : schedule.time}</>;\n};\n\nconst TripStop = ({\n  departure,\n  index,\n  showFare,\n  routeType\n}: Props): ReactElement<HTMLElement> | null => {\n  const { prediction, schedule } = departure;\n\n  /* istanbul ignore next */\n  if (!prediction.stop) return null;\n\n  return (\n    <tr key={`${prediction.stop.id}`}>\n      <th className=\"schedule-table__cell\" scope=\"row\">\n        <a\n          href={`/stops/${prediction.stop.id}`}\n          className={isSkippedOrCancelled(prediction) ? \"strikethrough\" : \"\"}\n        >\n          {isSkippedOrCancelled(prediction) && (\n            <>\n              {alertIcon(\"c-svg__icon-alerts-triangle\")}\n              <span className=\"sr-only\">This trip skips this stop at</span>\n            </>\n          )}\n          {breakTextAtSlash(prediction.stop.name)}\n        </a>\n        <GlxOpen pageType=\"schedule-finder\" stopId={prediction.stop.id} />\n      </th>\n      {showFare && (\n        <td className=\"schedule-table__cell schedule-table__cell--right-adjusted u-tabular-nums\">\n          {index === 0 ? \"\" : schedule.fare.price}\n        </td>\n      )}\n      <td className=\"schedule-table__cell schedule-table__cell--right-adjusted u-tabular-nums\">\n        {formattedDepartureTimes(departure, routeType)}\n      </td>\n    </tr>\n  );\n};\n\nexport default TripStop;\n","import React, { ReactElement, useState } from \"react\";\nimport { get, isEmpty } from \"lodash\";\nimport { Route } from \"../../../../__v3api\";\nimport Loading from \"../../../../components/Loading\";\nimport { caret, modeIcon } from \"../../../../helpers/icon\";\nimport liveClockSvg from \"../../../../../static/images/icon-live-clock.svg\";\nimport {\n  timeForCommuterRail,\n  trackForCommuterRail,\n  statusForCommuterRail\n} from \"../../../../helpers/prediction-helpers\";\nimport { breakTextAtSlash } from \"../../../../helpers/text\";\nimport { isABusRoute, isACommuterRailRoute } from \"../../../../models/route\";\nimport { modeBgClass } from \"../../../../stop/components/RoutePillList\";\nimport { EnhancedJourney, Journey } from \"../../__trips\";\nimport LiveCrowdingIcon from \"../../line-diagram/LiveCrowdingIcon\";\nimport {\n  isInitialLoading,\n  UseProviderState,\n  UseProviderStateWithoutInitialLoading\n} from \"../../../../helpers/use-provider\";\nimport TripDetails from \"./TripDetails\";\nimport { handleReactEnterKeyPress } from \"../../../../helpers/keyboard-events-react\";\n\ntype State = UseProviderState<EnhancedJourney[]>;\ntype StateWithoutInitialLoading = UseProviderStateWithoutInitialLoading<\n  EnhancedJourney[]\n>;\n\ninterface Props {\n  state: State;\n}\n\ninterface AccordionProps {\n  journey: EnhancedJourney;\n  contentComponent: () => ReactElement<HTMLElement>;\n}\n\n// Predictions are nil unless they have a time. This helps\n// prevent far-future trips from appearing in Upcoming Departures.\nconst hasPredictions = (journeys: Journey[]): boolean =>\n  journeys.filter(journey => journey.realtime.prediction !== null).length > 0;\n\nconst RoutePillSmall = ({\n  route\n}: {\n  route: Route;\n}): ReactElement<HTMLElement> | null => (\n  <span className=\"schedule-table__route-pill m-route-pills\">\n    <span className={`c-icon__bus-pill--small ${modeBgClass(route)}`}>\n      {route.name}\n    </span>\n  </span>\n);\n\nexport const crowdingInformation = (\n  journey: EnhancedJourney,\n  tripId: string\n): ReactElement<HTMLElement> | null => {\n  const { tripInfo } = journey;\n  if (tripInfo?.vehicle) {\n    const showCrowding =\n      tripInfo.vehicle.crowding && tripInfo.vehicle.trip_id === tripId;\n\n    return (\n      <LiveCrowdingIcon\n        crowding={showCrowding ? tripInfo.vehicle.crowding : null}\n      />\n    );\n  }\n\n  return null;\n};\n\nexport const BusTableRow = ({\n  journey\n}: {\n  journey: EnhancedJourney;\n}): ReactElement<HTMLElement> | null => {\n  const { trip, route, realtime } = journey;\n\n  return (\n    <>\n      <td className=\"schedule-table__cell schedule-table__cell--headsign\">\n        {isABusRoute(route) ? (\n          <RoutePillSmall route={route} />\n        ) : (\n          <span className=\"schedule-table__row-route-pill m-route-pills\">\n            {modeIcon(route.id)}\n          </span>\n        )}\n        {trip.headsign}\n      </td>\n      <td className=\"schedule-table__cell schedule-table__cell--time u-nowrap u-bold text-right\">\n        {realtime.prediction!.time}\n        {crowdingInformation(journey, trip.id)}\n      </td>\n    </>\n  );\n};\n\nexport const CrTableRow = ({\n  journey\n}: {\n  journey: Journey;\n}): ReactElement<HTMLElement> | null => {\n  const { trip, route, realtime } = journey;\n\n  if (realtime.prediction === null) return null;\n\n  const status = statusForCommuterRail(realtime);\n  const track = trackForCommuterRail(realtime);\n  const trainNumber = trip.name ? `Train ${trip.name}` : null;\n\n  const statusWithTrain = [trainNumber, status].filter(x => x).join(\" · \");\n\n  return (\n    <>\n      <td className=\"schedule-table__cell schedule-table__cell--headsign\">\n        {modeIcon(route.id)} {breakTextAtSlash(trip.headsign)}\n      </td>\n      <td className=\"schedule-table__cell text-right\">\n        {timeForCommuterRail(\n          realtime,\n          \"u-tabular-nums u-nowrap schedule-table__times\"\n        )}\n        <div className=\"u-nowrap\">\n          {statusWithTrain}\n          {track && (\n            <span className=\"schedule-table__track\">{` · ${track}`}</span>\n          )}\n        </div>\n      </td>\n    </>\n  );\n};\n\nconst AccordionRow = ({\n  journey,\n  contentComponent,\n  expanded,\n  toggle\n}: {\n  journey: EnhancedJourney;\n  contentComponent: () => ReactElement<HTMLElement>;\n  expanded: boolean;\n  toggle: () => void;\n}): ReactElement<HTMLElement> => {\n  const tripId = journey.trip.id;\n  const isCommuterRail = isACommuterRailRoute(journey.route);\n\n  return (\n    <>\n      <tr\n        className={\n          expanded ? \"schedule-table__row--expanded\" : \"schedule-table__row\"\n        }\n        aria-controls={`trip-${tripId}`}\n        aria-expanded={expanded}\n        role=\"button\"\n        onClick={toggle}\n        onKeyPress={e => handleReactEnterKeyPress(e, toggle)}\n        tabIndex={0}\n      >\n        {contentComponent()}\n        <td className=\"schedule-table__cell schedule-table__cell--tiny\">\n          {expanded\n            ? caret(\"c-expandable-block__header-caret--white\", expanded)\n            : caret(\"c-expandable-block__header-caret\", expanded)}\n        </td>\n      </tr>\n      {expanded && (\n        <tr id={`trip-${tripId}-expanded`}>\n          <td\n            colSpan={isCommuterRail ? 4 : 3}\n            className=\"schedule-table__cell schedule-table__cell--expanded\"\n          >\n            <TripDetails\n              showFare={isCommuterRail}\n              tripInfo={journey.tripInfo}\n            />\n          </td>\n        </tr>\n      )}\n    </>\n  );\n};\n\nconst Accordion = ({\n  journey,\n  contentComponent\n}: AccordionProps): ReactElement<HTMLElement> => {\n  const [expanded, setExpanded] = useState(false);\n  const toggle = (): void => setExpanded(!expanded);\n\n  return (\n    <AccordionRow\n      journey={journey}\n      contentComponent={contentComponent}\n      expanded={expanded}\n      toggle={toggle}\n    />\n  );\n};\n\nconst TableRow = ({\n  journey\n}: {\n  journey: EnhancedJourney;\n}): ReactElement<HTMLElement> | null => {\n  const { realtime } = journey;\n\n  if (realtime.prediction === null) return null;\n\n  const contentComponent =\n    journey.route.type !== 2\n      ? () => <BusTableRow journey={journey} />\n      : () => <CrTableRow journey={journey} />;\n\n  return <Accordion journey={journey} contentComponent={contentComponent} />;\n};\n\nconst UpcomingDeparturesHeader = (\n  <div className=\"schedule-table__upcoming-departures-header\">\n    <h3>Upcoming Departures</h3>\n    <span className=\"schedule-table__live-clock\" aria-hidden>\n      <span className=\"icon-realtime animate notranslate\">\n        <span\n          className=\"c-svg__icon-live-clock\"\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: liveClockSvg }}\n        />\n        <span className=\"icon-realtime-text\">live</span>\n      </span>\n    </span>\n  </div>\n);\n\nexport const upcomingDeparturesTable = (\n  state: StateWithoutInitialLoading\n): ReactElement<HTMLElement> => {\n  const headerLabel = \"Trip Details\";\n  const { data: journeys } = state;\n\n  // We use this condition for cosmetic purposes: if there's no crowding information for _any_ of the upcoming departures, we don't want to show a gap/empty column.\n  const someCrowdingInfoExists =\n    !isEmpty(journeys) && isABusRoute(journeys[0].route)\n      ? journeys.some(journey => {\n          const { tripInfo } = journey;\n          if (!tripInfo) return false;\n          const crowding = get(tripInfo, \"vehicle.crowding\", null);\n          return crowding !== null;\n        })\n      : false;\n\n  return (\n    <>\n      {UpcomingDeparturesHeader}\n      {hasPredictions(journeys) ? (\n        <table\n          className={`schedule-table schedule-table--upcoming ${\n            !someCrowdingInfoExists ? \"u-no-crowding-data\" : \"\"\n          }`}\n        >\n          <thead className=\"schedule-table__header\">\n            <tr className=\"schedule-table__row-header\">\n              <th scope=\"col\" className=\"schedule-table__cell\">\n                Destinations\n              </th>\n              <th scope=\"col\" colSpan={2} className=\"schedule-table__cell\">\n                {someCrowdingInfoExists ? (\n                  <span className=\"trip-details-table__title\">\n                    {headerLabel}\n                  </span>\n                ) : (\n                  headerLabel\n                )}\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {journeys.map((journey, idx: number) => (\n              <TableRow\n                journey={journey}\n                // eslint-disable-next-line react/no-array-index-key\n                key={idx}\n              />\n            ))}\n          </tbody>\n        </table>\n      ) : (\n        <div className=\"callout text-center u-bold\">\n          There are currently no realtime departures available.\n        </div>\n      )}\n    </>\n  );\n};\n\nexport const UpcomingDepartures = ({\n  state\n}: Props): ReactElement<HTMLElement> | null => {\n  if (isInitialLoading(state)) {\n    return <Loading />;\n  }\n\n  return <>{upcomingDeparturesTable(state)}</>;\n};\n\nexport default UpcomingDepartures;\n","import React, { ReactElement } from \"react\";\nimport renderFa from \"../../helpers/render-fa\";\nimport { SchedulePDF } from \"../components/__schedule\";\n\nconst pdfLink = (pdf: SchedulePDF | null): ReactElement<HTMLElement> | null => {\n  if (!pdf) {\n    return null;\n  }\n  return (\n    <div className=\"fs-16 pt-16\">\n      <a\n        key={pdf.url}\n        href={pdf.url}\n        rel=\"noopener noreferrer\"\n        className=\"c-call-to-action\"\n        target=\"_blank\"\n      >\n        {`Open full schedule PDF`}{\" \"}\n        {renderFa(\"fa-arrow-up-right-from-square\", \"\")}\n      </a>\n    </div>\n  );\n};\n\nexport default pdfLink;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { isEmpty } from \"lodash\";\nimport { updateInLocation } from \"use-query-params\";\nimport Map from \"./components/Map\";\nimport { SchedulePageData, SelectedOrigin } from \"./components/__schedule\";\nimport { MapData } from \"../leaflet/components/__mapdata\";\nimport { DirectionId } from \"../__v3api\";\nimport ScheduleLoader from \"./components/ScheduleLoader\";\nimport {\n  store,\n  createScheduleStore,\n  getCurrentState\n} from \"./store/ScheduleStore\";\nimport { isABusRoute } from \"../models/route\";\n\nconst renderMap = ({\n  route_patterns: routePatternsByDirection,\n  direction_id: directionId,\n  route\n}: SchedulePageData): void => {\n  const routePatterns = routePatternsByDirection[directionId];\n  const defaultRoutePattern = routePatterns.slice(0, 1)[0];\n  const currentShapes = isABusRoute(route)\n    ? [defaultRoutePattern.shape_id]\n    : routePatterns.map(pattern => pattern.shape_id);\n  const currentStops = defaultRoutePattern.stop_ids;\n  const mapDataEl = document.getElementById(\"js-map-data\");\n  if (!mapDataEl) return;\n  const channel = mapDataEl.getAttribute(\"data-channel-id\");\n  if (!channel) throw new Error(\"data-channel-id attribute not set\");\n  const mapEl = document.getElementById(\"map-root\");\n  if (!mapEl) throw new Error(\"cannot find #map-root\");\n  const mapData: MapData = JSON.parse(mapDataEl.innerHTML);\n  ReactDOM.render(\n    <Map\n      data={mapData}\n      channel={channel}\n      currentShapes={currentShapes}\n      currentStops={currentStops}\n    />,\n    mapEl\n  );\n};\n\nconst updateURL = (origin: SelectedOrigin, direction?: DirectionId): void => {\n  /* istanbul ignore else  */\n  if (window) {\n    // eslint-disable-next-line camelcase\n    const newQuery = {\n      \"schedule_finder[direction_id]\":\n        direction !== undefined ? direction.toString() : \"\",\n      \"schedule_finder[origin]\": origin\n    };\n    const newLoc = updateInLocation(newQuery, window.location);\n    // newLoc is not a true Location, so toString doesn't work\n    window.history.replaceState({}, \"\", `${newLoc.pathname}${newLoc.search}`);\n  }\n};\n\nexport const renderAdditionalLineInformation = (\n  schedulePageData: SchedulePageData\n): void => {\n  const { schedule_note: scheduleNote } = schedulePageData;\n\n  ReactDOM.render(\n    <Provider store={store}>\n      <ScheduleLoader\n        component=\"ADDITIONAL_LINE_INFORMATION\"\n        schedulePageData={schedulePageData}\n        updateURL={updateURL}\n      />\n    </Provider>,\n    document.getElementById(\"react-root\")\n  );\n  // don't show Schedule Finder for subway\n  if (scheduleNote) {\n    ReactDOM.render(\n      <Provider store={store}>\n        <ScheduleLoader\n          component=\"SCHEDULE_NOTE\"\n          schedulePageData={schedulePageData}\n          updateURL={updateURL}\n        />\n      </Provider>,\n      document.getElementById(\"react-schedule-note-root\")\n    );\n  } else {\n    const scheduleFinderRoot = document.getElementById(\n      \"react-schedule-finder-root\"\n    );\n    if (scheduleFinderRoot) {\n      ReactDOM.render(\n        <Provider store={store}>\n          <ScheduleLoader\n            component=\"SCHEDULE_FINDER\"\n            schedulePageData={schedulePageData}\n            updateURL={updateURL}\n          />\n        </Provider>,\n        scheduleFinderRoot\n      );\n    }\n  }\n};\n\nconst renderDirectionAndMap = (\n  schedulePageData: SchedulePageData,\n  root: HTMLElement\n): void => {\n  const currentState = getCurrentState();\n  if (!!currentState && Object.keys(currentState).length !== 0) {\n    ReactDOM.render(\n      <Provider store={store}>\n        <ScheduleLoader\n          component=\"SCHEDULE_DIRECTION\"\n          schedulePageData={schedulePageData}\n          updateURL={updateURL}\n        />\n      </Provider>,\n      root\n    );\n  }\n};\n\nexport const renderDirectionOrMap = (\n  schedulePageData: SchedulePageData\n): void => {\n  const root = document.getElementById(\"react-schedule-direction-root\");\n  if (!root) {\n    renderMap(schedulePageData);\n    return;\n  }\n  renderDirectionAndMap(schedulePageData, root);\n};\n\nconst render = (): void => {\n  const schedulePageDataEl = document.getElementById(\"js-schedule-page-data\");\n  if (!schedulePageDataEl) return;\n  const schedulePageData = JSON.parse(\n    schedulePageDataEl.innerHTML\n  ) as SchedulePageData;\n  const {\n    direction_id: directionId,\n    route_patterns: routePatterns\n  } = schedulePageData;\n\n  createScheduleStore(directionId);\n  renderAdditionalLineInformation(schedulePageData);\n\n  if (!isEmpty(routePatterns)) {\n    renderDirectionOrMap(schedulePageData);\n  }\n};\n\nconst onLoad = (): void => {\n  render();\n};\n\nexport default onLoad;\n","import { Reducer, createStore, Store } from \"redux\";\nimport { StoreAction, SelectedOrigin } from \"../components/__schedule\";\nimport { DirectionId } from \"../../__v3api\";\nimport { Mode as ModalMode } from \"../components/schedule-finder/ScheduleFinderModal\";\nimport { dispatchChangedDirection } from \"../../hooks/useDirectionChangeEvent\";\n\nexport interface StoreProps {\n  selectedDirection: DirectionId;\n  selectedOrigin: SelectedOrigin | \"\";\n  modalOpen: boolean;\n  modalMode: ModalMode;\n}\n\ninterface ActionData {\n  selectedDirection?: DirectionId;\n  selectedOrigin?: SelectedOrigin | \"\";\n  modalOpen?: boolean;\n  modalMode?: ModalMode;\n}\n\nexport interface Action {\n  type: StoreAction;\n  newStoreValues: ActionData;\n}\n\nexport const scheduleStoreReducer: Reducer<StoreProps, Action> = (\n  state: StoreProps | undefined,\n  action: Action\n): StoreProps => {\n  const newState: StoreProps = Object.assign(\n    {\n      selectedDirection: undefined,\n      selectedOrigin: undefined,\n      modalOpen: false,\n      modalMode: \"schedule\"\n    },\n    state\n  );\n\n  switch (action.type) {\n    case \"INITIALIZE\":\n      return { ...newState, ...action.newStoreValues };\n    case \"CHANGE_DIRECTION\":\n      // notify other components of changed direction\n      dispatchChangedDirection(action.newStoreValues.selectedDirection!);\n\n      return {\n        ...newState,\n        selectedDirection: action.newStoreValues.selectedDirection!,\n        selectedOrigin: action.newStoreValues.selectedOrigin!\n      };\n    case \"CHANGE_ORIGIN\":\n      return {\n        ...newState,\n        selectedOrigin: action.newStoreValues.selectedOrigin!\n      };\n    case \"OPEN_MODAL\":\n      return {\n        ...newState,\n        modalMode: action.newStoreValues.modalMode!,\n        modalOpen: true\n      };\n    case \"CLOSE_MODAL\":\n      return {\n        ...newState,\n        modalOpen: false\n      };\n    default:\n      return newState;\n  }\n};\n\nexport const createScheduleStore = (directionId: DirectionId): Store =>\n  // create store with preloadedState:\n  createStore(scheduleStoreReducer, {\n    selectedDirection: directionId,\n    selectedOrigin: \"\",\n    modalOpen: false,\n    modalMode: \"schedule\"\n  });\n\n// initial 'dummy' value (will be overwritten when schedule-loader loads)\nexport const store: Store = createScheduleStore(0);\n\nexport const getCurrentState = (): StoreProps => store.getState();\n\nexport const storeHandler = (newValues: Action): void => {\n  store.dispatch(newValues);\n};\n\nexport const mapStateToProps = (state: StoreProps): StoreProps => ({\n  ...state\n});\n\nexport default mapStateToProps;\n","import React, { ReactElement } from \"react\";\n\nconst bgClass = (color: string | undefined): string =>\n  color ? `u-bg--${color}` : \"\";\n\nconst PillLink = ({\n  displayText,\n  linkURL,\n  backgroundColor,\n  optionalCSS = \"\",\n  externalLink\n}: {\n  displayText: string;\n  linkURL: string;\n  backgroundColor?: string | undefined;\n  optionalCSS?: string | undefined;\n  externalLink?: boolean;\n}): ReactElement<HTMLElement> => {\n  return (\n    <a\n      target={externalLink ? \"_blank\" : \"_self\"}\n      rel=\"noreferrer\"\n      href={linkURL}\n      className={`\n      m-stop-page__header-feature\n      m-stop-page__header-description\n      u-small-caps\n      ${bgClass(backgroundColor)}\n      ${optionalCSS}\n    `}\n    >\n      {displayText}\n    </a>\n  );\n};\n\nexport default PillLink;\n","import React, { ReactElement } from \"react\";\nimport { EnhancedRoute, Route } from \"../../__v3api\";\nimport { TypedRoutes } from \"./__stop\";\nimport { breakTextAtSlash } from \"../../helpers/text\";\nimport { routeToCSSClass } from \"../../helpers/css\";\nimport PillLink from \"./PillLink\";\n\ninterface RoutePillListProps {\n  routes: TypedRoutes[];\n  showGroupName?: boolean;\n}\n\ninterface RoutePillProps {\n  route: Route | EnhancedRoute;\n}\n\nconst busName = (name: string): string =>\n  name.startsWith(\"SL\") ? \"silver-line\" : \"bus\";\n\nconst modeNameForBg = ({ name, type }: EnhancedRoute | Route): string => {\n  switch (type) {\n    case 0:\n    case 1:\n      return routeToCSSClass(name);\n    case 2:\n      return \"commuter-rail\";\n    case 4:\n      return \"ferry\";\n    default:\n      return busName(name);\n  }\n};\n\nexport const modeBgClass = (route: EnhancedRoute | Route): string =>\n  `u-bg--${modeNameForBg(route)}`;\n\nconst RoutePill = ({ route }: RoutePillProps): ReactElement<HTMLElement> => (\n  <PillLink\n    displayText={breakTextAtSlash(route.name)}\n    linkURL={`/schedules/${route.id}`}\n    optionalCSS={modeBgClass(route)}\n  />\n);\n\nconst RoutePillList = ({\n  routes,\n  showGroupName\n}: RoutePillListProps): ReactElement<HTMLElement> => (\n  <div className=\"m-route-pills\">\n    {routes.map(typedRoute => (\n      <div\n        key={typedRoute.group_name}\n        className={`m-route-pills--${typedRoute.group_name}`}\n      >\n        {showGroupName && <h4 className=\"h4\">{typedRoute.group_name}</h4>}\n        {typedRoute.routes.map(routeWithDirections => (\n          <RoutePill\n            key={routeWithDirections.route.id}\n            route={routeWithDirections.route}\n          />\n        ))}\n      </div>\n    ))}\n  </div>\n);\n\nexport default RoutePillList;\n","module.exports = \"<svg viewBox=\\\"0 0 99 44\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"><g stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\"><path d=\\\"M64.7468627,7.09418079 C63.7278627,7.92118079 62.2328627,7.76518079 61.4058627,6.74618079 C60.5798627,5.72818079 60.7348627,4.23218079 61.7538627,3.40618079 C62.7718627,2.57918079 64.2678627,2.73518079 65.0948627,3.75318079 C65.9208627,4.77218079 65.7648627,6.26718079 64.7468627,7.09418079 M71.3778627,15.2651808 C70.7348627,15.7871808 69.7898627,15.6891808 69.2678627,15.0461808 C68.7458627,14.4021808 68.8438627,13.4581808 69.4878627,12.9361808 C70.1308627,12.4141808 71.0758627,12.5121808 71.5978627,13.1551808 C72.1198627,13.7991808 72.0208627,14.7431808 71.3778627,15.2651808 M78.5838627,24.1451808 C77.9408627,24.6671808 76.9958627,24.5691808 76.4738627,23.9251808 C75.9518627,23.2821808 76.0498627,22.3371808 76.6938627,21.8151808 C77.3368627,21.2931808 78.2818627,21.3921808 78.8038627,22.0351808 C79.3258627,22.6781808 79.2268627,23.6231808 78.5838627,24.1451808 M85.7898627,33.0241808 C85.1468627,33.5461808 84.2018627,33.4481808 83.6798627,32.8051808 C83.1578627,32.1621808 83.2558627,31.2171808 83.8998627,30.6951808 C84.5428627,30.1731808 85.4878627,30.2711808 86.0098627,30.9141808 C86.5318627,31.5581808 86.4328627,32.5021808 85.7898627,33.0241808 M92.9958627,41.9041808 C92.3528627,42.4261808 91.4078627,42.3281808 90.8858627,41.6841808 C90.3638627,41.0411808 90.4618627,40.0961808 91.1058627,39.5741808 C91.7488627,39.0521808 92.6928627,39.1511808 93.2158627,39.7941808 C93.7378627,40.4371808 93.6388627,41.3821808 92.9958627,41.9041808 M60.5718627,1.95018079 C58.7498627,3.42918079 58.4708627,6.10518079 59.9498627,7.92818079 C60.8378627,9.02218079 62.1578627,9.54718079 63.4648627,9.48218079 L90.3658627,42.6311808 C91.2358627,43.7031808 92.8098627,43.8681808 93.8828627,42.9971808 C94.9548627,42.1271808 95.1178627,40.5521808 94.2478627,39.4801808 L67.3478627,6.33218079 C67.6808627,5.06618079 67.4388627,3.66618079 66.5498627,2.57218079 C65.0708627,0.749180788 62.3948627,0.471180788 60.5718627,1.95018079\\\" fill=\\\"#00843D\\\"></path><polygon fill=\\\"#494F5C\\\" points=\\\"83.0152627 21.4583808 92.1742627 8.11338079 86.1102627 8.11338079 79.7292627 17.4093808\\\"></polygon><path d=\\\"M73.5692627,26.3859808 L76.8542627,30.4339808 L74.6942627,33.5829808 C75.1272627,34.8179808 74.9972627,36.2319808 74.2002627,37.3939808 C72.8722627,39.3289808 70.2262627,39.8209808 68.2912627,38.4929808 C66.3562627,37.1649808 65.8642627,34.5189808 67.1922627,32.5839808 C67.9892627,31.4219808 69.2632627,30.7929808 70.5712627,30.7529808 L70.5712627,30.7529808 L73.5692627,26.3859808 Z M72.0402627,33.0309808 C70.9592627,32.2889808 69.4802627,32.5639808 68.7382627,33.6449808 C67.9952627,34.7259808 68.2702627,36.2049808 69.3522627,36.9469808 C70.4332627,37.6889808 71.9122627,37.4139808 72.6542627,36.3329808 C73.3962627,35.2519808 73.1212627,33.7729808 72.0402627,33.0309808 Z\\\" fill=\\\"#00843D\\\"></path><g transform=\\\"translate(5.619061, 8.355000)\\\" fill=\\\"#494F5C\\\" fill-rule=\\\"nonzero\\\"><path d=\\\"M25.8759388,13.905 L15.1659388,13.905 L15.1659388,18.27 L20.5209388,18.27 L20.5209388,25.83 C19.8009388,26.19 18.3159388,26.46 16.3359388,26.46 C10.0359388,26.46 5.80593883,22.365 5.80593883,15.48 C5.80593883,8.415 10.3509388,4.59 16.8309388,4.59 C20.0259388,4.59 22.0509388,5.175 23.7159388,5.895 L24.9309388,1.44 C23.5359388,0.765 20.6109388,0 16.8759388,0 C6.84093883,0 0.000938830435,6.165 0.000938830435,15.75 C-0.0440611696,20.34 1.53093883,24.345 4.23093883,26.91 C7.11093883,29.655 10.9809388,30.96 16.1109388,30.96 C20.1609388,30.96 23.9409388,29.97 25.8759388,29.25 L25.8759388,13.905 Z\\\"></path><polygon points=\\\"35.2959388 30.645 53.2959388 30.645 53.2959388 26.01 40.8309388 26.01 40.8309388 0.315 35.2959388 0.315\\\"></polygon></g></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><rect width=\\\"16\\\" height=\\\"16\\\" fill=\\\"#165c96\\\" rx=\\\"3.74837\\\"></rect><g fill=\\\"#fff\\\"><path d=\\\"m6.90573 13a3.27922 3.27922 0 0 1 -1.36713-6.26353l.07439.97088a2.38543 2.38543 0 1 0 3.6515 2.29152l.58176 1.19057a3.33147 3.33147 0 0 1 -2.94052 1.81056z\\\"></path><path d=\\\"m10.61986 11.93766-1.34186-3.14392-3.27138-.00087-.31762-4.4696a.926.926 0 0 1 -.11143-.4318.89147.89147 0 1 1 .97853.888l.0939 1.6679h2.293l.00674.7194h-2.21937l.05246.80944 3.04171-.02043 1.29828 2.99729.98591-.35587.27281.64958z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#1c1e23\\\" d=\\\"m47.55089 42.53651-20.5403-40.60229a3.60991 3.60991 0 0 0 -1.27059-1.3994 3.08289 3.08289 0 0 0 -3.4708 0 3.57213 3.57213 0 0 0 -1.2518 1.3994l-20.5404 40.60229a3.715 3.715 0 0 0 0 3.6423 3.47281 3.47281 0 0 0 1.2518 1.3228 3.21739 3.21739 0 0 0 1.70689.49839h41.1186a3.16147 3.16147 0 0 0 1.688-.49841 3.47248 3.47248 0 0 0 1.2517-1.3228 3.71467 3.71467 0 0 0 .0569-3.64228z\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m27.04259 39.22282a.71323.71323 0 0 1 -.21909.544.73324.73324 0 0 1 -.54.2332h-4.5683a.73294.73294 0 0 1 -.5394-.2332.77238.77238 0 0 1 -.2192-.544v-4.4456a.77247.77247 0 0 1 .2192-.544.73331.73331 0 0 1 .53939-.23322h4.56881a.73351.73351 0 0 1 .54.2332.71375.71375 0 0 1 .2192.544z\\\"></path><path d=\\\"m26.73759 30.35892a.62508.62508 0 0 1 -.2345.4568.7061.7061 0 0 1 -.516.1828h-4.12809a.73374.73374 0 0 1 -.516-.1828.53482.53482 0 0 1 -.219-.4568l-1.1215-14.4817a.71.71 0 0 1 .2189-.5848.76.76 0 0 1 .516-.2924h6.512a.81448.81448 0 0 1 .53161.2924.70371.70371 0 0 1 .2189.53z\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M19.3446 16.986C17.7003 16.986 16.306 15.8279 15.9013 14.2593C19.6117 14.2669 19.941 14.4625 19.9953 13.8002C19.9894 13.6008 19.9197 13.4711 18.3026 9.776C18.6318 9.6735 18.9785 9.61729 19.3446 9.61729C21.3102 9.61729 22.9059 11.2691 22.9059 13.3025C22.9059 15.3321 21.3102 16.986 19.3446 16.986ZM17.3905 10.2175L18.7364 13.2968L15.7755 13.287C15.7831 12.0071 16.4185 10.8762 17.3905 10.2175ZM14.6852 13.2851L13.8176 13.2832L16.0659 7.18884L16.9374 9.18346C15.5953 10.0219 14.6929 11.546 14.6852 13.2851ZM12.8222 13.1553L7.18669 6.81104L15.1112 6.79556L12.8222 13.1553ZM8.22089 13.3782C8.22089 15.4096 6.6213 17.0633 4.65365 17.0633C2.68809 17.0633 1.09041 15.4096 1.09041 13.3782C1.09041 11.3484 2.68809 9.69856 4.65365 9.69856C4.83759 9.69856 5.00604 9.71022 5.17658 9.73737C4.04162 13.4381 4.18118 13.0161 4.17144 13.3278C4.16378 13.5891 4.37087 13.8002 4.62859 13.8157C5.09531 13.7694 4.99073 13.8467 6.15075 10.0337C7.37063 10.6184 8.22089 11.8985 8.22089 13.3782ZM19.3446 8.49208C18.8236 8.49208 18.3202 8.58118 17.8475 8.7458C17.4932 7.91503 17.0672 6.94486 16.5695 5.80033L16.8869 4.90169L17.9735 4.8822V3.93919H13.8738C13.5135 4.44472 14.0248 4.44472 15.8355 4.86306L15.5179 5.78084H7.41918C7.96908 3.81146 7.65933 3.95467 10.1128 3.96251V3C6.73737 3.03289 7.32225 2.63978 5.51157 8.65287C5.23087 8.59875 4.95001 8.57143 4.65365 8.57143C2.08963 8.57143 0 10.7289 0 13.3782C0 16.0313 2.08963 18.1906 4.65365 18.1906C7.22932 18.1906 9.31495 16.0313 9.31495 13.3782C9.31495 11.397 8.14328 9.68708 6.47982 8.95497C6.58057 8.62573 6.6909 8.27334 6.80906 7.89571C13.6162 15.3205 11.0656 14.1159 14.7279 14.2669H14.7762C15.2118 16.461 17.0963 18.1091 19.3446 18.1091C21.9067 18.1091 24 15.9556 24 13.3025C24 10.6475 21.9067 8.49208 19.3446 8.49208Z\\\" fill=\\\"#165C96\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#003da5\\\" d=\\\"m24 0a24 24 0 1 0 24 24 24 24 0 0 0 -24-24\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m16.21338 13.647a12.87772 12.87772 0 0 1 2.69726.26123 5.83 5.83 0 0 1 2.0879.85547 3.98326 3.98326 0 0 1 1.34863 1.58057 5.56185 5.56185 0 0 1 .47851 2.43555 4.5366 4.5366 0 0 1 -.71093 2.61035 5.16141 5.16141 0 0 1 -2.10254 1.71093 4.97692 4.97692 0 0 1 2.85644 1.92823 5.74358 5.74358 0 0 1 .94239 3.3208 5.70688 5.70688 0 0 1 -.6084 2.71142 5.28726 5.28726 0 0 1 -1.63864 1.87058 7.25022 7.25022 0 0 1 -2.3496 1.07275 10.589 10.589 0 0 1 -2.71094.34815h-10.03422v-20.70603zm-.58008 8.38086a3.27472 3.27472 0 0 0 2.001-.57959 2.19 2.19 0 0 0 .7832-1.88525 2.41024 2.41024 0 0 0 -.26074-1.189 1.94175 1.94175 0 0 0 -.69629-.72509 2.94457 2.94457 0 0 0 -1.001-.36231 6.66287 6.66287 0 0 0 -1.17383-.10156h-4.26364v4.84277zm.26074 8.78711a6.08961 6.08961 0 0 0 1.27637-.13037 3.12816 3.12816 0 0 0 1.07324-.43506 2.20243 2.20243 0 0 0 .73926-.82666 2.84574 2.84574 0 0 0 .27539-1.334 2.67712 2.67712 0 0 0 -.89941-2.27637 3.83584 3.83584 0 0 0 -2.37793-.68164h-4.95896v5.68408z\\\"></path><path d=\\\"m31.438 13.647v16.8779h10.09276v3.8281h-14.64551v-20.706z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#1c1e23\\\" d=\\\"m14.29 0h19.43a1.05 1.05 0 0 1 .71.29l13.28 13.28a1.05 1.05 0 0 1 .29.71v18.92a1 1 0 0 1 -.28.69l-13.29 13.8a1 1 0 0 1 -.72.31h-19.43a1.05 1.05 0 0 1 -.71-.29l-13.28-13.28a1.05 1.05 0 0 1 -.29-.71v-18.92a1 1 0 0 1 .28-.69l13.29-13.8a1 1 0 0 1 .72-.31z\\\"></path><path fill=\\\"#fff\\\" d=\\\"m12.28 15.76 3.43-3.47a1 1 0 0 1 1.39 0l6.9 6.84 6.89-6.84a1 1 0 0 1 1.4 0l3.43 3.47a1 1 0 0 1 0 1.39l-6.91 6.85 6.9 7a1 1 0 0 1 0 1.4l-3.4 3.33a1 1 0 0 1 -1.39 0l-6.91-7-6.91 7a1 1 0 0 1 -1.39 0l-3.4-3.33a1 1 0 0 1 0-1.4l6.9-7-6.9-6.85a1 1 0 0 1 -.03-1.39z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 48 48\\\"><path d=\\\"m31.93 7.28h-14.39l1.2-5.87a1.37 1.37 0 0 0 -2.11-1.18l-14.86 9.88a1.44 1.44 0 0 0 0 2.38l14.86 9.88a1.37 1.37 0 0 0 2.11-1.19l-1.2-5.86h14.39c3.94 0 7.14 2.82 7.14 6.3v12c0 3.48-3.2 6.3-7.14 6.3h-8.2v8h8.2c8.23 0 14.93-6.43 14.93-14.34v-12c0-7.91-6.7-14.34-14.93-14.34\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path d=\\\"m47.13 14.89-22.42 22.43-4.21 4.21a3 3 0 0 1 -4.21 0l-4.21-4.21-11.21-11.21a3 3 0 0 1 0-4.22l4.21-4.21a3 3 0 0 1 4.21 0l9.11 9.14 20.31-20.35a3 3 0 0 1 4.21 0l4.21 4.21a3 3 0 0 1 .87 2.11 3 3 0 0 1 -.87 2.1z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path class=\\\"person person-left\\\" d=\\\"m6.86 16.05a6.86 6.86 0 0 0 -6.86 6.86v17.77a3.43 3.43 0 0 0 3.43 3.42h6.86a3.42 3.42 0 0 0 3.42-3.42v-17.77a6.86 6.86 0 0 0 -6.85-6.86z\\\"></path><path class=\\\"person person-left\\\" d=\\\"m6.9 13.23a4.93 4.93 0 1 0 -4.9-4.93 4.93 4.93 0 0 0 4.9 4.93z\\\"></path><path class=\\\"person person-middle\\\" d=\\\"m24 16.05a6.86 6.86 0 0 0 -6.86 6.86v17.77a3.43 3.43 0 0 0 3.43 3.42h6.86a3.43 3.43 0 0 0 3.43-3.42v-17.77a6.86 6.86 0 0 0 -6.86-6.86z\\\"></path><path class=\\\"person person-middle\\\" d=\\\"m24.05 13.23a4.93 4.93 0 1 0 -4.93-4.93 4.93 4.93 0 0 0 4.93 4.93z\\\"></path><path class=\\\"person person-right\\\" d=\\\"m41.14 16.05a6.86 6.86 0 0 0 -6.85 6.86v17.77a3.42 3.42 0 0 0 3.42 3.42h6.86a3.43 3.43 0 0 0 3.43-3.42v-17.77a6.86 6.86 0 0 0 -6.86-6.86z\\\"></path><path class=\\\"person person-right\\\" d=\\\"m41.19 13.23a4.93 4.93 0 1 0 -4.93-4.93 4.93 4.93 0 0 0 4.93 4.93z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" data-name=\\\"Layer 1\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><defs><style>.cls-1{fill:none;clip-rule:evenodd;}.cls-2{clip-path:url(#clip-path);}.cls-3{clip-path:url(#clip-path-2);}.cls-4{clip-path:url(#clip-path-3);}.cls-5{fill:#1c1e23;}</style><clipPath><path d=\\\"M80.17-26.74q19.32-18,19.32-28.68A19.32,19.32,0,0,0,80.17-74.74,19.32,19.32,0,0,0,60.85-55.42Q60.85-44.75,80.17-26.74Z\\\" class=\\\"cls-1\\\"></path></clipPath><clipPath><path d=\\\"M25-26.74q19.32-18,19.32-28.68A19.32,19.32,0,0,0,25-74.74,19.32,19.32,0,0,0,5.64-55.42Q5.64-44.75,25-26.74Z\\\" class=\\\"cls-1\\\"></path></clipPath><clipPath><path d=\\\"M-42.62-26.74q19.32-18,19.32-28.68A19.32,19.32,0,0,0-42.62-74.74,19.32,19.32,0,0,0-61.94-55.42Q-61.94-44.75-42.62-26.74Z\\\" class=\\\"cls-1\\\"></path></clipPath></defs><path d=\\\"M35.55,19.8,25.05,30.3a1.45,1.45,0,0,1-2.1,0L12.45,19.8A1.44,1.44,0,0,1,12,18.75a1.51,1.51,0,0,1,1.5-1.5h21a1.51,1.51,0,0,1,1.5,1.5A1.44,1.44,0,0,1,35.55,19.8Z\\\" class=\\\"cls-5\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M8.42021 13.4913C8.42075 13.1156 8.72467 12.8117 9.09953 12.812C9.47438 12.8117 9.7783 13.1156 9.77884 13.4913C9.7783 13.8653 9.47438 14.1692 9.09953 14.1706C8.72467 14.1692 8.42075 13.8653 8.42021 13.4913ZM7.54005 17.4609V14.8795C7.54118 14.5816 7.77865 14.379 8.03625 14.3774C8.03571 14.379 10.1451 14.3774 10.1451 14.3774C10.4256 14.379 10.6405 14.6042 10.6413 14.8795V17.4609C10.6405 17.6746 10.4686 17.8233 10.2809 17.8212C10.2809 17.8212 10.1952 17.8213 10.0565 17.8214V21.2237C10.0594 21.8417 9.15505 21.8417 9.15269 21.2237V17.822C9.1074 17.822 9.06207 17.8221 9.01683 17.8221V21.2237C9.01757 21.837 8.11324 21.837 8.11304 21.2237V17.822C7.98215 17.8219 7.90137 17.8216 7.90039 17.8212C7.71608 17.8233 7.54118 17.6721 7.54005 17.4609ZM11.6691 13.4913C11.6697 13.1156 11.9736 12.8117 12.3484 12.812C12.7233 12.8117 13.0272 13.1156 13.0277 13.4913C13.0272 13.8653 12.7233 14.1692 12.3484 14.1706C11.9736 14.1692 11.6697 13.8653 11.6691 13.4913ZM10.789 17.4609V14.8795C10.79 14.5816 11.0276 14.379 11.2852 14.3774C11.2846 14.379 13.394 14.3774 13.394 14.3774C13.6744 14.379 13.8894 14.6042 13.8902 14.8795V17.4609C13.8894 17.6746 13.7175 17.8233 13.5299 17.8212C13.5299 17.8212 13.4441 17.8213 13.3054 17.8214V21.2237C13.3083 21.8417 12.404 21.8417 12.4016 21.2237V17.822C12.3563 17.822 12.311 17.8221 12.2657 17.8221V21.2237C12.2665 21.837 11.3621 21.837 11.3619 21.2237V17.822C11.2311 17.8219 11.1503 17.8216 11.1493 17.8212C10.965 17.8233 10.79 17.6721 10.789 17.4609ZM14.918 13.4913C14.9186 13.1156 15.2225 12.8117 15.5973 12.812C15.9722 12.8117 16.2761 13.1156 16.2767 13.4913C16.2761 13.8653 15.9722 14.1692 15.5973 14.1706C15.2225 14.1692 14.9186 13.8653 14.918 13.4913ZM14.0379 17.4609V14.8795C14.0389 14.5816 14.2765 14.379 14.5341 14.3774C14.5335 14.379 16.6429 14.3774 16.6429 14.3774C16.9233 14.379 17.1383 14.6042 17.1391 14.8795V17.4609C17.1383 17.6746 16.9664 17.8233 16.7788 17.8212C16.7788 17.8212 16.693 17.8213 16.5543 17.8214V21.2237C16.5572 21.8417 15.6529 21.8417 15.6505 21.2237V17.822C15.6052 17.822 15.5599 17.8221 15.5146 17.8221V21.2237C15.5154 21.837 14.611 21.837 14.6108 21.2237V17.822C14.48 17.8219 14.3992 17.8216 14.3981 17.8212C14.2139 17.8233 14.0389 17.6721 14.0379 17.4609ZM5.30717 3.4906L7.94174 0.324392C8.35868 -0.0933871 8.90262 -0.0958485 9.31809 0.324392L11.9704 3.47878C12.7884 4.41137 11.4624 5.56507 10.7063 4.737L9.61344 3.40199L9.64889 7.66101C9.63535 9.07827 7.60478 9.06242 7.61684 7.66101L7.64638 3.40199L6.56538 4.74881C5.82601 5.58973 4.48771 4.42367 5.30717 3.4906ZM12.6792 5.22728C11.8593 4.29445 13.1976 3.12844 13.9374 3.96907L15.0184 5.31589L14.9889 1.05687C14.9764 -0.344291 17.0069 -0.360142 17.0209 1.05687L16.9855 5.31589L18.0783 3.98089C18.8339 3.15306 20.1599 4.30676 19.3424 5.24501L16.6901 8.39349C16.2742 8.81402 15.7302 8.81151 15.3138 8.39349L12.6792 5.22728ZM7.02609 21.968H17.6411V11.4179H7.02609V21.968ZM17.7121 9.36225H6.96116C5.82601 9.36486 5.0029 10.2539 5 11.3234V22.0566C5.00064 23.151 5.88754 24.0026 6.96116 24H17.7239C18.797 24.0024 19.6708 23.2002 19.6673 22.0566V11.3234C19.6683 10.2416 18.8093 9.36486 17.7121 9.36225Z\\\" fill=\\\"#165C96\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M11.7977 4.61893C11.7975 5.5091 11.0735 6.23247 10.1828 6.23213C9.28712 6.23247 8.56306 5.5091 8.56205 4.61893C8.56306 3.7247 9.28712 3.00143 10.1828 3C11.0735 3.00143 11.7975 3.7247 11.7977 4.61893ZM19.0164 9.23668H21.0155C22.0078 9.23943 22.3942 8.23691 22.3951 7.70116C22.3942 7.16261 21.8496 6.2619 21.038 6.26092H17.71C17.0329 6.2619 16.6379 6.31164 16.2403 6.70925L6.52088 16.3819C6.15885 16.7401 5.74439 16.9191 5.11309 16.9198H2.95073C2.24838 16.9191 1.56795 17.4208 1.56546 18.3153C1.56795 19.2113 2.28151 19.8929 3.09151 19.8956H6.24496C6.87278 19.8929 7.36335 19.7404 7.74847 19.3576L17.3102 9.84192C17.7954 9.35763 18.1708 9.23943 19.0164 9.23668ZM17.4904 4.69739H21.1844C22.3942 4.69926 24.0014 5.90885 24 7.72358C24.0014 9.55611 22.4059 10.8277 21.2801 10.8282C20.244 10.8277 18.9376 10.8282 18.9376 10.8282C18.5877 10.8277 18.4752 10.8836 18.2731 11.0636L8.78461 20.4728C8.02257 21.1902 7.09564 21.4811 6.32942 21.4816C5.56635 21.4811 3.09151 21.4816 3.09151 21.4816C1.09869 21.4811 0.00126701 19.727 0 18.3377C0.00126701 16.9517 1.09869 15.315 2.9282 15.3171C2.9282 15.3171 4.74711 15.3154 4.74707 15.3171C5.29859 15.315 5.3328 15.3028 5.61427 15.0257L8.58752 12.0611H8.58189V7.99258C8.58198 5.89367 11.7305 5.87032 11.7297 7.99258V8.9901L15.1534 5.58843C15.7397 5.00636 16.7231 4.69524 17.4904 4.69739Z\\\" fill=\\\"#165C96\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M23.965 17.43L23.85 16.93L23.82 16.785L23.37 14.785L23.305 14.49L21.92 8.23003C21.7168 7.45528 20.9257 6.99043 20.15 7.19003L19.055 7.43003L16.555 2.22503C16.1809 1.51695 15.3049 1.24431 14.595 1.61503L0.879996 8.24503C0.148264 8.57086 -0.182503 9.42683 0.139996 10.16L2.92 15.91L3.05 16.18L3.95 18.04L4.245 18.64L4.33 18.82C4.63627 19.2867 5.18108 19.5387 5.735 19.47L6.015 20.74L6.16 21.395L6.205 21.585C6.46594 22.2924 7.21975 22.6877 7.95 22.5L22.84 19.19C23.629 19.0038 24.1272 18.2243 23.965 17.43ZM5.295 17.39L4.5 17.775L3.6 15.915L18.905 8.50003L19.805 10.36L5.295 17.39ZM6.33 19.275L6.625 20.595L23.23 16.885L22.78 14.885L9.125 17.925L6.33 19.275Z\\\" fill=\\\"#165C96\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#00843d\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><path fill=\\\"#fff\\\" d=\\\"m8.59043 4a5.39839 5.39839 0 0 1 1.08557.10121 2.392 2.392 0 0 1 .83953.33044 1.55783 1.55783 0 0 1 .54221.61054 2.06794 2.06794 0 0 1 .19251.941 1.70139 1.70139 0 0 1 -.28591 1.00827 2.06017 2.06017 0 0 1 -.84522.66143 2.00387 2.00387 0 0 1 1.14822.74512 2.15155 2.15155 0 0 1 .37933 1.28291 2.13665 2.13665 0 0 1 -.24491 1.04767 2.05831 2.05831 0 0 1 -.65955.72215 2.95712 2.95712 0 0 1 -.94432.41469 4.42311 4.42311 0 0 1 -1.09014.13457h-4.03587v-8zm-.23352 3.23819a1.35217 1.35217 0 0 0 .80535-.22431.83167.83167 0 0 0 .3144-.72817.89181.89181 0 0 0 -.1048-.459.75208.75208 0 0 0 -.27909-.28011 1.2235 1.2235 0 0 0 -.40324-.14 2.75738 2.75738 0 0 0 -.47159-.03939h-1.71551v1.871zm.10593 3.39465a2.50985 2.50985 0 0 0 .51261-.05033 1.28994 1.28994 0 0 0 .43172-.168.85959.85959 0 0 0 .29731-.31949 1.05918 1.05918 0 0 0 .11052-.51532 1.01659 1.01659 0 0 0 -.3611-.87916 1.59077 1.59077 0 0 0 -.9569-.26369h-1.99457v2.196z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#00843d\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><path fill=\\\"#fff\\\" d=\\\"m9.91236 6.22237a1.685 1.685 0 0 0 -.37441-.423 1.75365 1.75365 0 0 0 -1.10334-.3859 1.96325 1.96325 0 0 0 -.9632.21962 1.8196 1.8196 0 0 0 -.64318.58932 2.59 2.59 0 0 0 -.35871.84031 4.22351 4.22351 0 0 0 -.1119.97471 3.92818 3.92818 0 0 0 .1119.937 2.536 2.536 0 0 0 .35871.8194 1.83829 1.83829 0 0 0 .64318.58357 1.95744 1.95744 0 0 0 .9632.21962 1.55383 1.55383 0 0 0 1.20479-.47114 2.17357 2.17357 0 0 0 .53023-1.24243h1.62837a3.87815 3.87815 0 0 1 -.33257 1.29577 3.08815 3.08815 0 0 1 -.707.98516 2.99838 2.99838 0 0 1 -1.02805.62122 3.76351 3.76351 0 0 1 -1.29577.2144 3.92217 3.92217 0 0 1 -1.57918-.30538 3.393 3.393 0 0 1 -1.18387-.84084 3.71981 3.71981 0 0 1 -.73835-1.25812 4.61521 4.61521 0 0 1 -.25727-1.55827 4.77251 4.77251 0 0 1 .25727-1.59017 3.83132 3.83132 0 0 1 .73835-1.28008 3.3914 3.3914 0 0 1 1.18387-.85653 3.86194 3.86194 0 0 1 1.57918-.31061 3.853 3.853 0 0 1 1.19433.182 3.25411 3.25411 0 0 1 1.00712.53023 2.86159 2.86159 0 0 1 .73312.86228 3.08969 3.08969 0 0 1 .36395 1.1776h-1.6273a1.37793 1.37793 0 0 0 -.19347-.52974z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#00843d\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><path fill=\\\"#fff\\\" d=\\\"m7.90973 4a4.12016 4.12016 0 0 1 1.43992.24673 3.12441 3.12441 0 0 1 1.15435.73966 3.404 3.404 0 0 1 .76154 1.232 4.96822 4.96822 0 0 1 .27464 1.737 5.52384 5.52384 0 0 1 -.22431 1.61335 3.55236 3.55236 0 0 1 -.67729 1.27744 3.1858 3.1858 0 0 1 -1.13137.84579 3.8368 3.8368 0 0 1 -1.59748.30803h-3.44991v-8zm-.12255 6.52123a2.252 2.252 0 0 0 .73966-.12364 1.62238 1.62238 0 0 0 .6379-.40867 2.04332 2.04332 0 0 0 .44861-.74513 3.28738 3.28738 0 0 0 .1685-1.12042 4.64682 4.64682 0 0 0 -.11817-1.09253 2.18483 2.18483 0 0 0 -.38624-.83484 1.7182 1.7182 0 0 0 -.71121-.53176 2.83742 2.83742 0 0 0 -1.09307-.18492h-1.255v5.04192z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#00843d\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><path fill=\\\"#fff\\\" d=\\\"m11.18354 4v1.47931h-4.22454v1.714h3.8766v1.36718h-3.8766v1.96074h4.3143v1.47877h-6.07266v-8z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#00843d\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m6.083 11.53381a2.63844 2.63844 0 0 1 -1.03434.21619 3.67706 3.67706 0 0 1 -1.48049-.28629 3.18108 3.18108 0 0 1 -1.10987-.78829 3.48761 3.48761 0 0 1 -.69221-1.17949 4.327 4.327 0 0 1 -.24119-1.46088 4.47445 4.47445 0 0 1 .24119-1.49078 3.59212 3.59212 0 0 1 .69221-1.20008 3.17958 3.17958 0 0 1 1.10987-.803 3.62061 3.62061 0 0 1 1.48049-.29119 3.48952 3.48952 0 0 1 1.06968.1657 3.037 3.037 0 0 1 .93339.48679 2.63108 2.63108 0 0 1 1.01968 1.87758h-1.506a1.5098 1.5098 0 0 0 -.54219-.90349 1.57786 1.57786 0 0 0 -.97458-.30149 1.84057 1.84057 0 0 0 -.903.20589 1.70591 1.70591 0 0 0 -.603.55249 2.42823 2.42823 0 0 0 -.3363.7878 3.95986 3.95986 0 0 0 -.1049.91378 3.68309 3.68309 0 0 0 .1049.87849 2.37769 2.37769 0 0 0 .3363.76819 1.72339 1.72339 0 0 0 .603.54709 1.83509 1.83509 0 0 0 .903.2059 1.711 1.711 0 0 0 1.20989-.3966 1.72506 1.72506 0 0 0 .49709-1.14958h-1.58636v-1.17454h3.012v3.87526h-1.004l-.16079-.81329a2.3565 2.3565 0 0 1 -.93347.75784z\\\"></path><path d=\\\"m11.03239 4.4206v5.84352h3.49434v1.32509h-5.06994v-7.16861z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 9 9\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M5 4V1.5a.5.5 0 0 0-1 0v3a.498.498 0 0 0 .5.5h2a.5.5 0 0 0 0-1H5zm-.5 5a4.5 4.5 0 1 1 0-9 4.5 4.5 0 0 1 0 9z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#da291c\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><path fill=\\\"#fff\\\" d=\\\"m6.16836 4 1.871 5.50147h.02188l1.7704-5.50147h2.47609v8h-1.64673v-5.66942h-.023l-1.96071 5.66942h-1.35567l-1.96075-5.61308h-.02187v5.61308h-1.64673v-8z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#ffc72c\\\" d=\\\"m8.03494 0a8.04088 8.04088 0 0 0 -8 8 8 8 0 1 0 8-8\\\"></path><path fill=\\\"#1c1e23\\\" d=\\\"m12.55163 6.95515-.43927-3.29782c-.11487-.59469-.50684-.83119-1.088-1.07447a9.94811 9.94811 0 0 0 -2.99371-.52036 9.94139 9.94139 0 0 0 -2.98694.52036c-.57444.24328-.97312.47978-1.09476 1.07447l-.43251 3.29782v4.55476h.80756v.77716a.56688.56688 0 0 0 .29735.48655c.04054.02029.08109.04054.11487.05407a.689.689 0 0 0 .09462.027.57561.57561 0 0 0 .15546.02029h.2297a.63557.63557 0 0 0 .669-.58793v-.77716h4.363v.77716a.56686.56686 0 0 0 .29735.48655c.04054.02029.08109.04054.11487.05407a.689.689 0 0 0 .09462.027.57561.57561 0 0 0 .15546.02029h.22974a.63556.63556 0 0 0 .669-.58793v-.77716h.74252zm-6.64292-3.93953h4.25065c.20273 0 .37167.23083.37167.50782s-.16894.50781-.37167.50781h-4.25065c-.20272 0-.37167-.23083-.37167-.50781s.16896-.50782.37167-.50782zm-1.03959 4.55438.3006-2.33388a.31412.31412 0 0 1 .32228-.26712h5.12466a.31832.31832 0 0 1 .32226.26712l.34393 2.33388v.10421a.32557.32557 0 0 1 -.3223.32579h-5.7811a.3317.3317 0 0 1 -.31033-.3388.23335.23335 0 0 1 0-.0912zm.6465 2.75347a.82854.82854 0 1 1 -.03709-1.65432.83107.83107 0 1 1 .03709 1.65432zm5.01541 0a.82854.82854 0 1 1 -.03709-1.65432.83107.83107 0 1 1 .03709 1.65432z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#80276c\\\" d=\\\"m6.19 11.91998h3.63v1h-3.63z\\\" transform=\\\"matrix(.99919448 .0401297 -.0401297 .99919448 .50486 -.31123)\\\"></path><path fill=\\\"#80276c\\\" d=\\\"m8 0a8.02127 8.02127 0 0 0 -7.65785 10.376 7.78359 7.78359 0 0 0 5.28185 5.28185 8.008 8.008 0 1 0 2.376-15.65785\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m10.33 11.75 1.15-.85a1.46975 1.46975 0 0 0 .52-.84v-4.82a.88891.88891 0 0 0 -.3-.66.79321.79321 0 0 1 -.31-.6l-.01-1.19a.81979.81979 0 0 0 -.65-.79 20.91806 20.91806 0 0 0 -2.5-.52 1.06538 1.06538 0 0 0 -.47 0c-.7.15-1.55.3-2.24.48-.42.12-.85.35-.85.85v1.18a.80288.80288 0 0 1 -.33.61.851.851 0 0 0 -.31.66v4.8a1.40971 1.40971 0 0 0 .48.84l1.1.81-1.74 2.84h1.13l.24-.39h5.53l.13.22.02.03.08.14h1.05zm.95-2.3a.73.73 0 1 1 -.73-.73.72767.72767 0 0 1 .73.73zm-1.44 3.15h-3.65l.41-.68h2.84l.03.06.35.58zm-1.14-9.65a.24471.24471 0 0 1 .3-.24l1.21.25a.25351.25351 0 0 1 .2.24v.73a.24955.24955 0 0 1 -.3.24l-1.21-.24a.23758.23758 0 0 1 -.2-.24zm-.72 2.26a.82.82 0 1 1 -.82.82.82371.82371 0 0 1 .82-.82zm-2.32-2.01a.25358.25358 0 0 1 .2-.24l1.21-.25a.24868.24868 0 0 1 .3.24v.74a.24683.24683 0 0 1 -.2.24l-1.22.24a.24554.24554 0 0 1 -.29-.24zm-.2 6.98a.73.73 0 1 1 .73-.73.72767.72767 0 0 1 -.73.73zm0 3.61.5-.82h4.1l.49.82z\\\"></path><path d=\\\"m11 14.55h-.01l-.07-.14z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#008eaa\\\" d=\\\"m14.14 13.11v-2.78h-1.54v4.21a.00976.00976 0 0 1 -.00995.01 7.96744 7.96744 0 0 1 -9.18005-.01c-.07995-.06-.16-.11-.24-.18l-1.53-1.52a7.91568 7.91568 0 0 1 -1.64-4.84 8 8 0 0 1 16 0 7.8954 7.8954 0 0 1 -1.86 5.11z\\\"></path><path fill=\\\"#008eaa\\\" d=\\\"m14.14 10.33v2.78a2.33839 2.33839 0 0 1 -.29.35 7.5757 7.5757 0 0 1 -1.25 1.08v-4.21z\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m12.6 13.07v1.1a.81712.81712 0 0 1 -.19-.09 1.08477 1.08477 0 0 0 -1.15-.03 1.327 1.327 0 0 1 -1.36.03 1.1128 1.1128 0 0 0 -1.19-.04 1.457 1.457 0 0 1 -1.43 0 1.09284 1.09284 0 0 0 -1.19.04 1.30468 1.30468 0 0 1 -1.36-.04 1.12472 1.12472 0 0 0 -1.16.04.25063.25063 0 0 0 -.07.04v-1.09a.07583.07583 0 0 0 .04-.02 1.22855 1.22855 0 0 1 1.4.08 1.37912 1.37912 0 0 0 1.19-.07 1.18568 1.18568 0 0 1 1.29.04 1.31353 1.31353 0 0 0 1.16 0 1.186 1.186 0 0 1 1.29-.04 1.38316 1.38316 0 0 0 1.19.07 1.24661 1.24661 0 0 1 1.4-.08.351.351 0 0 0 .14.06z\\\"></path><path d=\\\"m11.06 10.98a.87762.87762 0 0 1 -.15.05 3.51709 3.51709 0 0 1 -.16-1.49 10.81375 10.81375 0 0 1 1.85-2.66l-.6-.24v-3.64h-1v-1h-1.99v.01h-.01v-.01h.01v-.99h-2v.99h-2.01v1h-1v3.64l-.59.24a10.46678 10.46678 0 0 1 1.83 2.64 3.75072 3.75072 0 0 1 -.15 1.5.41845.41845 0 0 1 -.15-.04 1.2264 1.2264 0 0 0 -1.4-.07c-.00995.01-.03.01-.04.02v1.08c.02-.01.05-.03.07-.04a1.10228 1.10228 0 0 1 1.16-.03 1.32675 1.32675 0 0 0 1.36.03 1.09231 1.09231 0 0 1 1.19-.03 1.457 1.457 0 0 0 1.43 0 1.09273 1.09273 0 0 1 1.19.04 1.32768 1.32768 0 0 0 1.36-.04 1.12876 1.12876 0 0 1 1.15.03 1.73655 1.73655 0 0 0 .19.1v-1.1a.4229.4229 0 0 1 -.14-.06 1.26247 1.26247 0 0 0 -1.4.07zm-3.06-8.98h.01v.01h-.01zm2.01 3.84v-.84h-1.01v-1h-2v1h-1v.84l-1 .4v-2.24h1v-1h4v1h1v2.24z\\\"></path><path d=\\\"m8 2h.01001v.01001h-.01001z\\\"></path><path d=\\\"m9 2h.01001v.01001h-.01001z\\\"></path><path d=\\\"m8 2h.01001v.01001h-.01001z\\\"></path><path d=\\\"m9 2h.01001v.01001h-.01001z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#494f5b\\\" d=\\\"m24 0a24 24 0 1 0 24 24 24 24 0 0 0 -24-24\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m25.8889 5.8222a1.4111 1.4111 0 1 0 -1.4111-1.4111 1.411 1.411 0 0 0 1.4111 1.4111z\\\"></path><path d=\\\"m31.4555 34.2111a4.9779 4.9779 0 0 0 3.889-4.8222v-18.1445a5.0112 5.0112 0 0 0 -5.0778-4.9111h-12.5333a5.0112 5.0112 0 0 0 -5.1 4.9v18.1556a4.9779 4.9779 0 0 0 3.8889 4.8222l-5.8556 8.7889h3.4l4.1889-6.1445h11.5555l4.1889 6.1445h3.3333zm-10.7555-25.9889a.8445.8445 0 0 1 .8445-.8111h4.9555a.8444.8444 0 0 1 .8333.8111v1.4445l-.0006.0339a.8334.8334 0 0 1 -.866.7994l-4.9222-.0111a.8333.8333 0 0 1 -.8445-.8222zm-3.1111 23.3334a2.2223 2.2223 0 1 1 2.2222-2.2223 2.2223 2.2223 0 0 1 -2.2222 2.2223zm.2889-11.8112c-.0758.0036-.1518.0036-.2276 0a2.4221 2.4221 0 0 1 -2.3057-2.5333v-3.2667a2.4109 2.4109 0 0 1 2.5333-2.5444h12.2222a2.4113 2.4113 0 0 1 2.5333 2.5444v3.2667q.0054.1137 0 .2276a2.4221 2.4221 0 0 1 -2.5333 2.3057zm12.4333 11.8112a2.2334 2.2334 0 1 1 .0223 0z\\\"></path><path d=\\\"m22.1445 5.8222h-.0334.0337a1.4113 1.4113 0 1 0 -1.4115-1.4115 1.4111 1.4111 0 0 0 1.4115 1.4119z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#ed8b00\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m1.81834 6.54427a3.5921 3.5921 0 0 1 .6922-1.20008 3.17962 3.17962 0 0 1 1.10988-.803 3.62054 3.62054 0 0 1 1.48049-.29119 3.61289 3.61289 0 0 1 1.48637.2912 3.17488 3.17488 0 0 1 1.104.803 3.59428 3.59428 0 0 1 .69319 1.20008 4.47445 4.47445 0 0 1 .24119 1.49078 4.327 4.327 0 0 1 -.24119 1.46088 3.48977 3.48977 0 0 1 -.69319 1.17949 3.176 3.176 0 0 1 -1.104.78829 3.66921 3.66921 0 0 1 -1.48637.28628 3.677 3.677 0 0 1 -1.48049-.28629 3.18112 3.18112 0 0 1 -1.10988-.78829 3.48759 3.48759 0 0 1 -.6922-1.17949 4.327 4.327 0 0 1 -.24119-1.46088 4.47445 4.47445 0 0 1 .24119-1.49078zm1.44029 2.36927a2.37747 2.37747 0 0 0 .3363.76819 1.72331 1.72331 0 0 0 .603.54709 1.835 1.835 0 0 0 .903.2059 1.84164 1.84164 0 0 0 .904-.2059 1.72881 1.72881 0 0 0 .602-.54709 2.35675 2.35675 0 0 0 .3363-.76819 3.63424 3.63424 0 0 0 .10588-.87849 3.90728 3.90728 0 0 0 -.10588-.91378 2.40722 2.40722 0 0 0 -.3363-.7878 1.7112 1.7112 0 0 0 -.602-.55249 1.84715 1.84715 0 0 0 -.904-.20589 1.84052 1.84052 0 0 0 -.903.20589 1.70583 1.70583 0 0 0 -.603.55249 2.428 2.428 0 0 0 -.3363.7878 3.95986 3.95986 0 0 0 -.10491.91378 3.6831 3.6831 0 0 0 .10491.87849z\\\"></path><path d=\\\"m11.27582 4.4206v5.84352h3.49435v1.32509h-5.06994v-7.16861z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path d=\\\"m40.82 11.75-11.11-11.12a2.18 2.18 0 0 0 -1.52-.63h-17.64a4 4 0 0 0 -4 4v40a4 4 0 0 0 4 4h26.9a4 4 0 0 0 4-4v-30.73a2.12 2.12 0 0 0 -.63-1.52zm-11.74-7.28 7.92 7.91h-6.94a1 1 0 0 1 -1-1zm9.37 39.53a1 1 0 0 1 -1 1h-26.9a1 1 0 0 1 -1-1v-40a1 1 0 0 1 1-1h15.53v8.39a4 4 0 0 0 4 4h8.39z\\\"></path><path d=\\\"m16.31 21.05h-3.7v8.64h1.79v-3.11h1.8a3.27 3.27 0 0 0 2.16-.58 2.66 2.66 0 0 0 .76-2.16 2.59 2.59 0 0 0 -.76-2.07 3 3 0 0 0 -2.05-.72zm.69 3.73a1.37 1.37 0 0 1 -1 .31h-1.6v-2.54h1.6a1.47 1.47 0 0 1 1 .29 1.21 1.21 0 0 1 .34 1 1.28 1.28 0 0 1 -.34.94z\\\"></path><path d=\\\"m27.1 22.33a2.81 2.81 0 0 0 -1.47-1.09 4.54 4.54 0 0 0 -1.34-.19h-3.72v8.64h3.72a3.13 3.13 0 0 0 2.9-1.61 5.76 5.76 0 0 0 .69-2.92 6.6 6.6 0 0 0 -.16-1.43 3.91 3.91 0 0 0 -.62-1.4zm-1.33 4.6a1.79 1.79 0 0 1 -1.77 1.26h-1.68v-5.64h1.68a1.73 1.73 0 0 1 1.64.71 4 4 0 0 1 .42 2 4.32 4.32 0 0 1 -.29 1.67z\\\"></path><path d=\\\"m29.23 29.69h1.8v-3.62h3.82v-1.5h-3.82v-1.99h4.36v-1.52h-6.16z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#da291c\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m6.01545 4.25a2.39689 2.39689 0 0 1 .90832.16341 2.09735 2.09735 0 0 1 .694.44567 1.9348 1.9348 0 0 1 .44036.65684 2.09816 2.09816 0 0 1 .1528.80327 2.26208 2.26208 0 0 1 -.278 1.14494 1.74718 1.74718 0 0 1 -.90938.73536v.02122a1.26481 1.26481 0 0 1 .504.25679 1.42114 1.42114 0 0 1 .32576.4096 1.91173 1.91173 0 0 1 .18358.51995 4.56343 4.56343 0 0 1 .07958.5677c.00637.11884.0138.25891.02122.4202.00637.16129.01911.32576.03608.49342a3.41227 3.41227 0 0 0 .08383.4775 1.113 1.113 0 0 0 .174.38413h-1.649a2.91366 2.91366 0 0 1 -.16871-.851c-.02123-.329-.052-.6441-.09444-.94546a1.4991 1.4991 0 0 0 -.35645-.86165 1.2331 1.2331 0 0 0 -.89346-.2727h-1.64904v2.93081h-1.649v-7.5zm-.58786 3.3924a1.24739 1.24739 0 0 0 .85-.25148 1.04463 1.04463 0 0 0 .28438-.81919.99843.99843 0 0 0 -.28442-.79373 1.26393 1.26393 0 0 0 -.85-.24618h-1.80705v2.11058z\\\"></path><path d=\\\"m11.20433 4.25v6.11312h3.65556v1.38688h-5.30454v-7.5z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><g fill=\\\"none\\\"><path d=\\\"m36.65 32.47h6.09v6.8h-6.09z\\\"></path><path d=\\\"m28.53 23.41h6.77v7.55h-6.77z\\\"></path><path d=\\\"m35.3 11.33h1.35a.75.75 0 0 0 .68-.76v-6.79a.74.74 0 0 0 -.68-.78h-1.35a.74.74 0 0 0 -.68.76v6.79a.75.75 0 0 0 .68.78z\\\"></path><path d=\\\"m36.65 15.1h6.09v6.8h-6.09z\\\"></path><path d=\\\"m36.65 23.41h6.09v7.55h-6.09z\\\"></path><path d=\\\"m20.41 23.41h6.77v7.55h-6.77z\\\"></path><path d=\\\"m21.55 39.26h5.63v-6.79h-6.51a10.82 10.82 0 0 1 .88 6.79z\\\"></path><path d=\\\"m19.05 30v-6.59h-6.05v3.13a10.82 10.82 0 0 1 6.05 3.46z\\\"></path><path d=\\\"m28.53 32.47h6.77v6.8h-6.77z\\\"></path><path d=\\\"m28.53 15.1h6.77v6.8h-6.77z\\\"></path><path d=\\\"m12.96 15.1h6.09v6.8h-6.09z\\\"></path><path d=\\\"m19.05 11.33h1.36a.74.74 0 0 0 .67-.76v-6.79a.73.73 0 0 0 -.67-.78h-1.36a.73.73 0 0 0 -.67.76v6.79a.74.74 0 0 0 .67.78z\\\"></path><path d=\\\"m20.41 15.1h6.77v6.8h-6.77z\\\"></path></g><path fill=\\\"#165c96\\\" d=\\\"m42.75 6h-2.75v-2.22a3.61 3.61 0 0 0 -3.35-3.78h-1.35a3.61 3.61 0 0 0 -3.38 3.78v2.22h-8.13v-2.22a3.61 3.61 0 0 0 -3.38-3.78h-1.36a3.61 3.61 0 0 0 -3.38 3.78v2.22h-2.67a2.9 2.9 0 0 0 -2.71 3v17.38a10.82 10.82 0 1 0 2 21.54 11 11 0 0 0 8.21-5.63h22.25a2.9 2.9 0 0 0 2.71-3v-30.23a2.9 2.9 0 0 0 -2.71-3.06zm-24.45 33.26a7.64 7.64 0 0 1 -1.67 3 7.67 7.67 0 1 1 1.67-3zm.75-9.26a10.82 10.82 0 0 0 -6.05-3.46v-3.13h6.09zm0-8.13h-6.05v-6.77h6.09zm-.67-11.33v-6.76a.73.73 0 0 1 .67-.78h1.36a.73.73 0 0 1 .67.76v6.79a.74.74 0 0 1 -.67.76h-1.36a.74.74 0 0 1 -.67-.74zm8.8 28.69h-5.63a10.82 10.82 0 0 0 -.88-6.79h6.51zm0-8.3h-6.77v-7.52h6.77zm0-9.06h-6.77v-6.77h6.77zm8.12 17.39h-6.77v-6.79h6.77zm0-8.3h-6.77v-7.55h6.77zm0-9.06h-6.77v-6.8h6.77zm-.68-11.33v-6.79a.74.74 0 0 1 .68-.78h1.35a.74.74 0 0 1 .68.76v6.79a.75.75 0 0 1 -.68.76h-1.35a.75.75 0 0 1 -.68-.74zm8.13 28.69h-6.1v-6.79h6.1zm0-8.3h-6.1v-7.55h6.1zm0-9.06h-6.1v-6.8h6.1z\\\"></path><path fill=\\\"#165c96\\\" d=\\\"m12.28 31.76h-.9a.45.45 0 0 0 -.45.45v5h-3.16a.45.45 0 0 0 -.45.45v.91a.45.45 0 0 0 .45.45h4.51a.44.44 0 0 0 .45-.45v-6.36a.44.44 0 0 0 -.45-.45z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#fff\\\" d=\\\"m27.92 1.0025a19.07 19.07 0 1 1 -10.8513 34.7012l-10.315 10.2951a3.3658 3.3658 0 0 1 -4.77-4.75l10.315-10.315a18.899 18.899 0 0 1 -3.4387-10.8715 19.1146 19.1146 0 0 1 19.06-19.0598zm0 6.7176a12.3422 12.3422 0 1 0 12.3425 12.3422 12.2866 12.2866 0 0 0 -12.3425-12.3423z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#1c1e23\\\" d=\\\"m42.94908 21.61-1.84056-14.63c-.46772-2.64-2.115-3.67-4.56567-4.75a39.04369 39.04369 0 0 0 -12.52764-2.32 39.21741 39.21741 0 0 0 -12.54795 2.32c-2.42011 1.06-4.06741 2.11-4.56566 4.75l-1.85068 14.63v20.24h3.24885v3.525a2.65516 2.65516 0 0 0 2.66923 2.625 2.65522 2.65522 0 0 0 2.66925-2.625v-3.525h20.82007v3.525a2.66961 2.66961 0 0 0 5.33848 0v-3.525h3.15228zm-26.73308-18h15.65953a1.18036 1.18036 0 1 1 0 2.36h-15.65953a1.18015 1.18015 0 1 1 0-2.36zm-7.7993 17.57 1.5253-11.55a1.52367 1.52367 0 0 1 1.52528-1.25h25.28913a1.513 1.513 0 0 1 1.51511 1.25l1.52528 11.55a1.31759 1.31759 0 0 1 0 .4v.08a1.49613 1.49613 0 0 1 -1.52528 1.49h-28.40072a1.50954 1.50954 0 0 1 -1.4541-1.57 1.31759 1.31759 0 0 1 0-.4zm2.5523 14.41a2.79533 2.79533 0 1 1 2.837-2.8 2.817 2.817 0 0 1 -2.837 2.8zm26.15346 0a2.79549 2.79549 0 1 1 2.84718-2.8 2.817 2.817 0 0 1 -2.84717 2.8z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#1c1e23\\\" d=\\\"m14.2452 6.9551-.4392-3.2978c-.1149-.5947-.5069-.8312-1.088-1.0744a9.9485 9.9485 0 0 0 -2.9937-.52 9.9418 9.9418 0 0 0 -2.987.52c-.5744.2432-.9731.48-1.0947 1.0744l-.4326 3.2978v4.5549h.8075v.7772a.5668.5668 0 0 0 .2974.4865c.04.02.0811.0406.1148.0541a.69.69 0 0 0 .0947.027.5762.5762 0 0 0 .1554.02h.23a.6356.6356 0 0 0 .669-.5879v-.7769h4.363v.7772a.5667.5667 0 0 0 .2973.4865c.0406.02.0811.0406.1149.0541a.6885.6885 0 0 0 .0946.027.5769.5769 0 0 0 .1555.02h.23a.6356.6356 0 0 0 .669-.5879v-.7769h.7425zm-6.6429-3.9395h4.2507c.2027 0 .3716.2309.3716.5078s-.1689.5078-.3716.5078h-4.2507c-.2027 0-.3716-.2308-.3716-.5078s.1693-.5078.3716-.5078zm-1.0396 4.5544.3006-2.3339a.3143.3143 0 0 1 .3223-.2671h5.1244a.3183.3183 0 0 1 .3222.2671l.344 2.3339v.1042a.3256.3256 0 0 1 -.322.3258h-5.7811a.3318.3318 0 0 1 -.31-.3388.2326.2326 0 0 1 -.0004-.0912zm.6465 2.7535a.8285.8285 0 1 1 -.0371-1.6543.8311.8311 0 1 1 .0371 1.6543zm5.0154 0a.8285.8285 0 1 1 -.037-1.6543.8311.8311 0 1 1 .037 1.6543z\\\"></path><path fill=\\\"#7c878e\\\" d=\\\"m8.0009 0a8.0405 8.0405 0 0 0 -7.9991 8 7.9991 7.9991 0 1 0 7.9991-8\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m3.6379 9.8223a1.14 1.14 0 0 0 .3465.4066 1.4926 1.4926 0 0 0 .5068.2309 2.3973 2.3973 0 0 0 .6027.0753 3.1157 3.1157 0 0 0 .4516-.0351 1.5712 1.5712 0 0 0 .4519-.1354.9923.9923 0 0 0 .3515-.2762.6942.6942 0 0 0 .14-.4468.6287.6287 0 0 0 -.1854-.4716 1.4719 1.4719 0 0 0 -.4868-.3012 4.88 4.88 0 0 0 -.6827-.211q-.3819-.09-.7733-.2007a6.8 6.8 0 0 1 -.7829-.246 2.688 2.688 0 0 1 -.683-.3764 1.7749 1.7749 0 0 1 -.4868-.5777 1.7528 1.7528 0 0 1 -.1857-.8383 1.8759 1.8759 0 0 1 .2359-.9587 2.1364 2.1364 0 0 1 .6174-.6776 2.69 2.69 0 0 1 .8634-.4017 3.6837 3.6837 0 0 1 .964-.13 4.5682 4.5682 0 0 1 1.0791.1255 2.6987 2.6987 0 0 1 .9189.4067 2.0622 2.0622 0 0 1 .6376.7171 2.2036 2.2036 0 0 1 .2359 1.0593h-1.5261a1.2706 1.2706 0 0 0 -.1358-.5321.8879.8879 0 0 0 -.3061-.3314 1.2971 1.2971 0 0 0 -.4365-.1707 2.6957 2.6957 0 0 0 -.5371-.05 1.86 1.86 0 0 0 -.3818.04 1.0222 1.0222 0 0 0 -.3462.14.8675.8675 0 0 0 -.2561.2511.6746.6746 0 0 0 -.1.3815.6437.6437 0 0 0 .08.3413.7137.7137 0 0 0 .3162.241 4.0247 4.0247 0 0 0 .6527.2209q.4164.1105 1.0892.2811.2008.04.5574.1455a2.6774 2.6774 0 0 1 .7077.3365 2.1409 2.1409 0 0 1 .6073.6174 1.7574 1.7574 0 0 1 .2562.9889 2.1911 2.1911 0 0 1 -.1909.9136 1.9859 1.9859 0 0 1 -.5672.728 2.7248 2.7248 0 0 1 -.9336.4768 4.4152 4.4152 0 0 1 -1.29.1708 4.5312 4.5312 0 0 1 -1.15-.1457 2.887 2.887 0 0 1 -.9838-.4563 2.2529 2.2529 0 0 1 -.6778-.7931 2.3668 2.3668 0 0 1 -.241-1.1444h1.5261a1.3138 1.3138 0 0 0 .1306.6123z\\\"></path><path d=\\\"m10.5254 4.4207v5.8433h3.4938v1.3253h-5.0702v-7.1686z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#1c1e23\\\" d=\\\"m20.27 16.87-6.54-3.81-1.56-5.86a1 1 0 0 0 -1.17-.7l-5.08 1.37a1 1 0 0 0 -.69 1.21l1 3.95-3.89 1.06a1 1 0 0 0 -.69 1.22l1.35 5.09a1 1 0 0 0 1.2.7l6.12-1.66 6.35 3.7-5.78 3.37-7.19-1.94a1 1 0 0 0 -1.2.7l-1.35 5.09a1 1 0 0 0 .69 1.21l4.44 1.2-1.22 4.6a1 1 0 0 0 .69 1.21l5.05 1.42a1 1 0 0 0 1.2-.7l1.58-5.94 6.69-3.89v7.71l-5.33 5.32a1 1 0 0 0 0 1.4l3.7 3.73a1 1 0 0 0 1.39 0l3.58-3.63 3.67 3.7a1 1 0 0 0 1.39 0l3.7-3.7a1 1 0 0 0 0-1.39l-4.92-5v-8.19l7.29 4.24 1.49 5.59a1 1 0 0 0 1.2.7l5-1.37a1 1 0 0 0 .7-1.21l-1.24-4.66 4.23-1.14a1 1 0 0 0 .7-1.21l-1.32-5.09a1 1 0 0 0 -1.2-.7l-7.38 2-5.87-3.42 6.63-3.86 6.73 1.82a1 1 0 0 0 1.2-.7l1.39-5.1a1 1 0 0 0 -.7-1.22l-4-1.07 1.05-3.94a1 1 0 0 0 -.69-1.21l-5-1.37a1 1 0 0 0 -1.2.7l-1.46 5.27-7.55 4.4v-6.17l4.92-4.95a1 1 0 0 0 0-1.4l-3.7-3.72a1 1 0 0 0 -1.39 0l-3.52 3.55-3.76-3.77a1 1 0 0 0 -1.39 0l-3.7 3.73a1 1 0 0 0 0 1.39l5.33 5.37z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#fff\\\" d=\\\"m42.88 45.83a2.1 2.1 0 0 1 -.87-.19l-15.92-7.17a5.23 5.23 0 0 0 -2.09-.47 5.14 5.14 0 0 0 -2.08.44l-15.92 7.2a2.1 2.1 0 0 1 -.87.19 2.14 2.14 0 0 1 -1.76-1 2 2 0 0 1 -.12-2l18.86-40.83a2.08 2.08 0 0 1 3.78 0l18.87 40.87a2 2 0 0 1 -.12 2 2.14 2.14 0 0 1 -1.76.96z\\\"></path><path d=\\\"m24 2.34a.55.55 0 0 1 .53.33l18.86 40.83a.49.49 0 0 1 0 .53.61.61 0 0 1 -.49.3.65.65 0 0 1 -.25-.06l-15.95-7.16a6.57 6.57 0 0 0 -5.4 0l-15.93 7.16a.65.65 0 0 1 -.25.06.61.61 0 0 1 -.49-.3.49.49 0 0 1 0-.53l18.84-40.83a.55.55 0 0 1 .53-.33m0-3a3.53 3.53 0 0 0 -3.25 2.07l-18.87 40.83a3.59 3.59 0 0 0 3.24 5.09 3.74 3.74 0 0 0 1.49-.33l15.92-7.17a3.64 3.64 0 0 1 2.94 0l15.92 7.17a3.74 3.74 0 0 0 1.49.32 3.59 3.59 0 0 0 3.24-5.09l-18.87-40.82a3.53 3.53 0 0 0 -3.25-2.07z\\\"></path></svg>\"","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 580;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t580: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunksite_dotcom\"] = globalThis[\"webpackChunksite_dotcom\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [216,514], () => (__webpack_require__(3767)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","exports","channelId","includes","joinChannel","handleJoin","window","socket","channels","channel","state","join","receive","_a","reason","console","error","errorEvent","CustomEvent","detail","document","dispatchEvent","event","log","isVehicleChannel","split","route_id","direction_id","push","on","data","onError","baseChannel","leaveChannel","id","off","leave","phoenix_1","onClose","type","wasClean","location","reload","connect","addEventListener","querySelectorAll","forEach","el","getAttribute","Object","keys","alertClassNames","expanded","priority","description","classNames","effect","icon_alerts_triangle_svg_1","icon_cancelled_default_svg_1","icon_snow_default_svg_1","icon_shuttle_default_svg_1","humanLifecycle","lifecycle","severity","alert","alertClasses","react_1","className","humanLabelForAlert","map","word","charAt","toUpperCase","slice","alertDescription","tabIndex","role","ref","panel","focus","dangerouslySetInnerHTML","__html","updated_at","useState","toggleExpanded","onClick","strippedAlertUrl","url","replace","headerContent","header","onKeyPress","e","handleReactEnterKeyPress","iconForAlert","effectNameForAlert","alertLabel","noDescription","caret","caretIcon","alerts","key","props","text","iconSvgText","classOverride","dispatch","notifyExpanded","initiallyExpanded","initiallyFocused","children","panelClassName","preventScroll","initialState","focused","action","payload","hookedState","headerId","panelId","iconHelper","render_svg_1","render_fa_1","classOverrideString","isString","textContent","pageType","stopId","glx_logo_svg_1","glxLogoElement","matchQuery","childNodes","setChildNodes","useEffect","matched","match","RegExp","precedingText","subsequentText","createElement","ModalContent","closeText","closeModal","ariaLabel","focusElementId","bodyPadding","scrollBarPadding","_b","asideRef","useRef","scrollRef","current","scrollTo","top","passive","removeEventListener","useLayoutEffect","trap","createFocusTrap","initialFocus","clickOutsideDeactivates","activate","bodyWrapper","getElementById","setAttribute","body","classList","add","style","paddingRight","remove","deactivate","createPortal","labelOrDescribedBy","onKeyDown","handleReactExitKeyPress","target","onClickAway","Modal","_c","_d","priorPadding","innerWidth","clientWidth","labelText","onChange","placeholder","query","setQuery","htmlFor","value","searchIcon","label","undefined","isLabel","elementId","route","toLowerCase","isABusRoute","isASilverLineRoute","isACommuterRailRoute","isAGreenLineRoute","routeToModeName","BOSTON_TIMEZONE","unformatted","part","Number","parseInt","year","month","day","Date","date","getFullYear","getMonth","getDate","stringToDateObject","toLocaleDateString","timeZone","timeStr1","timeStr2","today","dateFormatted","Intl","DateTimeFormat","format","fullDate1","fullDate2","timeInMs1","getTime","timeInMs2","comparison","dateTimeString","overrideFormat","dateTime","parseISO","formatString","getMinutes","formatInTimeZone","time","targetDate","seconds","differenceInSeconds","date_fns_1","Math","floor","formatToBostonTime","dateTime1","dateTime2","r","result","isFetchFailed","Error","_i","args","Promise","fetch","resp","ok","json","fetchJson","then","isLoading","icon_accessible_small_svg_1","icon_blue_line_default_svg_1","icon_mode_bus_small_svg_1","icon_mode_commuter_rail_small_svg_1","icon_mode_ferry_small_svg_1","icon_mode_subway_default_svg_1","icon_green_line_small_svg_1","icon_green_line_b_small_svg_1","icon_green_line_c_small_svg_1","icon_green_line_d_small_svg_1","icon_green_line_e_small_svg_1","icon_mattapan_line_small_svg_1","icon_orange_line_small_svg_1","icon_red_line_small_svg_1","icon_silver_line_small_svg_1","icon_vehicle_bordered_expanded_svg_1","icon_search_reverse_default_svg_1","icon_bike_svg_1","icon_escalator_svg_1","icon_elevator_svg_1","icon_fares_svg_1","routeId","startsWith","commuterRailIcon","ferryIcon","blueLineIcon","greenLineIcon","greenBLineIcon","greenCLineIcon","greenDLineIcon","greenELineIcon","mattapanLineIcon","orangeLineIcon","redLineIcon","silverLineIcon","busIcon","unicodeCharacter","defaultTooltipOptions","animation","html","placement","trigger","tooltipText","tooltipOptions","href","options","assign","Tag","icon_crowding_svg_1","cb","isEnter","keyCode","isEscape","delay","prediction","scheduledTime","scheduled_time","delayForCommuterRail","compareStringTimes","status","isSkippedOrCancelled","track","schedule_relationship","schedule","maxDifferenceInSeconds","svgName","ariaHide","svgText","stop","routes","length","reduce","acc","find","group_name","ServiceGroupNames","service1","service2","start_date","isInAddedDates","service","currentDate","added_dates","dateObjectToString","serviceStartDate","serviceEndDate","end_date","rating_start_date","ratingStartDate","rating_end_date","ratingEndDate","removed_dates","isInRemovedDates","currentDay","getDay","valid_days","isOnValidDay","isInCurrentRating","startDateObject","endDateObject","shortDate","areSimilarServices","lodash_1","every","p","isEqual","services","uniqWith","groupBy","typicality","HOLIDAY","OTHER","isInCurrentService","CURRENT","isInFutureRating","FUTURE","rating_description","optGroupOrder","serviceTypeOrder","weekday","saturday","sunday","other","serviceTypicalityOrder","canonical","unplanned_disruption","planned_disruption","holiday_service","extra_service","typical_service","unknown","type1","validDays1","typicality1","date1","type2","validDays2","typicality2","date2","groupA","groupB","optGroupNames","values","a","name","b","filter","dayIntegerToString","daysAreConsecutive","days","nextDay","rest","validDays","stopTree","byId","edges","startingNodes","node","next","previous","nodeValue","nodeForId","nextEdges","edgesForId","previousEdges","nextStopIds","previousStopIds","pathsFrom","isEndNode","flatMap","nextId","ids","prependStopId","pathLength","stops","max","paths","longestLength","longestPathLength","path","longestPath","len","sliceSets","__spreadArray","Array","Set","recordIdPositionsMovingForward","index","recordIdPositionsMovingBackward","previousId","set","from","sliceSize","slices","sliceForId","some","isStartNode","str","spans","parts","cursor","span","offset","fn","latestTimeout","enqueue","useCallback","fn_","setTimeout","cancel","clearTimeout","go","FetchStatus","NotStarted","Loading","Data","parseJsonResponse","response","statusText","fetcher","parser","catch","useReducer","provider","deps","loading","setState","updateData","setStateIfSame","currentState","newestUpdateData","state_","reducer","initialData","onChannelData","EVENT_NAME","direction","initialDirection","currentDirection","setCurrentDirection","listener","hoursOfOperation","setHoursOfOperation","routeIdString","fetchJsonOrThrow","search","substring","isGlxOpen","glxOpenDate","setIsGlxOpen","stationId","glxStationsOpen","querySelector","dataset","stations","opening","isStationOpen","getIsGlxOpen","directionId","enabled","liveUrl","refreshInterval","markers","points","m","latLng","latitude","longitude","latLngBounds","maxZoom","minZoom","scrollWheelZoom","touchAction","memo","bounds","boundsByMarkers","defaultCenter","polylines","tileServerUrl","zoom","mapRef","createRef","leafletElement","invalidateSize","leaflet","require","buildIcon_1","getBounds","Map","Marker_1","Polyline_1","Popup_1","TileLayer","boundsOrByMarkers","position","mapCenter","nonNullZoom","center","attribution","onload","container","parentElement","polyline","random","positions","color","weight","dashArray","lineCap","lineJoin","uniqBy","marker","icon","icon_opts","alt","markerEl","angle","setRotationAngle","rotateMarker","zIndexOffset","z_index","keyboard","onclick","tooltip","maxHeight","react_2","iconAnchor","iconSize","popupAnchor","opts","iconOpts","icon_anchor","icon_size","popup_anchor","leaflet_1","iconUrl","iconRetinaUrl","effects","alertsForEffects","entities","stopAlerts","alertsByStop","alertsForRoute","activity","activities","hasEffect","hasStopClosure","hasStationClosure","entity","trip","explodedAlerts","informed_entity","innerAcc","mergeWith","objValue","srcValue","isArray","concat","alertsByDirectionObj","alertsByDirectionId","alertsAffectingBothDirectionsArray","alertsAffectingBothDirections","alertsDirectionArray","findIndex","isCurrentLifecycle","selectedDate","xDays","setHours","active_period","isInARange","ap","d","range","start","end","isValid","isDiversion","isInNextXDays","banner","facilityId","facility","facilities","facilityIds","numPredictions","isValidSuppressiveAlert","timeDataList","time_data","isCommuterRailRouteType","routeOrType","routeOrRouteId","routeTypesToMode","crowding","not_crowded","some_crowding","crowded","tagsToIcons","blue","icon_1","bus","commuterRail","ferry","green","mattapan","orange","red","silver","subway","tag","extraClasses","iconFunction","connections","pdfs","teasers","fares","holidays","fareLink","hours","scheduleNote","ContentTeasers_1","PDFSchedules_1","Connections_1","Fares_1","routeType","isSubwayRoute","HoursOfOperation_1","UpcomingHolidays_1","ExpandableBlock_1","RoutePillList_1","showGroupName","f","fare","title","price","getGreenLineScheduleLinks","isGreenLine","GreenLineScheduleLinks_1","isRapidTransit","RapidTransitHoursOfOperation_1","DefaultHoursOfOperation_1","updateMarker","vehicle_crowding","CrowdingPill_1","tooltip_text","isVehicleMarker","idHash","currentShapes","currentStops","stopMarkers","stop_markers","mark","mapData","shape","Map_1","pdf","rel","icon_pdf_default_svg_1","link","getSchedule","dataArray","bothDirectionData","filteredData","stopData","is_terminus","sortedData","sortBy","stop_name","firstDeparture","first_departure","lastDeparture","last_departure","timeString","uniqueId","regularScheduleHTML","trainsEveryHTML","minuteString","isTodayWeekend","isWeekend","hideScheduleFrequency","week","peak_service","saturday_service","borderBottomWidth","borderBottomColor","borderBottomStyle","marginBottom","sunday_service","currentRoutePatternIdForData","baseURL","stop_tree","route_stop_lists","fromStopTreeData","routeStopListsWithIndices","rs_list","rs","routeIndex","routeStopLists","routePatternsByDirection","staticMapData","initialStopTree","initialRouteStopLists","busVariantId","routePatternsInCurrentDirection","defaultRoutePattern","routePattern","reverseDirection","directionIsChangeable","direction_names","reducer_1","routePatternMenuOpen","routePatternMenuAll","itemFocus","fetch_1","mapState","dispatchMapData","shape_id","stop_ids","currentPatterns","pattern","shape_priority","cur","fetchMapData","lineState","dispatchLineData","fetchLineData","routeStopList","rsList","branch","ScheduleDirectionMenu_1","selectedRoutePatternId","menuOpen","showAllRoutePatterns","ScheduleDirectionButton_1","LineDiagram_1","src","img_src","pdf_url","updateURL","modalMode","selectedOrigin","changeDirection","changeOrigin","modalOpen","isFerryRoute","ScheduleFinderForm_1","onDirectionChange","onOriginChange","onOriginSelectClick","getCurrentState","storeHandler","newStoreValues","onSubmit","modalIsOpen","selectedDirection","stopsByDirection","ScheduleFinderModal_1","directionChanged","initialMode","initialOrigin","handleOriginSelectClick","originChanged","stopTreeData","by_id","starting_nodes","origin","component","schedulePageData","useQueryParams","use_query_params_1","newDirection","newOrigin","queryDirectionId","routeIsSuspended","readjustedDirectionId","toString","AdditionalLineInfo_1","ScheduleFinder_1","mapDataEl","JSON","parse","innerHTML","staticDataEl","ScheduleDirection_1","ScheduleStore_1","holiday","RoutePatternItem","routePatternIds","selected","duplicated","selectedClass","icon_checkmark_svg_1","handleClick","setRoutePatternAction","item","onKeyUp","headsign","time_desc","UncommonDestinationsItem","showAllRoutePatternsAction","icon_down_arrow_svg_1","hasMoreRoutePatterns","routePatterns","isDuplicateHeadsign","compareRoutePattern","filterRule","focusIndex","determineFocusIndex","toggleButtonIds","isMenuClickable","toggleRoutePatternMenuAction","linkClass","routePatternNameById","destinations","resolve","i","greenRoutes","direction_destinations","get","size","routeIds","greenRoute","toggleDirectionAction","icon_change_direction_svg_1","clickToClose","closest","closeRoutePatternMenuAction","keyToClose","handleNativeEscapeKeyPress","BusMenu_1","GreenLineMenu_1","indexOf","preventDefault","targetElId","shiftKey","nextIndex","currentId","nextRoutePatternIndex","nextElId","prevIndex","prevRoutePatternIndex","prevElId","updateDirectionAndVariantInURL","routePatternId","newLoc","updateInLocation","history","replaceState","pathname","nextDirection","possibleNextRoutePattern","defaultRoutePatternForDirection","element","dispatchChangedDirection","toggleDirection","toggleRoutePatternMenu","newRoutePattern","setRoutePattern","crowdingIcon","crowdingDescriptions","BranchToggle","stopIds","isExpanded","branchPosition","width","diagramWidth","stopForId","height","transform","graphic_helpers_1","rx","times","cx","cy","handleStopClick","liveData","setIsExpanded","updateAllStopCoords","useContext","LineDiagramWithStops_1","blockIsExpanded","StopCard_1","stationsOrStops","stopTreeCoordStore","createStopTreeCoordStore","filteredStops","newQuery","SearchBox_1","searchQuery","react_redux_1","store","createContext","stopsToTerminus","NextStopOrBranch","mergingInBranches","splittingOffBranches","splittingOffBranch","remainingSplittingOffBranches","branchStopIds","terminalStopId","nonTerminalStops","expandableBranch","ExpandableBranch_1","newMergingInBranches","newBranchesStartingInSlice","mergingBranch","remainingMergingInBranches","startingId","nonStartingStops","nextIds","primaryPath","partition","primary","branches","nextPrimaryAndBranches","newSplittingOffBranches","children_1","mergingInBranchesWithNext","lastStopId","stopRefsMap","anyCrowding","headsigns","prediction_1","Provider","Diagram_1","longestPathStartingId","routeStop","tooltipPlacement","isCommuterRail","crCrowdingDescriptions","hasLivePredictions","routeForStop","Alert","alertIcon","refs","routeStopIndex","isEnd","diversionAlert","alert_1","showDiversion","left","greenLineConnections","route_1","hasBranches","routeStopRoute","connectionsFor","paddingLeft","GlxOpen_1","hasBranchLabel","lineOrBranch","lineName","hasHighPriorityAlert","MatchHighlight_1","StopPredictions_1","hasUpcomingDeparturesIfSubway","filteredConnections","firstCRIndex","connection","firstFerryIndex","consolidated","connectingRoute","routeBgClass","modeIcon","stop_features","parkingIcon","isBusRouteStop","accessibleIcon","zone","predictions","liveHeadsigns","enhancedTimeData","time_data_with_crowding_list","predictedOrScheduledTime","predictionTimeClass","predicted_schedule","timeForCommuterRail","texts","train_number","statusForCommuterRail","predictionTexts","capitalize","LiveCrowdingIcon_1","CrowdingIconString","vehicle","renderToString","vehicles","coords","useSelector","x","y","tooltips","in_transit","incoming","stopped","vehicleArrowIcon","routeName","diagramDescription","names","hasBranchLines","largestSliceSize","LiveVehicleIconSet","isStart","vehicleData","VehicleIcons_1","xmlns","overflow","DiagonalHatchPattern","nextStop","Line_1","fromId","toId","Stop_1","isBranchingNode","branchingStopId","branchNames","branchingDescription","Merges_1","nextStopId","isOnPrimaryBranch","isMiddleBranchStop","isMergeNode","fromCoords","toCoords","y1","y2","strokeWidth","strokeProp","hasAnActiveDiversion","stroke","x1","x2","lineProps","notOnPrimaryPath","stopsToStart","mergeGaps","toStopId","fromStopId","mergeStopGaps","branchingGaps","branchingStopGaps","stopGaps","bends","lastStopOnBranch","trunkStop","trunkStopCoords","startingStopId","branchStopCoords","trunkX","trunkY","branchX","branchY","dx","abs","dy","arc","pathProps","mergeBends","firstStopOnBranch","terminusStopId","branchingBends","shuttle","allCoordinates","patternTransform","patternUnits","isRouteStopList","stopOrList","stopTreeOrList","initialCoordState","createStore","__REDUX_DEVTOOLS_EXTENSION__","dispatchStopCoords","useDispatch","updateAllStops","BRANCH_SPACING","coordinates","maxBranches","BASE_LINE_WIDTH","isOnPrimaryPath","stopBeforeMerging","stopAfterBranchingOff","slicePosition","sort","stopA","stopB","routeA","routeB","byBranch","stopAdjacentToMerge","lastStop","isDisabled","is_closed","handleChangeOrigin","originSearch","setOriginSearch","trim","cleanSearch","regExp","stopListSearchFilter","OriginListItem_1","directionInfo","directionNames","directionDestinations","originError","setOriginError","directionNameForId","icon_schedule_finder_svg_1","SelectContainer_1","dir","scheduleOrigin","originState","setOriginState","handleChangeDirection","directionDestination","s","getStopIdIfInDirection","originStop","Modal_1","OriginModalContent_1","originModalContent","ScheduleModalContent_1","departures","all","departure","res","tripInfo","input","useProvider","useAwaitInterval","serviceToday","DailyScheduleSubway_1","UpcomingDepartures_1","DailySchedule_1","colSpan","contentComponent","toggle","selectedService","isCurrent","SchedulesSelect","sortedServices","todayServiceId","defaultSelectedServiceId","todayDate","onSelectService","servicesByOptGroup","groupServicesByDateRating","defaultValue","service_1","group","groupedServices","ServiceOptGroup_1","multipleWeekdays","hasMultipleWeekdaySchedules","fetchState","currentServices","isCurrentValidService","defaultSelectedService","setSelectedService","getJourneysForSelectedService","fetchJourneys","isNotStarted","chosenService","Loading_1","ScheduleTable_1","journeys","getHoursByStop","bothDirectionHours","h","parent_stop_id","selectedSchedule","setSelectedSchedule","firstTrainHours","setFirstTrainHours","lastTrainHours","setLastTrainHours","stopLatLong","setStopLatLong","scheduleNoteText","setScheduleNoteText","originStopName","stopsInDirection","findStopName","destinationName","specialServices","addedDate","dateString","added_dates_notes","compareAsc","getSpecialServiceMaps","todaysSpecialService","isSameDay","getSpecialServiceByDate","isTodaySpecialService","isTodaySunday","isSunday","isTodaySaturday","isSaturday","isTodayAWeekday","specialServiceHours","special_service","RouteIcon_1","toLower","isToday","gap","isSchoolTrip","routePatternsById","accumulator","anySchoolTrips","firstTrip","lastTrip","scope","journey","TableRow_1","route_pattern_id","nowDate","dedupeServices","isMultipleWeekday","startDate","endDate","optionText","entries","entry","addedNote","serviceDays","tripId","BusTableRow","backgroundClass","RouteIcon","breakTextAtSlash","CrTableRow","Accordion","setExpanded","fetchTripInfo","AccordionRow_1","TripDetails_1","showFare","TripSummary","duration","fare_link","ErrorLoadingTrip","TripDetailsTable","allTimesHaveSchedule","TripStop_1","route_type","hasData","formattedDepartureTimes","hasAPrediction","departuresWithPredictions","RoutePillSmall","modeBgClass","showCrowding","trip_id","realtime","crowdingInformation","trackForCommuterRail","statusWithTrain","AccordionRow","TableRow","UpcomingDeparturesHeader","icon_live_clock_svg_1","headerLabel","someCrowdingInfoExists","isEmpty","hasPredictions","idx","isInitialLoading","upcomingDeparturesTable","react_dom_1","render","ScheduleLoader_1","scheduleFinderRoot","root","renderDirectionAndMap","mapEl","renderMap","schedulePageDataEl","createScheduleStore","renderAdditionalLineInformation","renderDirectionOrMap","newState","getState","newValues","displayText","linkURL","backgroundColor","optionalCSS","externalLink","routeToCSSClass","busName","modeNameForBg","RoutePill","PillLink_1","typedRoute","routeWithDirections","module","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","call","amdD","O","chunkIds","notFulfilled","Infinity","fulfilled","j","splice","n","getter","__esModule","getPrototypeOf","obj","t","mode","this","ns","create","def","getOwnPropertyNames","definition","o","defineProperty","enumerable","g","globalThis","Function","hmd","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","bind","__webpack_exports__"],"sourceRoot":""}