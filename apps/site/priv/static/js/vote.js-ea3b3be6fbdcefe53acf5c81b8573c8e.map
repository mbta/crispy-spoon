{"version":3,"file":"./vote-010109ca5d793273530736d2ef69ab87.js","mappings":"uBAAIA,ECCAC,EADAC,E,iBCmCJC,EAAAA,QA1BiB,SAACC,EAAoBC,GACpC,IAAIC,EAEJ,OAAO,W,IAAC,aAAAC,EAAAA,UAAAA,OAAAA,IAAAC,EAAAA,GAAAA,UAAAA,GACNC,OAAOC,aAAaJ,GACpBA,EAAQG,OAAOE,YAAW,WAAM,OAAAP,EAAQ,aAAII,EAAZ,GAAmBH,EACrD,CACF,C,oVCHaF,EAAAA,eAAiB,SAC5BS,EACAC,GAEA,OAAKD,GAAyC,IAA/BE,OAAOC,KAAKH,GAAQI,OAI5B,WAAIF,OAAOC,KAAKH,GACpBK,KAAI,SAAAC,GAAO,gBAAGA,EAAG,YAAIL,EAAQD,EAAOM,IAAzB,IACXC,KAAK,MALC,EAMX,EAYahB,EAAAA,WAAa,SACxBiB,EACAC,GAEA,OAAAD,EACIA,EACGE,UAAU,GACVC,MAAM,KACNC,OAhBY,SAACH,GAA0C,gBAC9DT,EACAa,G,MAEM,EAAaA,EAASF,MAAM,KAA3BL,EAAG,KAAEQ,EAAG,KACf,OAAO,EAAP,KAAYd,KAAM,MAAGS,EAAQH,IAAOG,EAAQK,EAAIC,QAAQ,MAAO,MAAK,GACtE,CANgE,CAgBhDC,CAAaP,GAAU,CAAC,GAClC,CAAC,CALL,C,uCC5BFlB,EAAAA,cAAA,SACE0B,EACAC,QAAA,IAAAA,IAAAA,EAAAA,IAEA,IAAMC,EAAQ,GACVC,EAAS,EAUb,OATAF,EAAMG,SAAQ,SAAAC,GACJ,IAAAC,EAAmBD,EAAI,OAAflB,EAAWkB,EAAI,OAE/BH,EAAMK,KAAKP,EAAKQ,MAAML,EAAQG,IAC9BJ,EAAMK,KAAK,cAAOP,EAAKQ,MAAMF,EAAQA,EAASnB,GAAO,UACrDgB,EAAShB,EAASmB,CACpB,IACAJ,EAAMK,KAAKP,EAAKQ,MAAML,IAEfD,EAAMZ,KAAK,GACpB,C,iBC5BA,eASAhB,EAAAA,QANkB,SAACmC,GACjB,GAAKA,EAAQtB,OAAb,CACA,IAAMuB,EAAmBD,EAAQrB,KAAI,SAAAuB,GAAK,WAAAC,QAAOD,EAAEE,SAAUF,EAAEG,UAArB,IAC1C,OAAO,IAAAC,cAAaL,EAFiB,CAGvC,C,+hCCPA,kBACA,WACA,cAiBapC,EAAAA,gBAA4B,CACvC0C,QAAS,GACTC,QAAS,EACTC,iBAAiB,EACjBC,MAAO,CAAEC,YAAa,SA0HxB9C,EAAAA,QAAe+C,EAAAA,QAAMC,MA/FH,SAACC,G,IACjBC,EAAM,SACNC,EAAe,kBACfC,EAAAA,EAAAA,QACkBC,EAAa,iBAC7BlB,EAAO,UACPmB,EAAS,YACQC,EAAa,kBAC9BC,EAAI,OAIAC,EAASV,EAAAA,QAAMW,YAQrB,IAPA,IAAAC,kBAAgB,WACVF,EAAOG,SAAWH,EAAOG,QAAQC,gBAEnCJ,EAAOG,QAAQC,eAAeC,gBAElC,GAAG,CAACL,IAEkB,oBAAXnD,QAA4C,KAAlBiD,EAAsB,CAEzD,IAAMQ,EAA0BC,EAAQ,OAClCC,EAGkBD,EAAAA,OAAAA,QACxBA,EAAQ,OACR,IAAME,EAAYF,EAAAA,MAAAA,QAEVG,EAA4CJ,EAAO,IAA9CK,EAAuCL,EAAO,OAAtCM,EAA+BN,EAAO,SAA5BO,EAAqBP,EAAO,MAArBQ,EAAcR,EAAO,UAErDS,EAAoBtB,GAAWC,GAAmBe,EAAU/B,GAC5DsC,EAnDQ,SAChBtC,EACAc,G,IAAEV,EAAQ,WAAEC,EAAS,YAErB,OAAuB,IAAnBL,EAAQtB,OAAqB,CAACsB,EAAQ,GAAGI,SAAUJ,EAAQ,GAAGK,WAC3D,CAACD,EAAUC,EACpB,CA6CqBkC,CAAUvC,EAASkB,GAC9BsB,EAAuB,OAATnB,OAAgBoB,EAAYpB,EAMhD,OACET,EAAAA,QAAAA,cAACoB,EAAG,GACFU,IAAKpB,EACLP,OAAQsB,EACRM,OAAQL,EACRjB,KAAMmB,GACF3E,EAAAA,iBAEJ+C,EAAAA,QAAAA,cAACwB,EAAS,CACRQ,YAAY,0EACZC,IAAK,UAAGzB,EAAa,8BACrB0B,OAfgB,WACpBxB,EAAOG,QAAQsB,UAAUC,cAAcC,WAAa,cACtD,IAeK9B,EAAUxC,KAET,SAAAuE,GAAY,OACVtC,EAAAA,QAAAA,cAACsB,EAAQ,CACPiB,UAAWD,EAASC,UACpBvE,IACEsE,EAASE,IAAM,mBAAYC,KAAKC,MAAsB,IAAhBD,KAAKE,WAE7CC,UAAWN,EAASM,UACpBC,MAAOP,EAASO,MAChBC,OAAQR,EAASQ,OACjBC,UAAWT,EAAS,WAAa,UAAY,OAC7CU,QAASV,EAAS,WAAa,OAAS,QACxCW,SAAUX,EAAS,WAAa,QAAU,SAXlC,KAeb,IAAAY,QAAO9D,EAAS,MAAMrB,KAAI,SAAAoF,GAAU,OACnCnD,EAAAA,QAAAA,cAACqB,EAAM,CACL+B,KAAMlC,EAAUiC,EAAOC,KAAMD,EAAOE,WACpCrF,IACEmF,EAAOX,IACoB,iBAAUC,KAAKC,MACxB,IAAhBD,KAAKE,WAGTW,IAAKH,EAAOG,KAAO,SACnB5B,SAAU,CAACyB,EAAO3D,SAAU2D,EAAO1D,WACnCqC,IAAK,SAAAA,GAAO,OAAAA,GA3FH,SACnByB,EACArD,G,IAAkBsD,EAAK,iBAKvBD,EAASE,iBAAiBD,EAC5B,CAmF+BE,CAAa5B,EAAIhB,eAAgBqC,EAAxC,EACZQ,aAAcR,EAAOS,QACrBC,UAAU,EACVC,QAASX,EAAOY,SAEfZ,EAAOa,SAAWhE,EAAAA,QAAAA,cAACuB,EAAK,CAAC0C,UAAW,KAAMd,EAAOa,SAhBjB,I,CAsB3C,OAAO,IACT,GAEqCE,EAAAA,Q,2UCjJrC,eAcajH,EAAAA,gBAA+B,CAC1CkH,WAAY,CAAC,GAAI,IACjBC,SAAU,CAAC,GAAI,IACfC,YAAa,CAAC,GAAI,KAGpBpH,EAAAA,QAAe,SACbmG,EACAkB,GAEA,IAAMC,EACK,OAATD,GAAiBA,EACb,CACEH,WAAYG,EAAKE,aAAevH,EAAAA,gBAAgBkH,WAChDC,SAAUE,EAAKG,WAAaxH,EAAAA,gBAAgBmH,SAC5CC,YAAaC,EAAKI,cAAgBzH,EAAAA,gBAAgBoH,aAEpDpH,EAAAA,gBACN,OAAgB,OAATmG,OACHvB,EACA,IAAI8C,EAAAA,KAAK,EAAD,KACHJ,GAAQ,CACXK,QAAS,uBAAgBxB,EAAI,QAC7ByB,cAAe,uBAAgBzB,EAAI,UAE3C,C,6JCvCA,kBACA,cACA,UACA,cACA,cAuIAnG,EAAAA,QAnIgB,WACR,MAAkC+C,EAAAA,QAAM8E,SAI3C,MAJIC,EAAY,KAAEC,EAAe,KAM9BC,EAAYC,EAAAA,QAWZ,EAA0BlF,EAAAA,QAAM8E,WAA/BK,EAAQ,KAAEC,EAAW,KACtBC,EAAWrF,EAAAA,QAAMsF,SAAQ,WAC7B,OACEP,GACAE,EAAUM,MAAK,SAAAC,GACb,OAAOA,EAAEC,KAAKC,MAAK,SAAAC,GACjB,WAAAC,iBAAgBD,EAAG,CAACZ,EAAatF,UAAWsF,EAAavF,UAAzD,GAEJ,GAEJ,GAAG,CAACuF,EAAcE,IAsBlB,OArBAjF,EAAAA,QAAM6F,WAAU,WACd,IAAMC,EAAoB,SAACC,GACzBf,EAAgBe,EAAEC,OACpB,EAEAC,SAASC,iBAAiB,mBAAoBJ,GAC9C,IAAMK,EAAKF,SAASG,cAAc,OAC5BC,EAAOJ,SAASK,eAAe,kBACrC,GAAID,EAAM,CACR,KAAOA,EAAKE,YACVF,EAAKG,YAAYH,EAAKE,YAExBF,EAAKI,YAAYN,E,CAInB,OAFAf,EAAYe,GAEL,WAELF,SAASS,oBAAoB,mBAAoBZ,EACnD,CACF,GAAG,CAACV,IAEFpF,EAAAA,QAAAA,cAAAA,MAAAA,KACG+E,GACCI,GACAwB,EAAAA,QAASC,aACPvB,EACErF,EAAAA,QAAAA,cAAAA,MAAAA,CAAKF,MAAO,CAAE+G,UAAW,KACvB7G,EAAAA,QAAAA,cAAAA,KAAAA,CAAIuC,UAAU,wBAAsB,yBACpCvC,EAAAA,QAAAA,cAAAA,MAAAA,KAAMqF,EAASyB,MACf9G,EAAAA,QAAAA,cAAAA,MAAAA,KAAMqF,EAAS0B,SACf/G,EAAAA,QAAAA,cAAAA,MAAAA,KAAMqF,EAAS2B,MACfhH,EAAAA,QAAAA,cAAAA,MAAAA,KAAM,UACJqF,EAAS4B,KAAO,gBAAS5B,EAAS4B,KAAI,MAAO,GAAE,qBACpC5B,EAASA,WACtBrF,EAAAA,QAAAA,cAAAA,IAAAA,CACEkH,KAAM,2CAAoCC,mBACxCpC,EAAagC,SACd,gCACChC,EAAavF,SAAQ,iCAErBuF,EAAatF,UAAS,qBACX0H,mBACX9B,EAAS+B,mBACV,8BAAsB/B,EAASgC,IAAG,+BACjChC,EAASiC,IAAG,8HAGdtH,EAAAA,QAAAA,cAAAA,SAAAA,CACEuH,KAAK,SACLzH,MAAO,CAAE+G,UAAW,GAAIW,MAAO,QAC/BjF,UAAU,mBAAiB,iBAOjCvC,EAAAA,QAAAA,cAAAA,MAAAA,KACEA,EAAAA,QAAAA,cAAAA,IAAAA,KAAAA,0EAIAA,EAAAA,QAAAA,cAAAA,IAAAA,KAAAA,gDAEEA,EAAAA,QAAAA,cAAAA,IAAAA,CAAGkH,KAAK,sEAAoE,6EAOlF/B,GAEJnF,EAAAA,QAAAA,cAAAA,MAAAA,CAAKF,MAAO,CAAE2H,OAAQ,MACpBzH,EAAAA,QAAAA,cAAC0H,EAAAA,QAAG,CACFC,QAAS,CACPC,eAAgB,CAAEnI,WAAY,SAAUD,SAAU,WAClDiI,OAAQ,IACRrI,QAASiG,EACL,CACE,CACEjC,KAAM,UACNZ,GAAI,UAAG6C,EAASiC,IAAG,YAAIjC,EAASgC,KAChC5H,UAAW4F,EAASiC,IACpB9H,SAAU6F,EAASgC,IACnBQ,eAAgB,EAChB7D,QAAS,OAGb,GACJzD,UAAW,GACXuH,gBAAiB,8CACjBN,MAAO,IACP/G,KAAM,OAMlB,C,6KCzIA,kBACA,cACA,cACA,WACA,aACA,WACA,cAQaxD,EAAAA,OAAS,YACpB,IAAA8K,0BAAwB,WACd,IAAAC,GAAc,IAAAC,cAAa,kBAAiB,UAC9CC,EAAK,IAAIC,EAAAA,QAA2B,CACxC3F,GAAI,iBACJwF,UAAS,EACTI,QAAS,CAAC,aACVC,eAAgB,CAAE3G,SAAU,EAAG4G,YAAa,GAC5CC,QAAS,GACTC,OAAQ,CAAC,IAEXN,EAAGO,cAAgB,SAAAC,GACjB,IAAMC,EAAMD,EAAGE,cAEf,OADcD,EAAIE,MAAM,IAEtB,IAAK,YACHX,EAAGY,SAASH,EAAIE,MAAM,GAAG9B,SACzBmB,EAAGa,kBAAkBJ,EAAIE,MAAM,GAAG9B,SAClC,MACF,IAAK,gBACHmB,EAAGc,sBAKT,EACAd,EAAGe,aAAe,SAAC5B,EAAKC,GACtB,IAAMtB,EAAS,CAAExG,SAAU6H,EAAK5H,UAAW6H,EAAKP,QAASmB,EAAGgB,YACtDC,EAAQ,IAAIC,MAAM,oBAExBD,EAAMnD,OAASA,EACfC,SAASoD,cAAcF,EACzB,EACmB,IAAIG,EAAAA,QAAQ,CAAC,EAAG,CAAC,GACzBC,UAAUrB,GArCvBvB,EAAAA,QAAS6C,OAAOxJ,EAAAA,QAAAA,cAACyJ,EAAAA,QAAO,MAAKxD,SAASK,eAAe,mBAuCrD,GACF,EAEArJ,EAAAA,QAAeA,EAAAA,M,6JCnDf,EAFA,YAEA,U,0ICQO,MAAMyM,EAAiBA,CAAChM,EAAQ+H,KACrC,OAAQA,GACN,IAAK,2BACL,IAAK,4BACH,OAAO7H,OAAO+L,OAAOjM,EAAQ,CAAEkM,OAAQ,kBAEzC,IAAK,oBACL,IAAK,qBACH,OAAOhM,OAAO+L,OAAOjM,EAAQ,CAAEkM,OAAQ,WAEzC,IAAK,iBACL,IAAK,kBACH,OAAOhM,OAAO+L,OAAOjM,EAAQ,CAAEkM,OAAQ,QAEzC,QACE,OAAOlM,EACX,EAGF,MAAMmM,UAAmCC,EAAAA,EACvCC,YAAWC,GASR,IATS,GACVxH,EAAE,UACFwF,EAAS,QACTI,EAAO,eACPC,EAAc,QACdE,EAAO,OACPC,EAAM,YACNyB,EAAc,KAAI,UAClBC,EAAYC,EAAAA,WACbH,EACCI,MAAM,CAAE5H,KAAIwF,YAAWI,UAASI,SAAQyB,cAAaC,cACrDG,KAAKC,iBAAmB,IACnBD,KAAKE,QAAQC,YAChBH,KAAKE,QAAQC,UAAY,KAAM,CAAG,IAEpCH,KAAKI,SAAWlC,EAChB8B,KAAKK,kBAAoBL,KAAKM,QAAQ3C,EAAU4C,0BAChDP,KAAKQ,0BACLR,KAAKS,gBAAkBlN,OAAO+L,OAC5BE,EAA2BkB,wBAC3B1C,GAEFgC,KAAKW,SAASC,OAAOZ,KAAKS,gBAAgBpJ,SAAU,EAAG,aACvD2I,KAAKW,SAAS9L,KAAK,iBACnBmL,KAAKW,SAAS9L,KAAK,UACrB,CAEA2L,0BACE,MAAM1I,EAAYkI,KAAKM,QAAQN,KAAKa,WAAW/I,WAC/CkI,KAAKc,qBAAuBlF,SAASG,cAAc,OACnDiE,KAAKc,qBAAqB9I,UAAU+I,IAAI,WACxCf,KAAKc,qBAAqBrL,MAAMuL,QAAU,OAC1ChB,KAAKc,qBAAqBG,UAAa,GAAE/N,OAAOgO,SAASC,8HAEzDrJ,EAAUsJ,WAAWhF,YAAY4D,KAAKc,qBACxC,CAEAO,eAAeC,GACb,OAAQA,GACN,IAAK,YACH,OAAOC,EAAAA,EAAAA,SACLvB,KAAKwB,gBAAgB,aACrBxB,KAAKC,kBAET,IAAK,gBACH,OAAOD,KAAKyB,uBACd,IAAK,UACH,OAAOzB,KAAK0B,iBACd,QACE,OAAOH,EAAAA,EAAAA,SAASxB,MAAMsB,eAAeC,GAAQtB,KAAKC,kBAExD,CAEAuB,gBAAgBF,GACd,MAAO,CAACK,EAAO9O,IACb+O,EAAAA,GAA+B,CAC7BD,QACAE,SAAU7B,KAAKS,gBAAgBoB,WAC9BC,MAAKC,GAAW/B,KAAKgC,WAAWnP,EAAUyO,EAAOS,IACxD,CAEAL,iBACE,MAAO,CAAC7N,EAAOhB,KACb,MAAMkP,EAAU,CAAE7D,QAAS,CAAE+D,KAAMjC,KAAKI,WACxC,OAAOJ,KAAKgC,WAAWnP,EAAU,UAAWkP,EAAQ,CAExD,CAEAN,uBACE,MAAO,CAAC5N,EAAOhB,IAENmN,KAAKgC,WAAWnP,EAAU,gBADjB,CAAEqP,cAAe,CAAED,KAAM,CAAC,CAAC,KAG/C,CAGAE,UAAUb,GACR,OAAQA,GACN,IAAK,gBACL,IAAK,UACH,OAAO,EACT,QACE,OAAO,EAEb,CAGAc,UAAUd,GACR,OAAQA,GACN,IAAK,gBACL,IAAK,UACH,OAAO,EACT,QACE,OAAO,KAEb,CAEAlD,cAAcC,GAEZ,MAAMC,EAAMD,EAAGE,cAEf,OADcD,EAAIE,MAAM,IAEtB,IAAK,YACHwB,KAAKqC,OAAOC,MAAQhE,EAAIE,MAAM,GAAG9B,QACjCsD,KAAKtB,kBAAkBJ,EAAIE,MAAM,GAAG9B,SACpC,MACF,IAAK,gBACHsD,KAAKrB,sBACL,MACF,QACEoB,MAAM3B,cAAcC,GAE1B,CAEAM,sBAKE,OAJAqB,KAAKc,qBAAqBrL,MAAMuL,QAAU,OAC1ChB,KAAKqC,OAAOE,UAAW,EACvBvC,KAAKvB,SAAS,4BACduB,KAAKK,kBAAkB5K,MAAM+M,WAAa,WACnCC,EAAAA,EAAAA,WACJX,MAAKY,GAAO1C,KAAK2C,uBAAuBD,KACxCE,OAAMC,GAAO7C,KAAK8C,mBAAmBD,IAC1C,CAEAC,mBAAmBD,GACjB7C,KAAKqC,OAAOE,UAAW,EACvBvC,KAAKvB,SAAS,IACduB,KAAKK,kBAAkB5K,MAAM+M,WAAa,SACtCK,EAAIE,MAAqB,IAAbF,EAAIE,OAClB/C,KAAKc,qBAAqBrL,MAAMuL,QAAU,QAE9C,CAEAtC,kBAAkBhC,GAChB,OAAOkF,EAAAA,GAA8BlF,GAASoF,MAAKkB,GACjDhD,KAAKiD,wBAAwBD,IAEjC,CAEAC,wBAAwBD,GACtB,OAAOhD,KAAKpB,aAAaoE,EAAO7N,SAAU6N,EAAO5N,UACnD,CAEAuN,uBAAsBO,GAAsC,IAAnCC,QAAQ,SAAEhO,EAAQ,UAAEC,IAAa8N,EACxD,OAAOtB,EAAAA,GACLwB,WAAWjO,GACXiO,WAAWhO,IACX0M,MAAKkB,GAAUhD,KAAKqD,wBAAwBL,EAAQ7N,EAAUC,IAClE,CAEAiO,wBAAwBL,EAAQ7N,EAAUC,GACxC4K,KAAKqC,OAAOE,UAAW,EACvBvC,KAAKvB,SAASuE,GACdhD,KAAKK,kBAAkB5K,MAAM+M,WAAa,SAC1CxC,KAAKqC,OAAOC,MAAQU,EACpBhD,KAAKpB,aAAazJ,EAAUC,EAC9B,CAEAwJ,aAAazJ,EAAUC,GACrB,MAAM/B,EAAS2M,KAAKE,QAAQC,YAC5B9M,EAAO8B,SAAWA,EAClB9B,EAAO+B,UAAYA,EACnB/B,EAAOqJ,QAAUsD,KAAKqC,OAAOC,MAC7B,MAAMgB,EAAKC,EAAAA,eACTlE,EAAehM,EAAQH,OAAOgO,SAASsC,UACvCtQ,OAAO4J,oBAET5J,OAAOuQ,WAAWC,MAAO,mBAAkBJ,IAC7C,EAGF9D,EAA2BkB,wBAA0B,CACnDrJ,SAAU,EACVwK,SAAU,GAGZ,S,8hBCzMA,IAAA8B,EAAA,IAAAC,QAEe,MAAMnE,EAGnBC,YAAWC,GAOR,IAPS,GACVxH,EAAE,UACFwF,EAAS,QACTI,EAAO,OACPI,EAAM,YACNyB,EAAc,KAAI,UAClBC,EAAYgE,EAAAA,WACblE,EACC,GADDmE,EAAA,KAAAH,EAAA,CAAAI,UAAA,EAAAzB,WAAA,IACmB,iBAAPnK,EACT,MAAM,IAAIjF,OAAO8Q,MAAM,gCAEzBhE,KAAK7H,GAAKA,EACV6H,KAAKiE,iBAAmBrE,EACxBI,KAAKE,QAAU/B,EACf6B,KAAKkE,MAAQ,KACblE,KAAKa,WAAatN,OAAO+L,OAAO3B,EAAW,CACzCwG,iBAAmB,GAAExG,EAAUgE,+BAEjC3B,KAAKqC,OAASrC,KAAKM,QAAQN,KAAKa,WAAWc,OAC3C3B,KAAKoE,kBAAoBpE,KAAKM,QAAQN,KAAKa,WAAWsD,kBACtDnE,KAAKqE,iBAAmBrE,KAAKM,QAAQN,KAAKa,WAAW/I,WACrDkI,KAAKsE,aAAetE,KAAKM,QAAQN,KAAKa,WAAW0D,aACjDvE,KAAKwE,UAAYxE,KAAKM,QAAQN,KAAKa,WAAW2D,WAC9CxE,KAAKW,SAAW5C,EAChBiC,KAAKyE,UAAY,GACjBzE,KAAK0E,SAAW,CAAC,EACjB1E,KAAK2E,gBAAkB,KACvB3E,KAAK4E,cAAgB,KAErBC,EAAA7E,KAAI2D,EAAc9D,GAElBG,KAAK8E,MACP,CAEAxE,QAAQnI,GACN,OAAO6H,KAAKiE,iBACRjE,KAAKiE,iBAAiBc,cAAe,IAAG5M,KACxCyD,SAASK,eAAe9D,EAC9B,CAEA2M,OACE9E,KAAKgF,kBAAoBhF,KAAKgF,kBAAkBF,KAAK9E,MACrDA,KAAK5B,cAAgB4B,KAAK5B,cAAc0G,KAAK9E,MAC7CA,KAAKiF,gBAAkBjF,KAAKiF,gBAAgBH,KAAK9E,MACjDA,KAAKkF,gBAAkBlF,KAAKkF,gBAAgBJ,KAAK9E,MACjDA,KAAKmF,OAASnF,KAAKmF,OAAOL,KAAK9E,MAC/BA,KAAKoF,QAAUpF,KAAKoF,QAAQN,KAAK9E,MACjCA,KAAKqF,MAAQrF,KAAKqF,MAAMP,KAAK9E,MAC7BA,KAAKsF,mBAAqBtF,KAAKsF,mBAAmBR,KAAK9E,MACvDA,KAAKM,QAAUN,KAAKM,QAAQwE,KAAK9E,KACnC,CAEAqF,QACErF,KAAK4E,cAAcW,aAAaC,QAChCxF,KAAKvB,SAAS,IACduB,KAAKsF,oBAAmB,GACxBtF,KAAKyF,QAAQC,QACb1F,KAAKqC,OAAOsD,QAUZzS,EAAS0I,UAAUgK,QAAQ,qBAAsB,CAAEL,aAAcvF,MACnE,CAEA6F,KAAKC,GACH9F,KAAKyF,QAAUK,EAEV9F,KAAKqC,QAELrC,KAAKsE,eAEVtE,KAAK+F,uBAEL/F,KAAKoE,kBAAkBnD,UAAY,GAEnCjB,KAAKyE,UAAYzE,KAAKW,SAAS1M,QAC7B,CAAC+R,EAAK1E,IAAUtB,KAAKiG,cAAc3E,EAAO0E,IAC1C,IAGFhG,KAAK4E,cAAgB1R,OAAOqS,aAC1BvF,KAAKqC,OACL,CACE6D,SAAUlG,KAAKoE,kBACf+B,OAAO,EACPC,kBAAkB,EAClBC,aAAa,EACbC,oBAAoB,EACpBC,MAAM,EACNpE,UAAW,EACXqE,WAAY,CACVxK,KAAM,6BACNyK,OAAQ,mBAGZzG,KAAKyE,WAGPzE,KAAK0G,eACL1G,KAAKsF,oBAAmB,GACxBtF,KAAK2G,gBACP,CAEAC,mBACE5G,KAAKsF,mBAAgE,KAA7CtF,KAAK4E,cAAcW,aAAasB,SAC1D,CAEAC,SAAS5C,GACPlE,KAAKkE,MAAQA,CACf,CAEAyC,gBACEzT,EACU0I,UACPmL,GACC,6BACC,IAAG/G,KAAKa,WAAWc,QACpB3B,KAAKiF,iBAET/R,EACU0I,UACPmL,GACC,6BACC,IAAG/G,KAAKa,WAAWc,QACpB3B,KAAKkF,iBAEThS,EACU0I,UACPmL,GACC,wBACC,IAAG/G,KAAKa,WAAWc,QACpB3B,KAAK5B,eAETlL,EACU0I,UACPmL,GAAG,qBAAuB,IAAG/G,KAAKa,WAAWc,QAAS3B,KAAKmF,QAE9DjS,EAAc0I,UAAUmL,GAAG,QAAU,IAAG/G,KAAKqC,OAAOlK,KAAM6H,KAAKoF,SAE/DlS,OAAO2I,iBAAiB,SAAUmE,KAAKmF,QAEvCnF,KAAKsE,aAAajI,oBAAoB,QAAS2D,KAAKqF,OACpDrF,KAAKsE,aAAazI,iBAAiB,QAASmE,KAAKqF,OAKjDnS,EACU0I,UACPmL,GAAG,QAAS,6BAA8B/G,KAAKgF,mBAElDpJ,SAASC,iBAAiB,2BAA2B,KACnD3I,EACU0I,UACPoL,IACC,6BACC,IAAGhH,KAAKa,WAAWc,QACpB3B,KAAKiF,iBAET/R,EACU0I,UACPoL,IACC,6BACC,IAAGhH,KAAKa,WAAWc,QACpB3B,KAAKkF,iBAEThS,EACU0I,UACPoL,IACC,wBACC,IAAGhH,KAAKa,WAAWc,QACpB3B,KAAK5B,eAETlL,EACU0I,UACPoL,IAAI,qBAAuB,IAAGhH,KAAKa,WAAWc,QAAS3B,KAAKmF,QAC/DjS,OAAOmJ,oBAAoB,SAAU2D,KAAKmF,QAC1CjS,EAAc0I,UAAUoL,IAAI,QAAU,IAAGhH,KAAKqC,OAAOlK,KAAM6H,KAAKoF,SAChElS,EACU0I,UACPoL,IAAI,QAAS,6BAA8BhH,KAAKgF,kBAAkB,GAEzE,CAEAM,mBAAmB2B,GACjBjH,KAAKsE,aAAa7O,MAAMuL,QAAUiG,EAAO,QAAU,MACrD,CAEAP,eACE,GAAI1G,KAAKM,QAAQ,iBACf,OAGF,MAAM4G,EAAWtL,SACduL,uBAAuB,gCACvBC,KAAK,GACFC,EAAWzL,SAASG,cAAc,OAExCsL,EAASlP,GAAK,gBACdkP,EAASrP,UAAU+I,IAAI,mBACvBsG,EAASpG,UACP,iFACFiG,EAAS9K,YAAYiL,GACrBrH,KAAKyF,QAAQ6B,eAAiBD,CAChC,CAEAjC,UACEpF,KAAKsF,mBAAgE,KAA7CtF,KAAK4E,cAAcW,aAAasB,SAC1D,CAEA1B,SACE,MAAMoC,EAAWrU,EACP8M,KAAKoE,mBACZlJ,KAAK,iCAAiC,GACrCqM,GAAYvH,KAAKqC,SACnBrC,KAAKwH,iBAAiBD,GACtBvH,KAAKyH,gBAAgBF,GAEzB,CAEAC,iBAAiBD,GACf,MAAMG,EAAcC,SAClBC,EAAG,IAAG5H,KAAKa,WAAW/I,aAAa+P,IAAI,qBACvC,KAEI,WAAEC,EAAU,UAAEC,GAAc/H,KAAKqC,OAGvCkF,EAAS9R,MAAM0H,MAAS,GAAE6C,KAAKqE,iBAAiB2D,gBAChDT,EAAS9R,MAAMwS,YAAiBP,EAAeI,EAAlB,KAC7BP,EAAS9R,MAAM+G,UAAa,GAAEkL,EAAcK,KAE9C,CAEAN,gBAAgBS,GACd,MAAMC,EAAQC,MAAMC,KAAKH,EAAOI,iBAAiB,MAAMrU,QACrD+R,GAAOA,EAAM,GACb,GAEIuC,EAAc,IAAVJ,EAAc,GAAK,IAC7BnI,KAAKwE,UAAUvD,UAAa,GAAEkH,WAAeI,GAC/C,CAEAxC,uBACO/F,KAAKoE,oBACRpE,KAAKoE,kBAAoBxI,SAASG,cAAc,OAChDiE,KAAKoE,kBAAkBjM,GAAK6H,KAAKa,WAAWsD,iBAC5CnE,KAAKqC,OAAOjB,WAAWhF,YAAY4D,KAAKoE,mBAE5C,CAEAa,gBAAe/B,GAIZ,IAHD3E,eACEC,OAAQF,EAAKgD,KAEhB4B,EACClD,KAAK2E,gBAAkB,CACrBrG,MACAgD,QAEJ,CAEA4D,kBACElF,KAAK2E,gBAAkB,IACzB,CAEA6D,gCACE,OAAIxI,KAAK2E,gBACA3E,KAAK5B,cAAc,CACxBG,cAAe,CACbC,MAAO,CAACwB,KAAK2E,gBAAgBrG,IAAK0B,KAAK2E,gBAAgBrD,UAItDtB,KAAKyI,kBACd,CAEAA,mBACE,MAAMC,EAAa1I,KAAKW,SAASzF,MAC/BoG,GAAStB,KAAK0E,SAASpD,IAAUtB,KAAK0E,SAASpD,GAAOW,KAAKxO,OAAS,IAEtE,QAAIiV,GACK1I,KAAK5B,cAAc,CACxBG,cAAe,CACbC,MAAO,CAACwB,KAAK0E,SAASgE,GAAYzG,KAAK,GAAIyG,KAKnD,CAEA1D,kBAAkB3G,GAChBA,EAAGsK,gBACL,CAEAvK,cAAawK,GAIV,IAHDrK,eACEC,OAAQF,EAAKpB,KAEhB0L,EACC,MAAMvV,EAAS2M,KAAKE,QAAQC,YACxBH,KAAKqC,SACPrC,KAAKqC,OAAOC,MAAQ,IAGtBpP,EAAc2V,KACZ,gBACAvK,EAAIwK,cACJ9I,KAAK+I,sBAAsBzK,EAAKpB,EAAM7J,GAE1C,CAEA0V,sBAAsBzK,EAAKpB,EAAM7J,GAC/BH,OAAOuQ,WAAWC,MAChBG,EAAAA,OAAqBvF,EAAKpB,GACxBqG,EAAAA,eAA4BlQ,EAAQH,OAAO4J,oBAEjD,CAEAmJ,cAAc+C,EAAWhD,GAcvB,OAbAA,EAAInR,KAAK,CACPoU,OAAQjJ,KAAKqB,eAAe2H,GAC5BE,WAAYzJ,EAAoB0J,aAAaH,GAC7CvM,KAAMuM,EACN/K,YAAa,EACbkE,UAAWnC,KAAKmC,UAAU6G,GAC1B5G,UAAWpC,KAAKoC,UAAU4G,GAC1BnJ,UAAW,CACTuJ,WAAYpJ,KAAKqJ,aAAaL,GAC9BM,OAAQtJ,KAAKuJ,qBAAqBP,IAEpCzH,SAAU,MAELyE,CACT,CAEA7D,YACE,OAAO,CACT,CAEAC,YACE,OAAO,IACT,CAEAmH,uBAGE,OAAO,IACT,CAEAlI,eAAeC,GACb,MAAO,CAACzN,EAAOhB,KACbmN,KAAKyF,QAAQC,QACN1F,KAAKyF,QACT+D,OAAO,CAAE3V,UACTiO,MAAKC,GAAW/B,KAAKgC,WAAWnP,EAAUyO,EAAOS,KAExD,CAEA0H,qBACE,MAAO,CAAC5V,EAAOhB,IAAaA,EAAS,CAAC,CAAE6W,KAAM,KAChD,CAEA1H,WAAWnP,EAAUyO,EAAOS,GACrBA,IAAWA,EAAQmC,OAGpBnC,EAAQT,IAAUS,EAAQT,GAAOW,OACnCjC,KAAK0E,SAASpD,GAASS,EAAQT,GAC/BzO,EAASkP,EAAQT,GAAOW,MAE5B,CAEAoH,aAAa/H,GACX,OAAOhD,IAAOuF,SAAAA,aAA2BvF,EAAKgD,E,oDAAOtB,K,IAAI2D,E,cAAY,CACvE,CAEAlF,SAAS6D,GACPtC,KAAK4E,cAAcW,aAAaoE,OAAOrH,GACvCpP,EAAc8M,KAAKqC,QAAQuH,SAC3B5J,KAAK4E,cAAcW,aAAaC,OAClC,CAEA3G,WACE,OAAOmB,KAAK4E,cAAcW,aAAasB,QACzC,EAGFpH,EAAoB0J,aAAe,CACjCU,UAAW,e,kHCrZN,MAAMC,EAAW,CACtB,cACA,eACA,uBACA,8BACA,oBACA,uBAGWC,EAA0B,CAAC,mBAE3BC,EAAY,CACvB,cAAe,2BACf,eAAgB,2CAChB,uBAAwB,kCACxB,8BAA+B,yCAC/B,oBAAqB,+BACrB,sBAAuB,iCACvB,kBAAmB,YAGfC,EAAmB,CACvB,cAAe,GACf,eAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAGvW,KAAIwJ,GAAS,cAAaA,MAC1D,uBAAwB,CAAC,eAAgB,gBACzC,8BAA+B,CAAC,gBAChC,oBAAqB,CAAC,gBACtB,sBAAuB,CAAC,gBACxB,kBAAmB,CAAC,wBAAyB,iCASlCU,EAAesM,IAC1B,MAAMvM,EAAY,CAChBgE,MAAQ,GAAEuI,WACVpS,UAAY,GAAEoS,eACdC,MAAQ,GAAED,kBACV3J,yBAA2B,GAAE2J,uBAC7B3F,YAAc,GAAE2F,WAChB1F,UAAY,GAAE0F,gBAGV7W,EAAS,CAAC,EAEV0K,EAAU,CAAC,EAKXuD,EAvBe8I,EAACC,EAAcC,IAChCD,EAAqB,QACrBC,EAAyB,SACtB,SAoBOF,CAHkB,gBAAXF,EACe,oBAAXA,GAezB,OAXA7W,EAAOiO,GAAS,CACdrD,YAAa,EACbsM,OAAQ,CAACP,EAAUE,IACnBM,aAAc,CAACP,EAAiBC,KAGlCnM,EAAQuD,GAAS,CACf0H,UAAW1H,EACXzN,MAAO,IAGF,CACL8J,YACAtK,SACA0K,UACD,C,4IChEI,MAAM0M,EACH,mBAMG3K,EAAY,CACvB4K,oBAAqBC,IAAAA,QAClB,8EAEHC,gBAAiBD,IAAAA,QACd,sFAEHE,cAAeF,IAAAA,QACZ,6DAEHd,UAAWc,IAAAA,QAAe,8MAM1BzI,cAAeyI,IAAAA,QAAe,sTAO9BG,eAAgBH,IAAAA,QAAe,sIAKDF,wFAGhBA,2gBAedM,QAASJ,IAAAA,QAAe,sIAKMF,wFAGhBA,+fAkBCE,IAAAA,QAAe,8UAShC,SAASK,EAAwBC,GAC/B,OAAOA,EACJvX,KAAIwX,GAAOA,EAAIC,gBACf5L,QAAO2L,GAAe,WAARA,IACdxX,KAAIwX,GAAOE,EAAAA,EAAqBF,IACrC,CASA,SAASG,EAAiBC,GACxB,GAAIA,EAAQC,SAAS,UACnB,OAAOD,EAAQH,cAAc/W,QAAQ,IAAK,UAW5C,MARe,CACboX,MAAO,aACPC,IAAK,WACLC,OAAQ,cACRC,KAAM,YACNC,SAAU,iBAGEN,EAChB,CAEA,SAASO,EAAe1T,GACtB,MAAM2T,EAAWT,EAAiBlT,GAClC,OAAI2T,EACKV,EAAAA,EAAqBU,GAE1B3T,IAAM,CAAC,gBAAiB,MAAO,QAAS,eACnCiT,EAAAA,EAAqBjT,GAE1BA,EAAGoT,SAAS,OACPH,EAAAA,EAAqB,iBAEvBA,EAAAA,EAAqBjT,EAC9B,CASO,SAAS4T,EAAa5T,EAAI6T,GAC/B,IAAK7T,EACH,OAAO2H,EAAU8K,gBAAgBzL,OAAO,CAAEpG,KAAM,YAElD,IAAIkT,EAXN,SAA0B9T,GACxB,OAAIiQ,MAAM8D,QAAQ/T,GACTA,EAAGzE,KAAIqF,GAAQ8S,EAAe9S,KAEhC,CAAC8S,EAAe1T,GACzB,CAMcgU,CAAiBhU,GAI7B,OAHI6T,IACFC,EAAQA,EAAMG,OAlDlB,SAA+BJ,GAC7B,OAAI5D,MAAM8D,QAAQF,GACThB,EAAwBgB,GAE1BhB,EAAwB,CAACgB,GAClC,CA6CyBK,CAAsBL,KAEtCC,CACT,CAwBO,SAASK,EAAYhO,GAC1B,IAAIvF,EAEJ,GAAkC,gBAA9BuF,EAAIiO,sBACNxT,EA1BJ,SAAmBuF,GACjB,OAAQA,EAAIkO,YACV,IAAK,kBACH,MAAO,gBAET,IAAK,4EACL,IAAK,gCACH,MAAO,uBAET,IAAK,oEACL,IAAK,2BACH,MAAO,kBAET,IAAK,0EACL,IAAK,qBACH,MAAO,iBAET,QACE,MAAO,YAEb,CAMWC,CAAUnO,OACZ,CAYLvF,EAXmB,CACjB2T,cAAe,UACfC,WAAY,iBACZ7N,MAAO,cACP8N,QAAS,YACTC,eAAgB,YAChBC,KAAM,UACNC,aAAc,UACdC,OAAQ,UACRnD,UAAW,iBAEKvL,EAAI2O,gBAAkB,SAC1C,CAEA,OAAOnN,EAAU8K,gBAAgBzL,OAAO,CAAEpG,QAC5C,CAqCO,SAASmU,EAAQ5O,EAAKpB,GAC3B,OAAQA,GACN,IAAK,YACH,OAAOoP,EAAY,IAAKhO,EAAK2O,cAAe,cAC9C,IAAK,QACH,OAxCN,SAA+B3O,GAC7B,OAAIA,EAAI6O,KAAK,YACJ/B,EAAAA,EAAqB,WAEvBA,EAAAA,EAAqB,OAC9B,CAmCagC,CAAsB9O,GAE/B,IAAK,SACH,OAAO8M,EAAAA,EApCb,SAAwBiC,GACtB,OAAQA,EAAMnQ,MACZ,KAAK,EACH,MAAO,gBAET,KAAK,EACH,OAAImQ,EAAM5Q,KAAK6Q,WAAW,MACjB,cAEF,MAET,KAAK,EACH,MAAO,QAET,QACE,OAAOjC,EAAiBgC,EAAMlV,IAEpC,CAmBkCoV,CAAejP,EAAI+O,QAEjD,IAAK,UACH,MAlBG,cAFetU,EAoBIuF,EAAIvF,MAjBnB+G,EAAU8K,gBAAgBzL,OAAO,CAAEpG,KAAM,aAEzCqS,EAAAA,EAAqBrS,GAiB9B,IAAK,WAEH,OAiBN,SAAyBuF,GACvB,GACkC,OAAhCA,EAAIkP,yBACiC,MAArClP,EAAImP,8BAEJ,MAAO,GAET,MAAMxB,EAAQF,EACZzN,EAAIkP,wBACJlP,EAAImP,+BAEN,GAAIrF,MAAM8D,QAAQD,GAAQ,CAExB,OADoByB,IAAAA,KAAOzB,GACRrY,KAAK,IAC1B,CACA,OAAOqY,CACT,CAjCa0B,CAAgBrP,GAEzB,IAAK,SACL,IAAK,QACL,IAAK,YACL,IAAK,SACL,IAAK,OACH,OAAOgO,EAAYhO,GAKrB,QACE,MAAO,GArCb,IAAwBvF,CAuCxB,CA8BO,SAAS6U,EAAOtP,EAAKgD,GAC1B,OAAQA,GACN,IAAK,QACH,MAAQ,UAAShD,EAAI6O,KAAKhV,KAE5B,IAAK,SACH,MAAQ,cAAamG,EAAI+O,MAAMlV,KAEjC,IAAK,UACH,OAAOmG,EAAI1G,IAEb,IAAK,SACL,IAAK,WACL,IAAK,QACL,IAAK,YACL,IAAK,SACL,IAAK,OACH,OA3BN,SAAqB0G,GACnB,MAAkC,gBAA9BA,EAAIiO,sBACE,wBAAuBjO,EAAIuP,UAAUzZ,QAAQ,cAAe,MAE5C,kBAAtBkK,EAAI2O,cACC3O,EAAIwP,mBAAmB1Z,QAAQ,YAAa,IAE9CkK,EAAIyP,YACb,CAmBaC,CAAY1P,GAErB,IAAK,YACH,MAAO,GAIT,QACE,MAAO,IAEb,CAsBO,SAAS2P,EAAS3P,EAAKpB,GAC5B,OAAQA,GACN,IAAK,YAEH,MAAQR,QAASpI,EAAM4Z,kBAAmB3Z,GAAU+J,EAEpD,OAAO6P,EAAAA,EAAAA,eAAc7Z,EAAMC,GAC7B,IAAK,QACH,OAAO+J,EAAI8P,iBAAiBjB,KAAK1Q,KAAK6F,MAExC,IAAK,SACH,OA/BN,SAAuBhE,GACrB,MAAM7B,EAAO6B,EAAI8P,iBAAiBf,MAAM5Q,KAAK6F,MAC7C,OACO,IADChE,EAAI+O,MAAMnQ,KAEN,GAAET,8CAAiD6B,EAAI8P,iBAAiBf,MAAMgB,UAAU/L,eAEzF7F,CAEb,CAuBa6R,CAAchQ,GAEvB,IAAK,UACH,OAAOA,EAAI7B,KAEb,IAAK,SACL,IAAK,WACL,IAAK,QACL,IAAK,YACL,IAAK,SACL,IAAK,OACH,OAhCN,SAAuB6B,GACrB,MAA0B,kBAAtBA,EAAI2O,cACC3O,EAAI8P,iBAAiBG,oBAAoBjM,MAEhB,gBAA9BhE,EAAIiO,sBACCjO,EAAI8P,iBAAiBI,cAAclM,MAErChE,EAAI8P,iBAAiBK,cAAcnM,KAC5C,CAwBaoM,CAAcpQ,GAKvB,QACE,MAAO,GAEb,CAoBA,SAASqQ,EAAcrQ,EAAKpB,GAC1B,IAAI0R,GAAW,EACf,OAAQ1R,GACN,IAAK,QACH0R,EAtBN,WACE,MAAMC,EAAqBjT,SAASK,eAAe,qBACnD,IAAK4S,EAAoB,MAAO,GAChC,MACEC,SAAS,gBAAEC,IACTF,EACJ,OAAOE,CACT,CAeiBC,GAAmBzD,SAASjN,EAAI6O,KAAKhV,IAChD,MAEF,IAAK,SACHyW,EAjBN,WACE,MAAMK,EAAsBrT,SAASK,eAAe,sBACpD,IAAKgT,EAAqB,MAAO,GACjC,MACEH,SAAS,iBAAEI,IACTD,EACJ,OAAOC,CACT,CAUiBC,GAAoB5D,SAASjN,EAAI+O,MAAMlV,IAClD,MAEF,QACEyW,GAAW,EAGf,OAAOA,EAAW,CAAC,SAAW,EAChC,CAoBA,SAASQ,EAAiBC,GACxB,OAAOA,EAAS3b,KAAI4b,GAClBlE,EAAAA,EApBJ,SAAiCkE,GAC/B,OAAQA,GACN,IAAK,MACL,IAAK,OACL,IAAK,SACL,IAAK,QACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,WACH,OAAOjE,EAAiBiE,GAE1B,QACE,OAAOA,EAEb,CAIyBC,CAAwBD,KAEjD,CAwCA,SAASE,EAAYC,GACnB,MAAM5E,EAAgB4E,EAAKC,mBAAmB,QAAS,CACrDC,KAAM,UACNC,MAAO,QACPC,IAAK,YAEP,OAAO/P,EAAU+K,cAAc1L,OAAO,CAAEsQ,KAAM5E,GAChD,CA6BO,SAASiF,EAAgBxR,EAAKpB,GACnC,MAAM6S,EAAepB,EAAcrQ,EAAKpB,GACxC,OAAQA,GACN,IAAK,UACL,IAAK,QACH,OAxDN,SAAoBoB,EAAKpB,GACvB,MAAM8S,EAAmB1R,EAAI+Q,SAAS9P,QACpC+P,GAAuB,WAAZA,GAAoC,gBAAZA,IAM/BW,EAAWb,EA/BnB,SAAuBC,GACrB,MAAMa,EAA0Bb,EAAS9P,QACvC+P,IAAYA,EAAQ/D,SAAS,YAEzB4E,EAAWd,EAAS9P,QAAO+P,GAAWA,EAAQ/D,SAAS,YAC7D,GAAI4E,EAAS1c,OAAS,EAAG,CACvB,MAAM2c,EAAoBF,EAAwBG,WAChDf,GAAuB,eAAZA,IAIb,OADAY,EAAwBtP,OAAOwP,EAAoB,EAAG,KAAMD,GACrDD,CACT,CACA,OAAOb,CACT,CAgB4BiB,CAFL3B,EAAcrQ,EAAKpB,GACPkP,OAAO4D,KAIlCO,EAjBR,SAA8BjS,GAC5B,OAAIA,EAAIkS,KACC,CAAE,sCAAqClS,EAAIkS,eAE7C,EACT,CAYmBC,CAAqBnS,GAEtC,OAAO2R,EAAS7D,OAAOmE,EACzB,CA2CaG,CAAWpS,EAAKpB,GAEzB,IAAK,SACH,OAAOkS,EAAiBW,GAE1B,IAAK,WACH,OA9BN,SAAsBzR,GACpB,GAAIA,EAAIqS,mBAEN,MAAO,CAACnB,EADK,IAAIoB,KAA8B,IAAzBtS,EAAIqS,sBAG5B,MAAO,EACT,CAwBaE,CAAavS,GAEtB,IAAK,QACL,IAAK,YACH,OA1CN,SAA4BA,GAC1B,QAA0B9G,IAAtB8G,EAAIwS,cAEN,MAAO,CAACtB,EADK,IAAIoB,KAAyB,IAApBtS,EAAIwS,iBAG5B,MAAO,EACT,CAoCaC,CAAmBzS,GAC5B,IAAK,SACL,IAAK,OACH,OA7BN,SAAsBA,GACpB,MAAM0S,EAAa1S,EAAIyP,aAAa/Z,MAAM,KAAK,GAC/C,IACE,MAAMid,EAAsB,GAAED,aAE9B,MAAO,CAACxB,EADK,IAAIoB,KAAKK,IAIxB,CAFE,MAAOpO,GACP,MAAO,EACT,CACF,CAoBaqO,CAAa5S,GAEtB,QACE,MAAO,GAEb,CAEO,SAAS6S,EAAY7S,EAAKgD,GAC/B,OAAO/N,OAAO+L,OAAOhB,EAAK,CACxB8S,QAASlE,EAAQ5O,EAAKgD,GACtB+P,OAAQzD,EAAOtP,EAAKgD,GACpBgQ,SAAUrD,EAAS3P,EAAKgD,GACxBiQ,QACY,WAAVjQ,GACU,SAAVA,GACU,UAAVA,GACU,cAAVA,GACU,aAAVA,GACA,KACFkQ,gBAAiB1B,EAAgBxR,EAAKgD,GACtCnJ,GAAImG,EAAInG,IAAM,MAElB,CAEO,SAASkR,EAAa/K,EAAKgD,GAA8B,IAAvBzB,EAAS4R,UAAAhe,OAAA,QAAA+D,IAAAia,UAAA,GAAAA,UAAA,GAAG3R,EACnD,MAAM4R,EAAeP,EAAY7S,EAAKgD,GACtC,OAAIoQ,EAAaF,gBAAgB/d,OAAS,EACjCqM,EAAUgL,eAAe3L,OAAOuS,GAErC7R,EAAUyB,GACLzB,EAAUyB,GAAOnC,OAAOuS,GAE1B7R,EAAUkL,QAAQ5L,OAAOuS,EAClC,C,8DCnUA,QAhPA,MACEhS,YAAYiS,EAASC,GACnB5R,KAAK6R,SAAWF,EAChB3R,KAAK8R,gBAAkBve,OAAOC,KAAKme,GACnC3R,KAAK+R,eAAiBH,EACtB5R,KAAKgS,aAAe,GACpBhS,KAAKiS,WAAa,GAClBjS,KAAKkS,gBAAiB,EACtBlS,KAAKmS,SAAW,GAChBnS,KAAKsH,eAAiB1L,SAASK,eAAe,iBAC9C+D,KAAK0F,OACP,CAEI0M,cACF,OAAOpS,KAAKmS,QACd,CAEAzM,QACEnS,OAAOC,KAAKwM,KAAK6R,UAAUnd,QAAQsL,KAAKqS,sBACxCrS,KAAKiS,WAAa,GAClBjS,KAAKsS,cACP,CAEAD,qBACE,OAAOE,IACDvS,KAAK+R,eAAeQ,GACtBvS,KAAK6R,SAASU,GAASlf,OAASmf,KAAKC,MACnCD,KAAKE,UAAU1S,KAAK+R,eAAeQ,KAGrCI,QAAQzO,MACN,qCACAqO,EACAvS,KAAK+R,eAET,CAEJ,CAEAa,QAAQC,GACF7S,KAAK6R,SAASgB,KAChB7S,KAAK6R,SAASgB,GAAOxf,OAAO4K,aAAe+B,KAAKgS,aAEpD,CAEAxI,SAAkB,IAAXvP,EAAIwX,UAAAhe,OAAA,QAAA+D,IAAAia,UAAA,GAAAA,UAAA,GAAG,CAAC,EAOb,GANAzR,KAAK8S,aAAY,GAEU,iBAAd7Y,EAAKpG,QAChBoG,EAAKpG,MAAQmM,KAAKiS,YAGhBhY,EAAKpG,MAAMJ,OAAS,EAAG,CACzB,MAAMsf,EAAa/S,KAAKgT,iBAAiB/Y,GAEzC,OADA+F,KAAKiS,WAAahY,EAAKpG,MAChBmM,KAAKiT,UAAUF,EACxB,CAOE,OANA/S,KAAKkT,cAAc,CAAC,GAGhBlT,KAAKiS,WAAWxe,OAAS,GAC3BuM,KAAK0F,QAEAyN,QAAQC,QAAQ,CAAC,EAE5B,CAEAH,UAAUF,GACR,OAAO/S,KAAKqT,aAAaN,GACtBjR,KAAK9B,KAAKsT,0BACVxR,MAAKC,IACJ/B,KAAKkT,cAAcnR,GACZA,KAERa,OAAMC,GAAO8P,QAAQY,IAAI1Q,IAC9B,CAEA2Q,kBAAkBxQ,GAChBA,EAAOf,KAAKvN,SAAQ,CAAC4J,EAAKmV,KACxBnV,EAAIwK,cAAgB,CAClB4K,QAAS1Q,EAAO0Q,QAChBrc,SAAU2L,EAAO/E,YAAc+E,EAAO8J,KAAO2G,EAAI,EACjDE,SAAUrV,EAAIqV,SACf,GAEL,CAEAN,aAAa1B,GACX,MAAMiC,EAAO,CAAEC,SAAUlC,GACzB,OAAO,IAAIwB,SAAQ,CAACC,EAASU,KAC3B5gB,EACG6gB,KAAK,CACJ7W,KAAM,OACNtF,IAAK,gBACL8R,KAAM8I,KAAKE,UAAUkB,GACrBI,SAAU,OACVC,YAAa,qBAEdC,KAAKd,GACLe,KAAKL,EAAO,GAEnB,CAEAd,iBAAiB/Y,GACf,MAAMma,EACJpU,KAAK8R,gBAAgBre,OAAS,EAC1BuM,KAAK8R,gBACLve,OAAOC,KAAKwM,KAAK6R,UACjBF,EAAU,GAKhB,OAJAyC,EAAkB1f,SAAQ6d,IACxBZ,EAAQ9c,KAAKmL,KAAKqU,YAAY9B,EAAStY,GAAM,IAGxC0X,CACT,CAEA0C,YAAY9B,EAAO5S,GAAa,IAAX,MAAE9L,GAAO8L,EAC5B,MAAM2U,EAAetU,KAAK6R,SAASU,GAInC,OAHA+B,EAAazgB,MAAQA,EACrBygB,EAAajhB,OAASihB,EAAajhB,QAAU,CAAC,EAC9CihB,EAAajhB,OAAOkhB,gBAAiB,EAC9BD,CACT,CAEAE,gBAAgB7gB,EAAK2O,GACnB/O,OAAOC,KAAKwM,KAAK6R,UAAUnd,SACzBf,GAAQqM,KAAK6R,SAASle,GAAKN,OAAOM,GAAO2O,GAE7C,CAEAmS,oBAAoBC,GAClB1U,KAAK8R,gBAAkB4C,CACzB,CAEAC,kBAAkBpC,GAChB,MAAMkB,EAAIzT,KAAK8R,gBAAgB8C,QAAQrC,IAC7B,GAANkB,GACFzT,KAAK8R,gBAAgBlR,OAAO6S,EAAG,EAEnC,CAEAoB,eAAetC,IACiC,GAA1CvS,KAAK8R,gBAAgB8C,QAAQrC,IAC/BvS,KAAK8R,gBAAgBjd,KAAK0d,EAE9B,CAEAuC,mBAAmBvC,EAASwC,GAC1B/U,KAAK6R,SAASU,GAASlf,OAAqB,aAAE,GAAK0hB,CACrD,CAEAC,eAAezC,EAAShT,IAEiD,GAArES,KAAK6R,SAASU,GAASlf,OAAqB,aAAE,GAAGuhB,QAAQrV,IAEzDS,KAAK6R,SAASU,GAASlf,OAAqB,aAAE,GAAGwB,KAAK0K,EAE1D,CAEA0V,kBAAkB1C,EAAShT,GACzB,MAAMkU,EAAIzT,KAAK6R,SAASU,GAASlf,OAAqB,aAAE,GAAGuhB,QAAQrV,IACzD,GAANkU,GACFzT,KAAK6R,SAASU,GAASlf,OAAqB,aAAE,GAAGuN,OAAO6S,EAAG,EAE/D,CAEAyB,aAAa3C,EAASlf,GACpB2M,KAAK6R,SAASU,GAASlf,OAASA,CAClC,CAEA8hB,kBAAkB5C,EAAS5e,EAAK2O,GAC9BtC,KAAK6R,SAASU,GAASlf,OAAOM,GAAO2O,CACvC,CAEAnC,UAAUoS,GACR,OAAOvS,KAAK6R,SAASU,GAASlf,MAChC,CAEA6L,UAAUkW,GACRA,EAAOvP,KAAK7F,MACZA,KAAKmS,SAAStd,KAAKugB,EACrB,CAEAlC,cAAcnR,GACRA,EAAe,MACjB/B,KAAK8S,aAAY,GAEjB9S,KAAKmS,SAASzd,SAAQ,SAAS0gB,GACA,mBAAlBA,EAAOjW,QAChBiW,EAAOjW,OAAO4C,EAElB,GAEJ,CAEAuQ,eACEtS,KAAKmS,SAASzd,SAAQ,SAAS0gB,GACD,mBAAjBA,EAAO1P,OAChB0P,EAAO1P,OAEX,GACF,CAEA4N,yBACE,OAAO+B,IACL,GAAIA,EAAgB,MAClB,OAAOlC,QAAQC,QAAQiC,GAClB,CACL,IAAIC,EAAkBtV,KAAK8R,gBAAgBhd,MAAM,GACd,GAA/BkL,KAAK8R,gBAAgBre,SACvB6hB,EAAkB/hB,OAAOC,KAAKwM,KAAK6R,WAErC,MAAM0D,EAAchiB,OAAOC,KAAKwM,KAAK6R,UAAUpe,OACzC+hB,EAAgBH,EAAStT,QAAQjN,MAAM,EAAGwgB,EAAgB7hB,QAC1DgiB,EAAeJ,EAAStT,QAAQjN,MACpCwgB,EAAgB7hB,OAChB6hB,EAAgB7hB,OAAS8hB,GAErBxT,EAAU,CAAC,EAQjB,OAPAyT,EAAc9gB,SAAQ,CAACsO,EAAQyQ,KAC7BzT,KAAKwT,kBAAkBxQ,GACvBjB,EAAQuT,EAAgB7B,IAAMzQ,CAAM,IAEtCyS,EAAa/gB,SAAQ,CAACsO,EAAQyQ,KAC5B1R,EAAS,UAASxO,OAAOC,KAAKwM,KAAK6R,UAAU4B,MAAQzQ,CAAM,IAEtDmQ,QAAQC,QAAQrR,EACzB,EAEJ,CAEA+Q,YAAY4C,GAER1V,KAAKsH,eAAe7R,MAAMuL,SADX,IAAb0U,EACkC,QAEA,MAExC,E,kBC7Oa,aACb,OAAO,IAAIvC,SAAQ,SAASC,EAASU,GAC/B5gB,OAAOyiB,WAAaziB,OAAOyiB,UAAUC,YACvC1iB,OAAOyiB,UAAUC,YAAYC,mBAAmBzC,EAASU,GAEzDA,EAAO,2CAEX,GACF,C,2FCNO,SAASvO,EAAY5F,GAAoC,IAAnC,MAAEgC,EAAK,SAAEE,EAAQ,aAAEiU,GAAcnW,EAC5D,OAAqB,IAAjBgC,EAAMlO,OACD0f,QAAQC,QAAQ,CAAC,GAGnB,IAAID,SAAQ,CAACC,EAASU,KAPLiC,MAQtB7iB,EACG8iB,QACE,wBAAuBlZ,mBACtB6E,MACGE,KAZakU,EAYiBD,EAZJC,EAAWA,EAASE,GAAK,QAczD/B,KAAKgC,EAA2B9C,IAChCe,KAAKL,EAAO,GAEnB,CAEO,MAAMqC,EAAczZ,GACzB,IAAIyW,SAAQ,CAACC,EAASU,KACpB5gB,EACG8iB,QAAS,mBAAkBlZ,mBAAmBJ,MAC9CwX,KAAKkC,EAAsBhD,IAC3Be,KAAKL,EAAO,IAGNuC,EAAiBA,CAAClhB,EAAUC,IACvC,IAAI+d,SAAQ,CAACC,EAASU,KACpB5gB,EACG8iB,QAAS,2BAA0B7gB,KAAYC,KAC/C8e,KAAKoC,EAAuBlD,EAASU,IACrCK,KAAKL,EAAO,IAGboC,EAA6B9C,GAAWlQ,IAAA,IAAC,YAAEqT,GAAarT,EAAA,OAC5DkQ,EAAQoD,EAAkBhE,KAAKC,MAAM8D,IAAc,EAE/CC,EAAoBD,IAAe,CACvC1M,UAAW,CACT5H,KAAMsU,EAAY7iB,KAAI,CAAC+iB,EAAGhD,KAAM,IAAMgD,EAAGte,GAAK,YAAWsb,QACzDiD,OAAQH,EAAY9iB,UAIlB2iB,EAAwBhD,GAAWxK,IAAA,IAAC,OAAE5F,GAAQ4F,EAAA,OAClDwK,EAAQZ,KAAKC,MAAMzP,GAAQ,EAEvBsT,EAAyBA,CAAClD,EAASU,IAAW6C,IAAiB,IAAhB,QAAE5U,GAAS4U,EAC9D,MAAMC,EAAgBpE,KAAKC,MAAM1Q,GAC7B6U,EAAc,GAChBxD,EAAQwD,EAAc,GAAGC,WAEzB/C,EAAO,aACT,C,8ECtDF,IAAIgD,EAAY,GAED,aACbA,EAAY,GACZ5jB,OAAO6jB,aAAe,WACpB7jB,OAAO8jB,YAAa,EACpBF,EAAUpiB,SAAQ7B,GAAYA,MAC9BikB,EAAY,EACd,CACF,CAEO,SAASpZ,EAAwB7K,GAKtCK,OAAO8jB,WAAa9jB,OAAOE,WAAWP,EAAU,GAAKikB,EAAUjiB,KAAKhC,EACtE,C,kBCjBO,SAASokB,EAAe3H,GAC7B,MAAMvW,EAAO6C,SAASK,eAAgB,gBAAeqT,KACrD,OAAIvW,EACKA,EAAKkI,UAEP,EACT,C,6/xlsBCLIiW,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB5f,IAAjB6f,EACH,OAAOA,EAAazkB,QAGrB,IAAI0kB,EAASJ,EAAyBE,GAAY,CACjDjf,GAAIif,EACJG,QAAQ,EACR3kB,QAAS,CAAC,GAUX,OANA4kB,EAAoBJ,GAAUK,KAAKH,EAAO1kB,QAAS0kB,EAAQA,EAAO1kB,QAASukB,GAG3EG,EAAOC,QAAS,EAGTD,EAAO1kB,OACf,CAGAukB,EAAoBliB,EAAIuiB,EC5BxBL,EAAoBO,KAAO,WAC1B,MAAM,IAAI1T,MAAM,iCACjB,ErBFIvR,EAAW,GACf0kB,EAAoBQ,EAAI,CAAC3U,EAAQ4U,EAAUC,EAAIC,KAC9C,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAASvE,EAAI,EAAGA,EAAIhhB,EAASgB,OAAQggB,IAAK,CAGzC,IAFA,IAAKmE,EAAUC,EAAIC,GAAYrlB,EAASghB,GACpCwE,GAAY,EACPC,EAAI,EAAGA,EAAIN,EAASnkB,OAAQykB,MACpB,EAAXJ,GAAsBC,GAAgBD,IAAavkB,OAAOC,KAAK2jB,EAAoBQ,GAAGQ,OAAOxkB,GAASwjB,EAAoBQ,EAAEhkB,GAAKikB,EAASM,MAC9IN,EAAShX,OAAOsX,IAAK,IAErBD,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG7C,GAAGG,EAAW,CACbxlB,EAASmO,OAAO6S,IAAK,GACrB,IAAI2E,EAAIP,SACErgB,IAAN4gB,IAAiBpV,EAASoV,EAC/B,CACD,CACA,OAAOpV,CAnBP,CAJC8U,EAAWA,GAAY,EACvB,IAAI,IAAIrE,EAAIhhB,EAASgB,OAAQggB,EAAI,GAAKhhB,EAASghB,EAAI,GAAG,GAAKqE,EAAUrE,IAAKhhB,EAASghB,GAAKhhB,EAASghB,EAAI,GACrGhhB,EAASghB,GAAK,CAACmE,EAAUC,EAAIC,EAqBjB,EsBzBdX,EAAoBkB,EAAKf,IACxB,IAAIgB,EAAShB,GAAUA,EAAOiB,WAC7B,IAAOjB,EAAiB,QACxB,IAAM,EAEP,OADAH,EAAoBqB,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ErBNV3lB,EAAWY,OAAOmlB,eAAkBC,GAASplB,OAAOmlB,eAAeC,GAASA,GAASA,EAAa,UAQtGxB,EAAoByB,EAAI,SAAStW,EAAOuW,GAEvC,GADU,EAAPA,IAAUvW,EAAQtC,KAAKsC,IAChB,EAAPuW,EAAU,OAAOvW,EACpB,GAAoB,iBAAVA,GAAsBA,EAAO,CACtC,GAAW,EAAPuW,GAAavW,EAAMiW,WAAY,OAAOjW,EAC1C,GAAW,GAAPuW,GAAoC,mBAAfvW,EAAMR,KAAqB,OAAOQ,CAC5D,CACA,IAAIwW,EAAKvlB,OAAOwlB,OAAO,MACvB5B,EAAoBiB,EAAEU,GACtB,IAAIE,EAAM,CAAC,EACXtmB,EAAiBA,GAAkB,CAAC,KAAMC,EAAS,CAAC,GAAIA,EAAS,IAAKA,EAASA,IAC/E,IAAI,IAAI6D,EAAiB,EAAPqiB,GAAYvW,EAAyB,iBAAX9L,KAAyB9D,EAAekiB,QAAQpe,GAAUA,EAAU7D,EAAS6D,GACxHjD,OAAO0lB,oBAAoBziB,GAAS9B,SAASf,GAASqlB,EAAIrlB,GAAO,IAAO2O,EAAM3O,KAI/E,OAFAqlB,EAAa,QAAI,IAAM,EACvB7B,EAAoBqB,EAAEM,EAAIE,GACnBF,CACR,EsBxBA3B,EAAoBqB,EAAI,CAAC5lB,EAASsmB,KACjC,IAAI,IAAIvlB,KAAOulB,EACX/B,EAAoBgC,EAAED,EAAYvlB,KAASwjB,EAAoBgC,EAAEvmB,EAASe,IAC5EJ,OAAO6lB,eAAexmB,EAASe,EAAK,CAAE0lB,YAAY,EAAMC,IAAKJ,EAAWvlB,IAE1E,ECNDwjB,EAAoBoC,EAAI,WACvB,GAA0B,iBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOxZ,MAAQ,IAAIyZ,SAAS,cAAb,EAGhB,CAFE,MAAO/d,GACR,GAAsB,iBAAXxI,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxBikB,EAAoBuC,IAAOpC,KAC1BA,EAAS/jB,OAAOwlB,OAAOzB,IACXqC,WAAUrC,EAAOqC,SAAW,IACxCpmB,OAAO6lB,eAAe9B,EAAQ,UAAW,CACxC+B,YAAY,EACZO,IAAK,KACJ,MAAM,IAAI5V,MAAM,0FAA4FsT,EAAOnf,GAAG,IAGjHmf,GCTRH,EAAoBgC,EAAI,CAACR,EAAKkB,IAAUtmB,OAAOumB,UAAUC,eAAetC,KAAKkB,EAAKkB,GCClF1C,EAAoBiB,EAAKxlB,IACH,oBAAXonB,QAA0BA,OAAOC,aAC1C1mB,OAAO6lB,eAAexmB,EAASonB,OAAOC,YAAa,CAAE3X,MAAO,WAE7D/O,OAAO6lB,eAAexmB,EAAS,aAAc,CAAE0P,OAAO,GAAO,ECL9D6U,EAAoB+C,IAAO5C,IAC1BA,EAAO6C,MAAQ,GACV7C,EAAOqC,WAAUrC,EAAOqC,SAAW,IACjCrC,GCHRH,EAAoBe,EAAI,I,MCKxB,IAAIkC,EAAkB,CACrB,IAAK,GAaNjD,EAAoBQ,EAAEO,EAAKmC,GAA0C,IAA7BD,EAAgBC,GAGxD,IAAIC,EAAuB,CAACC,EAA4B7Q,KACvD,IAGI0N,EAAUiD,GAHTzC,EAAU4C,EAAaC,GAAW/Q,EAGhB+J,EAAI,EAC3B,GAAGmE,EAASvc,MAAMlD,GAAgC,IAAxBiiB,EAAgBjiB,KAAa,CACtD,IAAIif,KAAYoD,EACZrD,EAAoBgC,EAAEqB,EAAapD,KACrCD,EAAoBliB,EAAEmiB,GAAYoD,EAAYpD,IAGhD,GAAGqD,EAAS,IAAIzX,EAASyX,EAAQtD,EAClC,CAEA,IADGoD,GAA4BA,EAA2B7Q,GACrD+J,EAAImE,EAASnkB,OAAQggB,IACzB4G,EAAUzC,EAASnE,GAChB0D,EAAoBgC,EAAEiB,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOlD,EAAoBQ,EAAE3U,EAAO,EAGjC0X,EAAqBlB,WAAoC,wBAAIA,WAAoC,yBAAK,GAC1GkB,EAAmBhmB,QAAQ4lB,EAAqBxV,KAAK,KAAM,IAC3D4V,EAAmB7lB,KAAOylB,EAAqBxV,KAAK,KAAM4V,EAAmB7lB,KAAKiQ,KAAK4V,G,KC7CvF,IAAIC,EAAsBxD,EAAoBQ,OAAEngB,EAAW,CAAC,IAAI,MAAM,IAAO2f,EAAoB,QACjGwD,EAAsBxD,EAAoBQ,EAAEgD,E","sources":["webpack://site-dotcom/webpack/runtime/chunk loaded","webpack://site-dotcom/webpack/runtime/create fake namespace object","webpack://site-dotcom/./ts/helpers/debounce.ts","webpack://site-dotcom/./ts/helpers/query.ts","webpack://site-dotcom/./ts/helpers/text.ts","webpack://site-dotcom/./ts/leaflet/bounds.ts","webpack://site-dotcom/./ts/leaflet/components/Map.tsx","webpack://site-dotcom/./ts/leaflet/icon.ts","webpack://site-dotcom/./ts/trip-planner/components/VoteMap.tsx","webpack://site-dotcom/./ts/trip-planner/vote-map-loader.tsx","webpack://site-dotcom/./ts/vote-map-entry.ts","webpack://site-dotcom/./js/algolia-autocomplete-with-geo.js","webpack://site-dotcom/./js/algolia-autocomplete.js","webpack://site-dotcom/./js/algolia-embedded-search-options.js","webpack://site-dotcom/./js/algolia-result.js","webpack://site-dotcom/./js/algolia-search.js","webpack://site-dotcom/./js/geolocation-promise.js","webpack://site-dotcom/./js/google-maps-helpers.js","webpack://site-dotcom/./js/google-maps-loaded.js","webpack://site-dotcom/./js/icons.js","webpack://site-dotcom/webpack/bootstrap","webpack://site-dotcom/webpack/runtime/amd define","webpack://site-dotcom/webpack/runtime/compat get default export","webpack://site-dotcom/webpack/runtime/define property getters","webpack://site-dotcom/webpack/runtime/global","webpack://site-dotcom/webpack/runtime/harmony module decorator","webpack://site-dotcom/webpack/runtime/hasOwnProperty shorthand","webpack://site-dotcom/webpack/runtime/make namespace object","webpack://site-dotcom/webpack/runtime/node module decorator","webpack://site-dotcom/webpack/runtime/runtimeId","webpack://site-dotcom/webpack/runtime/jsonp chunk loading","webpack://site-dotcom/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// Debounce is meant to be used with event listeners. Use it to delay a call\n// until after a burst of events, such as keyboard input.\n//\n//   usage:\n//\n//     const callback = (ev: Event) => {}\n//     document.addEventListener(\"keyup\", debounce(callback, 250))\n//\n\nconst debounce = (callback: Function, delay: number): EventListener => {\n  let timer: number | undefined;\n\n  return (...args) => {\n    window.clearTimeout(timer);\n    timer = window.setTimeout(() => callback(...args), delay);\n  };\n};\n\nexport const debouncePromise = (\n  callback: Function,\n  delay: number\n): Function => {\n  let timerId: number | undefined;\n\n  return function debounced(...args: unknown[]) {\n    if (timerId) {\n      window.clearTimeout(timerId);\n    }\n\n    return new Promise(resolve => {\n      timerId = window.setTimeout(() => resolve(callback(...args)), delay);\n    });\n  };\n};\n\nexport default debounce;\n","export interface QueryParams {\n  [key: string]: string;\n}\n\n// The encoder/decoder functions must be injected\n// because this helper is used by some vanilla JS files,\n// and MochaJS insists that the window object does not\n// include encodeURIComponent or decodeURIComponent,\n// which causes a compiler error. If/when there are\n// no more JS modules using these helpers, the\n// injections should be removed.\ntype EncoderDecoder = (str: string) => string;\n\nexport const paramsToString = (\n  params: QueryParams,\n  encoder: EncoderDecoder\n): string => {\n  if (!params || Object.keys(params).length === 0) {\n    return \"\";\n  }\n\n  return `?${Object.keys(params)\n    .map(key => `${key}=${encoder(params[key])}`)\n    .join(\"&\")}`;\n};\n\ntype QueryReducer = (params: QueryParams, kvString: string) => QueryParams;\n\nconst queryReducer = (decoder: EncoderDecoder): QueryReducer => (\n  params: QueryParams,\n  kvString: string\n) => {\n  const [key, val] = kvString.split(\"=\");\n  return { ...params, [decoder(key)]: decoder(val.replace(/\\+/g, \" \")) };\n};\n\nexport const parseQuery = (\n  query: string,\n  decoder: EncoderDecoder\n): QueryParams =>\n  query\n    ? query\n        .substring(1)\n        .split(\"&\")\n        .reduce(queryReducer(decoder), {})\n    : {};\n","/**\n * Replaces slashes in a given string with a slash + ZERO_WIDTH_SPACE.\n * It's visually the same, but allows browsers to break the text into multiple lines.\n */\n// eslint-disable-next-line import/prefer-default-export\nexport const breakTextAtSlash = (str: string): string =>\n  str.replace(/\\//g, \"/​\");\n\nexport interface HighlightedSpan {\n  offset: number;\n  length: number;\n}\nexport function highlightText(\n  text: string,\n  spans: HighlightedSpan[] = []\n): string {\n  const parts = [];\n  let cursor = 0;\n  spans.forEach(span => {\n    const { offset, length } = span;\n\n    parts.push(text.slice(cursor, offset));\n    parts.push(`<em>${text.slice(offset, offset + length)}</em>`);\n    cursor = length + offset;\n  });\n  parts.push(text.slice(cursor));\n\n  return parts.join(\"\");\n}\n","import { LatLng, latLng, LatLngBounds, latLngBounds } from \"leaflet\";\nimport { MapMarker as Marker } from \"./components/__mapdata\";\n\nconst getBounds = (markers: Marker[]): LatLngBounds | undefined => {\n  if (!markers.length) return undefined;\n  const points: LatLng[] = markers.map(m => latLng(m.latitude, m.longitude));\n  return latLngBounds(points);\n};\n\nexport default getBounds;\n","import React, { ReactElement, useLayoutEffect } from \"react\";\nimport { uniqBy } from \"lodash\";\nimport deepEqual from \"fast-deep-equal/react\";\nimport {\n  Icon,\n  LatLngBounds,\n  Marker as LeafletMarker,\n  MarkerOptions\n} from \"leaflet\";\nimport Leaflet from \"react-leaflet\";\nimport { MapData, MapMarker, IconOpts } from \"./__mapdata\";\n\nexport interface ZoomOpts {\n  maxZoom: number;\n  minZoom: number;\n  scrollWheelZoom: boolean;\n  style: object;\n}\n\nexport const defaultZoomOpts: ZoomOpts = {\n  maxZoom: 18,\n  minZoom: 9,\n  scrollWheelZoom: false,\n  style: { touchAction: \"none\" } // fix for chrome-android to prevent zooming page\n};\n\ninterface Props {\n  bounds?: LatLngBounds;\n  boundsByMarkers?: boolean;\n  mapData: MapData;\n}\n\nconst mapCenter = (\n  markers: MapMarker[],\n  { latitude, longitude }: { latitude: number; longitude: number }\n): [number, number] | undefined => {\n  if (markers.length === 1) return [markers[0].latitude, markers[0].longitude];\n  return [latitude, longitude];\n};\n\nconst rotateMarker = (\n  markerEl: LeafletMarker<MarkerOptions>,\n  { rotation_angle: angle }: MapMarker\n): void => {\n  // TS does not recognize setRotationAngle, which\n  // is added by the leaflet-rotatedmarker plugin\n  // @ts-ignore\n  markerEl.setRotationAngle(angle);\n};\n\nconst Component = ({\n  bounds,\n  boundsByMarkers,\n  mapData: {\n    default_center: defaultCenter,\n    markers,\n    polylines,\n    tile_server_url: tileServerUrl,\n    zoom\n  }\n}: Props): ReactElement<HTMLElement> | null => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const mapRef = React.createRef<any>();\n  useLayoutEffect(() => {\n    if (mapRef.current && mapRef.current.leafletElement) {\n      // tells Leaflet to redraw the map\n      mapRef.current.leafletElement.invalidateSize();\n    }\n  }, [mapRef]);\n\n  if (typeof window !== \"undefined\" && tileServerUrl !== \"\") {\n    /* eslint-disable */\n    const leaflet: typeof Leaflet = require(\"react-leaflet\");\n    const buildIcon: (\n      icon: string | null,\n      opts?: IconOpts\n    ) => Icon | undefined = require(\"../icon\").default;\n    require(\"leaflet-rotatedmarker\");\n    const getBounds = require(\"../bounds\").default;\n    /* eslint-enable */\n    const { Map, Marker, Polyline, Popup, TileLayer } = leaflet;\n    /* istanbul ignore next */\n    const boundsOrByMarkers = bounds || (boundsByMarkers && getBounds(markers));\n    const position = mapCenter(markers, defaultCenter);\n    const nonNullZoom = zoom === null ? undefined : zoom;\n\n    const onTilesLoaded = (): void => {\n      mapRef.current.container.parentElement.classList += \" map--loaded\";\n    };\n\n    return (\n      <Map\n        ref={mapRef}\n        bounds={boundsOrByMarkers}\n        center={position}\n        zoom={nonNullZoom}\n        {...defaultZoomOpts}\n      >\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url={`${tileServerUrl}/osm_tiles/{z}/{x}/{y}.png`}\n          onload={onTilesLoaded}\n        />\n        {polylines.map(\n          /* istanbul ignore next */\n          polyline => (\n            <Polyline\n              className={polyline.className}\n              key={\n                polyline.id || `polyline-${Math.floor(Math.random() * 1000)}`\n              }\n              positions={polyline.positions}\n              color={polyline.color}\n              weight={polyline.weight}\n              dashArray={polyline[\"dotted?\"] ? \"4px 8px\" : \"none\"}\n              lineCap={polyline[\"dotted?\"] ? \"butt\" : \"round\"}\n              lineJoin={polyline[\"dotted?\"] ? \"miter\" : \"round\"}\n            />\n          )\n        )}\n        {uniqBy(markers, \"id\").map(marker => (\n          <Marker\n            icon={buildIcon(marker.icon, marker.icon_opts)}\n            key={\n              marker.id ||\n              /* istanbul ignore next */ `marker-${Math.floor(\n                Math.random() * 1000\n              )}`\n            }\n            alt={marker.alt || \"Marker\"}\n            position={[marker.latitude, marker.longitude]}\n            ref={ref => ref && rotateMarker(ref.leafletElement, marker)}\n            zIndexOffset={marker.z_index}\n            keyboard={false}\n            onclick={marker.onClick}\n          >\n            {marker.tooltip && <Popup maxHeight={175}>{marker.tooltip}</Popup>}\n          </Marker>\n        ))}\n      </Map>\n    );\n  }\n  return null;\n};\n\nexport default React.memo(Component, deepEqual);\n","import { Icon } from \"leaflet\";\nimport { IconOpts } from \"../leaflet/components/__mapdata\";\n\nexport type IconType = (\n  icon: string | null,\n  opts: IconOpts | undefined\n) => Icon | undefined;\n\ninterface LeafletOpts {\n  iconSize: [number, number];\n  iconAnchor: [number, number];\n  popupAnchor: [number, number];\n}\n\nexport const defaultIconOpts: LeafletOpts = {\n  iconAnchor: [22, 55],\n  iconSize: [45, 75],\n  popupAnchor: [0, -37]\n};\n\nexport default (\n  icon: string | null,\n  opts?: IconOpts | null\n): Icon | undefined => {\n  const iconOpts =\n    opts !== null && opts\n      ? {\n          iconAnchor: opts.icon_anchor || defaultIconOpts.iconAnchor,\n          iconSize: opts.icon_size || defaultIconOpts.iconSize,\n          popupAnchor: opts.popup_anchor || defaultIconOpts.popupAnchor\n        }\n      : defaultIconOpts;\n  return icon === null\n    ? undefined\n    : new Icon({\n        ...iconOpts,\n        iconUrl: `/images/icon-${icon}.svg`,\n        iconRetinaUrl: `/images/icon-${icon}.svg`\n      });\n};\n","import React, { ReactElement } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { polygonContains } from \"d3-polygon\";\nimport Map from \"../../leaflet/components/Map\";\nimport precinctsData from \"../../../static/data/precincts.json\";\n\n/* eslint-disable arrow-body-style */\n\nconst VoteMap = (): ReactElement<HTMLElement> => {\n  const [fromLocation, setFromLocation] = React.useState<null | {\n    address: string;\n    latitude: number;\n    longitude: number;\n  }>(null);\n  // @ts-ignore data conversion\n  const precincts = precinctsData as {\n    town: string;\n    address: string;\n    formatted_address: string;\n    ward: string;\n    name: string;\n    precinct: string;\n    lat: number;\n    lng: number;\n    path: [[number, number][]];\n  }[];\n  const [portalEl, setPortalEl] = React.useState<null | HTMLDivElement>();\n  const precinct = React.useMemo(() => {\n    return (\n      fromLocation &&\n      precincts.find(x => {\n        return x.path.some(y =>\n          polygonContains(y, [fromLocation.longitude, fromLocation.latitude])\n        );\n      })\n    );\n  }, [fromLocation, precincts]);\n  React.useEffect(() => {\n    const setVotingLocation = (e: CustomEvent): void => {\n      setFromLocation(e.detail);\n    };\n    // @ts-ignore\n    document.addEventListener(\"vote:update-from\", setVotingLocation);\n    const el = document.createElement(\"div\");\n    const root = document.getElementById(\"results-portal\");\n    if (root) {\n      while (root.firstChild) {\n        root.removeChild(root.firstChild);\n      }\n      root.appendChild(el);\n    }\n    setPortalEl(el);\n\n    return () => {\n      // @ts-ignore\n      document.removeEventListener(\"vote:update-from\", setVotingLocation);\n    };\n  }, [setPortalEl]);\n  return (\n    <div>\n      {fromLocation &&\n        portalEl &&\n        ReactDOM.createPortal(\n          precinct ? (\n            <div style={{ marginTop: 20 }}>\n              <h5 className=\"c-search-bar__header\">Your polling location</h5>\n              <div>{precinct.name}</div>\n              <div>{precinct.address}</div>\n              <div>{precinct.town}</div>\n              <div>{`${\n                precinct.ward ? `Ward: ${precinct.ward}, ` : \"\"\n              }Precinct: ${precinct.precinct}`}</div>\n              <a\n                href={`/trip-planner?_utf8=✓&plan[from]=${encodeURIComponent(\n                  fromLocation.address\n                )}&plan[from_latitude]=${\n                  fromLocation.latitude\n                }&plan[from_longitude]=${\n                  fromLocation.longitude\n                }&plan[to]=${encodeURIComponent(\n                  precinct.formatted_address\n                )}&plan[to_latitude]=${precinct.lat}&plan[to_longitude]=${\n                  precinct.lng\n                }&plan[time]=depart&plan[modes][subway]=true&plan[modes][commuter_rail]=true&plan[modes][bus]=true&plan[modes][ferry]=true`}\n              >\n                <button\n                  type=\"button\"\n                  style={{ marginTop: 20, width: \"100%\" }}\n                  className=\"btn btn-primary\"\n                >\n                  Plan a trip\n                </button>\n              </a>\n            </div>\n          ) : (\n            <div>\n              <p>\n                We’re sorry, we are unable to find the polling place for that\n                address.\n              </p>\n              <p>\n                If you are registered to vote in MA, you can&nbsp;\n                <a href=\"https://www.sec.state.ma.us/WhereDoIVoteMA/bal/MyElectionInfo.aspx\">\n                  find your polling place on the Secretary of the Commonwealth’s\n                  website.\n                </a>\n              </p>\n            </div>\n          ),\n          portalEl\n        )}\n      <div style={{ height: 800 }}>\n        <Map\n          mapData={{\n            default_center: { longitude: -71.05891, latitude: 42.360718 },\n            height: 250,\n            markers: precinct\n              ? [\n                  {\n                    icon: \"map-pin\",\n                    id: `${precinct.lng}-${precinct.lat}`,\n                    longitude: precinct.lng,\n                    latitude: precinct.lat,\n                    rotation_angle: 0,\n                    tooltip: null\n                  }\n                ]\n              : [],\n            polylines: [],\n            tile_server_url: \"https://mbta-map-tiles-dev.s3.amazonaws.com\",\n            width: 735,\n            zoom: 15\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default VoteMap;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport AlgoliaAutocompleteWithGeo from \"../../js/algolia-autocomplete-with-geo\";\nimport { buildOptions } from \"../../js/algolia-embedded-search-options\";\nimport Algolia from \"../../js/algolia-search\";\nimport { doWhenGoogleMapsIsReady } from \"../../js/google-maps-loaded\";\nimport VoteMap from \"./components/VoteMap\";\n\n/* eslint-disable no-underscore-dangle */\n\nconst render = (): void => {\n  ReactDOM.render(<VoteMap />, document.getElementById(\"react-vote-root\"));\n};\n\nexport const onLoad = (): void => {\n  doWhenGoogleMapsIsReady(() => {\n    const { selectors } = buildOptions(\"search-address\");\n    const ac = new AlgoliaAutocompleteWithGeo({\n      id: \"search-address\",\n      selectors,\n      indices: [\"locations\"],\n      locationParams: { position: 1, hitsPerPage: 3 },\n      popular: [],\n      parent: {}\n    });\n    ac.onHitSelected = ev => {\n      const hit = ev.originalEvent;\n      const index = hit._args[1];\n      switch (index) {\n        case \"locations\":\n          ac.setValue(hit._args[0].address);\n          ac._doLocationSearch(hit._args[0].address);\n          break;\n        case \"usemylocation\":\n          ac.useMyLocationSearch();\n          break;\n        default:\n          break;\n      }\n    };\n    ac.showLocation = (lat, lng) => {\n      const detail = { latitude: lat, longitude: lng, address: ac.getValue() };\n      const event = new Event(\"vote:update-from\");\n      // @ts-ignore\n      event.detail = detail;\n      document.dispatchEvent(event);\n    };\n    const controller = new Algolia({}, {});\n    controller.addWidget(ac);\n    render();\n  });\n};\n\nexport default onLoad;\n","import voteMap from \"./trip-planner/vote-map-loader\";\n\nvoteMap();\n","import AlgoliaAutocomplete from \"./algolia-autocomplete\";\nimport { TEMPLATES } from \"./algolia-result\";\nimport * as GoogleMapsHelpers from \"./google-maps-helpers\";\n// eslint-disable-next-line\nimport * as QueryHelpers from \"../ts/helpers/query\";\nimport geolocationPromise from \"./geolocation-promise\";\nimport debounce from \"../ts/helpers/debounce.ts\";\n\n/* eslint-disable no-underscore-dangle */\n\nexport const addFilterParam = (params, path) => {\n  switch (path) {\n    case \"/schedules/commuter-rail\":\n    case \"/schedules/commuter-rail/\":\n      return Object.assign(params, { filter: \"commuter_rail\" });\n\n    case \"/schedules/subway\":\n    case \"/schedules/subway/\":\n      return Object.assign(params, { filter: \"subway\" });\n\n    case \"/schedules/bus\":\n    case \"/schedules/bus/\":\n      return Object.assign(params, { filter: \"bus\" });\n\n    default:\n      return params;\n  }\n};\n\nclass AlgoliaAutocompleteWithGeo extends AlgoliaAutocomplete {\n  constructor({\n    id,\n    selectors,\n    indices,\n    locationParams,\n    popular,\n    parent,\n    containerEl = null,\n    templates = TEMPLATES\n  }) {\n    super({ id, selectors, indices, parent, containerEl, templates });\n    this.debounceInterval = 250;\n    if (!this._parent.getParams) {\n      this._parent.getParams = () => ({});\n    }\n    this._popular = popular;\n    this._loadingIndicator = this.getById(selectors.locationLoadingIndicator);\n    this.addUseMyLocationErrorEl();\n    this._locationParams = Object.assign(\n      AlgoliaAutocompleteWithGeo.DEFAULT_LOCATION_PARAMS,\n      locationParams\n    );\n    this._indices.splice(this._locationParams.position, 0, \"locations\");\n    this._indices.push(\"usemylocation\");\n    this._indices.push(\"popular\");\n  }\n\n  addUseMyLocationErrorEl() {\n    const container = this.getById(this._selectors.container);\n    this.useMyLocationErrorEl = document.createElement(\"div\");\n    this.useMyLocationErrorEl.classList.add(\"u-error\");\n    this.useMyLocationErrorEl.style.display = \"none\";\n    this.useMyLocationErrorEl.innerHTML = `${window.location.host} needs permission to use your location.\n      Please update your browser's settings or refresh the page and try again.`;\n    container.parentNode.appendChild(this.useMyLocationErrorEl);\n  }\n\n  _datasetSource(index) {\n    switch (index) {\n      case \"locations\":\n        return debounce(\n          this._locationSource(\"locations\"),\n          this.debounceInterval\n        );\n      case \"usemylocation\":\n        return this._useMyLocationSource();\n      case \"popular\":\n        return this._popularSource();\n      default:\n        return debounce(super._datasetSource(index), this.debounceInterval);\n    }\n  }\n\n  _locationSource(index) {\n    return (input, callback) =>\n      GoogleMapsHelpers.autocomplete({\n        input,\n        hitLimit: this._locationParams.hitLimit\n      }).then(results => this._onResults(callback, index, results));\n  }\n\n  _popularSource() {\n    return (query, callback) => {\n      const results = { popular: { hits: this._popular } };\n      return this._onResults(callback, \"popular\", results);\n    };\n  }\n\n  _useMyLocationSource() {\n    return (query, callback) => {\n      const results = { usemylocation: { hits: [{}] } };\n      return this._onResults(callback, \"usemylocation\", results);\n    };\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  minLength(index) {\n    switch (index) {\n      case \"usemylocation\":\n      case \"popular\":\n        return 0;\n      default:\n        return 1;\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  maxLength(index) {\n    switch (index) {\n      case \"usemylocation\":\n      case \"popular\":\n        return 0;\n      default:\n        return null;\n    }\n  }\n\n  onHitSelected(ev) {\n    // placesService can be injected in tests\n    const hit = ev.originalEvent;\n    const index = hit._args[1];\n    switch (index) {\n      case \"locations\":\n        this._input.value = hit._args[0].address;\n        this._doLocationSearch(hit._args[0].address);\n        break;\n      case \"usemylocation\":\n        this.useMyLocationSearch();\n        break;\n      default:\n        super.onHitSelected(ev);\n    }\n  }\n\n  useMyLocationSearch() {\n    this.useMyLocationErrorEl.style.display = \"none\";\n    this._input.disabled = true;\n    this.setValue(\"Getting your location...\");\n    this._loadingIndicator.style.visibility = \"visible\";\n    return geolocationPromise()\n      .then(pos => this.onUseMyLocationResults(pos))\n      .catch(err => this.onGeolocationError(err));\n  }\n\n  onGeolocationError(err) {\n    this._input.disabled = false;\n    this.setValue(\"\");\n    this._loadingIndicator.style.visibility = \"hidden\";\n    if (err.code && err.code === 1) {\n      this.useMyLocationErrorEl.style.display = \"block\";\n    }\n  }\n\n  _doLocationSearch(address) {\n    return GoogleMapsHelpers.lookupPlace(address).then(result =>\n      this._onLocationSearchResult(result)\n    );\n  }\n\n  _onLocationSearchResult(result) {\n    return this.showLocation(result.latitude, result.longitude);\n  }\n\n  onUseMyLocationResults({ coords: { latitude, longitude } }) {\n    return GoogleMapsHelpers.reverseGeocode(\n      parseFloat(latitude),\n      parseFloat(longitude)\n    ).then(result => this.onReverseGeocodeResults(result, latitude, longitude));\n  }\n\n  onReverseGeocodeResults(result, latitude, longitude) {\n    this._input.disabled = false;\n    this.setValue(result);\n    this._loadingIndicator.style.visibility = \"hidden\";\n    this._input.value = result;\n    this.showLocation(latitude, longitude);\n  }\n\n  showLocation(latitude, longitude) {\n    const params = this._parent.getParams();\n    params.latitude = latitude;\n    params.longitude = longitude;\n    params.address = this._input.value;\n    const qs = QueryHelpers.paramsToString(\n      addFilterParam(params, window.location.pathname),\n      window.encodeURIComponent\n    );\n    window.Turbolinks.visit(`/transit-near-me${qs}`);\n  }\n}\n\nAlgoliaAutocompleteWithGeo.DEFAULT_LOCATION_PARAMS = {\n  position: 0,\n  hitLimit: 5\n};\n\nexport default AlgoliaAutocompleteWithGeo;\n","import * as AlgoliaResult from \"./algolia-result\";\n// eslint-disable-next-line import/no-unresolved, import/extensions\nimport * as QueryHelpers from \"../ts/helpers/query\";\n\n/* eslint-disable no-underscore-dangle */\n/* eslint-disable class-methods-use-this */\n\nexport default class AlgoliaAutocomplete {\n  #templates;\n\n  constructor({\n    id,\n    selectors,\n    indices,\n    parent,\n    containerEl = null,\n    templates = AlgoliaResult.TEMPLATES\n  }) {\n    if (typeof id !== \"string\") {\n      throw new window.Error(\"autocomplete must have an id\");\n    }\n    this.id = id;\n    this.containerElement = containerEl;\n    this._parent = parent;\n    this.error = null;\n    this._selectors = Object.assign(selectors, {\n      resultsContainer: `${selectors.input}-autocomplete-results`\n    });\n    this._input = this.getById(this._selectors.input);\n    this._resultsContainer = this.getById(this._selectors.resultsContainer);\n    this._searchContainer = this.getById(this._selectors.container);\n    this._resetButton = this.getById(this._selectors.resetButton);\n    this.announcer = this.getById(this._selectors.announcer);\n    this._indices = indices;\n    this._datasets = [];\n    this._results = {};\n    this._highlightedHit = null;\n    this._autocomplete = null;\n\n    this.#templates = templates;\n\n    this.bind();\n  }\n\n  getById(id) {\n    return this.containerElement\n      ? this.containerElement.querySelector(`#${id}`)\n      : document.getElementById(id);\n  }\n\n  bind() {\n    this.onClickSuggestion = this.onClickSuggestion.bind(this);\n    this.onHitSelected = this.onHitSelected.bind(this);\n    this.onCursorChanged = this.onCursorChanged.bind(this);\n    this.onCursorRemoved = this.onCursorRemoved.bind(this);\n    this.onOpen = this.onOpen.bind(this);\n    this.onKeyup = this.onKeyup.bind(this);\n    this.clear = this.clear.bind(this);\n    this._toggleResetButton = this._toggleResetButton.bind(this);\n    this.getById = this.getById.bind(this);\n  }\n\n  clear() {\n    this._autocomplete.autocomplete.close();\n    this.setValue(\"\");\n    this._toggleResetButton(false);\n    this._client.reset();\n    this._input.focus();\n\n    //\n    //  To access the autocomplete object sent with this event, use:\n    //\n    //   $(document).on(\"autocomplete:reset\", (ev, { autocomplete }) => {})\n    //\n    // The extra data argument is not passed to\n    // listeners set by document.addEventListener.\n    //\n    window.$(document).trigger(\"autocomplete:reset\", { autocomplete: this });\n  }\n\n  init(client) {\n    this._client = client;\n\n    if (!this._input) return;\n\n    if (!this._resetButton) return;\n\n    this._addResultsContainer();\n\n    this._resultsContainer.innerHTML = \"\";\n\n    this._datasets = this._indices.reduce(\n      (acc, index) => this._buildDataset(index, acc),\n      []\n    );\n\n    this._autocomplete = window.autocomplete(\n      this._input,\n      {\n        appendTo: this._resultsContainer,\n        debug: true,\n        autoselectOnBlur: false,\n        openOnFocus: true,\n        detachedMediaQuery: false,\n        hint: false,\n        minLength: 0,\n        cssClasses: {\n          root: \"c-search-bar__autocomplete\",\n          prefix: \"c-search-bar__\"\n        }\n      },\n      this._datasets\n    );\n\n    this._addErrorMsg();\n    this._toggleResetButton(false);\n    this._addListeners();\n  }\n\n  resetResetButton() {\n    this._toggleResetButton(this._autocomplete.autocomplete.getVal() !== \"\");\n  }\n\n  setError(error) {\n    this.error = error;\n  }\n\n  _addListeners() {\n    window\n      .jQuery(document)\n      .on(\n        \"autocomplete:cursorchanged\",\n        `#${this._selectors.input}`,\n        this.onCursorChanged\n      );\n    window\n      .jQuery(document)\n      .on(\n        \"autocomplete:cursorremoved\",\n        `#${this._selectors.input}`,\n        this.onCursorRemoved\n      );\n    window\n      .jQuery(document)\n      .on(\n        \"autocomplete:selected\",\n        `#${this._selectors.input}`,\n        this.onHitSelected\n      );\n    window\n      .jQuery(document)\n      .on(\"autocomplete:shown\", `#${this._selectors.input}`, this.onOpen);\n\n    window.jQuery(document).on(\"keyup\", `#${this._input.id}`, this.onKeyup);\n\n    window.addEventListener(\"resize\", this.onOpen);\n\n    this._resetButton.removeEventListener(\"click\", this.clear);\n    this._resetButton.addEventListener(\"click\", this.clear);\n\n    // normally we would only use `.js-` prefixed classes for javascript selectors, but\n    // we make an exception here because this element and its class is generated entirely\n    // by the autocomplete widget.\n    window\n      .jQuery(document)\n      .on(\"click\", \".c-search-bar__-suggestion\", this.onClickSuggestion);\n\n    document.addEventListener(\"turbolink:before-render\", () => {\n      window\n        .jQuery(document)\n        .off(\n          \"autocomplete:cursorchanged\",\n          `#${this._selectors.input}`,\n          this.onCursorChanged\n        );\n      window\n        .jQuery(document)\n        .off(\n          \"autocomplete:cursorremoved\",\n          `#${this._selectors.input}`,\n          this.onCursorRemoved\n        );\n      window\n        .jQuery(document)\n        .off(\n          \"autocomplete:selected\",\n          `#${this._selectors.input}`,\n          this.onHitSelected\n        );\n      window\n        .jQuery(document)\n        .off(\"autocomplete:shown\", `#${this._selectors.input}`, this.onOpen);\n      window.removeEventListener(\"resize\", this.onOpen);\n      window.jQuery(document).off(\"keyup\", `#${this._input.id}`, this.onKeyup);\n      window\n        .jQuery(document)\n        .off(\"click\", \".c-search-bar__-suggestion\", this.onClickSuggestion);\n    });\n  }\n\n  _toggleResetButton(show) {\n    this._resetButton.style.display = show ? \"block\" : \"none\";\n  }\n\n  _addErrorMsg() {\n    if (this.getById(\"algolia-error\")) {\n      return;\n    }\n\n    const dropdown = document\n      .getElementsByClassName(\"c-search-bar__-dropdown-menu\")\n      .item(0);\n    const errorMsg = document.createElement(\"div\");\n\n    errorMsg.id = \"algolia-error\";\n    errorMsg.classList.add(\"c-search__error\");\n    errorMsg.innerHTML =\n      \"There was a problem performing your search; please try again in a few minutes.\";\n    dropdown.appendChild(errorMsg);\n    this._client.errorContainer = errorMsg;\n  }\n\n  onKeyup() {\n    this._toggleResetButton(this._autocomplete.autocomplete.getVal() !== \"\");\n  }\n\n  onOpen() {\n    const acDialog = window\n      .jQuery(this._resultsContainer)\n      .find(\".c-search-bar__-dropdown-menu\")[0];\n    if (acDialog && this._input) {\n      this.positionDropdown(acDialog);\n      this.announceResults(acDialog);\n    }\n  }\n\n  positionDropdown(acDialog) {\n    const borderWidth = parseInt(\n      $(`#${this._selectors.container}`).css(\"border-left-width\"),\n      10\n    );\n    const { offsetLeft, offsetTop } = this._input;\n\n    /* eslint-disable no-param-reassign */\n    acDialog.style.width = `${this._searchContainer.offsetWidth}px`;\n    acDialog.style.marginLeft = `${-borderWidth + -offsetLeft}px`;\n    acDialog.style.marginTop = `${borderWidth + offsetTop}px`;\n    /* eslint-enable no-param-reassign */\n  }\n\n  announceResults(dialog) {\n    const count = Array.from(dialog.querySelectorAll(\"a\")).reduce(\n      acc => acc + 1,\n      0\n    );\n    const s = count === 1 ? \"\" : \"s\";\n    this.announcer.innerHTML = `${count} result${s}`;\n  }\n\n  _addResultsContainer() {\n    if (!this._resultsContainer) {\n      this._resultsContainer = document.createElement(\"div\");\n      this._resultsContainer.id = this._selectors.resultsContainer;\n      this._input.parentNode.appendChild(this._resultsContainer);\n    }\n  }\n\n  onCursorChanged({\n    originalEvent: {\n      _args: [hit, index]\n    }\n  }) {\n    this._highlightedHit = {\n      hit,\n      index\n    };\n  }\n\n  onCursorRemoved() {\n    this._highlightedHit = null;\n  }\n\n  clickHighlightedOrFirstResult() {\n    if (this._highlightedHit) {\n      return this.onHitSelected({\n        originalEvent: {\n          _args: [this._highlightedHit.hit, this._highlightedHit.index]\n        }\n      });\n    }\n    return this.clickFirstResult();\n  }\n\n  clickFirstResult() {\n    const firstIndex = this._indices.find(\n      index => this._results[index] && this._results[index].hits.length > 0\n    );\n    if (firstIndex) {\n      return this.onHitSelected({\n        originalEvent: {\n          _args: [this._results[firstIndex].hits[0], firstIndex]\n        }\n      });\n    }\n    return false;\n  }\n\n  onClickSuggestion(ev) {\n    ev.preventDefault();\n  }\n\n  onHitSelected({\n    originalEvent: {\n      _args: [hit, type]\n    }\n  }) {\n    const params = this._parent.getParams();\n    if (this._input) {\n      this._input.value = \"\";\n    }\n\n    window.jQuery.post(\n      \"/search/click\",\n      hit.analyticsData,\n      this.onHitSelectedCallback(hit, type, params)\n    );\n  }\n\n  onHitSelectedCallback(hit, type, params) {\n    window.Turbolinks.visit(\n      AlgoliaResult.getUrl(hit, type) +\n        QueryHelpers.paramsToString(params, window.encodeURIComponent)\n    );\n  }\n\n  _buildDataset(indexName, acc) {\n    acc.push({\n      source: this._datasetSource(indexName),\n      displayKey: AlgoliaAutocomplete.DISPLAY_KEYS[indexName],\n      name: indexName,\n      hitsPerPage: 5,\n      minLength: this.minLength(indexName),\n      maxLength: this.maxLength(indexName),\n      templates: {\n        suggestion: this.renderResult(indexName),\n        footer: this.renderFooterTemplate(indexName)\n      },\n      debounce: 500\n    });\n    return acc;\n  }\n\n  minLength() {\n    return 1;\n  }\n\n  maxLength() {\n    return null;\n  }\n\n  renderFooterTemplate() {\n    // Does not render a footer template by default.\n    // To render a footer template, override this method.\n    return null;\n  }\n\n  _datasetSource(index) {\n    return (query, callback) => {\n      this._client.reset();\n      return this._client\n        .search({ query })\n        .then(results => this._onResults(callback, index, results));\n    };\n  }\n\n  _emptySearchSource() {\n    return (query, callback) => callback([{ data: \"\" }]);\n  }\n\n  _onResults(callback, index, results) {\n    if (!results || results.error) {\n      return;\n    }\n    if (results[index] && results[index].hits) {\n      this._results[index] = results[index];\n      callback(results[index].hits);\n    }\n  }\n\n  renderResult(index) {\n    return hit => AlgoliaResult.renderResult(hit, index, this.#templates);\n  }\n\n  setValue(value) {\n    this._autocomplete.autocomplete.setVal(value);\n    window.jQuery(this._input).change();\n    this._autocomplete.autocomplete.close();\n  }\n\n  getValue() {\n    return this._autocomplete.autocomplete.getVal();\n  }\n}\n\nAlgoliaAutocomplete.DISPLAY_KEYS = {\n  locations: \"hit.place_id\"\n};\n","export const PAGE_IDS = [\n  \"search-stop\",\n  \"search-route\",\n  \"search-route--subway\",\n  \"search-route--commuter_rail\",\n  \"search-route--bus\",\n  \"search-route--ferry\"\n];\n\nexport const PAGE_IDS_WITHOUT_GOOGLE = [\"search-projects\"];\n\nexport const FACET_MAP = {\n  \"search-stop\": \"stations,stops,locations\",\n  \"search-route\": \"subway,commuter-rail,bus,ferry,locations\",\n  \"search-route--subway\": \"subway,stations,stops,locations\",\n  \"search-route--commuter_rail\": \"commuter-rail,stations,stops,locations\",\n  \"search-route--bus\": \"bus,stations,stops,locations\",\n  \"search-route--ferry\": \"ferry,stations,stops,locations\",\n  \"search-projects\": \"projects\"\n};\n\nconst FACET_FILTER_MAP = {\n  \"search-stop\": [],\n  \"search-route\": [0, 1, 2, 3, 4].map(type => `route.type:${type}`),\n  \"search-route--subway\": [\"route.type:0\", \"route.type:1\"],\n  \"search-route--commuter_rail\": [\"route.type:2\"],\n  \"search-route--bus\": [\"route.type:3\"],\n  \"search-route--ferry\": [\"route.type:4\"],\n  \"search-projects\": [\"_content_type:project\", \"_content_type:project_update\"]\n};\n\nconst determineIndex = (isStopSearch, isProjectsSearch) => {\n  if (isStopSearch) return \"stops\";\n  if (isProjectsSearch) return \"drupal\";\n  return \"routes\";\n};\n\nexport const buildOptions = pageId => {\n  const selectors = {\n    input: `${pageId}__input`,\n    container: `${pageId}__container`,\n    goBtn: `${pageId}__input-go-btn`,\n    locationLoadingIndicator: `${pageId}__loading-indicator`,\n    resetButton: `${pageId}__reset`,\n    announcer: `${pageId}__announcer`\n  };\n\n  const params = {};\n\n  const indices = {};\n\n  const isStopSearch = pageId === \"search-stop\";\n  const isProjectsSearch = pageId === \"search-projects\";\n\n  const index = determineIndex(isStopSearch, isProjectsSearch);\n\n  params[index] = {\n    hitsPerPage: 5,\n    facets: [FACET_MAP[pageId]],\n    facetFilters: [FACET_FILTER_MAP[pageId]]\n  };\n\n  indices[index] = {\n    indexName: index,\n    query: \"\"\n  };\n\n  return {\n    selectors,\n    params,\n    indices\n  };\n};\n","import hogan from \"hogan.js\";\nimport _ from \"lodash\";\nimport * as Icons from \"./icons\";\nimport { highlightText } from \"../ts/helpers/text.ts\";\n\n/* eslint-disable no-underscore-dangle */\n\nexport const SELECTORS = {\n  result: \"js-search-result\"\n};\n\nexport const autocompleteByGoogle = () =>\n  window && window.locationAutocompleteBacking === \"google\";\n\nexport const TEMPLATES = {\n  poweredByGoogleLogo: hogan.compile(\n    `<div class=\"c-search-result__hit c-search-result__google\">{{{logo}}}</div>`\n  ),\n  fontAwesomeIcon: hogan.compile(\n    `<span aria-hidden=\"true\" class=\"c-search-result__content-icon fa {{icon}}\"></span>`\n  ),\n  formattedDate: hogan.compile(\n    `<span class=\"c-search-result__event-date\">{{date}}</span>`\n  ),\n  locations: hogan.compile(`\n    <a id=\"hit-{{id}}\" class=\"c-search-result__link u-no-underline\" url={{hitUrl}}>\n      <span>{{{hitIcon}}}</span>\n      <span class=\"c-search-result__hit-name\">{{{hitTitle}}}</span>\n    </a>\n  `),\n  usemylocation: hogan.compile(`\n    <a id=\"search-bar__my-location\" class=\"c-search-bar__my-location\">\n      <i aria-hidden=\"true\" class=\"fa fa-location-arrow \"></i>\n      Use my location\n      <i aria-hidden=\"true\" id=\"search-result__loading-indicator\" class=\"fa fa-cog fa-spin c-search-result__loading-indicator\"></i>\n    </a>\n  `),\n  threePlusIcons: hogan.compile(`\n    {{#hasDate}}\n    <div class=\"c-search-result__hit--vertical\">\n    {{/hasDate}}\n    {{#id}}\n    <a id=\"hit-{{id}}\" class=\"${SELECTORS.result} c-search-result__link\" href=\"{{hitUrl}}\">\n    {{/id}}\n    {{^id}}\n    <a class=\"${SELECTORS.result} c-search-result__link u-no-underline\" href=\"{{hitUrl}}\" data-queryid=\"{{analyticsData.queryID}}\" data-hit-position=\"{{analyticsData.position}}\" data-objectid=\"{{analyticsData.objectID}}\">\n    {{/id}}\n      <span>{{{hitIcon}}}</span>\n      <span class=\"c-search-result__feature-icons\">\n      {{#hitFeatureIcons}}\n        {{{.}}}\n      {{/hitFeatureIcons}}\n      <br/>\n    </span>\n      <span class=\"c-search-result__hit-name\">{{{hitTitle}}}</span>\n    </a>\n    {{#hasDate}}\n    </div>\n    {{/hasDate}}\n  `),\n  default: hogan.compile(`\n    {{#hasDate}}\n    <div class=\"c-search-result__hit--vertical\">\n    {{/hasDate}}\n    {{#id}}\n    <a id=\"hit-{{id}}\" class=\"${SELECTORS.result} c-search-result__link\" href=\"{{hitUrl}}\">\n    {{/id}}\n    {{^id}}\n    <a class=\"${SELECTORS.result} c-search-result__link u-no-underline\" href=\"{{hitUrl}}\" data-queryid=\"{{analyticsData.queryID}}\" data-hit-position=\"{{analyticsData.position}}\" data-objectid=\"{{analyticsData.objectID}}\">\n    {{/id}}\n      <span>{{{hitIcon}}}</span>\n      <span class=\"c-search-result__feature-icons\">\n      {{#hitFeatureIcons}}\n        {{{.}}}\n      {{/hitFeatureIcons}}\n    </span>\n      <span class=\"c-search-result__hit-name\">{{{hitTitle}}}</span>\n    </a>\n    {{#hasDate}}\n    </div>\n    {{/hasDate}}\n  `)\n};\n\nexport const TEMPLATES_ALT_USE_MY_LOCATION = {\n  ...TEMPLATES,\n  usemylocation: hogan.compile(`\n    <a id=\"search-bar__my-location\" class=\"c-search-bar__my-location\">\n      <i aria-hidden=\"true\" class=\"fa fa-location-arrow \"></i>\n      Use my location to find transit near me\n      <i aria-hidden=\"true\" id=\"search-result__loading-indicator\" class=\"fa fa-cog fa-spin c-search-result__loading-indicator\"></i>\n    </a>\n  `)\n};\n\nfunction iconsFromGTFSAncestries(ancestries) {\n  return ancestries\n    .map(anc => anc.toLowerCase())\n    .filter(anc => anc !== \"subway\")\n    .map(anc => Icons.getFeatureIcon(anc));\n}\n\nfunction iconsFromGTFSAncestry(ancestry) {\n  if (Array.isArray(ancestry)) {\n    return iconsFromGTFSAncestries(ancestry);\n  }\n  return iconsFromGTFSAncestries([ancestry]);\n}\n\nfunction _subwayRouteIcon(routeId) {\n  if (routeId.includes(\"Green-\")) {\n    return routeId.toLowerCase().replace(\"-\", \"_line_\");\n  }\n\n  const mapper = {\n    Green: \"green_line\",\n    Red: \"red_line\",\n    Orange: \"orange_line\",\n    Blue: \"blue_line\",\n    Mattapan: \"mattapan_line\"\n  };\n\n  return mapper[routeId];\n}\n\nfunction iconFromGTFSId(id) {\n  const toSubway = _subwayRouteIcon(id);\n  if (toSubway) {\n    return Icons.getFeatureIcon(toSubway);\n  }\n  if (id in [\"commuter_rail\", \"bus\", \"ferry\", \"silver_line\"]) {\n    return Icons.getFeatureIcon(id);\n  }\n  if (id.includes(\"CR-\")) {\n    return Icons.getFeatureIcon(\"commuter_rail\");\n  }\n  return Icons.getFeatureIcon(id);\n}\n\nfunction iconsFromGTFSIds(id) {\n  if (Array.isArray(id)) {\n    return id.map(icon => iconFromGTFSId(icon));\n  }\n  return [iconFromGTFSId(id)];\n}\n\nexport function iconFromGTFS(id, ancestry) {\n  if (!id) {\n    return TEMPLATES.fontAwesomeIcon.render({ icon: \"fa-info\" });\n  }\n  let icons = iconsFromGTFSIds(id);\n  if (ancestry) {\n    icons = icons.concat(iconsFromGTFSAncestry(ancestry));\n  }\n  return icons;\n}\n\nfunction _fileIcon(hit) {\n  switch (hit._file_type) {\n    case \"application/pdf\":\n      return \"fa-file-pdf-o\";\n\n    case \"application/vnd.openxmlformats-officedocument.presentationml.presentation\":\n    case \"application/vnd.ms-powerpoint\":\n      return \"fa-file-powerpoint-o\";\n\n    case \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\":\n    case \"application/vnd.ms-excel\":\n      return \"fa-file-excel-o\";\n\n    case \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":\n    case \"application/msword\":\n      return \"fa-file-word-o\";\n\n    default:\n      return \"fa-file-o\";\n  }\n}\n\nexport function contentIcon(hit) {\n  let icon;\n\n  if (hit.search_api_datasource === \"entity:file\") {\n    icon = _fileIcon(hit);\n  } else {\n    const iconMapper = {\n      search_result: \"fa-info\",\n      news_entry: \"fa-newspaper-o\",\n      event: \"fa-calendar\",\n      project: \"fa-wrench\",\n      project_update: \"fa-wrench\",\n      page: \"fa-info\",\n      landing_page: \"fa-info\",\n      person: \"fa-user\",\n      locations: \"fa-map-marker\"\n    };\n    icon = iconMapper[hit._content_type] || \"fa-info\";\n  }\n\n  return TEMPLATES.fontAwesomeIcon.render({ icon });\n}\n\nfunction _getStopOrStationIcon(hit) {\n  if (hit.stop[\"station?\"]) {\n    return Icons.getFeatureIcon(\"station\");\n  }\n  return Icons.getFeatureIcon(\"stop\");\n}\n\nfunction _iconFromRoute(route) {\n  switch (route.type) {\n    case 2:\n      return \"commuter_rail\";\n\n    case 3:\n      if (route.name.startsWith(\"SL\")) {\n        return \"silver_line\";\n      }\n      return \"bus\";\n\n    case 4:\n      return \"ferry\";\n\n    default:\n      return _subwayRouteIcon(route.id);\n  }\n}\n\nfunction getPopularIcon(icon) {\n  switch (icon) {\n    case \"airplane\":\n      return TEMPLATES.fontAwesomeIcon.render({ icon: \"fa-plane\" });\n    default:\n      return Icons.getFeatureIcon(icon);\n  }\n}\n\nexport function getIcon(hit, type) {\n  switch (type) {\n    case \"locations\":\n      return contentIcon({ ...hit, _content_type: \"locations\" });\n    case \"stops\":\n      return _getStopOrStationIcon(hit);\n\n    case \"routes\":\n      return Icons.getFeatureIcon(_iconFromRoute(hit.route));\n\n    case \"popular\":\n      return getPopularIcon(hit.icon);\n\n    case \"projects\":\n      // eslint-disable-next-line no-use-before-define\n      return getTransitIcons(hit);\n\n    case \"drupal\":\n    case \"pages\":\n    case \"documents\":\n    case \"events\":\n    case \"news\":\n      return contentIcon(hit);\n\n    case \"usemylocation\":\n      return \"\";\n\n    default:\n      return \"\";\n  }\n}\n\nfunction getTransitIcons(hit) {\n  if (\n    hit.related_transit_gtfs_id === null &&\n    hit.related_transit_gtfs_ancestry == null\n  ) {\n    return \"\";\n  }\n  const icons = iconFromGTFS(\n    hit.related_transit_gtfs_id,\n    hit.related_transit_gtfs_ancestry\n  );\n  if (Array.isArray(icons)) {\n    const uniqueIcons = _.uniq(icons);\n    return uniqueIcons.join(\" \");\n  }\n  return icons;\n}\n\nfunction _contentUrl(hit) {\n  if (hit.search_api_datasource === \"entity:file\") {\n    return `/sites/default/files/${hit._file_uri.replace(/public:\\/\\//, \"\")}`;\n  }\n  if (hit._content_type === \"search_result\") {\n    return hit._search_result_url.replace(/internal:/, \"\");\n  }\n  return hit._content_url;\n}\n\nexport function getUrl(hit, index) {\n  switch (index) {\n    case \"stops\":\n      return `/stops/${hit.stop.id}`;\n\n    case \"routes\":\n      return `/schedules/${hit.route.id}`;\n\n    case \"popular\":\n      return hit.url;\n\n    case \"drupal\":\n    case \"projects\":\n    case \"pages\":\n    case \"documents\":\n    case \"events\":\n    case \"news\":\n      return _contentUrl(hit);\n\n    case \"locations\":\n      return \"\";\n    case \"usemylocation\":\n      return \"#\";\n\n    default:\n      return \"#\";\n  }\n}\n\nfunction getRouteTitle(hit) {\n  const name = hit._highlightResult.route.name.value;\n  switch (hit.route.type) {\n    case 3:\n      return `${name} <span class=\"c-search-result__long-name\">${hit._highlightResult.route.long_name.value}</span>`;\n    default:\n      return name;\n  }\n}\n\nfunction _contentTitle(hit) {\n  if (hit._content_type === \"search_result\") {\n    return hit._highlightResult.search_result_title.value;\n  }\n  if (hit.search_api_datasource === \"entity:file\") {\n    return hit._highlightResult.file_name_raw.value;\n  }\n  return hit._highlightResult.content_title.value;\n}\n\nexport function getTitle(hit, type) {\n  switch (type) {\n    case \"locations\":\n      // eslint-disable-next-line no-case-declarations\n      const { address: text, highlighted_spans: spans } = hit;\n\n      return highlightText(text, spans);\n    case \"stops\":\n      return hit._highlightResult.stop.name.value;\n\n    case \"routes\":\n      return getRouteTitle(hit);\n\n    case \"popular\":\n      return hit.name;\n\n    case \"drupal\":\n    case \"projects\":\n    case \"pages\":\n    case \"documents\":\n    case \"events\":\n    case \"news\":\n      return _contentTitle(hit);\n\n    case \"usemylocation\":\n      return \"\";\n\n    default:\n      return \"\";\n  }\n}\n\nfunction _stopsWithAlerts() {\n  const stopsWithAlertsDiv = document.getElementById(\"stops-with-alerts\");\n  if (!stopsWithAlertsDiv) return \"\";\n  const {\n    dataset: { stopsWithAlerts }\n  } = stopsWithAlertsDiv;\n  return stopsWithAlerts;\n}\n\nfunction _routesWithAlerts() {\n  const routesWithAlertsDiv = document.getElementById(\"routes-with-alerts\");\n  if (!routesWithAlertsDiv) return \"\";\n  const {\n    dataset: { routesWithAlerts }\n  } = routesWithAlertsDiv;\n  return routesWithAlerts;\n}\n\nfunction _getAlertIcon(hit, type) {\n  let hasAlert = false;\n  switch (type) {\n    case \"stops\":\n      hasAlert = _stopsWithAlerts().includes(hit.stop.id);\n      break;\n\n    case \"routes\":\n      hasAlert = _routesWithAlerts().includes(hit.route.id);\n      break;\n\n    default:\n      hasAlert = false;\n  }\n\n  return hasAlert ? [\"alert\"] : [];\n}\n\nfunction _standardizeFeatureName(feature) {\n  switch (feature) {\n    case \"Red\":\n    case \"Blue\":\n    case \"Orange\":\n    case \"Green\":\n    case \"Green-B\":\n    case \"Green-C\":\n    case \"Green-D\":\n    case \"Green-E\":\n    case \"Mattapan\":\n      return _subwayRouteIcon(feature);\n\n    default:\n      return feature;\n  }\n}\n\nfunction _featuresToIcons(features) {\n  return features.map(feature =>\n    Icons.getFeatureIcon(_standardizeFeatureName(feature))\n  );\n}\n\nfunction _sortFeatures(features) {\n  const featuresWithoutBranches = features.filter(\n    feature => !feature.includes(\"Green-\")\n  );\n  const branches = features.filter(feature => feature.includes(\"Green-\"));\n  if (branches.length > 0) {\n    const greenLinePosition = featuresWithoutBranches.findIndex(\n      feature => feature === \"green_line\"\n    );\n\n    featuresWithoutBranches.splice(greenLinePosition + 1, 0, ...branches);\n    return featuresWithoutBranches;\n  }\n  return features;\n}\n\nfunction _getCommuterRailZone(hit) {\n  if (hit.zone) {\n    return [`<span class=\"c-icon__cr-zone\">Zone ${hit.zone}</span>`];\n  }\n  return [];\n}\n\nfunction _stopIcons(hit, type) {\n  const filteredFeatures = hit.features.filter(\n    feature => feature !== \"access\" && feature !== \"parking_lot\"\n  );\n\n  const alertFeature = _getAlertIcon(hit, type);\n  const allFeatures = alertFeature.concat(filteredFeatures);\n  const allFeaturesSorted = _sortFeatures(allFeatures);\n  const allIcons = _featuresToIcons(allFeaturesSorted);\n\n  const zoneIcon = _getCommuterRailZone(hit);\n\n  return allIcons.concat(zoneIcon);\n}\n\nfunction _formatDate(date) {\n  const formattedDate = date.toLocaleDateString(\"en-US\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\"\n  });\n  return TEMPLATES.formattedDate.render({ date: formattedDate });\n}\n\nfunction pagesdocumentsDate(hit) {\n  if (hit._file_created !== undefined) {\n    const date = new Date(hit._file_created * 1000);\n    return [_formatDate(date)];\n  }\n  return [];\n}\n\nfunction projectsDate(hit) {\n  if (hit._content_posted_on) {\n    const date = new Date(hit._content_posted_on * 1000);\n    return [_formatDate(date)];\n  }\n  return [];\n}\n\nfunction _contentDate(hit) {\n  const dateString = hit._content_url.split(\"/\")[2];\n  try {\n    const dateStringWithTime = `${dateString}T01:00:00`;\n    const date = new Date(dateStringWithTime);\n    return [_formatDate(date)];\n  } catch (err) {\n    return [];\n  }\n}\n\nexport function getFeatureIcons(hit, type) {\n  const alertFeature = _getAlertIcon(hit, type);\n  switch (type) {\n    case \"popular\":\n    case \"stops\":\n      return _stopIcons(hit, type);\n\n    case \"routes\":\n      return _featuresToIcons(alertFeature);\n\n    case \"projects\":\n      return projectsDate(hit);\n\n    case \"pages\":\n    case \"documents\":\n      return pagesdocumentsDate(hit);\n    case \"events\":\n    case \"news\":\n      return _contentDate(hit);\n\n    default:\n      return [];\n  }\n}\n\nexport function parseResult(hit, index) {\n  return Object.assign(hit, {\n    hitIcon: getIcon(hit, index),\n    hitUrl: getUrl(hit, index),\n    hitTitle: getTitle(hit, index),\n    hasDate:\n      index === \"events\" ||\n      index === \"news\" ||\n      index === \"pages\" ||\n      index === \"documents\" ||\n      index === \"projects\" ||\n      null,\n    hitFeatureIcons: getFeatureIcons(hit, index),\n    id: hit.id || null\n  });\n}\n\nexport function renderResult(hit, index, templates = TEMPLATES) {\n  const parsedResult = parseResult(hit, index);\n  if (parsedResult.hitFeatureIcons.length > 2) {\n    return TEMPLATES.threePlusIcons.render(parsedResult);\n  }\n  if (templates[index]) {\n    return templates[index].render(parsedResult);\n  }\n  return templates.default.render(parsedResult);\n}\n","class Algolia {\n  constructor(queries, defaultParams) {\n    this._queries = queries;\n    this._activeQueryIds = Object.keys(queries);\n    this._defaultParams = defaultParams;\n    this._viewMoreInc = 20;\n    this._lastQuery = \"\";\n    this._doBlankSearch = true;\n    this._widgets = [];\n    this.errorContainer = document.getElementById(\"algolia-error\");\n    this.reset();\n  }\n\n  get widgets() {\n    return this._widgets;\n  }\n\n  reset() {\n    Object.keys(this._queries).forEach(this.resetDefaultParams());\n    this._lastQuery = \"\";\n    this.resetWidgets();\n  }\n\n  resetDefaultParams() {\n    return queryId => {\n      if (this._defaultParams[queryId]) {\n        this._queries[queryId].params = JSON.parse(\n          JSON.stringify(this._defaultParams[queryId])\n        );\n      } else {\n        console.error(\n          \"default params not set for queryId\",\n          queryId,\n          this._defaultParams\n        );\n      }\n    };\n  }\n\n  addPage(group) {\n    if (this._queries[group]) {\n      this._queries[group].params.hitsPerPage += this._viewMoreInc;\n    }\n  }\n\n  search(opts = {}) {\n    this.toggleError(false);\n\n    if (!(typeof opts.query == \"string\")) {\n      opts.query = this._lastQuery;\n    }\n\n    if (opts.query.length > 0) {\n      const allQueries = this._buildAllQueries(opts);\n      this._lastQuery = opts.query;\n      return this._doSearch(allQueries);\n    } else {\n      this.updateWidgets({});\n\n      // This code handles the case where the user backspaces to an empty search string\n      if (this._lastQuery.length > 0) {\n        this.reset();\n      }\n      return Promise.resolve({});\n    }\n  }\n\n  _doSearch(allQueries) {\n    return this._sendQueries(allQueries)\n      .then(this._processAlgoliaResults())\n      .then(results => {\n        this.updateWidgets(results);\n        return results;\n      })\n      .catch(err => console.log(err));\n  }\n\n  _addAnalyticsData(result) {\n    result.hits.forEach((hit, i) => {\n      hit.analyticsData = {\n        queryID: result.queryID,\n        position: result.hitsPerPage * result.page + i + 1,\n        objectID: hit.objectID\n      };\n    });\n  }\n\n  _sendQueries(queries) {\n    const body = { requests: queries };\n    return new Promise((resolve, reject) => {\n      window.jQuery\n        .ajax({\n          type: \"POST\",\n          url: \"/search/query\",\n          data: JSON.stringify(body),\n          dataType: \"json\",\n          contentType: \"application/json\"\n        })\n        .done(resolve)\n        .fail(reject);\n    });\n  }\n\n  _buildAllQueries(opts) {\n    const requestedQueryIds =\n      this._activeQueryIds.length > 0\n        ? this._activeQueryIds\n        : Object.keys(this._queries);\n    const queries = [];\n    requestedQueryIds.forEach(queryId => {\n      queries.push(this._buildQuery(queryId, opts));\n    });\n\n    return queries;\n  }\n\n  _buildQuery(queryId, { query }) {\n    const currentQuery = this._queries[queryId];\n    currentQuery.query = query;\n    currentQuery.params = currentQuery.params || {};\n    currentQuery.params.clickAnalytics = true;\n    return currentQuery;\n  }\n\n  updateAllParams(key, value) {\n    Object.keys(this._queries).forEach(\n      key => (this._queries[key].params[key] = value)\n    );\n  }\n\n  updateActiveQueries(queryIds) {\n    this._activeQueryIds = queryIds;\n  }\n\n  removeActiveQuery(queryId) {\n    const i = this._activeQueryIds.indexOf(queryId);\n    if (i != -1) {\n      this._activeQueryIds.splice(i, 1);\n    }\n  }\n\n  addActiveQuery(queryId) {\n    if (this._activeQueryIds.indexOf(queryId) == -1) {\n      this._activeQueryIds.push(queryId);\n    }\n  }\n\n  updateFacetFilters(queryId, filters) {\n    this._queries[queryId].params[\"facetFilters\"][0] = filters;\n  }\n\n  addFacetFilter(queryId, filter) {\n    if (\n      this._queries[queryId].params[\"facetFilters\"][0].indexOf(filter) == -1\n    ) {\n      this._queries[queryId].params[\"facetFilters\"][0].push(filter);\n    }\n  }\n\n  removeFacetFilter(queryId, filter) {\n    const i = this._queries[queryId].params[\"facetFilters\"][0].indexOf(filter);\n    if (i != -1) {\n      this._queries[queryId].params[\"facetFilters\"][0].splice(i, 1);\n    }\n  }\n\n  updateParams(queryId, params) {\n    this._queries[queryId].params = params;\n  }\n\n  updateParamsByKey(queryId, key, value) {\n    this._queries[queryId].params[key] = value;\n  }\n\n  getParams(queryId) {\n    return this._queries[queryId].params;\n  }\n\n  addWidget(widget) {\n    widget.init(this);\n    this._widgets.push(widget);\n  }\n\n  updateWidgets(results) {\n    if (results[\"error\"]) {\n      this.toggleError(true);\n    } else {\n      this._widgets.forEach(function(widget) {\n        if (typeof widget.render === \"function\") {\n          widget.render(results);\n        }\n      });\n    }\n  }\n\n  resetWidgets() {\n    this._widgets.forEach(function(widget) {\n      if (typeof widget.reset === \"function\") {\n        widget.reset();\n      }\n    });\n  }\n\n  _processAlgoliaResults() {\n    return response => {\n      if (response[\"error\"]) {\n        return Promise.resolve(response);\n      } else {\n        let searchedQueries = this._activeQueryIds.slice(0);\n        if (this._activeQueryIds.length == 0) {\n          searchedQueries = Object.keys(this._queries);\n        }\n        const facetLength = Object.keys(this._queries).length;\n        const searchResults = response.results.slice(0, searchedQueries.length);\n        const facetResults = response.results.slice(\n          searchedQueries.length,\n          searchedQueries.length + facetLength\n        );\n        const results = {};\n        searchResults.forEach((result, i) => {\n          this._addAnalyticsData(result);\n          results[searchedQueries[i]] = result;\n        });\n        facetResults.forEach((result, i) => {\n          results[`facets-${Object.keys(this._queries)[i]}`] = result;\n        });\n        return Promise.resolve(results);\n      }\n    };\n  }\n\n  toggleError(hasError) {\n    if (hasError === true) {\n      this.errorContainer.style.display = \"block\";\n    } else {\n      this.errorContainer.style.display = \"none\";\n    }\n  }\n}\n\nexport default Algolia;\n","export default function() {\n  return new Promise(function(resolve, reject) {\n    if (window.navigator && window.navigator.geolocation) {\n      window.navigator.geolocation.getCurrentPosition(resolve, reject);\n    } else {\n      reject(\"window.navigator.geolocation not enabled\");\n    }\n  });\n}\n","const sessionTokenValue = tokenObj => (tokenObj ? tokenObj.Pf : null);\n\nexport function autocomplete({ input, hitLimit, sessionToken }) {\n  if (input.length === 0) {\n    return Promise.resolve({});\n  }\n\n  return new Promise((resolve, reject) => {\n    window.jQuery\n      .getJSON(\n        `/places/autocomplete/${encodeURIComponent(\n          input\n        )}/${hitLimit}/${sessionTokenValue(sessionToken)}`\n      )\n      .done(processAutocompleteResults(resolve))\n      .fail(reject);\n  });\n}\n\nexport const lookupPlace = address =>\n  new Promise((resolve, reject) => {\n    window.jQuery\n      .getJSON(`/places/details/${encodeURIComponent(address)}`)\n      .done(processPlacesCallback(resolve))\n      .fail(reject);\n  });\n\nexport const reverseGeocode = (latitude, longitude) =>\n  new Promise((resolve, reject) => {\n    window.jQuery\n      .getJSON(`/places/reverse-geocode/${latitude}/${longitude}`)\n      .done(processGeocodeCallback(resolve, reject))\n      .fail(reject);\n  });\n\nconst processAutocompleteResults = resolve => ({ predictions }) =>\n  resolve(predictionResults(JSON.parse(predictions)));\n\nconst predictionResults = predictions => ({\n  locations: {\n    hits: predictions.map((p, i) => ({ ...p, id: `location-${i}` })),\n    nbHits: predictions.length\n  }\n});\n\nconst processPlacesCallback = resolve => ({ result }) =>\n  resolve(JSON.parse(result));\n\nconst processGeocodeCallback = (resolve, reject) => ({ results }) => {\n  const parsedResults = JSON.parse(results);\n  if (parsedResults[0]) {\n    resolve(parsedResults[0].formatted);\n  } else {\n    reject(\"No results\");\n  }\n};\n","let callbacks = [];\n\nexport default function() {\n  callbacks = [];\n  window.mapsCallback = function() {\n    window.isMapReady = true;\n    callbacks.forEach(callback => callback());\n    callbacks = [];\n  };\n}\n\nexport function doWhenGoogleMapsIsReady(callback) {\n  // If the map is not ready, add it to an array of callback that will get called soon.\n  // If the map is ready, call the callback, but with a timeout.\n  // The reason for the timeout is so that this function works similar in both cases -- always with a delay, never\n  // immediately.\n  window.isMapReady ? window.setTimeout(callback, 0) : callbacks.push(callback);\n}\n","export function getFeatureIcon(feature) {\n  const icon = document.getElementById(`icon-feature-${feature}`);\n  if (icon) {\n    return icon.innerHTML;\n  }\n  return \"\";\n}\n\nexport function getSvgIcon(feature) {\n  const icon = document.getElementById(`icon-feature-${feature}`);\n  if (icon) {\n    const svg = icon.getElementsByTagName(\"svg\").item(0);\n    if (svg) {\n      return svg.outerHTML;\n    }\n  }\n  return \"\";\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 443;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t443: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunksite_dotcom\"] = globalThis[\"webpackChunksite_dotcom\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [216,514], () => (__webpack_require__(5342)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","exports","callback","delay","timer","_i","args","window","clearTimeout","setTimeout","params","encoder","Object","keys","length","map","key","join","query","decoder","substring","split","reduce","kvString","val","replace","queryReducer","text","spans","parts","cursor","forEach","span","offset","push","slice","markers","points","m","latLng","latitude","longitude","latLngBounds","maxZoom","minZoom","scrollWheelZoom","style","touchAction","react_1","memo","_a","bounds","boundsByMarkers","_b","defaultCenter","polylines","tileServerUrl","zoom","mapRef","createRef","useLayoutEffect","current","leafletElement","invalidateSize","leaflet","require","buildIcon_1","getBounds","Map","Marker_1","Polyline_1","Popup_1","TileLayer","boundsOrByMarkers","position","mapCenter","nonNullZoom","undefined","ref","center","attribution","url","onload","container","parentElement","classList","polyline","className","id","Math","floor","random","positions","color","weight","dashArray","lineCap","lineJoin","uniqBy","marker","icon","icon_opts","alt","markerEl","angle","setRotationAngle","rotateMarker","zIndexOffset","z_index","keyboard","onclick","onClick","tooltip","maxHeight","react_2","iconAnchor","iconSize","popupAnchor","opts","iconOpts","icon_anchor","icon_size","popup_anchor","leaflet_1","iconUrl","iconRetinaUrl","useState","fromLocation","setFromLocation","precincts","precincts_json_1","portalEl","setPortalEl","precinct","useMemo","find","x","path","some","y","polygonContains","useEffect","setVotingLocation","e","detail","document","addEventListener","el","createElement","root","getElementById","firstChild","removeChild","appendChild","removeEventListener","react_dom_1","createPortal","marginTop","name","address","town","ward","href","encodeURIComponent","formatted_address","lat","lng","type","width","height","Map_1","mapData","default_center","rotation_angle","tile_server_url","doWhenGoogleMapsIsReady","selectors","buildOptions","ac","algolia_autocomplete_with_geo_1","indices","locationParams","hitsPerPage","popular","parent","onHitSelected","ev","hit","originalEvent","_args","setValue","_doLocationSearch","useMyLocationSearch","showLocation","getValue","event","Event","dispatchEvent","algolia_search_1","addWidget","render","VoteMap_1","addFilterParam","assign","filter","AlgoliaAutocompleteWithGeo","AlgoliaAutocomplete","constructor","_ref","containerEl","templates","TEMPLATES","super","this","debounceInterval","_parent","getParams","_popular","_loadingIndicator","getById","locationLoadingIndicator","addUseMyLocationErrorEl","_locationParams","DEFAULT_LOCATION_PARAMS","_indices","splice","_selectors","useMyLocationErrorEl","add","display","innerHTML","location","host","parentNode","_datasetSource","index","debounce","_locationSource","_useMyLocationSource","_popularSource","input","GoogleMapsHelpers","hitLimit","then","results","_onResults","hits","usemylocation","minLength","maxLength","_input","value","disabled","visibility","geolocationPromise","pos","onUseMyLocationResults","catch","err","onGeolocationError","code","result","_onLocationSearchResult","_ref2","coords","parseFloat","onReverseGeocodeResults","qs","QueryHelpers","pathname","Turbolinks","visit","_templates","WeakMap","AlgoliaResult","_classPrivateFieldInitSpec","writable","Error","containerElement","error","resultsContainer","_resultsContainer","_searchContainer","_resetButton","resetButton","announcer","_datasets","_results","_highlightedHit","_autocomplete","_classPrivateFieldSet","bind","querySelector","onClickSuggestion","onCursorChanged","onCursorRemoved","onOpen","onKeyup","clear","_toggleResetButton","autocomplete","close","_client","reset","focus","trigger","init","client","_addResultsContainer","acc","_buildDataset","appendTo","debug","autoselectOnBlur","openOnFocus","detachedMediaQuery","hint","cssClasses","prefix","_addErrorMsg","_addListeners","resetResetButton","getVal","setError","on","off","show","dropdown","getElementsByClassName","item","errorMsg","errorContainer","acDialog","positionDropdown","announceResults","borderWidth","parseInt","$","css","offsetLeft","offsetTop","offsetWidth","marginLeft","dialog","count","Array","from","querySelectorAll","s","clickHighlightedOrFirstResult","clickFirstResult","firstIndex","preventDefault","_ref3","post","analyticsData","onHitSelectedCallback","indexName","source","displayKey","DISPLAY_KEYS","suggestion","renderResult","footer","renderFooterTemplate","search","_emptySearchSource","data","setVal","change","locations","PAGE_IDS","PAGE_IDS_WITHOUT_GOOGLE","FACET_MAP","FACET_FILTER_MAP","pageId","goBtn","determineIndex","isStopSearch","isProjectsSearch","facets","facetFilters","SELECTORS","poweredByGoogleLogo","hogan","fontAwesomeIcon","formattedDate","threePlusIcons","default","iconsFromGTFSAncestries","ancestries","anc","toLowerCase","Icons","_subwayRouteIcon","routeId","includes","Green","Red","Orange","Blue","Mattapan","iconFromGTFSId","toSubway","iconFromGTFS","ancestry","icons","isArray","iconsFromGTFSIds","concat","iconsFromGTFSAncestry","contentIcon","search_api_datasource","_file_type","_fileIcon","search_result","news_entry","project","project_update","page","landing_page","person","_content_type","getIcon","stop","_getStopOrStationIcon","route","startsWith","_iconFromRoute","related_transit_gtfs_id","related_transit_gtfs_ancestry","_","getTransitIcons","getUrl","_file_uri","_search_result_url","_content_url","_contentUrl","getTitle","highlighted_spans","highlightText","_highlightResult","long_name","getRouteTitle","search_result_title","file_name_raw","content_title","_contentTitle","_getAlertIcon","hasAlert","stopsWithAlertsDiv","dataset","stopsWithAlerts","_stopsWithAlerts","routesWithAlertsDiv","routesWithAlerts","_routesWithAlerts","_featuresToIcons","features","feature","_standardizeFeatureName","_formatDate","date","toLocaleDateString","year","month","day","getFeatureIcons","alertFeature","filteredFeatures","allIcons","featuresWithoutBranches","branches","greenLinePosition","findIndex","_sortFeatures","zoneIcon","zone","_getCommuterRailZone","_stopIcons","_content_posted_on","Date","projectsDate","_file_created","pagesdocumentsDate","dateString","dateStringWithTime","_contentDate","parseResult","hitIcon","hitUrl","hitTitle","hasDate","hitFeatureIcons","arguments","parsedResult","queries","defaultParams","_queries","_activeQueryIds","_defaultParams","_viewMoreInc","_lastQuery","_doBlankSearch","_widgets","widgets","resetDefaultParams","resetWidgets","queryId","JSON","parse","stringify","console","addPage","group","toggleError","allQueries","_buildAllQueries","_doSearch","updateWidgets","Promise","resolve","_sendQueries","_processAlgoliaResults","log","_addAnalyticsData","i","queryID","objectID","body","requests","reject","ajax","dataType","contentType","done","fail","requestedQueryIds","_buildQuery","currentQuery","clickAnalytics","updateAllParams","updateActiveQueries","queryIds","removeActiveQuery","indexOf","addActiveQuery","updateFacetFilters","filters","addFacetFilter","removeFacetFilter","updateParams","updateParamsByKey","widget","response","searchedQueries","facetLength","searchResults","facetResults","hasError","navigator","geolocation","getCurrentPosition","sessionToken","tokenObj","getJSON","Pf","processAutocompleteResults","lookupPlace","processPlacesCallback","reverseGeocode","processGeocodeCallback","predictions","predictionResults","p","nbHits","_ref4","parsedResults","formatted","callbacks","mapsCallback","isMapReady","getFeatureIcon","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","loaded","__webpack_modules__","call","amdD","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","r","n","getter","__esModule","d","a","getPrototypeOf","obj","t","mode","ns","create","def","getOwnPropertyNames","definition","o","defineProperty","enumerable","get","g","globalThis","Function","hmd","children","set","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}