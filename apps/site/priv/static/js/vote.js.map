{"version":3,"file":"vote.js","mappings":"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","sources":["webpack://site-dotcom/webpack/runtime/chunk loaded","webpack://site-dotcom/webpack/runtime/create fake namespace object","webpack://site-dotcom/./ts/helpers/debounce.ts","webpack://site-dotcom/./ts/helpers/query.ts","webpack://site-dotcom/./ts/helpers/text.ts","webpack://site-dotcom/./ts/leaflet/bounds.ts","webpack://site-dotcom/./ts/leaflet/components/Map.tsx","webpack://site-dotcom/./ts/leaflet/icon.ts","webpack://site-dotcom/./ts/trip-planner/components/VoteMap.tsx","webpack://site-dotcom/./ts/trip-planner/vote-map-loader.tsx","webpack://site-dotcom/./ts/vote-map-entry.ts","webpack://site-dotcom/./js/algolia-autocomplete-with-geo.js","webpack://site-dotcom/./js/algolia-autocomplete.js","webpack://site-dotcom/./js/algolia-embedded-search-options.js","webpack://site-dotcom/./js/algolia-result.js","webpack://site-dotcom/./js/algolia-search.js","webpack://site-dotcom/./js/geolocation-promise.js","webpack://site-dotcom/./js/google-maps-helpers.js","webpack://site-dotcom/./js/google-maps-loaded.js","webpack://site-dotcom/./js/icons.js","webpack://site-dotcom/webpack/bootstrap","webpack://site-dotcom/webpack/runtime/amd define","webpack://site-dotcom/webpack/runtime/compat get default export","webpack://site-dotcom/webpack/runtime/define property getters","webpack://site-dotcom/webpack/runtime/global","webpack://site-dotcom/webpack/runtime/harmony module decorator","webpack://site-dotcom/webpack/runtime/hasOwnProperty shorthand","webpack://site-dotcom/webpack/runtime/make namespace object","webpack://site-dotcom/webpack/runtime/node module decorator","webpack://site-dotcom/webpack/runtime/runtimeId","webpack://site-dotcom/webpack/runtime/jsonp chunk loading","webpack://site-dotcom/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// Debounce is meant to be used with event listeners. Use it to delay a call\n// until after a burst of events, such as keyboard input.\n//\n//   usage:\n//\n//     const callback = (ev: Event) => {}\n//     document.addEventListener(\"keyup\", debounce(callback, 250))\n//\n\nconst debounce = (callback: Function, delay: number): EventListener => {\n  let timer: number | undefined;\n\n  return (...args) => {\n    window.clearTimeout(timer);\n    timer = window.setTimeout(() => callback(...args), delay);\n  };\n};\n\nexport const debouncePromise = (\n  callback: Function,\n  delay: number\n): Function => {\n  let timerId: number | undefined;\n\n  return function debounced(...args: unknown[]) {\n    if (timerId) {\n      window.clearTimeout(timerId);\n    }\n\n    return new Promise(resolve => {\n      timerId = window.setTimeout(() => resolve(callback(...args)), delay);\n    });\n  };\n};\n\nexport default debounce;\n","export interface QueryParams {\n  [key: string]: string;\n}\n\n// The encoder/decoder functions must be injected\n// because this helper is used by some vanilla JS files,\n// and MochaJS insists that the window object does not\n// include encodeURIComponent or decodeURIComponent,\n// which causes a compiler error. If/when there are\n// no more JS modules using these helpers, the\n// injections should be removed.\ntype EncoderDecoder = (str: string) => string;\n\nexport const paramsToString = (\n  params: QueryParams,\n  encoder: EncoderDecoder\n): string => {\n  if (!params || Object.keys(params).length === 0) {\n    return \"\";\n  }\n\n  return `?${Object.keys(params)\n    .map(key => `${key}=${encoder(params[key])}`)\n    .join(\"&\")}`;\n};\n\ntype QueryReducer = (params: QueryParams, kvString: string) => QueryParams;\n\nconst queryReducer = (decoder: EncoderDecoder): QueryReducer => (\n  params: QueryParams,\n  kvString: string\n) => {\n  const [key, val] = kvString.split(\"=\");\n  return { ...params, [decoder(key)]: decoder(val.replace(/\\+/g, \" \")) };\n};\n\nexport const parseQuery = (\n  query: string,\n  decoder: EncoderDecoder\n): QueryParams =>\n  query\n    ? query\n        .substring(1)\n        .split(\"&\")\n        .reduce(queryReducer(decoder), {})\n    : {};\n","/**\n * Replaces slashes in a given string with a slash + ZERO_WIDTH_SPACE.\n * It's visually the same, but allows browsers to break the text into multiple lines.\n */\n// eslint-disable-next-line import/prefer-default-export\nexport const breakTextAtSlash = (str: string): string =>\n  str.replace(/\\//g, \"/​\");\n\nexport interface HighlightedSpan {\n  offset: number;\n  length: number;\n}\nexport function highlightText(\n  text: string,\n  spans: HighlightedSpan[] = []\n): string {\n  const parts = [];\n  let cursor = 0;\n  spans.forEach(span => {\n    const { offset, length } = span;\n\n    parts.push(text.slice(cursor, offset));\n    parts.push(`<em>${text.slice(offset, offset + length)}</em>`);\n    cursor = length + offset;\n  });\n  parts.push(text.slice(cursor));\n\n  return parts.join(\"\");\n}\n","import { LatLng, latLng, LatLngBounds, latLngBounds } from \"leaflet\";\nimport { MapMarker as Marker } from \"./components/__mapdata\";\n\nconst getBounds = (markers: Marker[]): LatLngBounds | undefined => {\n  if (!markers.length) return undefined;\n  const points: LatLng[] = markers.map(m => latLng(m.latitude, m.longitude));\n  return latLngBounds(points);\n};\n\nexport default getBounds;\n","import React, { ReactElement, useLayoutEffect } from \"react\";\nimport { uniqBy } from \"lodash\";\nimport deepEqual from \"fast-deep-equal/react\";\nimport {\n  Icon,\n  LatLngBounds,\n  Marker as LeafletMarker,\n  MarkerOptions\n} from \"leaflet\";\nimport Leaflet from \"react-leaflet\";\nimport { MapData, MapMarker, IconOpts } from \"./__mapdata\";\n\nexport interface ZoomOpts {\n  maxZoom: number;\n  minZoom: number;\n  scrollWheelZoom: boolean;\n  style: object;\n}\n\nexport const defaultZoomOpts: ZoomOpts = {\n  maxZoom: 18,\n  minZoom: 9,\n  scrollWheelZoom: false,\n  style: { touchAction: \"none\" } // fix for chrome-android to prevent zooming page\n};\n\ninterface Props {\n  bounds?: LatLngBounds;\n  boundsByMarkers?: boolean;\n  mapData: MapData;\n}\n\nconst mapCenter = (\n  markers: MapMarker[],\n  { latitude, longitude }: { latitude: number; longitude: number }\n): [number, number] | undefined => {\n  if (markers.length === 1) return [markers[0].latitude, markers[0].longitude];\n  return [latitude, longitude];\n};\n\nconst rotateMarker = (\n  markerEl: LeafletMarker<MarkerOptions>,\n  { rotation_angle: angle }: MapMarker\n): void => {\n  // TS does not recognize setRotationAngle, which\n  // is added by the leaflet-rotatedmarker plugin\n  // @ts-ignore\n  markerEl.setRotationAngle(angle);\n};\n\nconst Component = ({\n  bounds,\n  boundsByMarkers,\n  mapData: {\n    default_center: defaultCenter,\n    markers,\n    polylines,\n    tile_server_url: tileServerUrl,\n    zoom\n  }\n}: Props): ReactElement<HTMLElement> | null => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const mapRef = React.createRef<any>();\n  useLayoutEffect(() => {\n    if (mapRef.current && mapRef.current.leafletElement) {\n      // tells Leaflet to redraw the map\n      mapRef.current.leafletElement.invalidateSize();\n    }\n  }, [mapRef]);\n\n  if (typeof window !== \"undefined\" && tileServerUrl !== \"\") {\n    /* eslint-disable */\n    const leaflet: typeof Leaflet = require(\"react-leaflet\");\n    const buildIcon: (\n      icon: string | null,\n      opts?: IconOpts\n    ) => Icon | undefined = require(\"../icon\").default;\n    require(\"leaflet-rotatedmarker\");\n    const getBounds = require(\"../bounds\").default;\n    /* eslint-enable */\n    const { Map, Marker, Polyline, Popup, TileLayer } = leaflet;\n    /* istanbul ignore next */\n    const boundsOrByMarkers = bounds || (boundsByMarkers && getBounds(markers));\n    const position = mapCenter(markers, defaultCenter);\n    const nonNullZoom = zoom === null ? undefined : zoom;\n\n    const onTilesLoaded = (): void => {\n      mapRef.current.container.parentElement.classList += \" map--loaded\";\n    };\n\n    return (\n      <Map\n        ref={mapRef}\n        bounds={boundsOrByMarkers}\n        center={position}\n        zoom={nonNullZoom}\n        {...defaultZoomOpts}\n      >\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url={`${tileServerUrl}/osm_tiles/{z}/{x}/{y}.png`}\n          onload={onTilesLoaded}\n        />\n        {polylines.map(\n          /* istanbul ignore next */\n          polyline => (\n            <Polyline\n              className={polyline.className}\n              key={\n                polyline.id || `polyline-${Math.floor(Math.random() * 1000)}`\n              }\n              positions={polyline.positions}\n              color={polyline.color}\n              weight={polyline.weight}\n              dashArray={polyline[\"dotted?\"] ? \"4px 8px\" : \"none\"}\n              lineCap={polyline[\"dotted?\"] ? \"butt\" : \"round\"}\n              lineJoin={polyline[\"dotted?\"] ? \"miter\" : \"round\"}\n            />\n          )\n        )}\n        {uniqBy(markers, \"id\").map(marker => (\n          <Marker\n            icon={buildIcon(marker.icon, marker.icon_opts)}\n            key={\n              marker.id ||\n              /* istanbul ignore next */ `marker-${Math.floor(\n                Math.random() * 1000\n              )}`\n            }\n            alt={marker.alt || \"Marker\"}\n            position={[marker.latitude, marker.longitude]}\n            ref={ref => ref && rotateMarker(ref.leafletElement, marker)}\n            zIndexOffset={marker.z_index}\n            keyboard={false}\n            onclick={marker.onClick}\n          >\n            {marker.tooltip && <Popup maxHeight={175}>{marker.tooltip}</Popup>}\n          </Marker>\n        ))}\n      </Map>\n    );\n  }\n  return null;\n};\n\nexport default React.memo(Component, deepEqual);\n","import { Icon } from \"leaflet\";\nimport { IconOpts } from \"../leaflet/components/__mapdata\";\n\nexport type IconType = (\n  icon: string | null,\n  opts: IconOpts | undefined\n) => Icon | undefined;\n\ninterface LeafletOpts {\n  iconSize: [number, number];\n  iconAnchor: [number, number];\n  popupAnchor: [number, number];\n}\n\nexport const defaultIconOpts: LeafletOpts = {\n  iconAnchor: [22, 55],\n  iconSize: [45, 75],\n  popupAnchor: [0, -37]\n};\n\nexport default (\n  icon: string | null,\n  opts?: IconOpts | null\n): Icon | undefined => {\n  const iconOpts =\n    opts !== null && opts\n      ? {\n          iconAnchor: opts.icon_anchor || defaultIconOpts.iconAnchor,\n          iconSize: opts.icon_size || defaultIconOpts.iconSize,\n          popupAnchor: opts.popup_anchor || defaultIconOpts.popupAnchor\n        }\n      : defaultIconOpts;\n  return icon === null\n    ? undefined\n    : new Icon({\n        ...iconOpts,\n        iconUrl: `/images/icon-${icon}.svg`,\n        iconRetinaUrl: `/images/icon-${icon}.svg`\n      });\n};\n","import React, { ReactElement } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { polygonContains } from \"d3-polygon\";\nimport Map from \"../../leaflet/components/Map\";\nimport precinctsData from \"../../../static/data/precincts.json\";\n\n/* eslint-disable arrow-body-style */\n\nconst VoteMap = (): ReactElement<HTMLElement> => {\n  const [fromLocation, setFromLocation] = React.useState<null | {\n    address: string;\n    latitude: number;\n    longitude: number;\n  }>(null);\n  // @ts-ignore data conversion\n  const precincts = precinctsData as {\n    town: string;\n    address: string;\n    formatted_address: string;\n    ward: string;\n    name: string;\n    precinct: string;\n    lat: number;\n    lng: number;\n    path: [[number, number][]];\n  }[];\n  const [portalEl, setPortalEl] = React.useState<null | HTMLDivElement>();\n  const precinct = React.useMemo(() => {\n    return (\n      fromLocation &&\n      precincts.find(x => {\n        return x.path.some(y =>\n          polygonContains(y, [fromLocation.longitude, fromLocation.latitude])\n        );\n      })\n    );\n  }, [fromLocation, precincts]);\n  React.useEffect(() => {\n    const setVotingLocation = (e: CustomEvent): void => {\n      setFromLocation(e.detail);\n    };\n    // @ts-ignore\n    document.addEventListener(\"vote:update-from\", setVotingLocation);\n    const el = document.createElement(\"div\");\n    const root = document.getElementById(\"results-portal\");\n    if (root) {\n      while (root.firstChild) {\n        root.removeChild(root.firstChild);\n      }\n      root.appendChild(el);\n    }\n    setPortalEl(el);\n\n    return () => {\n      // @ts-ignore\n      document.removeEventListener(\"vote:update-from\", setVotingLocation);\n    };\n  }, [setPortalEl]);\n  return (\n    <div>\n      {fromLocation &&\n        portalEl &&\n        ReactDOM.createPortal(\n          precinct ? (\n            <div style={{ marginTop: 20 }}>\n              <h5 className=\"c-search-bar__header\">Your polling location</h5>\n              <div>{precinct.name}</div>\n              <div>{precinct.address}</div>\n              <div>{precinct.town}</div>\n              <div>{`${\n                precinct.ward ? `Ward: ${precinct.ward}, ` : \"\"\n              }Precinct: ${precinct.precinct}`}</div>\n              <a\n                href={`/trip-planner?_utf8=✓&plan[from]=${encodeURIComponent(\n                  fromLocation.address\n                )}&plan[from_latitude]=${\n                  fromLocation.latitude\n                }&plan[from_longitude]=${\n                  fromLocation.longitude\n                }&plan[to]=${encodeURIComponent(\n                  precinct.formatted_address\n                )}&plan[to_latitude]=${precinct.lat}&plan[to_longitude]=${\n                  precinct.lng\n                }&plan[time]=depart&plan[modes][subway]=true&plan[modes][commuter_rail]=true&plan[modes][bus]=true&plan[modes][ferry]=true`}\n              >\n                <button\n                  type=\"button\"\n                  style={{ marginTop: 20, width: \"100%\" }}\n                  className=\"btn btn-primary\"\n                >\n                  Plan a trip\n                </button>\n              </a>\n            </div>\n          ) : (\n            <div>\n              <p>\n                We’re sorry, we are unable to find the polling place for that\n                address.\n              </p>\n              <p>\n                If you are registered to vote in MA, you can&nbsp;\n                <a href=\"https://www.sec.state.ma.us/WhereDoIVoteMA/bal/MyElectionInfo.aspx\">\n                  find your polling place on the Secretary of the Commonwealth’s\n                  website.\n                </a>\n              </p>\n            </div>\n          ),\n          portalEl\n        )}\n      <div style={{ height: 800 }}>\n        <Map\n          mapData={{\n            default_center: { longitude: -71.05891, latitude: 42.360718 },\n            height: 250,\n            markers: precinct\n              ? [\n                  {\n                    icon: \"map-pin\",\n                    id: `${precinct.lng}-${precinct.lat}`,\n                    longitude: precinct.lng,\n                    latitude: precinct.lat,\n                    rotation_angle: 0,\n                    tooltip: null\n                  }\n                ]\n              : [],\n            polylines: [],\n            tile_server_url: \"https://mbta-map-tiles-dev.s3.amazonaws.com\",\n            width: 735,\n            zoom: 15\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default VoteMap;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport AlgoliaAutocompleteWithGeo from \"../../js/algolia-autocomplete-with-geo\";\nimport { buildOptions } from \"../../js/algolia-embedded-search-options\";\nimport Algolia from \"../../js/algolia-search\";\nimport { doWhenGoogleMapsIsReady } from \"../../js/google-maps-loaded\";\nimport VoteMap from \"./components/VoteMap\";\n\n/* eslint-disable no-underscore-dangle */\n\nconst render = (): void => {\n  ReactDOM.render(<VoteMap />, document.getElementById(\"react-vote-root\"));\n};\n\nexport const onLoad = (): void => {\n  doWhenGoogleMapsIsReady(() => {\n    const { selectors } = buildOptions(\"search-address\");\n    const ac = new AlgoliaAutocompleteWithGeo({\n      id: \"search-address\",\n      selectors,\n      indices: [\"locations\"],\n      locationParams: { position: 1, hitsPerPage: 3 },\n      popular: [],\n      parent: {}\n    });\n    ac.onHitSelected = ev => {\n      const hit = ev.originalEvent;\n      const index = hit._args[1];\n      switch (index) {\n        case \"locations\":\n          ac.setValue(hit._args[0].address);\n          ac._doLocationSearch(hit._args[0].address);\n          break;\n        case \"usemylocation\":\n          ac.useMyLocationSearch();\n          break;\n        default:\n          break;\n      }\n    };\n    ac.showLocation = (lat, lng) => {\n      const detail = { latitude: lat, longitude: lng, address: ac.getValue() };\n      const event = new Event(\"vote:update-from\");\n      // @ts-ignore\n      event.detail = detail;\n      document.dispatchEvent(event);\n    };\n    const controller = new Algolia({}, {});\n    controller.addWidget(ac);\n    render();\n  });\n};\n\nexport default onLoad;\n","import voteMap from \"./trip-planner/vote-map-loader\";\n\nvoteMap();\n","import AlgoliaAutocomplete from \"./algolia-autocomplete\";\nimport { TEMPLATES } from \"./algolia-result\";\nimport * as GoogleMapsHelpers from \"./google-maps-helpers\";\n// eslint-disable-next-line\nimport * as QueryHelpers from \"../ts/helpers/query\";\nimport geolocationPromise from \"./geolocation-promise\";\nimport debounce from \"../ts/helpers/debounce.ts\";\n\n/* eslint-disable no-underscore-dangle */\n\nexport const addFilterParam = (params, path) => {\n  switch (path) {\n    case \"/schedules/commuter-rail\":\n    case \"/schedules/commuter-rail/\":\n      return Object.assign(params, { filter: \"commuter_rail\" });\n\n    case \"/schedules/subway\":\n    case \"/schedules/subway/\":\n      return Object.assign(params, { filter: \"subway\" });\n\n    case \"/schedules/bus\":\n    case \"/schedules/bus/\":\n      return Object.assign(params, { filter: \"bus\" });\n\n    default:\n      return params;\n  }\n};\n\nclass AlgoliaAutocompleteWithGeo extends AlgoliaAutocomplete {\n  constructor({\n    id,\n    selectors,\n    indices,\n    locationParams,\n    popular,\n    parent,\n    containerEl = null,\n    templates = TEMPLATES\n  }) {\n    super({ id, selectors, indices, parent, containerEl, templates });\n    this.debounceInterval = 250;\n    if (!this._parent.getParams) {\n      this._parent.getParams = () => ({});\n    }\n    this._popular = popular;\n    this._loadingIndicator = this.getById(selectors.locationLoadingIndicator);\n    this.addUseMyLocationErrorEl();\n    this._locationParams = Object.assign(\n      AlgoliaAutocompleteWithGeo.DEFAULT_LOCATION_PARAMS,\n      locationParams\n    );\n    this._indices.splice(this._locationParams.position, 0, \"locations\");\n    this._indices.push(\"usemylocation\");\n    this._indices.push(\"popular\");\n  }\n\n  addUseMyLocationErrorEl() {\n    const container = this.getById(this._selectors.container);\n    this.useMyLocationErrorEl = document.createElement(\"div\");\n    this.useMyLocationErrorEl.classList.add(\"u-error\");\n    this.useMyLocationErrorEl.style.display = \"none\";\n    this.useMyLocationErrorEl.innerHTML = `${window.location.host} needs permission to use your location.\n      Please update your browser's settings or refresh the page and try again.`;\n    container.parentNode.appendChild(this.useMyLocationErrorEl);\n  }\n\n  _datasetSource(index) {\n    switch (index) {\n      case \"locations\":\n        return debounce(\n          this._locationSource(\"locations\"),\n          this.debounceInterval\n        );\n      case \"usemylocation\":\n        return this._useMyLocationSource();\n      case \"popular\":\n        return this._popularSource();\n      default:\n        return debounce(super._datasetSource(index), this.debounceInterval);\n    }\n  }\n\n  _locationSource(index) {\n    return (input, callback) =>\n      GoogleMapsHelpers.autocomplete({\n        input,\n        hitLimit: this._locationParams.hitLimit\n      }).then(results => this._onResults(callback, index, results));\n  }\n\n  _popularSource() {\n    return (query, callback) => {\n      const results = { popular: { hits: this._popular } };\n      return this._onResults(callback, \"popular\", results);\n    };\n  }\n\n  _useMyLocationSource() {\n    return (query, callback) => {\n      const results = { usemylocation: { hits: [{}] } };\n      return this._onResults(callback, \"usemylocation\", results);\n    };\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  minLength(index) {\n    switch (index) {\n      case \"usemylocation\":\n      case \"popular\":\n        return 0;\n      default:\n        return 1;\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  maxLength(index) {\n    switch (index) {\n      case \"usemylocation\":\n      case \"popular\":\n        return 0;\n      default:\n        return null;\n    }\n  }\n\n  onHitSelected(ev) {\n    // placesService can be injected in tests\n    const hit = ev.originalEvent;\n    const index = hit._args[1];\n    switch (index) {\n      case \"locations\":\n        this._input.value = hit._args[0].address;\n        this._doLocationSearch(hit._args[0].address);\n        break;\n      case \"usemylocation\":\n        this.useMyLocationSearch();\n        break;\n      default:\n        super.onHitSelected(ev);\n    }\n  }\n\n  useMyLocationSearch() {\n    this.useMyLocationErrorEl.style.display = \"none\";\n    this._input.disabled = true;\n    this.setValue(\"Getting your location...\");\n    this._loadingIndicator.style.visibility = \"visible\";\n    return geolocationPromise()\n      .then(pos => this.onUseMyLocationResults(pos))\n      .catch(err => this.onGeolocationError(err));\n  }\n\n  onGeolocationError(err) {\n    this._input.disabled = false;\n    this.setValue(\"\");\n    this._loadingIndicator.style.visibility = \"hidden\";\n    if (err.code && err.code === 1) {\n      this.useMyLocationErrorEl.style.display = \"block\";\n    }\n  }\n\n  _doLocationSearch(address) {\n    return GoogleMapsHelpers.lookupPlace(address).then(result =>\n      this._onLocationSearchResult(result)\n    );\n  }\n\n  _onLocationSearchResult(result) {\n    return this.showLocation(result.latitude, result.longitude);\n  }\n\n  onUseMyLocationResults({ coords: { latitude, longitude } }) {\n    return GoogleMapsHelpers.reverseGeocode(\n      parseFloat(latitude),\n      parseFloat(longitude)\n    ).then(result => this.onReverseGeocodeResults(result, latitude, longitude));\n  }\n\n  onReverseGeocodeResults(result, latitude, longitude) {\n    this._input.disabled = false;\n    this.setValue(result);\n    this._loadingIndicator.style.visibility = \"hidden\";\n    this._input.value = result;\n    this.showLocation(latitude, longitude);\n  }\n\n  showLocation(latitude, longitude) {\n    const params = this._parent.getParams();\n    params.latitude = latitude;\n    params.longitude = longitude;\n    params.address = this._input.value;\n    const qs = QueryHelpers.paramsToString(\n      addFilterParam(params, window.location.pathname),\n      window.encodeURIComponent\n    );\n    window.Turbolinks.visit(`/transit-near-me${qs}`);\n  }\n}\n\nAlgoliaAutocompleteWithGeo.DEFAULT_LOCATION_PARAMS = {\n  position: 0,\n  hitLimit: 5\n};\n\nexport default AlgoliaAutocompleteWithGeo;\n","import * as AlgoliaResult from \"./algolia-result\";\n// eslint-disable-next-line import/no-unresolved, import/extensions\nimport * as QueryHelpers from \"../ts/helpers/query\";\n\n/* eslint-disable no-underscore-dangle */\n/* eslint-disable class-methods-use-this */\n\nexport default class AlgoliaAutocomplete {\n  #templates;\n\n  constructor({\n    id,\n    selectors,\n    indices,\n    parent,\n    containerEl = null,\n    templates = AlgoliaResult.TEMPLATES\n  }) {\n    if (typeof id !== \"string\") {\n      throw new window.Error(\"autocomplete must have an id\");\n    }\n    this.id = id;\n    this.containerElement = containerEl;\n    this._parent = parent;\n    this.error = null;\n    this._selectors = Object.assign(selectors, {\n      resultsContainer: `${selectors.input}-autocomplete-results`\n    });\n    this._input = this.getById(this._selectors.input);\n    this._resultsContainer = this.getById(this._selectors.resultsContainer);\n    this._searchContainer = this.getById(this._selectors.container);\n    this._resetButton = this.getById(this._selectors.resetButton);\n    this.announcer = this.getById(this._selectors.announcer);\n    this._indices = indices;\n    this._datasets = [];\n    this._results = {};\n    this._highlightedHit = null;\n    this._autocomplete = null;\n\n    this.#templates = templates;\n\n    this.bind();\n  }\n\n  getById(id) {\n    return this.containerElement\n      ? this.containerElement.querySelector(`#${id}`)\n      : document.getElementById(id);\n  }\n\n  bind() {\n    this.onClickSuggestion = this.onClickSuggestion.bind(this);\n    this.onHitSelected = this.onHitSelected.bind(this);\n    this.onCursorChanged = this.onCursorChanged.bind(this);\n    this.onCursorRemoved = this.onCursorRemoved.bind(this);\n    this.onOpen = this.onOpen.bind(this);\n    this.onKeyup = this.onKeyup.bind(this);\n    this.clear = this.clear.bind(this);\n    this._toggleResetButton = this._toggleResetButton.bind(this);\n    this.getById = this.getById.bind(this);\n  }\n\n  clear() {\n    this._autocomplete.autocomplete.close();\n    this.setValue(\"\");\n    this._toggleResetButton(false);\n    this._client.reset();\n    this._input.focus();\n\n    //\n    //  To access the autocomplete object sent with this event, use:\n    //\n    //   $(document).on(\"autocomplete:reset\", (ev, { autocomplete }) => {})\n    //\n    // The extra data argument is not passed to\n    // listeners set by document.addEventListener.\n    //\n    window.$(document).trigger(\"autocomplete:reset\", { autocomplete: this });\n  }\n\n  init(client) {\n    this._client = client;\n\n    if (!this._input) return;\n\n    if (!this._resetButton) return;\n\n    this._addResultsContainer();\n\n    this._resultsContainer.innerHTML = \"\";\n\n    this._datasets = this._indices.reduce(\n      (acc, index) => this._buildDataset(index, acc),\n      []\n    );\n\n    this._autocomplete = window.autocomplete(\n      this._input,\n      {\n        appendTo: this._resultsContainer,\n        debug: true,\n        autoselectOnBlur: false,\n        openOnFocus: true,\n        detachedMediaQuery: false,\n        hint: false,\n        minLength: 0,\n        cssClasses: {\n          root: \"c-search-bar__autocomplete\",\n          prefix: \"c-search-bar__\"\n        }\n      },\n      this._datasets\n    );\n\n    this._addErrorMsg();\n    this._toggleResetButton(false);\n    this._addListeners();\n  }\n\n  resetResetButton() {\n    this._toggleResetButton(this._autocomplete.autocomplete.getVal() !== \"\");\n  }\n\n  setError(error) {\n    this.error = error;\n  }\n\n  _addListeners() {\n    window\n      .jQuery(document)\n      .on(\n        \"autocomplete:cursorchanged\",\n        `#${this._selectors.input}`,\n        this.onCursorChanged\n      );\n    window\n      .jQuery(document)\n      .on(\n        \"autocomplete:cursorremoved\",\n        `#${this._selectors.input}`,\n        this.onCursorRemoved\n      );\n    window\n      .jQuery(document)\n      .on(\n        \"autocomplete:selected\",\n        `#${this._selectors.input}`,\n        this.onHitSelected\n      );\n    window\n      .jQuery(document)\n      .on(\"autocomplete:shown\", `#${this._selectors.input}`, this.onOpen);\n\n    window.jQuery(document).on(\"keyup\", `#${this._input.id}`, this.onKeyup);\n\n    window.addEventListener(\"resize\", this.onOpen);\n\n    this._resetButton.removeEventListener(\"click\", this.clear);\n    this._resetButton.addEventListener(\"click\", this.clear);\n\n    // normally we would only use `.js-` prefixed classes for javascript selectors, but\n    // we make an exception here because this element and its class is generated entirely\n    // by the autocomplete widget.\n    window\n      .jQuery(document)\n      .on(\"click\", \".c-search-bar__-suggestion\", this.onClickSuggestion);\n\n    document.addEventListener(\"turbolink:before-render\", () => {\n      window\n        .jQuery(document)\n        .off(\n          \"autocomplete:cursorchanged\",\n          `#${this._selectors.input}`,\n          this.onCursorChanged\n        );\n      window\n        .jQuery(document)\n        .off(\n          \"autocomplete:cursorremoved\",\n          `#${this._selectors.input}`,\n          this.onCursorRemoved\n        );\n      window\n        .jQuery(document)\n        .off(\n          \"autocomplete:selected\",\n          `#${this._selectors.input}`,\n          this.onHitSelected\n        );\n      window\n        .jQuery(document)\n        .off(\"autocomplete:shown\", `#${this._selectors.input}`, this.onOpen);\n      window.removeEventListener(\"resize\", this.onOpen);\n      window.jQuery(document).off(\"keyup\", `#${this._input.id}`, this.onKeyup);\n      window\n        .jQuery(document)\n        .off(\"click\", \".c-search-bar__-suggestion\", this.onClickSuggestion);\n    });\n  }\n\n  _toggleResetButton(show) {\n    this._resetButton.style.display = show ? \"block\" : \"none\";\n  }\n\n  _addErrorMsg() {\n    if (this.getById(\"algolia-error\")) {\n      return;\n    }\n\n    const dropdown = document\n      .getElementsByClassName(\"c-search-bar__-dropdown-menu\")\n      .item(0);\n    const errorMsg = document.createElement(\"div\");\n\n    errorMsg.id = \"algolia-error\";\n    errorMsg.classList.add(\"c-search__error\");\n    errorMsg.innerHTML =\n      \"There was a problem performing your search; please try again in a few minutes.\";\n    dropdown.appendChild(errorMsg);\n    this._client.errorContainer = errorMsg;\n  }\n\n  onKeyup() {\n    this._toggleResetButton(this._autocomplete.autocomplete.getVal() !== \"\");\n  }\n\n  onOpen() {\n    const acDialog = window\n      .jQuery(this._resultsContainer)\n      .find(\".c-search-bar__-dropdown-menu\")[0];\n    if (acDialog && this._input) {\n      this.positionDropdown(acDialog);\n      this.announceResults(acDialog);\n    }\n  }\n\n  positionDropdown(acDialog) {\n    const borderWidth = parseInt(\n      $(`#${this._selectors.container}`).css(\"border-left-width\"),\n      10\n    );\n    const { offsetLeft, offsetTop } = this._input;\n\n    /* eslint-disable no-param-reassign */\n    acDialog.style.width = `${this._searchContainer.offsetWidth}px`;\n    acDialog.style.marginLeft = `${-borderWidth + -offsetLeft}px`;\n    acDialog.style.marginTop = `${borderWidth + offsetTop}px`;\n    /* eslint-enable no-param-reassign */\n  }\n\n  announceResults(dialog) {\n    const count = Array.from(dialog.querySelectorAll(\"a\")).reduce(\n      acc => acc + 1,\n      0\n    );\n    const s = count === 1 ? \"\" : \"s\";\n    this.announcer.innerHTML = `${count} result${s}`;\n  }\n\n  _addResultsContainer() {\n    if (!this._resultsContainer) {\n      this._resultsContainer = document.createElement(\"div\");\n      this._resultsContainer.id = this._selectors.resultsContainer;\n      this._input.parentNode.appendChild(this._resultsContainer);\n    }\n  }\n\n  onCursorChanged({\n    originalEvent: {\n      _args: [hit, index]\n    }\n  }) {\n    this._highlightedHit = {\n      hit,\n      index\n    };\n  }\n\n  onCursorRemoved() {\n    this._highlightedHit = null;\n  }\n\n  clickHighlightedOrFirstResult() {\n    if (this._highlightedHit) {\n      return this.onHitSelected({\n        originalEvent: {\n          _args: [this._highlightedHit.hit, this._highlightedHit.index]\n        }\n      });\n    }\n    return this.clickFirstResult();\n  }\n\n  clickFirstResult() {\n    const firstIndex = this._indices.find(\n      index => this._results[index] && this._results[index].hits.length > 0\n    );\n    if (firstIndex) {\n      return this.onHitSelected({\n        originalEvent: {\n          _args: [this._results[firstIndex].hits[0], firstIndex]\n        }\n      });\n    }\n    return false;\n  }\n\n  onClickSuggestion(ev) {\n    ev.preventDefault();\n  }\n\n  onHitSelected({\n    originalEvent: {\n      _args: [hit, type]\n    }\n  }) {\n    const params = this._parent.getParams();\n    if (this._input) {\n      this._input.value = \"\";\n    }\n\n    window.jQuery.post(\n      \"/search/click\",\n      hit.analyticsData,\n      this.onHitSelectedCallback(hit, type, params)\n    );\n  }\n\n  onHitSelectedCallback(hit, type, params) {\n    window.Turbolinks.visit(\n      AlgoliaResult.getUrl(hit, type) +\n        QueryHelpers.paramsToString(params, window.encodeURIComponent)\n    );\n  }\n\n  _buildDataset(indexName, acc) {\n    acc.push({\n      source: this._datasetSource(indexName),\n      displayKey: AlgoliaAutocomplete.DISPLAY_KEYS[indexName],\n      name: indexName,\n      hitsPerPage: 5,\n      minLength: this.minLength(indexName),\n      maxLength: this.maxLength(indexName),\n      templates: {\n        suggestion: this.renderResult(indexName),\n        footer: this.renderFooterTemplate(indexName)\n      },\n      debounce: 500\n    });\n    return acc;\n  }\n\n  minLength() {\n    return 1;\n  }\n\n  maxLength() {\n    return null;\n  }\n\n  renderFooterTemplate() {\n    // Does not render a footer template by default.\n    // To render a footer template, override this method.\n    return null;\n  }\n\n  _datasetSource(index) {\n    return (query, callback) => {\n      this._client.reset();\n      return this._client\n        .search({ query })\n        .then(results => this._onResults(callback, index, results));\n    };\n  }\n\n  _emptySearchSource() {\n    return (query, callback) => callback([{ data: \"\" }]);\n  }\n\n  _onResults(callback, index, results) {\n    if (!results || results.error) {\n      return;\n    }\n    if (results[index] && results[index].hits) {\n      this._results[index] = results[index];\n      callback(results[index].hits);\n    }\n  }\n\n  renderResult(index) {\n    return hit => AlgoliaResult.renderResult(hit, index, this.#templates);\n  }\n\n  setValue(value) {\n    this._autocomplete.autocomplete.setVal(value);\n    window.jQuery(this._input).change();\n    this._autocomplete.autocomplete.close();\n  }\n\n  getValue() {\n    return this._autocomplete.autocomplete.getVal();\n  }\n}\n\nAlgoliaAutocomplete.DISPLAY_KEYS = {\n  locations: \"hit.place_id\"\n};\n","export const PAGE_IDS = [\n  \"search-stop\",\n  \"search-route\",\n  \"search-route--subway\",\n  \"search-route--commuter_rail\",\n  \"search-route--bus\",\n  \"search-route--ferry\"\n];\n\nexport const PAGE_IDS_WITHOUT_GOOGLE = [\"search-projects\"];\n\nexport const FACET_MAP = {\n  \"search-stop\": \"stations,stops,locations\",\n  \"search-route\": \"subway,commuter-rail,bus,ferry,locations\",\n  \"search-route--subway\": \"subway,stations,stops,locations\",\n  \"search-route--commuter_rail\": \"commuter-rail,stations,stops,locations\",\n  \"search-route--bus\": \"bus,stations,stops,locations\",\n  \"search-route--ferry\": \"ferry,stations,stops,locations\",\n  \"search-projects\": \"projects\"\n};\n\nconst FACET_FILTER_MAP = {\n  \"search-stop\": [],\n  \"search-route\": [0, 1, 2, 3, 4].map(type => `route.type:${type}`),\n  \"search-route--subway\": [\"route.type:0\", \"route.type:1\"],\n  \"search-route--commuter_rail\": [\"route.type:2\"],\n  \"search-route--bus\": [\"route.type:3\"],\n  \"search-route--ferry\": [\"route.type:4\"],\n  \"search-projects\": [\"_content_type:project\", \"_content_type:project_update\"]\n};\n\nconst determineIndex = (isStopSearch, isProjectsSearch) => {\n  if (isStopSearch) return \"stops\";\n  if (isProjectsSearch) return \"drupal\";\n  return \"routes\";\n};\n\nexport const buildOptions = pageId => {\n  const selectors = {\n    input: `${pageId}__input`,\n    container: `${pageId}__container`,\n    goBtn: `${pageId}__input-go-btn`,\n    locationLoadingIndicator: `${pageId}__loading-indicator`,\n    resetButton: `${pageId}__reset`,\n    announcer: `${pageId}__announcer`\n  };\n\n  const params = {};\n\n  const indices = {};\n\n  const isStopSearch = pageId === \"search-stop\";\n  const isProjectsSearch = pageId === \"search-projects\";\n\n  const index = determineIndex(isStopSearch, isProjectsSearch);\n\n  params[index] = {\n    hitsPerPage: 5,\n    facets: [FACET_MAP[pageId]],\n    facetFilters: [FACET_FILTER_MAP[pageId]]\n  };\n\n  indices[index] = {\n    indexName: index,\n    query: \"\"\n  };\n\n  return {\n    selectors,\n    params,\n    indices\n  };\n};\n","import hogan from \"hogan.js\";\nimport _ from \"lodash\";\nimport * as Icons from \"./icons\";\nimport { highlightText } from \"../ts/helpers/text.ts\";\n\n/* eslint-disable no-underscore-dangle */\n\nexport const SELECTORS = {\n  result: \"js-search-result\"\n};\n\nexport const autocompleteByGoogle = () =>\n  window && window.locationAutocompleteBacking === \"google\";\n\nexport const TEMPLATES = {\n  poweredByGoogleLogo: hogan.compile(\n    `<div class=\"c-search-result__hit c-search-result__google\">{{{logo}}}</div>`\n  ),\n  fontAwesomeIcon: hogan.compile(\n    `<span aria-hidden=\"true\" class=\"c-search-result__content-icon fa {{icon}}\"></span>`\n  ),\n  formattedDate: hogan.compile(\n    `<span class=\"c-search-result__event-date\">{{date}}</span>`\n  ),\n  locations: hogan.compile(`\n    <a id=\"hit-{{id}}\" class=\"c-search-result__link u-no-underline\" url={{hitUrl}}>\n      <span>{{{hitIcon}}}</span>\n      <span class=\"c-search-result__hit-name notranslate\">{{{hitTitle}}}</span>\n    </a>\n  `),\n  usemylocation: hogan.compile(`\n    <a id=\"search-bar__my-location\" class=\"c-search-bar__my-location\">\n      <i aria-hidden=\"true\" class=\"fa fa-location-arrow \"></i>\n      Use my location\n      <i aria-hidden=\"true\" id=\"search-result__loading-indicator\" class=\"fa fa-cog fa-spin c-search-result__loading-indicator\"></i>\n    </a>\n  `),\n  threePlusIcons: hogan.compile(`\n    {{#hasDate}}\n    <div class=\"c-search-result__hit--vertical\">\n    {{/hasDate}}\n    {{#id}}\n    <a id=\"hit-{{id}}\" class=\"${SELECTORS.result} c-search-result__link\" href=\"{{hitUrl}}\">\n    {{/id}}\n    {{^id}}\n    <a class=\"${SELECTORS.result} c-search-result__link u-no-underline\" href=\"{{hitUrl}}\" data-queryid=\"{{analyticsData.queryID}}\" data-hit-position=\"{{analyticsData.position}}\" data-objectid=\"{{analyticsData.objectID}}\">\n    {{/id}}\n      <span>{{{hitIcon}}}</span>\n      <span class=\"c-search-result__feature-icons\">\n      {{#hitFeatureIcons}}\n        {{{.}}}\n      {{/hitFeatureIcons}}\n      <br/>\n    </span>\n      <span class=\"c-search-result__hit-name notranslate\">{{{hitTitle}}}</span>\n    </a>\n    {{#hasDate}}\n    </div>\n    {{/hasDate}}\n  `),\n  default: hogan.compile(`\n    {{#hasDate}}\n    <div class=\"c-search-result__hit--vertical\">\n    {{/hasDate}}\n    {{#id}}\n    <a id=\"hit-{{id}}\" class=\"${SELECTORS.result} c-search-result__link\" href=\"{{hitUrl}}\">\n    {{/id}}\n    {{^id}}\n    <a class=\"${SELECTORS.result} c-search-result__link u-no-underline\" href=\"{{hitUrl}}\" data-queryid=\"{{analyticsData.queryID}}\" data-hit-position=\"{{analyticsData.position}}\" data-objectid=\"{{analyticsData.objectID}}\">\n    {{/id}}\n      <span>{{{hitIcon}}}</span>\n      <span class=\"c-search-result__feature-icons\">\n      {{#hitFeatureIcons}}\n        {{{.}}}\n      {{/hitFeatureIcons}}\n    </span>\n      <span class=\"c-search-result__hit-name notranslate\">{{{hitTitle}}}</span>\n    </a>\n    {{#hasDate}}\n    </div>\n    {{/hasDate}}\n  `)\n};\n\nexport const TEMPLATES_ALT_USE_MY_LOCATION = {\n  ...TEMPLATES,\n  usemylocation: hogan.compile(`\n    <a id=\"search-bar__my-location\" class=\"c-search-bar__my-location\">\n      <i aria-hidden=\"true\" class=\"fa fa-location-arrow \"></i>\n      Use my location to find transit near me\n      <i aria-hidden=\"true\" id=\"search-result__loading-indicator\" class=\"fa fa-cog fa-spin c-search-result__loading-indicator\"></i>\n    </a>\n  `)\n};\n\nfunction iconsFromGTFSAncestries(ancestries) {\n  return ancestries\n    .map(anc => anc.toLowerCase())\n    .filter(anc => anc !== \"subway\")\n    .map(anc => Icons.getFeatureIcon(anc));\n}\n\nfunction iconsFromGTFSAncestry(ancestry) {\n  if (Array.isArray(ancestry)) {\n    return iconsFromGTFSAncestries(ancestry);\n  }\n  return iconsFromGTFSAncestries([ancestry]);\n}\n\nfunction _subwayRouteIcon(routeId) {\n  if (routeId.includes(\"Green-\")) {\n    return routeId.toLowerCase().replace(\"-\", \"_line_\");\n  }\n\n  const mapper = {\n    Green: \"green_line\",\n    Red: \"red_line\",\n    Orange: \"orange_line\",\n    Blue: \"blue_line\",\n    Mattapan: \"mattapan_line\"\n  };\n\n  return mapper[routeId];\n}\n\nfunction iconFromGTFSId(id) {\n  const toSubway = _subwayRouteIcon(id);\n  if (toSubway) {\n    return Icons.getFeatureIcon(toSubway);\n  }\n  if (id in [\"commuter_rail\", \"bus\", \"ferry\", \"silver_line\"]) {\n    return Icons.getFeatureIcon(id);\n  }\n  if (id.includes(\"CR-\")) {\n    return Icons.getFeatureIcon(\"commuter_rail\");\n  }\n  return Icons.getFeatureIcon(id);\n}\n\nfunction iconsFromGTFSIds(id) {\n  if (Array.isArray(id)) {\n    return id.map(icon => iconFromGTFSId(icon));\n  }\n  return [iconFromGTFSId(id)];\n}\n\nexport function iconFromGTFS(id, ancestry) {\n  if (!id) {\n    return TEMPLATES.fontAwesomeIcon.render({ icon: \"fa-info\" });\n  }\n  let icons = iconsFromGTFSIds(id);\n  if (ancestry) {\n    icons = icons.concat(iconsFromGTFSAncestry(ancestry));\n  }\n  return icons;\n}\n\nfunction _fileIcon(hit) {\n  switch (hit._file_type) {\n    case \"application/pdf\":\n      return \"fa-file-pdf-o\";\n\n    case \"application/vnd.openxmlformats-officedocument.presentationml.presentation\":\n    case \"application/vnd.ms-powerpoint\":\n      return \"fa-file-powerpoint-o\";\n\n    case \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\":\n    case \"application/vnd.ms-excel\":\n      return \"fa-file-excel-o\";\n\n    case \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":\n    case \"application/msword\":\n      return \"fa-file-word-o\";\n\n    default:\n      return \"fa-file-o\";\n  }\n}\n\nexport function contentIcon(hit) {\n  let icon;\n\n  if (hit.search_api_datasource === \"entity:file\") {\n    icon = _fileIcon(hit);\n  } else {\n    const iconMapper = {\n      search_result: \"fa-info\",\n      news_entry: \"fa-newspaper-o\",\n      event: \"fa-calendar\",\n      project: \"fa-wrench\",\n      project_update: \"fa-wrench\",\n      page: \"fa-info\",\n      landing_page: \"fa-info\",\n      person: \"fa-user\",\n      locations: \"fa-map-marker\"\n    };\n    icon = iconMapper[hit._content_type] || \"fa-info\";\n  }\n\n  return TEMPLATES.fontAwesomeIcon.render({ icon });\n}\n\nfunction _getStopOrStationIcon(hit) {\n  if (hit.stop[\"station?\"]) {\n    return Icons.getFeatureIcon(\"station\");\n  }\n  return Icons.getFeatureIcon(\"stop\");\n}\n\nfunction _iconFromRoute(route) {\n  switch (route.type) {\n    case 2:\n      return \"commuter_rail\";\n\n    case 3:\n      if (route.name.startsWith(\"SL\")) {\n        return \"silver_line\";\n      }\n      return \"bus\";\n\n    case 4:\n      return \"ferry\";\n\n    default:\n      return _subwayRouteIcon(route.id);\n  }\n}\n\nfunction getPopularIcon(icon) {\n  switch (icon) {\n    case \"airplane\":\n      return TEMPLATES.fontAwesomeIcon.render({ icon: \"fa-plane\" });\n    default:\n      return Icons.getFeatureIcon(icon);\n  }\n}\n\nexport function getIcon(hit, type) {\n  switch (type) {\n    case \"locations\":\n      return contentIcon({ ...hit, _content_type: \"locations\" });\n    case \"stops\":\n      return _getStopOrStationIcon(hit);\n\n    case \"routes\":\n      return Icons.getFeatureIcon(_iconFromRoute(hit.route));\n\n    case \"popular\":\n      return getPopularIcon(hit.icon);\n\n    case \"projects\":\n      // eslint-disable-next-line no-use-before-define\n      return getTransitIcons(hit);\n\n    case \"drupal\":\n    case \"pages\":\n    case \"documents\":\n    case \"events\":\n    case \"news\":\n      return contentIcon(hit);\n\n    case \"usemylocation\":\n      return \"\";\n\n    default:\n      return \"\";\n  }\n}\n\nfunction getTransitIcons(hit) {\n  if (\n    hit.related_transit_gtfs_id === null &&\n    hit.related_transit_gtfs_ancestry == null\n  ) {\n    return \"\";\n  }\n  const icons = iconFromGTFS(\n    hit.related_transit_gtfs_id,\n    hit.related_transit_gtfs_ancestry\n  );\n  if (Array.isArray(icons)) {\n    const uniqueIcons = _.uniq(icons);\n    return uniqueIcons.join(\" \");\n  }\n  return icons;\n}\n\nfunction _contentUrl(hit) {\n  if (hit.search_api_datasource === \"entity:file\") {\n    return `/sites/default/files/${hit._file_uri.replace(/public:\\/\\//, \"\")}`;\n  }\n  if (hit._content_type === \"search_result\") {\n    return hit._search_result_url.replace(/internal:/, \"\");\n  }\n  return hit._content_url;\n}\n\nexport function getUrl(hit, index) {\n  switch (index) {\n    case \"stops\":\n      return `/stops/${hit.stop.id}`;\n\n    case \"routes\":\n      return `/schedules/${hit.route.id}`;\n\n    case \"popular\":\n      return hit.url;\n\n    case \"drupal\":\n    case \"projects\":\n    case \"pages\":\n    case \"documents\":\n    case \"events\":\n    case \"news\":\n      return _contentUrl(hit);\n\n    case \"locations\":\n      return \"\";\n    case \"usemylocation\":\n      return \"#\";\n\n    default:\n      return \"#\";\n  }\n}\n\nfunction getRouteTitle(hit) {\n  const name = hit._highlightResult.route.name.value;\n  switch (hit.route.type) {\n    case 3:\n      return `${name} <span class=\"c-search-result__long-name\">${hit._highlightResult.route.long_name.value}</span>`;\n    default:\n      return name;\n  }\n}\n\nfunction _contentTitle(hit) {\n  if (hit._content_type === \"search_result\") {\n    return hit._highlightResult.search_result_title.value;\n  }\n  if (hit.search_api_datasource === \"entity:file\") {\n    return hit._highlightResult.file_name_raw.value;\n  }\n  return hit._highlightResult.content_title.value;\n}\n\nexport function getTitle(hit, type) {\n  switch (type) {\n    case \"locations\":\n      // eslint-disable-next-line no-case-declarations\n      const { address: text, highlighted_spans: spans } = hit;\n\n      return highlightText(text, spans);\n    case \"stops\":\n      return hit._highlightResult.stop.name.value;\n\n    case \"routes\":\n      return getRouteTitle(hit);\n\n    case \"popular\":\n      return hit.name;\n\n    case \"drupal\":\n    case \"projects\":\n    case \"pages\":\n    case \"documents\":\n    case \"events\":\n    case \"news\":\n      return _contentTitle(hit);\n\n    case \"usemylocation\":\n      return \"\";\n\n    default:\n      return \"\";\n  }\n}\n\nfunction _stopsWithAlerts() {\n  const stopsWithAlertsDiv = document.getElementById(\"stops-with-alerts\");\n  if (!stopsWithAlertsDiv) return \"\";\n  const {\n    dataset: { stopsWithAlerts }\n  } = stopsWithAlertsDiv;\n  return stopsWithAlerts;\n}\n\nfunction _routesWithAlerts() {\n  const routesWithAlertsDiv = document.getElementById(\"routes-with-alerts\");\n  if (!routesWithAlertsDiv) return \"\";\n  const {\n    dataset: { routesWithAlerts }\n  } = routesWithAlertsDiv;\n  return routesWithAlerts;\n}\n\nfunction _getAlertIcon(hit, type) {\n  let hasAlert = false;\n  switch (type) {\n    case \"stops\":\n      hasAlert = _stopsWithAlerts().includes(hit.stop.id);\n      break;\n\n    case \"routes\":\n      hasAlert = _routesWithAlerts().includes(hit.route.id);\n      break;\n\n    default:\n      hasAlert = false;\n  }\n\n  return hasAlert ? [\"alert\"] : [];\n}\n\nfunction _standardizeFeatureName(feature) {\n  switch (feature) {\n    case \"Red\":\n    case \"Blue\":\n    case \"Orange\":\n    case \"Green\":\n    case \"Green-B\":\n    case \"Green-C\":\n    case \"Green-D\":\n    case \"Green-E\":\n    case \"Mattapan\":\n      return _subwayRouteIcon(feature);\n\n    default:\n      return feature;\n  }\n}\n\nfunction _featuresToIcons(features) {\n  return features.map(feature =>\n    Icons.getFeatureIcon(_standardizeFeatureName(feature))\n  );\n}\n\nfunction _sortFeatures(features) {\n  const featuresWithoutBranches = features.filter(\n    feature => !feature.includes(\"Green-\")\n  );\n  const branches = features.filter(feature => feature.includes(\"Green-\"));\n  if (branches.length > 0) {\n    const greenLinePosition = featuresWithoutBranches.findIndex(\n      feature => feature === \"green_line\"\n    );\n\n    featuresWithoutBranches.splice(greenLinePosition + 1, 0, ...branches);\n    return featuresWithoutBranches;\n  }\n  return features;\n}\n\nfunction _getCommuterRailZone(hit) {\n  if (hit.zone) {\n    return [`<span class=\"c-icon__cr-zone\">Zone ${hit.zone}</span>`];\n  }\n  return [];\n}\n\nfunction _stopIcons(hit, type) {\n  const filteredFeatures = hit.features.filter(\n    feature => feature !== \"access\" && feature !== \"parking_lot\"\n  );\n\n  const alertFeature = _getAlertIcon(hit, type);\n  const allFeatures = alertFeature.concat(filteredFeatures);\n  const allFeaturesSorted = _sortFeatures(allFeatures);\n  const allIcons = _featuresToIcons(allFeaturesSorted);\n\n  const zoneIcon = _getCommuterRailZone(hit);\n\n  return allIcons.concat(zoneIcon);\n}\n\nfunction _formatDate(date) {\n  const formattedDate = date.toLocaleDateString(\"en-US\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\"\n  });\n  return TEMPLATES.formattedDate.render({ date: formattedDate });\n}\n\nfunction pagesdocumentsDate(hit) {\n  if (hit._file_created !== undefined) {\n    const date = new Date(hit._file_created * 1000);\n    return [_formatDate(date)];\n  }\n  return [];\n}\n\nfunction projectsDate(hit) {\n  if (hit._content_posted_on) {\n    const date = new Date(hit._content_posted_on * 1000);\n    return [_formatDate(date)];\n  }\n  return [];\n}\n\nfunction _contentDate(hit) {\n  const dateString = hit._content_url.split(\"/\")[2];\n  try {\n    const dateStringWithTime = `${dateString}T01:00:00`;\n    const date = new Date(dateStringWithTime);\n    return [_formatDate(date)];\n  } catch (err) {\n    return [];\n  }\n}\n\nexport function getFeatureIcons(hit, type) {\n  const alertFeature = _getAlertIcon(hit, type);\n  switch (type) {\n    case \"popular\":\n    case \"stops\":\n      return _stopIcons(hit, type);\n\n    case \"routes\":\n      return _featuresToIcons(alertFeature);\n\n    case \"projects\":\n      return projectsDate(hit);\n\n    case \"pages\":\n    case \"documents\":\n      return pagesdocumentsDate(hit);\n    case \"events\":\n    case \"news\":\n      return _contentDate(hit);\n\n    default:\n      return [];\n  }\n}\n\nexport function parseResult(hit, index) {\n  return Object.assign(hit, {\n    hitIcon: getIcon(hit, index),\n    hitUrl: getUrl(hit, index),\n    hitTitle: getTitle(hit, index),\n    hasDate:\n      index === \"events\" ||\n      index === \"news\" ||\n      index === \"pages\" ||\n      index === \"documents\" ||\n      index === \"projects\" ||\n      null,\n    hitFeatureIcons: getFeatureIcons(hit, index),\n    id: hit.id || null\n  });\n}\n\nexport function renderResult(hit, index, templates = TEMPLATES) {\n  const parsedResult = parseResult(hit, index);\n  if (parsedResult.hitFeatureIcons.length > 2) {\n    return TEMPLATES.threePlusIcons.render(parsedResult);\n  }\n  if (templates[index]) {\n    return templates[index].render(parsedResult);\n  }\n  return templates.default.render(parsedResult);\n}\n","class Algolia {\n  constructor(queries, defaultParams) {\n    this._queries = queries;\n    this._activeQueryIds = Object.keys(queries);\n    this._defaultParams = defaultParams;\n    this._viewMoreInc = 20;\n    this._lastQuery = \"\";\n    this._doBlankSearch = true;\n    this._widgets = [];\n    this.errorContainer = document.getElementById(\"algolia-error\");\n    this.reset();\n  }\n\n  get widgets() {\n    return this._widgets;\n  }\n\n  reset() {\n    Object.keys(this._queries).forEach(this.resetDefaultParams());\n    this._lastQuery = \"\";\n    this.resetWidgets();\n  }\n\n  resetDefaultParams() {\n    return queryId => {\n      if (this._defaultParams[queryId]) {\n        this._queries[queryId].params = JSON.parse(\n          JSON.stringify(this._defaultParams[queryId])\n        );\n      } else {\n        console.error(\n          \"default params not set for queryId\",\n          queryId,\n          this._defaultParams\n        );\n      }\n    };\n  }\n\n  addPage(group) {\n    if (this._queries[group]) {\n      this._queries[group].params.hitsPerPage += this._viewMoreInc;\n    }\n  }\n\n  search(opts = {}) {\n    this.toggleError(false);\n\n    if (!(typeof opts.query == \"string\")) {\n      opts.query = this._lastQuery;\n    }\n\n    if (opts.query.length > 0) {\n      const allQueries = this._buildAllQueries(opts);\n      this._lastQuery = opts.query;\n      return this._doSearch(allQueries);\n    } else {\n      this.updateWidgets({});\n\n      // This code handles the case where the user backspaces to an empty search string\n      if (this._lastQuery.length > 0) {\n        this.reset();\n      }\n      return Promise.resolve({});\n    }\n  }\n\n  _doSearch(allQueries) {\n    return this._sendQueries(allQueries)\n      .then(this._processAlgoliaResults())\n      .then(results => {\n        this.updateWidgets(results);\n        return results;\n      })\n      .catch(err => console.log(err));\n  }\n\n  _addAnalyticsData(result) {\n    result.hits.forEach((hit, i) => {\n      hit.analyticsData = {\n        queryID: result.queryID,\n        position: result.hitsPerPage * result.page + i + 1,\n        objectID: hit.objectID\n      };\n    });\n  }\n\n  _sendQueries(queries) {\n    const body = { requests: queries };\n    return new Promise((resolve, reject) => {\n      window.jQuery\n        .ajax({\n          type: \"POST\",\n          url: \"/search/query\",\n          data: JSON.stringify(body),\n          dataType: \"json\",\n          contentType: \"application/json\"\n        })\n        .done(resolve)\n        .fail(reject);\n    });\n  }\n\n  _buildAllQueries(opts) {\n    const requestedQueryIds =\n      this._activeQueryIds.length > 0\n        ? this._activeQueryIds\n        : Object.keys(this._queries);\n    const queries = [];\n    requestedQueryIds.forEach(queryId => {\n      queries.push(this._buildQuery(queryId, opts));\n    });\n\n    return queries;\n  }\n\n  _buildQuery(queryId, { query }) {\n    const currentQuery = this._queries[queryId];\n    currentQuery.query = query;\n    currentQuery.params = currentQuery.params || {};\n    currentQuery.params.clickAnalytics = true;\n    return currentQuery;\n  }\n\n  updateAllParams(key, value) {\n    Object.keys(this._queries).forEach(\n      key => (this._queries[key].params[key] = value)\n    );\n  }\n\n  updateActiveQueries(queryIds) {\n    this._activeQueryIds = queryIds;\n  }\n\n  removeActiveQuery(queryId) {\n    const i = this._activeQueryIds.indexOf(queryId);\n    if (i != -1) {\n      this._activeQueryIds.splice(i, 1);\n    }\n  }\n\n  addActiveQuery(queryId) {\n    if (this._activeQueryIds.indexOf(queryId) == -1) {\n      this._activeQueryIds.push(queryId);\n    }\n  }\n\n  updateFacetFilters(queryId, filters) {\n    this._queries[queryId].params[\"facetFilters\"][0] = filters;\n  }\n\n  addFacetFilter(queryId, filter) {\n    if (\n      this._queries[queryId].params[\"facetFilters\"][0].indexOf(filter) == -1\n    ) {\n      this._queries[queryId].params[\"facetFilters\"][0].push(filter);\n    }\n  }\n\n  removeFacetFilter(queryId, filter) {\n    const i = this._queries[queryId].params[\"facetFilters\"][0].indexOf(filter);\n    if (i != -1) {\n      this._queries[queryId].params[\"facetFilters\"][0].splice(i, 1);\n    }\n  }\n\n  updateParams(queryId, params) {\n    this._queries[queryId].params = params;\n  }\n\n  updateParamsByKey(queryId, key, value) {\n    this._queries[queryId].params[key] = value;\n  }\n\n  getParams(queryId) {\n    return this._queries[queryId].params;\n  }\n\n  addWidget(widget) {\n    widget.init(this);\n    this._widgets.push(widget);\n  }\n\n  updateWidgets(results) {\n    if (results[\"error\"]) {\n      this.toggleError(true);\n    } else {\n      this._widgets.forEach(function(widget) {\n        if (typeof widget.render === \"function\") {\n          widget.render(results);\n        }\n      });\n    }\n  }\n\n  resetWidgets() {\n    this._widgets.forEach(function(widget) {\n      if (typeof widget.reset === \"function\") {\n        widget.reset();\n      }\n    });\n  }\n\n  _processAlgoliaResults() {\n    return response => {\n      if (response[\"error\"]) {\n        return Promise.resolve(response);\n      } else {\n        let searchedQueries = this._activeQueryIds.slice(0);\n        if (this._activeQueryIds.length == 0) {\n          searchedQueries = Object.keys(this._queries);\n        }\n        const facetLength = Object.keys(this._queries).length;\n        const searchResults = response.results.slice(0, searchedQueries.length);\n        const facetResults = response.results.slice(\n          searchedQueries.length,\n          searchedQueries.length + facetLength\n        );\n        const results = {};\n        searchResults.forEach((result, i) => {\n          this._addAnalyticsData(result);\n          results[searchedQueries[i]] = result;\n        });\n        facetResults.forEach((result, i) => {\n          results[`facets-${Object.keys(this._queries)[i]}`] = result;\n        });\n        return Promise.resolve(results);\n      }\n    };\n  }\n\n  toggleError(hasError) {\n    if (hasError === true) {\n      this.errorContainer.style.display = \"block\";\n    } else {\n      this.errorContainer.style.display = \"none\";\n    }\n  }\n}\n\nexport default Algolia;\n","export default function() {\n  return new Promise(function(resolve, reject) {\n    if (window.navigator && window.navigator.geolocation) {\n      window.navigator.geolocation.getCurrentPosition(resolve, reject);\n    } else {\n      reject(\"window.navigator.geolocation not enabled\");\n    }\n  });\n}\n","const sessionTokenValue = tokenObj => (tokenObj ? tokenObj.Pf : null);\n\nexport function autocomplete({ input, hitLimit, sessionToken }) {\n  if (input.length === 0) {\n    return Promise.resolve({});\n  }\n\n  return new Promise((resolve, reject) => {\n    window.jQuery\n      .getJSON(\n        `/places/autocomplete/${encodeURIComponent(\n          input\n        )}/${hitLimit}/${sessionTokenValue(sessionToken)}`\n      )\n      .done(processAutocompleteResults(resolve))\n      .fail(reject);\n  });\n}\n\nexport const lookupPlace = address =>\n  new Promise((resolve, reject) => {\n    window.jQuery\n      .getJSON(`/places/details/${encodeURIComponent(address)}`)\n      .done(processPlacesCallback(resolve))\n      .fail(reject);\n  });\n\nexport const reverseGeocode = (latitude, longitude) =>\n  new Promise((resolve, reject) => {\n    window.jQuery\n      .getJSON(`/places/reverse-geocode/${latitude}/${longitude}`)\n      .done(processGeocodeCallback(resolve, reject))\n      .fail(reject);\n  });\n\nconst processAutocompleteResults = resolve => ({ predictions }) =>\n  resolve(predictionResults(JSON.parse(predictions)));\n\nconst predictionResults = predictions => ({\n  locations: {\n    hits: predictions.map((p, i) => ({ ...p, id: `location-${i}` })),\n    nbHits: predictions.length\n  }\n});\n\nconst processPlacesCallback = resolve => ({ result }) =>\n  resolve(JSON.parse(result));\n\nconst processGeocodeCallback = (resolve, reject) => ({ results }) => {\n  const parsedResults = JSON.parse(results);\n  if (parsedResults[0]) {\n    resolve(parsedResults[0].formatted);\n  } else {\n    reject(\"No results\");\n  }\n};\n","let callbacks = [];\n\nexport default function() {\n  callbacks = [];\n  window.mapsCallback = function() {\n    window.isMapReady = true;\n    callbacks.forEach(callback => callback());\n    callbacks = [];\n  };\n}\n\nexport function doWhenGoogleMapsIsReady(callback) {\n  // If the map is not ready, add it to an array of callback that will get called soon.\n  // If the map is ready, call the callback, but with a timeout.\n  // The reason for the timeout is so that this function works similar in both cases -- always with a delay, never\n  // immediately.\n  window.isMapReady ? window.setTimeout(callback, 0) : callbacks.push(callback);\n}\n","export function getFeatureIcon(feature) {\n  const icon = document.getElementById(`icon-feature-${feature}`);\n  if (icon) {\n    return icon.innerHTML;\n  }\n  return \"\";\n}\n\nexport function getSvgIcon(feature) {\n  const icon = document.getElementById(`icon-feature-${feature}`);\n  if (icon) {\n    const svg = icon.getElementsByTagName(\"svg\").item(0);\n    if (svg) {\n      return svg.outerHTML;\n    }\n  }\n  return \"\";\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 443;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t443: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunksite_dotcom\"] = globalThis[\"webpackChunksite_dotcom\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [216,514], () => (__webpack_require__(5342)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","exports","callback","delay","timer","args","_i","arguments","length","window","clearTimeout","setTimeout","apply","params","encoder","Object","keys","concat","map","key","join","query","decoder","substring","split","reduce","kvString","_b","val","__assign","_a","replace","queryReducer","text","spans","parts","cursor","forEach","span","offset","push","slice","leaflet_1","require","markers","points","m","latLng","latitude","longitude","latLngBounds","react_1","__importStar","lodash_1","react_2","__importDefault","maxZoom","minZoom","scrollWheelZoom","style","touchAction","default","memo","bounds","boundsByMarkers","mapData","defaultCenter","default_center","polylines","tileServerUrl","tile_server_url","zoom","mapRef","createRef","useLayoutEffect","current","leafletElement","invalidateSize","leaflet","buildIcon_1","getBounds","Map","Marker_1","Marker","Polyline_1","Polyline","Popup_1","Popup","TileLayer","boundsOrByMarkers","position","mapCenter","nonNullZoom","undefined","createElement","ref","center","defaultZoomOpts","attribution","url","onload","container","parentElement","classList","polyline","className","id","Math","floor","random","positions","color","weight","dashArray","lineCap","lineJoin","uniqBy","marker","icon","icon_opts","alt","markerEl","angle","rotation_angle","setRotationAngle","rotateMarker","zIndexOffset","z_index","keyboard","onclick","onClick","tooltip","maxHeight","iconAnchor","iconSize","popupAnchor","opts","iconOpts","icon_anchor","defaultIconOpts","icon_size","popup_anchor","Icon","iconUrl","iconRetinaUrl","react_dom_1","d3_polygon_1","Map_1","precincts_json_1","useState","fromLocation","setFromLocation","precincts","portalEl","setPortalEl","precinct","useMemo","find","x","path","some","y","polygonContains","useEffect","setVotingLocation","e","detail","document","addEventListener","el","root","getElementById","firstChild","removeChild","appendChild","removeEventListener","createPortal","marginTop","name","address","town","ward","href","encodeURIComponent","formatted_address","lat","lng","type","width","height","algolia_autocomplete_with_geo_1","algolia_embedded_search_options_1","algolia_search_1","google_maps_loaded_1","VoteMap_1","doWhenGoogleMapsIsReady","selectors","buildOptions","ac","indices","locationParams","hitsPerPage","popular","parent","onHitSelected","ev","hit","originalEvent","_args","setValue","_doLocationSearch","useMyLocationSearch","showLocation","getValue","event","Event","dispatchEvent","addWidget","render","onLoad","addFilterParam","assign","filter","AlgoliaAutocompleteWithGeo","AlgoliaAutocomplete","constructor","_ref","containerEl","templates","TEMPLATES","super","this","debounceInterval","_parent","getParams","_popular","_loadingIndicator","getById","locationLoadingIndicator","addUseMyLocationErrorEl","_locationParams","DEFAULT_LOCATION_PARAMS","_indices","splice","_selectors","useMyLocationErrorEl","add","display","innerHTML","location","host","parentNode","_datasetSource","index","debounce","_locationSource","_useMyLocationSource","_popularSource","input","GoogleMapsHelpers","hitLimit","then","results","_onResults","hits","usemylocation","minLength","maxLength","_input","value","disabled","visibility","geolocationPromise","pos","onUseMyLocationResults","catch","err","onGeolocationError","code","result","_onLocationSearchResult","_ref2","coords","parseFloat","onReverseGeocodeResults","qs","QueryHelpers","pathname","Turbolinks","visit","_templates","WeakMap","AlgoliaResult","_classPrivateFieldInitSpec","writable","Error","containerElement","error","resultsContainer","_resultsContainer","_searchContainer","_resetButton","resetButton","announcer","_datasets","_results","_highlightedHit","_autocomplete","_classPrivateFieldSet","bind","querySelector","onClickSuggestion","onCursorChanged","onCursorRemoved","onOpen","onKeyup","clear","_toggleResetButton","autocomplete","close","_client","reset","focus","trigger","init","client","_addResultsContainer","acc","_buildDataset","appendTo","debug","autoselectOnBlur","openOnFocus","detachedMediaQuery","hint","cssClasses","prefix","_addErrorMsg","_addListeners","resetResetButton","getVal","setError","on","off","show","dropdown","getElementsByClassName","item","errorMsg","errorContainer","acDialog","positionDropdown","announceResults","borderWidth","parseInt","$","css","offsetLeft","offsetTop","offsetWidth","marginLeft","dialog","count","Array","from","querySelectorAll","s","clickHighlightedOrFirstResult","clickFirstResult","firstIndex","preventDefault","_ref3","post","analyticsData","onHitSelectedCallback","indexName","source","displayKey","DISPLAY_KEYS","suggestion","renderResult","footer","renderFooterTemplate","search","_emptySearchSource","data","setVal","change","locations","PAGE_IDS","PAGE_IDS_WITHOUT_GOOGLE","FACET_MAP","FACET_FILTER_MAP","pageId","goBtn","determineIndex","isStopSearch","isProjectsSearch","facets","facetFilters","SELECTORS","poweredByGoogleLogo","hogan","fontAwesomeIcon","formattedDate","threePlusIcons","iconsFromGTFSAncestries","ancestries","anc","toLowerCase","Icons","_subwayRouteIcon","routeId","includes","Green","Red","Orange","Blue","Mattapan","iconFromGTFSId","toSubway","iconFromGTFS","ancestry","icons","isArray","iconsFromGTFSIds","iconsFromGTFSAncestry","contentIcon","search_api_datasource","_file_type","_fileIcon","search_result","news_entry","project","project_update","page","landing_page","person","_content_type","getIcon","stop","_getStopOrStationIcon","route","startsWith","_iconFromRoute","related_transit_gtfs_id","related_transit_gtfs_ancestry","_","getTransitIcons","getUrl","_file_uri","_search_result_url","_content_url","_contentUrl","getTitle","highlighted_spans","highlightText","_highlightResult","long_name","getRouteTitle","search_result_title","file_name_raw","content_title","_contentTitle","_getAlertIcon","hasAlert","stopsWithAlertsDiv","dataset","stopsWithAlerts","_stopsWithAlerts","routesWithAlertsDiv","routesWithAlerts","_routesWithAlerts","_featuresToIcons","features","feature","_standardizeFeatureName","_formatDate","date","toLocaleDateString","year","month","day","getFeatureIcons","alertFeature","filteredFeatures","allIcons","featuresWithoutBranches","branches","greenLinePosition","findIndex","_sortFeatures","zoneIcon","zone","_getCommuterRailZone","_stopIcons","_content_posted_on","Date","projectsDate","_file_created","pagesdocumentsDate","dateString","dateStringWithTime","_contentDate","parsedResult","hitIcon","hitUrl","hitTitle","hasDate","hitFeatureIcons","parseResult","queries","defaultParams","_queries","_activeQueryIds","_defaultParams","_viewMoreInc","_lastQuery","_doBlankSearch","_widgets","widgets","resetDefaultParams","resetWidgets","queryId","JSON","parse","stringify","console","addPage","group","toggleError","allQueries","_buildAllQueries","_doSearch","updateWidgets","Promise","resolve","_sendQueries","_processAlgoliaResults","log","_addAnalyticsData","i","queryID","objectID","body","requests","reject","ajax","dataType","contentType","done","fail","requestedQueryIds","_buildQuery","currentQuery","clickAnalytics","updateAllParams","updateActiveQueries","queryIds","removeActiveQuery","indexOf","addActiveQuery","updateFacetFilters","filters","addFacetFilter","removeFacetFilter","updateParams","updateParamsByKey","widget","response","searchedQueries","facetLength","searchResults","facetResults","hasError","navigator","geolocation","getCurrentPosition","sessionTokenValue","tokenObj","Pf","sessionToken","getJSON","processAutocompleteResults","lookupPlace","processPlacesCallback","reverseGeocode","processGeocodeCallback","predictions","predictionResults","p","nbHits","_ref4","parsedResults","formatted","callbacks","mapsCallback","isMapReady","getFeatureIcon","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","loaded","__webpack_modules__","call","amdD","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","r","n","getter","__esModule","d","a","getPrototypeOf","obj","t","mode","ns","create","def","getOwnPropertyNames","definition","o","defineProperty","enumerable","get","g","globalThis","Function","hmd","children","set","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}