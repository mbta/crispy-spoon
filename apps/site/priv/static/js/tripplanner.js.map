{"version":3,"file":"tripplanner.js","mappings":"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","sources":["webpack://site-dotcom/webpack/runtime/chunk loaded","webpack://site-dotcom/webpack/runtime/create fake namespace object","webpack://site-dotcom/./ts/leaflet/bounds.ts","webpack://site-dotcom/./ts/leaflet/components/Map.tsx","webpack://site-dotcom/./ts/leaflet/icon.ts","webpack://site-dotcom/./ts/trip-planner-entry.ts","webpack://site-dotcom/./ts/trip-planner/components/TripPlannerPage.tsx","webpack://site-dotcom/./ts/trip-planner/trip-planner-loader.tsx","webpack://site-dotcom/webpack/bootstrap","webpack://site-dotcom/webpack/runtime/amd define","webpack://site-dotcom/webpack/runtime/compat get default export","webpack://site-dotcom/webpack/runtime/define property getters","webpack://site-dotcom/webpack/runtime/global","webpack://site-dotcom/webpack/runtime/harmony module decorator","webpack://site-dotcom/webpack/runtime/hasOwnProperty shorthand","webpack://site-dotcom/webpack/runtime/make namespace object","webpack://site-dotcom/webpack/runtime/node module decorator","webpack://site-dotcom/webpack/runtime/runtimeId","webpack://site-dotcom/webpack/runtime/jsonp chunk loading","webpack://site-dotcom/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","import { LatLng, latLng, LatLngBounds, latLngBounds } from \"leaflet\";\nimport { MapMarker as Marker } from \"./components/__mapdata\";\n\nconst getBounds = (markers: Marker[]): LatLngBounds | undefined => {\n  if (!markers.length) return undefined;\n  const points: LatLng[] = markers.map(m => latLng(m.latitude, m.longitude));\n  return latLngBounds(points);\n};\n\nexport default getBounds;\n","import React, { ReactElement, useLayoutEffect } from \"react\";\nimport { uniqBy } from \"lodash\";\nimport deepEqual from \"fast-deep-equal/react\";\nimport {\n  Icon,\n  LatLngBounds,\n  Marker as LeafletMarker,\n  MarkerOptions\n} from \"leaflet\";\nimport Leaflet from \"react-leaflet\";\nimport { MapData, MapMarker, IconOpts } from \"./__mapdata\";\n\nexport interface ZoomOpts {\n  maxZoom: number;\n  minZoom: number;\n  scrollWheelZoom: boolean;\n  style: object;\n}\n\nexport const defaultZoomOpts: ZoomOpts = {\n  maxZoom: 18,\n  minZoom: 9,\n  scrollWheelZoom: false,\n  style: { touchAction: \"none\" } // fix for chrome-android to prevent zooming page\n};\n\ninterface Props {\n  bounds?: LatLngBounds;\n  boundsByMarkers?: boolean;\n  mapData: MapData;\n}\n\nconst mapCenter = (\n  markers: MapMarker[],\n  { latitude, longitude }: { latitude: number; longitude: number }\n): [number, number] | undefined => {\n  if (markers.length === 1) return [markers[0].latitude, markers[0].longitude];\n  return [latitude, longitude];\n};\n\nconst rotateMarker = (\n  markerEl: LeafletMarker<MarkerOptions>,\n  { rotation_angle: angle }: MapMarker\n): void => {\n  // TS does not recognize setRotationAngle, which\n  // is added by the leaflet-rotatedmarker plugin\n  // @ts-ignore\n  markerEl.setRotationAngle(angle);\n};\n\nconst Component = ({\n  bounds,\n  boundsByMarkers,\n  mapData: {\n    default_center: defaultCenter,\n    markers,\n    polylines,\n    tile_server_url: tileServerUrl,\n    zoom\n  }\n}: Props): ReactElement<HTMLElement> | null => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const mapRef = React.createRef<any>();\n  useLayoutEffect(() => {\n    if (mapRef.current && mapRef.current.leafletElement) {\n      // tells Leaflet to redraw the map\n      mapRef.current.leafletElement.invalidateSize();\n    }\n  }, [mapRef]);\n\n  if (typeof window !== \"undefined\" && tileServerUrl !== \"\") {\n    /* eslint-disable */\n    const leaflet: typeof Leaflet = require(\"react-leaflet\");\n    const buildIcon: (\n      icon: string | null,\n      opts?: IconOpts\n    ) => Icon | undefined = require(\"../icon\").default;\n    require(\"leaflet-rotatedmarker\");\n    const getBounds = require(\"../bounds\").default;\n    /* eslint-enable */\n    const { Map, Marker, Polyline, Popup, TileLayer } = leaflet;\n    /* istanbul ignore next */\n    const boundsOrByMarkers = bounds || (boundsByMarkers && getBounds(markers));\n    const position = mapCenter(markers, defaultCenter);\n    const nonNullZoom = zoom === null ? undefined : zoom;\n\n    const onTilesLoaded = (): void => {\n      mapRef.current.container.parentElement.classList += \" map--loaded\";\n    };\n\n    return (\n      <Map\n        ref={mapRef}\n        bounds={boundsOrByMarkers}\n        center={position}\n        zoom={nonNullZoom}\n        {...defaultZoomOpts}\n      >\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url={`${tileServerUrl}/osm_tiles/{z}/{x}/{y}.png`}\n          onload={onTilesLoaded}\n        />\n        {polylines.map(\n          /* istanbul ignore next */\n          polyline => (\n            <Polyline\n              className={polyline.className}\n              key={\n                polyline.id || `polyline-${Math.floor(Math.random() * 1000)}`\n              }\n              positions={polyline.positions}\n              color={polyline.color}\n              weight={polyline.weight}\n              dashArray={polyline[\"dotted?\"] ? \"4px 8px\" : \"none\"}\n              lineCap={polyline[\"dotted?\"] ? \"butt\" : \"round\"}\n              lineJoin={polyline[\"dotted?\"] ? \"miter\" : \"round\"}\n            />\n          )\n        )}\n        {uniqBy(markers, \"id\").map(marker => (\n          <Marker\n            icon={buildIcon(marker.icon, marker.icon_opts)}\n            key={\n              marker.id ||\n              /* istanbul ignore next */ `marker-${Math.floor(\n                Math.random() * 1000\n              )}`\n            }\n            alt={marker.alt || \"Marker\"}\n            position={[marker.latitude, marker.longitude]}\n            ref={ref => ref && rotateMarker(ref.leafletElement, marker)}\n            zIndexOffset={marker.z_index}\n            keyboard={false}\n            onclick={marker.onClick}\n          >\n            {marker.tooltip && <Popup maxHeight={175}>{marker.tooltip}</Popup>}\n          </Marker>\n        ))}\n      </Map>\n    );\n  }\n  return null;\n};\n\nexport default React.memo(Component, deepEqual);\n","import { Icon } from \"leaflet\";\nimport { IconOpts } from \"../leaflet/components/__mapdata\";\n\nexport type IconType = (\n  icon: string | null,\n  opts: IconOpts | undefined\n) => Icon | undefined;\n\ninterface LeafletOpts {\n  iconSize: [number, number];\n  iconAnchor: [number, number];\n  popupAnchor: [number, number];\n}\n\nexport const defaultIconOpts: LeafletOpts = {\n  iconAnchor: [22, 55],\n  iconSize: [45, 75],\n  popupAnchor: [0, -37]\n};\n\nexport default (\n  icon: string | null,\n  opts?: IconOpts | null\n): Icon | undefined => {\n  const iconOpts =\n    opts !== null && opts\n      ? {\n          iconAnchor: opts.icon_anchor || defaultIconOpts.iconAnchor,\n          iconSize: opts.icon_size || defaultIconOpts.iconSize,\n          popupAnchor: opts.popup_anchor || defaultIconOpts.popupAnchor\n        }\n      : defaultIconOpts;\n  return icon === null\n    ? undefined\n    : new Icon({\n        ...iconOpts,\n        iconUrl: `/images/icon-${icon}.svg`,\n        iconRetinaUrl: `/images/icon-${icon}.svg`\n      });\n};\n","import tripPlanner from \"./trip-planner/trip-planner-loader\";\n\ntripPlanner();\n","import React, { Dispatch, ReactElement, useReducer, useEffect } from \"react\";\nimport LeafletMap from \"../../leaflet/components/Map\";\nimport {\n  MapData,\n  MapMarker as Marker\n} from \"../../leaflet/components/__mapdata\";\nimport getBounds from \"../../leaflet/bounds\";\n\ninterface Props {\n  mapData: MapData;\n}\n\nexport interface State {\n  markers: Marker[];\n}\n\ninterface UpdateAction {\n  type: \"UPDATE_MARKER\";\n  payload: {\n    marker: Marker;\n  };\n}\n\ninterface RemoveAction {\n  type: \"REMOVE_MARKER\";\n  payload: {\n    id: string;\n  };\n}\n\nexport type Action = UpdateAction | RemoveAction;\n\nexport type RemoveEvent = Event & { detail: { label: string } };\nexport type UpdateEvent = Event & {\n  detail: {\n    latitude: number;\n    longitude: number;\n    label: string;\n    title: string;\n  };\n};\n\nexport const onRemove = (\n  { detail: { label } }: RemoveEvent,\n  dispatch: Dispatch<Action>\n): void => {\n  dispatch({ type: \"REMOVE_MARKER\", payload: { id: label } });\n};\n\nexport const onUpdate = (\n  { detail }: UpdateEvent,\n  dispatch: Dispatch<Action>\n): void => {\n  const marker: Marker = {\n    icon: `map-pin-${detail.label.toLowerCase()}`,\n    id: detail.label,\n    latitude: detail.latitude,\n    longitude: detail.longitude,\n    rotation_angle: 0, // eslint-disable-line camelcase\n    tooltip: <div>{detail.title}</div>\n  };\n\n  dispatch({ type: \"UPDATE_MARKER\", payload: { marker } });\n};\n\nconst removeMarker = (markers: Marker[], id: string | null): Marker[] =>\n  markers.reduce(\n    (acc: Marker[], m: Marker) => (m.id === id ? acc : acc.concat(m)),\n    []\n  );\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"UPDATE_MARKER\":\n      return {\n        markers: removeMarker(state.markers, action.payload.marker.id).concat(\n          action.payload.marker\n        )\n      };\n\n    case \"REMOVE_MARKER\":\n      return { markers: removeMarker(state.markers, action.payload.id) };\n\n    default:\n      // @ts-ignore\n      throw new Error(`unexpected action type: ${action.type}`);\n  }\n};\n\nconst TripPlannerPage = ({ mapData }: Props): ReactElement<HTMLElement> => {\n  const [state, dispatch] = useReducer(reducer, { markers: mapData.markers });\n  useEffect(() => {\n    const onRemoveCb = (ev: Event): void =>\n      onRemove(ev as RemoveEvent, dispatch);\n    const onUpdateCb = (ev: Event): void =>\n      onUpdate(ev as UpdateEvent, dispatch);\n\n    document.addEventListener(\"trip-plan:remove-marker\", onRemoveCb);\n    document.addEventListener(\"trip-plan:update-marker\", onUpdateCb);\n\n    return () => {\n      document.removeEventListener(\"trip-plan:remove-marker\", onRemoveCb);\n      document.removeEventListener(\"trip-plan:update-marker\", onUpdateCb);\n    };\n  });\n  const bounds = state.markers.length ? getBounds(state.markers) : undefined;\n  return (\n    <LeafletMap\n      bounds={bounds}\n      mapData={{ ...mapData, markers: state.markers }}\n    />\n  );\n};\n\nexport default TripPlannerPage;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport TripPlannerPage from \"./components/TripPlannerPage\";\nimport { MapData } from \"../leaflet/components/__mapdata\";\n\nconst render = (): void => {\n  const mapDataEl = document.getElementById(\"js-trip-planner-map-data\");\n  if (!mapDataEl) return;\n\n  const mapData = JSON.parse(mapDataEl.innerHTML) as MapData;\n  ReactDOM.render(\n    <TripPlannerPage mapData={mapData} />,\n    document.getElementById(\"react-root\")\n  );\n};\n\nexport const onLoad = (): void => {\n  render();\n};\n\nexport default onLoad;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 572;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t572: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunksite_dotcom\"] = globalThis[\"webpackChunksite_dotcom\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [216,514], () => (__webpack_require__(96113)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","leaflet_1","require","exports","markers","length","points","map","m","latLng","latitude","longitude","latLngBounds","react_1","__importStar","lodash_1","react_2","__importDefault","maxZoom","minZoom","scrollWheelZoom","style","touchAction","default","memo","_a","bounds","boundsByMarkers","_b","mapData","defaultCenter","default_center","polylines","tileServerUrl","tile_server_url","zoom","mapRef","createRef","useLayoutEffect","current","leafletElement","invalidateSize","window","leaflet","buildIcon_1","getBounds","Map","Marker_1","Marker","Polyline_1","Polyline","Popup_1","Popup","TileLayer","boundsOrByMarkers","position","mapCenter","nonNullZoom","undefined","createElement","__assign","ref","center","defaultZoomOpts","attribution","url","concat","onload","container","parentElement","classList","polyline","className","key","id","Math","floor","random","positions","color","weight","dashArray","lineCap","lineJoin","uniqBy","marker","icon","icon_opts","alt","markerEl","angle","rotation_angle","setRotationAngle","rotateMarker","zIndexOffset","z_index","keyboard","onclick","onClick","tooltip","maxHeight","iconAnchor","iconSize","popupAnchor","opts","iconOpts","icon_anchor","defaultIconOpts","icon_size","popup_anchor","Icon","iconUrl","iconRetinaUrl","Map_1","bounds_1","dispatch","type","payload","detail","label","toLowerCase","title","removeMarker","reduce","acc","state","action","Error","useReducer","reducer","useEffect","onRemoveCb","ev","onRemove","onUpdateCb","onUpdate","document","addEventListener","removeEventListener","react_dom_1","TripPlannerPage_1","mapDataEl","getElementById","JSON","parse","innerHTML","render","onLoad","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","loaded","__webpack_modules__","call","amdD","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","Object","keys","every","splice","r","n","getter","__esModule","d","a","getPrototypeOf","obj","t","value","mode","this","then","ns","create","def","indexOf","getOwnPropertyNames","forEach","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","hmd","children","set","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","chunkLoadingGlobal","bind","push","__webpack_exports__"],"sourceRoot":""}